const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/previewWebStyleSymbol-BZ3ifm65.js","assets/index-BqmCqmfp.js","assets/index-kIqmb12G.css","assets/webStyleAcceptedFormats-vp0B4e2w.js","assets/previewSymbol3D-ic5A3W3l.js","assets/colorUtils-uG2qTogT.js","assets/devEnvironmentUtils-8TtBy-wV.js","assets/cimSymbolUtils-1FVTTBxd.js","assets/gfxUtils-DZoKCRMw.js","assets/previewSymbol3D-CgFD1bFX.js","assets/previewUtils-CT5v5cXU.js","assets/renderUtils-Ckhxu64U.js","assets/utils-5jlQHYup.js","assets/webStyleSymbolUtils-Vsg9bxK_.js","assets/previewSymbol2D--zMGN4-4.js","assets/fontUtils-CWolFklQ.js","assets/densifyCurvedGeometry-C2XDhl14.js","assets/quantizationUtils-C5shine1.js","assets/previewCIMSymbol-B6Ks8eFr.js","assets/BidiEngine-CpIovbIK.js","assets/CIMSymbolHelper-bdBsF42t.js","assets/rasterizingUtils-B0Pd5uE0.js","assets/labelPoint-B7zLrA23.js","assets/OptimizedGeometry-f3I9Z6C1.js","assets/memoryEstimations-O7VgDRVG.js","assets/GeometryUtils-DBkUrkz1.js","assets/Rect-BMNJQxpm.js","assets/BoundingBox-DnR5UeUT.js","assets/CIMResourceManager-toL-2Xk5.js","assets/CIMSymbolRasterizer-guvrPj-Q.js","assets/OverrideHelper-BKNowJt8.js","assets/callExpressionWithFeature-BK7JnF3H.js","assets/previewCIMSymbol-CBOpjv_L.js","assets/visualVariableUtils-a76hLqJP.js"])))=>i.map(i=>d[i]);
import{Cw as e,Qh as t,eg as n,is as r,lm as i,po as a,ss as o,zd as s}from"./index-BqmCqmfp.js";import{i as c,o as l}from"./gfxUtils-DZoKCRMw.js";import{i as u,n as d,r as f}from"./utils-5jlQHYup.js";import{a as p,c as m,i as h,l as g,n as _,o as v,r as y,s as b}from"./renderUtils-Ckhxu64U.js";import{n as x}from"./previewSymbol3D-CgFD1bFX.js";var S=`esri-relationship-ramp`,C=`${S}--diamond`,w=`${S}--square`,T=`http://www.w3.org/2000/svg`,E={diamondContainer:`${C}__container`,diamondLeftCol:`${C}__left-column`,diamondRightCol:`${C}__right-column`,diamondMidCol:`${C}__middle-column`,diamondMidColLabel:`${C}__middle-column--label`,diamondMidColRamp:`${C}__middle-column--ramp`,squareTable:`${w}__table`,squareTableRow:`${w}__table-row`,squareTableCell:`${w}__table-cell`,squareTableLabel:`${w}__table-label`,squareTableLabelLeftBottom:`${w}__table-label--left-bottom`,squareTableLabelRightBottom:`${w}__table-label--right-bottom`,squareTableLabelLeftTop:`${w}__table-label--left-top`,squareTableLabelRightTop:`${w}__table-label--right-top`};function D(e,t,n={}){let{focus:i,labels:s}=e,c=!!i,l=k(e,t,n),u={justifyContent:`center`},d=r(),f=n.key??t;return c?a(`div`,{class:E.diamondContainer,key:`${f}-container`,styles:u},a(`div`,{class:E.diamondLeftCol},d?s.right:s.left),a(`div`,{class:E.diamondMidCol},a(`div`,{class:E.diamondMidColLabel},s.top),l,a(`div`,{class:E.diamondMidColLabel},s.bottom)),a(`div`,{class:E.diamondRightCol},d?s.left:s.right)):a(`div`,{class:E.squareTable,key:`${f}-container`},a(`div`,{class:E.squareTableRow},a(`div`,{class:o(E.squareTableCell,E.squareTableLabel,E.squareTableLabelRightBottom)},d?s.top:s.left),a(`div`,{class:E.squareTableCell}),a(`div`,{class:o(E.squareTableCell,E.squareTableLabel,E.squareTableLabelLeftBottom)},d?s.left:s.top)),a(`div`,{class:E.squareTableRow},a(`div`,{class:E.squareTableCell}),l,a(`div`,{class:E.squareTableCell})),a(`div`,{class:E.squareTableRow},a(`div`,{class:o(E.squareTableCell,E.squareTableLabel,E.squareTableLabelRightTop)},d?s.right:s.bottom),a(`div`,{class:E.squareTableCell}),a(`div`,{class:o(E.squareTableCell,E.squareTableLabel,E.squareTableLabelLeftTop)},d?s.bottom:s.right)))}function O(e,t,n){let r=`${n}_arrowStart`,i=`${n}_arrowEnd`,a=e===`left`,o={markerStart:null,markerEnd:null};switch(t){case`HL`:a?o.markerStart=`url(#${i})`:o.markerEnd=`url(#${r})`;break;case`LL`:o.markerStart=`url(#${i})`;break;case`LH`:a?o.markerEnd=`url(#${r})`:o.markerStart=`url(#${i})`;break;default:o.markerEnd=`url(#${r})`}return o}function k(e,t,n={}){let{focus:r,numClasses:i,colors:o,rotation:s}=e,{opacity:c,cssEffectFilter:l,ariaLabel:u}=n,d=n.size??60,f=!!r,_=Math.sqrt(d**2+d**2)+(f?0:5),x=[],S=[],C=[],w=(d||75)/i;for(let e=0;e<i;e++){let t=e*w;for(let n=0;n<i;n++){let r=n*w,i=y(o[e][n]),a=h(null),s={type:`rect`,x:r,y:t,width:w,height:w},c=b(i);c&&x.push(c);let l=g(s,i.fill,a,null);l&&S.push(l),C.push(v(s))}}let D=null;f||(D=`margin: -15px -15px -18px -15px`);let k=O(`left`,r,t),A=O(`right`,r,t),j=m(C),M=p(j,_,_,0,!1,s,!1),N=p(j,_,_,0,!1,f?-45:null,!1),P={filter:l??void 0,opacity:c==null?``:`${c}`};return a(`div`,{class:f?E.diamondMidColRamp:E.squareTableCell,styles:P},a(`svg`,{"aria-label":u,focusable:!1,height:_,role:`image`,style:D,width:_,xmlns:T},a(`defs`,null,a(`marker`,{id:`${t}_arrowStart`,markerHeight:`10`,markerUnits:`strokeWidth`,markerWidth:`10`,orient:`auto`,refX:`5`,refY:`5`},a(`polyline`,{fill:`none`,points:`0,0 5,5 0,10`,stroke:`#555555`,"stroke-width":`1`})),a(`marker`,{id:`${t}_arrowEnd`,markerHeight:`10`,markerUnits:`strokeWidth`,markerWidth:`10`,orient:`auto`,refX:`0`,refY:`5`},a(`polyline`,{fill:`none`,points:`5,0 0,5 5,10`,stroke:`#555555`,"stroke-width":`1`})),x),a(`g`,{transform:M},S),a(`g`,{transform:N},a(`line`,{fill:`none`,"marker-end":k.markerEnd,"marker-start":k.markerStart,stroke:`#555555`,"stroke-width":`1`,x1:-10,x2:-10,y1:d-15,y2:15}),a(`line`,{fill:`none`,"marker-end":A.markerEnd,"marker-start":A.markerStart,stroke:`#555555`,"stroke-width":`1`,x1:15,x2:d-15,y1:d+10,y2:d+10}))))}var A={HH:315,HL:45,LL:135,LH:225},j={2:[[`HL`,`HH`],[`LL`,`LH`]],3:[[`HL`,`HM`,`HH`],[`ML`,`MM`,`MH`],[`LL`,`LM`,`LH`]],4:[[`HL`,`HM1`,`HM2`,`HH`],[`M2L`,`M2M1`,`M2M2`,`M2H`],[`M1L`,`M1M1`,`M1M2`,`M1H`],[`LL`,`LM1`,`LM2`,`LH`]]};function M(e){if(!e)return;let{type:t}=e;if(t.includes(`3d`))return x(e.symbolLayers.at(0));if(t===`simple-line`){let t=l(e);return t&&t.color}if(e.type===`simple-marker`&&(e.style===`x`||e.style===`cross`)){let t=l(e);return t&&t.color}return c(e)}function N(e,t){let n=t.HH.label,r=t.LL.label,i=t.HL.label,a=t.LH.label;switch(e){case`HH`:default:return{top:n,bottom:r,left:i,right:a};case`HL`:return{top:i,bottom:a,left:r,right:n};case`LL`:return{top:r,bottom:n,left:a,right:i};case`LH`:return{top:a,bottom:i,left:n,right:r}}}function P(e){let{focus:t,infos:n,numClasses:r}=e,i=j[r],a={};n.forEach(e=>{a[e.value]={label:e.label,fill:M(e.symbol)}});let o=[];for(let e=0;e<r;e++){let t=[];for(let n=0;n<r;n++){let r=a[i[e][n]];t.push(r.fill)}o.push(t)}return{type:`relationship-ramp`,numClasses:r,focus:t,colors:o,labels:N(t,a),rotation:F(t)}}function F(e){let t=A[e];return e&&t==null&&(t=A.HH),t||0}var I=null,L=[255,255,255];function R(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function z(e,t,n){let{backgroundColor:r,outline:i,dotSize:a}=e,o=n?.swatchSize||22,s=Math.round(o*o/Math.max(a,.5)**2*.8),c=window.devicePixelRatio,l=document.createElement(`canvas`),u=o*c;l.width=u,l.height=u,l.style.width=l.width/c+`px`,l.style.height=l.height/c+`px`;let d=l.getContext(`2d`);if(r&&(d.fillStyle=r.toCss(!0),d.fillRect(0,0,u,u),d.fill()),d.fillStyle=t?.toCss(!0)??``,I&&I.length/2===s)for(let e=0;e<2*s;e+=2){let t=I[e],n=I[e+1];d.fillRect(t,n,a*c,a*c),d.fill()}else{I=[];for(let e=0;e<2*s;e+=2){let e=R(0,u),t=R(0,u);I.push(e,t),d.fillRect(e,t,a*c,a*c),d.fill()}}i&&(i.color&&(d.strokeStyle=i.color.toCss(!0)),d.lineWidth=i.width,d.strokeRect(0,0,u,u));let f=new Image(o,o);return f.src=l.toDataURL(),f.ariaLabel=n?.ariaLabel??null,f.alt=n?.ariaLabel??``,f}function B(e,t={}){let n=t.radius||40,r=2*Math.PI*n,i=e.length,a=r/i,o=[],s=l(t.outline);s?.width!=null&&(s.width*=2),(s||t.backgroundColor)&&o.push({shape:{type:`circle`,cx:n,cy:n,r:n},fill:t.backgroundColor,stroke:s,offset:[0,0]});let c=t.values,u=c&&c.length===i&&c.reduce((e,t)=>e+t,0)===100,d=[0];for(let t=0;t<i;t++){let i=null;u&&(i=c[t]*r/100,d.push(i+d[t])),o.push({shape:{type:`circle`,cx:n,cy:n,r:n/2},fill:[0,0,0,0],stroke:{width:n,dashArray:`${(i??a)/2} ${r}`,dashoffset:`-`+(u?d[t]/2:t*(a/2)),color:e[t]},offset:[0,0]})}let f=null,p=2*n+(s?.width||0),m=t.holePercentage;if(m){s&&o.push({shape:{type:`circle`,cx:n,cy:n,r:n*m},fill:null,stroke:s,offset:[0,0]});let e=p/2;f=[[{shape:{type:`circle`,cx:e,cy:e,r:e},fill:L,stroke:s?{...s,color:L}:null,offset:[0,0]},{shape:{type:`circle`,cx:e,cy:e,r:n*m},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return _([o],[p,p],{cssEffectFilter:t.cssEffectFilter,ignoreStrokeWidth:!0,masking:f,rotations:[-90],ariaLabel:t.ariaLabel})}function V(e,t={}){let n=t.align===`horizontal`,r=n?75:24,i=n?24:75,a=t.width??r,o=t.height??i,s=t.gradient??!0,c=window.devicePixelRatio,l=a*c,u=o*c,d=document.createElement(`canvas`);d.width=l,d.height=u,d.ariaLabel=t.ariaLabel??null,d.style.width=`${a}px`,d.style.height=`${o}px`;let f=d.getContext(`2d`),p=n?l:0,m=n?0:u;if(s){let t=f.createLinearGradient(0,0,p,m),n=e.length,r=n===1?0:1/(n-1);e.forEach((e,n)=>t.addColorStop(n*r,e.toString())),f.fillStyle=t,f.fillRect(0,0,l,u)}else{let t=n?l/e.length:l,r=n?u:u/e.length,i=0,a=0;for(let o of e)f.fillStyle=o.toString(),f.fillRect(i,a,t,r),i=n?i+t:0,a=n?0:a+r}let h=document.createElement(`div`);return h.style.width=`${a}px`,h.style.height=`${o}px`,U(h,t?.cssEffectFilter),h.appendChild(d),h}function H(e){let t=e.match(/drop-shadow\(\s*([^\s]+)\s+[^\s]+\s+[^\s]+\s+.+?\)/);return t?t[1]:null}function U(e,r){if(!r)return;e.style.filter=r;let i=H(r);if(i){let r=n(t(i));r<0?e.style.marginLeft=`${Math.abs(r)}px`:e.style.marginRight=`${r}px`}}async function W(t,n){switch(t.type){case`web-style`:{let{previewWebStyleSymbol:r}=await e(async()=>{let{previewWebStyleSymbol:e}=await import(`./previewWebStyleSymbol-BZ3ifm65.js`);return{previewWebStyleSymbol:e}},__vite__mapDeps([0,1,2,3]));return r(t,W,n)}case`label-3d`:case`line-3d`:case`mesh-3d`:case`point-3d`:case`polygon-3d`:{let{previewSymbol3D:r}=await e(async()=>{let{previewSymbol3D:e}=await import(`./previewSymbol3D-ic5A3W3l.js`);return{previewSymbol3D:e}},__vite__mapDeps([4,5,1,2,6,7,8,9,10,11,12,13,3]));return r(t,n)}case`simple-marker`:case`simple-line`:case`simple-fill`:case`picture-marker`:case`picture-fill`:case`text`:{let{previewSymbol2D:r}=await e(async()=>{let{previewSymbol2D:e}=await import(`./previewSymbol2D--zMGN4-4.js`);return{previewSymbol2D:e}},__vite__mapDeps([14,1,2,5,15,16,17,7,8,10,11]));return r(t,n)}case`cim`:{let{previewCIMSymbol:r}=await e(async()=>{let{previewCIMSymbol:e}=await import(`./previewCIMSymbol-B6Ks8eFr.js`);return{previewCIMSymbol:e}},__vite__mapDeps([18,19,20,1,2,21,15,22,23,24,25,26,27,5,17,28,29,30,31,7,8,32,11]));return r(t,n)}default:return}}function G(e){return e&&e.opacity!==void 0?e.opacity*(`parent`in e?G(e.parent):1):1}async function K(t,n){if(!t)return;let r=t.sourceLayer,a=(n!=null&&n.useSourceLayer?r:t.layer)??r,o=n?.ignoreOpacity?1:G(a);if(t.symbol!=null&&(n==null||!0!==n.ignoreGraphicSymbol)){let e=t.symbol.type===`web-style`?await t.symbol.fetchSymbol({...n,acceptedFormats:n?.webStyleAcceptedFormats,cache:n?.webStyleCache}):t.symbol.clone();return d(e,null,{add:o}),e}let s=n?.renderer??J(a),c=s&&`getSymbolAsync`in s?await s.getSymbolAsync(t,n):null;if(!c)return;if(c=c.type===`web-style`?await c.fetchSymbol({...n,acceptedFormats:n?.webStyleAcceptedFormats,cache:n?.webStyleCache}):c.clone(),!(s&&`visualVariables`in s&&s.visualVariables?.length&&q(c)))return d(c,null,{add:o}),c;if(`arcadeRequiredForVisualVariables`in s&&s.arcadeRequiredForVisualVariables&&n?.arcade==null){let e={...n};e.arcade=await i(),n=e}let{getColor:l,getOpacity:p,getAllSizes:m,getRotationAngle:h}=await e(async()=>{let{getColor:e,getOpacity:t,getAllSizes:n,getRotationAngle:r}=await import(`./visualVariableUtils-a76hLqJP.js`);return{getColor:e,getOpacity:t,getAllSizes:n,getRotationAngle:r}},__vite__mapDeps([33,1,2])),g=[],_=[],v=[],y=[];for(let e of s.visualVariables)switch(e.type){case`color`:g.push(e);break;case`opacity`:_.push(e);break;case`rotation`:y.push(e);break;case`size`:e.target||v.push(e)}let b=!!g.length&&g[g.length-1],x=b?l(b,t,n):null,S=!!n?.ignoreOpacity,C=!!_.length&&_[_.length-1],w=C?p(C,t,n):null;if(d(c,x,S?void 0:{override:w,add:o}),v.length&&!0!==n?.ignoreSizeVariables){let e=m(v,t,n);await f(c,e)}if(!0!==n?.ignoreRotationVariables)for(let e of y)u(c,h(e,t,n),e.axis);return c}function q(e){return!s(e)||e.symbolLayers.at(0)?.type!==`water`}function J(e){if(e)return`renderer`in e?e.renderer:void 0}export{z as a,D as c,V as i,W as n,P as o,B as r,F as s,K as t};