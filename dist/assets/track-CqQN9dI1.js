const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/geodeticDistanceOperator-5yRHvNCV.js","assets/index-BqmCqmfp.js","assets/index-kIqmb12G.css","assets/geodeticCurveType-hqCRc72W.js"])))=>i.map(i=>d[i]);
import{An as e,Ax as t,Bg as n,Cw as r,Fn as i,Hn as a,In as o,Iy as s,Jm as c,KC as l,Ln as u,Nn as d,Pn as f,Sx as ee,Uw as te,Ux as ne,Vg as re,Vn as p,Vx as ie,WC as ae,_m as m,bx as oe,cb as se,e_ as ce,fm as h,gm as g,hm as _,mm as v,uT as le,ux as ue,vE as de,vx as fe,vy as pe,zT as me}from"./index-BqmCqmfp.js";import{t as y}from"./arcadeEnvironment-DfjU7s2m.js";import{t as he}from"./ImmutableArray-C3KNQCVd.js";import{$ as b,A as ge,B as _e,F as ve,J as x,K as S,L as C,M as ye,N as be,O as w,P as xe,S as T,T as Se,V as Ce,W as E,Y as D,_ as O,a as we,c as Te,ct as k,d as Ee,et as De,g as Oe,i as ke,j as Ae,k as je,m as Me,n as Ne,o as Pe,p as A,q as j,rt as Fe,s as Ie,st as Le,t as M,tt as N,u as P,ut as Re,v as F,w as ze,y as Be}from"./Dictionary-B3Q9BFVY.js";import{s as Ve}from"./shared-BZhQTnH4.js";import{r as He}from"./number-Dq0Kt6xf.js";import{i as I,n as L}from"./Feature-Bd-5gqon.js";import{i as Ue,r as We,t as Ge}from"./containerUtils-vIXF8Wsj.js";import{i as Ke,t as qe}from"./WhereClause-h6PJ6gjs.js";import{r as Je}from"./streamLayerUtils-BMw-RtDi.js";import{d as Ye,f as Xe,l as Ze,u as Qe}from"./functions-WMuSJ2is.js";import{t as $e}from"./fieldStats-DP2AlUAP.js";import{t as et}from"./ArcadePortal-B5V7N8wX.js";import{t as tt}from"./Attachment-CoFGJO-I.js";var nt=class{constructor(e,t){this._moduleSingletons=e,this._syntaxModules=t}loadLibrary(e){if(this._syntaxModules==null)return null;let t=this._syntaxModules[e];return t?{syntax:t.script,uri:t.uri}:null}},rt=()=>de.getLogger(`esri.arcade.compilerUtils`);function R(e,t,n){switch(e.type){case`VariableDeclaration`:for(let n of e.declarations)t.add(y(n.id));return;case`BlockStatement`:for(let r of e.body)R(r,t,n);return;case`ExportNamedDeclaration`:{let r=new Set;R(e.declaration,r,n);for(let e of r)t.add(e),n.add(e);return}case`ForInStatement`:case`ForOfStatement`:e.left.type===`VariableDeclaration`&&R(e.left,t,n),R(e.body,t,n);return;case`ForStatement`:e.init?.type===`VariableDeclaration`&&R(e.init,t,n),R(e.body,t,n);return;case`FunctionDeclaration`:t.add(y(e.id));return;case`IfStatement`:R(e.consequent,t,n),e.alternate&&R(e.alternate,t,n);return;case`ImportDeclaration`:for(let n of e.specifiers)t.add(y(n.local));return;case`WhileStatement`:R(e.body,t,n);return;case`BreakStatement`:case`ContinueStatement`:case`EmptyStatement`:case`ExpressionStatement`:case`ReturnStatement`:return}}function it(e){let t=new Set,n=new Set;for(let r of e.body)R(r,t,n);if(!l(n,t))throw rt().error(`Internal error: exported undeclared symbols {${Array.from(ae(n,t)).join(`, `)}}`),new a(null,`NeverReach`,null);return{globals:t,exports:n}}function at(e){let t=new Set,n=new Set;if(R(e.body,t,n),n.size>0)throw rt().error(`Internal error: cannot export locals {${Array.from(n.values()).join(`, `)}}`),new a(null,`NeverReach`,null);return t}var ot={all:{min:2,max:2},time:{min:0,max:4},dateonly:{min:0,max:3},getenvironment:{min:0,max:0},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:0,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:3},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},nearestcoordinate:{min:2,max:2},nearestvertex:{min:2,max:2},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1},measuretocoordinate:{min:2,max:2},distancetocoordinate:{min:2,max:2},pointtocoordinate:{min:2,max:2}},st={functionDefinitions:new Map,constantDefinitions:new Map},ct={functionDefinitions:new Map,constantDefinitions:new Map};for(let e of[`pi`,`infinity`])ct.constantDefinitions.set(e,{type:`constant`}),st.constantDefinitions.set(e,{type:`constant`});for(let e in ct.constantDefinitions.set(`textformatting`,{type:`namespace`,key:`textformatting`,members:[{key:`backwardslash`,type:`constant`},{key:`doublequote`,type:`constant`},{key:`forwardslash`,type:`constant`},{key:`tab`,type:`constant`},{key:`singlequote`,type:`constant`},{key:`newline`,type:`constant`}]}),st.constantDefinitions.set(`textformatting`,{type:`namespace`,key:`textformatting`,members:[{key:`backwardslash`,type:`constant`},{key:`tab`,type:`constant`},{key:`singlequote`,type:`constant`},{key:`doublequote`,type:`constant`},{key:`forwardslash`,type:`constant`},{key:`newline`,type:`constant`}]}),ot){let t=ot[e];ct.functionDefinitions.set(e,{overloads:[{type:`function`,parametersInfo:{min:t.min,max:t.max}}]}),st.functionDefinitions.set(e,{overloads:[{type:`function`,parametersInfo:{min:t.min,max:t.max}}]})}var lt=new Set([`attachments`,`featureset`,`featuresetbyassociation`,`featuresetbyid`,`featuresetbyname`,`featuresetbyportalitem`,`featuresetbyrelationshipname`,`featuresetbyurl`,`filterbysubtypecode`,`getfeatureset`,`getfeaturesetinfo`,`getuser`,`knowledgegraphbyportalitem`,`querygraph`]),ut=new Set([`translatetext`]),dt=new Set(`area.areageodetic.buffer.buffergeodetic.centroid.clip.contains.convexhull.crosses.cut.densify.densifygeodetic.difference.disjoint.distance.distancegeodetic.distancetocoordinate.equals.generalize.intersection.intersects.isselfintersecting.issimple.length.length3d.lengthgeodetic.measuretocoordinate.multiparttosinglepart.nearestcoordinate.nearestvertex.offset.overlaps.pointtocoordinate.relate.rotate.simplify.symmetricdifference.touches.union.within`.split(`.`));function ft(e,t){let n=t===`sync`?st:ct;n.functionDefinitions.has(e.name.toLowerCase())?n.functionDefinitions.get(e.name.toLowerCase())?.overloads.push({type:`function`,parametersInfo:{min:e.min,max:e.max}}):n.functionDefinitions.set(e.name.toLowerCase(),{overloads:[{type:`function`,parametersInfo:{min:e.min,max:e.max}}]})}function z(e,t){if(e)for(let n of e)B(n,t)}function B(e,t){if(e&&!1!==t(e))switch(e.type){case`ImportDeclaration`:z(e.specifiers,t),B(e.source,t);break;case`ExportNamedDeclaration`:B(e.declaration,t);break;case`ArrayExpression`:z(e.elements,t);break;case`AssignmentExpression`:case`BinaryExpression`:case`LogicalExpression`:B(e.left,t),B(e.right,t);break;case`BlockStatement`:case`Program`:z(e.body,t);break;case`BreakStatement`:case`ContinueStatement`:case`EmptyStatement`:case`Identifier`:case`Literal`:break;case`CallExpression`:B(e.callee,t),z(e.arguments,t);break;case`ExpressionStatement`:B(e.expression,t);break;case`ForInStatement`:case`ForOfStatement`:B(e.left,t),B(e.right,t),B(e.body,t);break;case`ForStatement`:B(e.init,t),B(e.test,t),B(e.update,t),B(e.body,t);break;case`WhileStatement`:B(e.test,t),B(e.body,t);break;case`FunctionDeclaration`:B(e.id,t),z(e.params,t),B(e.body,t);break;case`IfStatement`:B(e.test,t),B(e.consequent,t),B(e.alternate,t);break;case`MemberExpression`:B(e.object,t),B(e.property,t);break;case`ObjectExpression`:z(e.properties,t);break;case`Property`:B(e.key,t),B(e.value,t);break;case`ReturnStatement`:case`UnaryExpression`:case`UpdateExpression`:B(e.argument,t);break;case`VariableDeclaration`:z(e.declarations,t);break;case`VariableDeclarator`:B(e.id,t),B(e.init,t);break;case`TemplateLiteral`:z(e.expressions,t),z(e.quasis,t)}}function pt(e){return e?.type===`Literal`&&typeof e.value==`string`}function mt(e,t){let n=!1,r=t.toLowerCase();return B(e,e=>!n&&(e.type===`Identifier`&&e.name&&e.name.toLowerCase()===r&&(n=!0),!0)),n}function ht(e){let t=[];return B(e,e=>(e.type===`ImportDeclaration`&&e.source&&e.source.value&&t.push({libname:y(e.specifiers[0].local),source:e.source.value}),!0)),t}function gt(e,t){let n=!1,r=t.toLowerCase();return B(e,e=>!n&&(e.type!==`CallExpression`||e.callee.type!==`Identifier`||!e.callee.name||e.callee.name.toLowerCase()!==r||(n=!0,!1))),n}function _t(e){let t=[];return B(e,e=>e.type!==`MemberExpression`||e.object.type!==`Identifier`||((e.property.type===`Identifier`||e.property.type===`Literal`&&typeof e.property.value==`string`)&&t.push({varId:y(e.object),memberId:y(e.property)}),!1)),t}function vt(e){let t=[];return B(e,e=>{if(e.type===`CallExpression`&&e.callee.type===`Identifier`)switch(y(e.callee)){case`expects`:if(e.arguments.length>1){let[n,...r]=e.arguments;if(n?.type===`Identifier`){let e=y(n);for(let n of r)pt(n)&&t.push({varId:e,memberNamePattern:n.value})}}return!1;case`domainname`:case`domaincode`:case`domain`:case`haskey`:case`hasvalue`:if(e.arguments.length>=2){let[n,r]=e.arguments;n?.type===`Identifier`&&pt(r)&&t.push({varId:y(n),memberNamePattern:r.value})}return!0;case`defaultvalue`:if(e.arguments.length>2){let[n,r]=e.arguments;n?.type===`Identifier`&&pt(r)&&t.push({varId:y(n),memberNamePattern:r.value})}return!0;default:return!0}return e.type!==`MemberExpression`||e.object.type!==`Identifier`||(e.computed?!!pt(e.property)&&(t.push({varId:y(e.object),memberNamePattern:e.property.value}),!1):(t.push({varId:y(e.object),memberNamePattern:e.property.name}),!1))}),t}function yt(e){let t=[];return B(e,e=>(e.type===`CallExpression`&&e.callee.type===`Identifier`&&t.push(y(e.callee)),!0)),t}function bt(e,t=[]){let n=null;if(e.usesFeatureSet===void 0){n===null&&(n=yt(e)),e.usesFeatureSet=!1;for(let t=0;t<n.length;t++)lt.has(n[t])&&(e.usesFeatureSet=!0,e.isAsync=!0);if(!1===e.usesFeatureSet&&t&&t.length>0){for(let n of t)if(mt(e,n)){e.usesFeatureSet=!0,e.isAsync=!0;break}}}if(e.isAsync===void 0&&(n===null&&(n=yt(e)),n.some(e=>ut.has(e))&&(e.isAsync=!0)),e.usesModules===void 0&&(e.usesModules=!1,ht(e).length>0&&(e.usesModules=!0)),e.usesGeometry===void 0){e.usesGeometry=!1,n===null&&(n=yt(e));for(let t=0;t<n.length;t++)dt.has(n[t])&&(e.usesGeometry=!0)}}function xt(e){function t(e,t,n){if(e instanceof he)return e.toArray();if(_(e))return e;throw new p(t,`InvalidParameter`,n)}function n(e,t){let i=e.length,a=Math.floor(i/2);return i===0?[]:i===1?[e[0]]:r(n(e.slice(0,a),t),n(e.slice(a,i),t),t)}function r(e,t,n){let r=[];for(;e.length>0||t.length>0;)if(e.length>0&&t.length>0){let i=n(e[0],t[0]);isNaN(i)&&(i=0),i<=0?(r.push(e[0]),e=e.slice(1)):(r.push(t[0]),t=t.slice(1))}else e.length>0?(r.push(e[0]),e=e.slice(1)):t.length>0&&(r.push(t[0]),t=t.slice(1));return r}async function i(e,t){let n=e.length,r=Math.floor(n/2);if(n===0)return[];if(n===1)return[e[0]];let o=[await i(e.slice(0,r),t),await i(e.slice(r,n),t)];return a(o[0],o[1],t,[])}async function a(e,t,n,r){let i=r;if(e.length>0||t.length>0){if(e.length>0&&t.length>0){let o=await n(e[0],t[0]);return isNaN(o)&&(o=1),o<=0?(i.push(e[0]),e=e.slice(1)):(i.push(t[0]),t=t.slice(1)),a(e,t,n,r)}return e.length>0?(i.push(e[0]),a(e=e.slice(1),t,n,r)):(i.push(t[0]),a(e,t=t.slice(1),n,r))}return r}function o(e,t,r,a){D(r,1,2,e,t);let o=r[0];if(N(o)&&(o=o.toArray()),!1===_(o))throw new p(e,`InvalidParameter`,t);if(r.length>1){if(!1===Be(r[1]))throw new p(e,`InvalidParameter`,t);let s=o,c=r[1].createFunction(e);return a?i(s,c):(s=n(s,(e,t)=>c(e,t)),s)}let s=o;if(s.length===0)return[];let c={};for(let e=0;e<s.length;e++){let t=Ee(s[e]);t!==``&&(c[t]=!0)}if(!0===c.Array||!0===c.Dictionary||!0===c.Feature||!0===c.Voxel||!0===c.Pixel||!0===c.Point||!0===c.Polygon||!0===c.Polyline||!0===c.Multipoint||!0===c.Extent||!0===c.Function)return s.slice();let l=0,u=``;for(let e in c)l++,u=e;return s=l>1||u===`String`?n(s,(e,t)=>{if(e==null||e===T)return t==null||t===T?0:1;if(t==null||t===T)return-1;let n=E(e),r=E(t);return n<r?-1:n===r?0:1}):u===`Number`?n(s,(e,t)=>e-t):u===`Boolean`?n(s,(e,t)=>e===t?0:t?-1:1):u===`Date`?n(s,(e,t)=>e.toNumber()-t.toNumber()):s.slice(),s}e.functions.array=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(D(i,0,2,t,n),i.length===0||i.length===1&&i[0]===null)return[];if(_(i[0])){if(i.length===2&&!1===m(i[1]))throw new p(t,`InvalidParameter`,n);return!0===k(i[1],!1)?Ne(i[0]):i[0].slice()}if(N(i[0])){if(i.length===2&&!1===m(i[1]))throw new p(t,`InvalidParameter`,n);return!0===k(i[1],!1)?Ne(i[0]):i[0].toArray().slice()}let a=w(i[0]);if(isNaN(a)||!1===g(a))throw new p(t,`InvalidParameter`,n);let o=k(i[1],null),s=Array(a);return s.fill(o),s})},e.functions.front=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(D(i,1,1,t,n),N(i[0])){if(i[0].length()<=0)throw new p(t,`OutOfBounds`,n);return i[0].get(0)}if(_(i[0])){if(i[0].length<=0)throw new p(t,`OutOfBounds`,n);return i[0][0]}throw new p(t,`InvalidParameter`,n)})},e.functions.back=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(D(i,1,1,t,n),N(i[0])){if(i[0].length()<=0)throw new p(t,`OutOfBounds`,n);return i[0].get(i[0].length()-1)}if(_(i[0])){if(i[0].length<=0)throw new p(t,`OutOfBounds`,n);return i[0][i[0].length-1]}throw new p(t,`InvalidParameter`,n)})},e.functions.push=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(D(i,1,2,t,n),_(i[0]))return i[0][i[0].length]=i[1],i[0].length;throw new p(t,`InvalidParameter`,n)})},e.functions.pop=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(D(i,1,1,t,n),_(i[0])){if(i[0].length<=0)throw new p(t,`OutOfBounds`,n);let e=i[0][i[0].length-1];return i[0].length=i[0].length-1,e}throw new p(t,`InvalidParameter`,n)})},e.functions.erase=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(D(i,2,2,t,n),_(i[0])){let e=w(i[1]);if(isNaN(e)||!1===g(e))throw new p(t,`InvalidParameter`,n);let r=i[0];if(r.length<=0||(e<0&&(e=r.length+e),e<0)||e>=r.length)throw new p(t,`OutOfBounds`,n);return r.splice(e,1),T}if(O(i[0]))return i[0].eraseField(E(i[1])),T;throw new p(t,`InvalidParameter`,n)})},e.functions.insert=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(D(i,3,3,t,n),_(i[0])){let e=w(i[1]);if(isNaN(e)||!1===g(e))throw new p(t,`InvalidParameter`,n);let r=i[2],a=i[0];if(e>a.length||e<0&&e<-1*a.length)throw new p(t,`OutOfBounds`,n);return e===a.length?(a[e]=r,T):(a.splice(e,0,r),T)}if(O(i[0]))return i[0].setField(E(i[1]),i[2]),T;throw new p(t,`InvalidParameter`,n)})},e.functions.getkeys=function(t,n){return e.standardFunction(t,n,(e,t,n)=>{if(D(n,1,1,e,t),n[0]==null)return[];if(O(n[0]))return n[0].keys();throw new p(e,`InvalidParameter`,t)})},e.functions.getvalues=function(t,n){return e.standardFunction(t,n,(e,t,n)=>{if(D(n,1,1,e,t),n[0]==null)return[];if(O(n[0]))return n[0].values();throw new p(e,`InvalidParameter`,t)})},e.functions.resize=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(D(i,2,3,t,n),_(i[0])){let e=w(i[1]);if(isNaN(e)||!1===g(e)||e<0)throw new p(t,`InvalidParameter`,n);let r=k(i[2],null),a=i[0];if(a.length>=e)return a.length=e,T;let o=a.length;a.length=e;for(let e=o;e<a.length;e++)a[e]=r;return T}throw new p(t,`InvalidParameter`,n)})},e.functions.includes=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(D(i,2,2,t,n),_(i[0])){let e=i[1];return!!i[0].some(t=>Le(t,e))}if(N(i[0])){let e=i[1];return!!i[0].toArray().some(t=>Le(t,e))}throw new p(t,`InvalidParameter`,n)})},e.functions.slice=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(D(i,1,3,t,n),_(i[0])){let e=w(k(i[1],0)),r=w(k(i[2],i[0].length));if(isNaN(e)||!1===g(e)||isNaN(r)||!1===g(r))throw new p(t,`InvalidParameter`,n);return i[0].slice(e,r)}if(N(i[0])){let e=i[0],r=w(k(i[1],0)),a=w(k(i[2],e.length()));if(isNaN(r)||!1===g(r)||isNaN(a)||!1===g(a))throw new p(t,`InvalidParameter`,n);return e.toArray().slice(r,a)}throw new p(t,`InvalidParameter`,n)})},e.functions.splice=function(t,n){return e.standardFunction(t,n,(e,t,n)=>{let r=[];for(let e=0;e<n.length;e++)_(n[e])?r.push(...n[e]):N(n[e])?r.push(...n[e].toArray()):r.push(n[e]);return r})},e.functions.top=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(D(i,2,2,t,n),_(i[0]))return w(i[1])>=i[0].length?i[0].slice():i[0].slice(0,w(i[1]));if(N(i[0]))return w(i[1])>=i[0].length()?i[0].slice():i[0].slice(0,w(i[1]));throw new p(t,`InvalidParameter`,n)})},e.functions.first=function(t,n){return e.standardFunction(t,n,(e,r,i)=>(D(i,1,1,t,n),_(i[0])?i[0].length===0?null:i[0][0]:N(i[0])?i[0].length()===0?null:i[0].get(0):null))},e.mode===`sync`&&(e.functions.sort=function(t,n){return e.standardFunction(t,n,(e,n,r)=>o(t,n,r,!1))},e.functions.any=function(n,r){return e.standardFunction(n,r,(e,r,i)=>{D(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r);for(let e of o){let t=a(e);if(m(t)&&!0===t)return!0}return!1})},e.functions.all=function(n,r){return e.standardFunction(n,r,(e,r,i)=>{D(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r);for(let e of o)if(!0!==a(e))return!1;return!0})},e.functions.none=function(n,r){return e.standardFunction(n,r,(e,r,i)=>{D(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r);for(let e of o)if(!0===a(e))return!1;return!0})},e.functions.reduce=function(n,r){return e.standardFunction(n,r,(e,r,i)=>{D(i,2,3,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r);return i.length===2?o.length===0?null:o.reduce((e,t)=>{let n=a(e,t);return e=n!==void 0&&n!==T?n:null}):o.reduce((e,t)=>{let n=a(e,t);return e=n!==void 0&&n!==T?n:null},i[2])})},e.functions.map=function(n,r){return e.standardFunction(n,r,(e,r,i)=>{D(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r),s=[];for(let e of o){let t=a(e);t!==void 0&&t!==T?s.push(t):s.push(null)}return s})},e.functions.filter=function(n,r){return e.standardFunction(n,r,(e,r,i)=>{D(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r),s=[];for(let e of o)!0===a(e)&&s.push(e);return s})}),e.mode===`async`&&(e.functions.sort=function(t,n){return e.standardFunctionAsync(t,n,async(e,n,r)=>o(t,n,r,!0))},e.functions.any=function(n,r){return e.standardFunctionAsync(n,r,async(e,r,i)=>{D(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r);for(let e of o){let t=await a(e),n=null;if(n=te(n)?await t:t,m(n)&&!0===n)return!0}return!1})},e.functions.all=function(n,r){return e.standardFunctionAsync(n,r,async(e,r,i)=>{D(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r);for(let e of o){let t=await a(e),n=null;if(n=te(n)?await t:t,!0!==n)return!1}return!0})},e.functions.none=function(n,r){return e.standardFunctionAsync(n,r,async(e,r,i)=>{D(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r);for(let e of o){let t=await a(e),n=null;if(n=te(n)?await t:t,!0===n)return!1}return!0})},e.functions.filter=function(n,r){return e.standardFunctionAsync(n,r,async(e,r,i)=>{D(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r),s=[];for(let e of o){let t=await a(e),n=null;n=te(n)?await t:t,!0===n&&s.push(e)}return s})},e.functions.reduce=function(n,r){return e.standardFunctionAsync(n,r,async(e,r,i)=>{D(i,2,3,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r),s;if(i.length>2){let e=k(i[2],null);s=o.reduce(async(e,t)=>{let n=await e;return n!==void 0&&n!==T||(n=null),a(n,t)},Promise.resolve(e))}else{if(o.length===0)return null;s=o.reduce(async(e,t,n)=>{if(n<=1)return a(e,t);let r=await e;return r!==void 0&&r!==T||(r=null),a(r,t)})}return s.then(e=>e!==void 0&&e!==T?e:null)})},e.functions.map=function(n,r){return e.standardFunctionAsync(n,r,async(e,r,i)=>{D(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r),s=[];for(let e of o){let t=await a(e),n=null;n=te(n)?await t:t,n!==void 0&&n!==T?s.push(n):s.push(null)}return s})})}var St=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:xt},Symbol.toStringTag,{value:`Module`}));function Ct(e,t,n){return e+(wt(n)?Et:Tt)[t]}function wt(e){return e%4==0&&(e%100!=0||e%400==0)}var Tt=[0,31,59,90,120,151,181,212,243,273,304,334],Et=[0,31,60,91,121,152,182,213,244,274,305,335];function V(e){return e===null?e:!1===e.isValid?null:e}function Dt(e,t){switch(u(e)){case``:case`default`:return F(t);case`z`:return`UTC`;default:return e}}function H(e,t){return b(e)?e.toArcadeDate():C(e,F(t))}var Ot=new o([`days`,`months`,`minutes`,`seconds`,`hours`,`years`,`milliseconds`],[[`day`,`days`],[`d`,`days`],[`month`,`months`],[`minute`,`minutes`],[`m`,`minutes`],[`second`,`seconds`],[`s`,`seconds`],[`hour`,`hours`],[`h`,`hours`],[`year`,`years`],[`y`,`years`],[`millisecond`,`milliseconds`],[`ms`,`milliseconds`]]);function kt(e){return e===`M`?`months`:Ot.lookup(E(e))??`milliseconds`}function At(t,n){t.today=function(e,t){return n(e,t,(n,r,a)=>{D(a,0,0,e,t);let o=new Date;return o.setHours(0,0,0,0),i.dateJSAndZoneToArcadeDate(o,F(e))})},t.time=function(t,r){return n(t,r,(n,a,o)=>{switch(D(o,0,4,t,r),o.length){case 0:{let n=i.nowToArcadeDate(F(t));return new e(n.hour,n.minute,n.second,n.millisecond)}case 1:{if(S(o[0]))return o[0].clone();if(x(o[0]))return new e(o[0].hour,o[0].minute,o[0].second,o[0].millisecond);if(b(o[0]))return new e(0,0,0,0);if(h(o[0]))return e.fromString(o[0]);let t=w(o[0]);return!1===isNaN(t)?e.fromMilliseconds(t):null}case 2:return h(o[0])&&h(o[1])?e.fromString(o[0],o[1]):e.fromParts(w(o[0]),w(o[1]),0,0);case 3:return e.fromParts(w(o[0]),w(o[1]),w(o[2]),0);case 4:return e.fromParts(w(o[0]),w(o[1]),w(o[2]),w(o[3]))}throw new p(t,`InvalidParameter`,r)})},t.dateonly=function(e,t){return n(e,t,(n,r,a)=>{if(D(a,0,3,e,t),a.length===3)return d.fromParts(w(a[0]),w(a[1])+1,w(a[2]));if(a.length===2){let e=E(a[1]);return e===``?null:e===`X`?d.fromSeconds(w(a[0])):e===`x`?d.fromMilliseconds(w(a[0])):d.fromString(E(a[0]),e)}if(a.length===1){if(h(a[0])){if(a[0].replaceAll(/^\s+|\s+$/g,``)===``)return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(a[0]))return d.fromString(a[0]+`-01-01`)}if(b(a[0]))return a[0].clone();if(x(a[0]))return d.fromParts(a[0].year,a[0].monthJS+1,a[0].day);let e=w(a[0]);return!1===isNaN(e)?d.fromMilliseconds(e):h(a[0])?d.fromString(a[0]):null}if(a.length===0){let t=i.nowToArcadeDate(F(e));return!1===t.isValid?null:d.fromParts(t.year,t.monthJS+1,t.day)}return null})},t.changetimezone=function(e,t){return n(e,t,(n,r,a)=>{if(D(a,2,2,e,t),a[0]===null)return null;if(b(a[0]))throw new p(e,`CannotChangeTimeZoneDateOnly`,t);if(b(a[0]))throw new p(e,`CannotChangeTimeZoneTime`,t);let o=C(a[0],F(e));if(o===null)throw new p(e,`InvalidParameter`,t);let s=f(Dt(E(a[1]),e),!1);if(s===null)return null;let c=i.arcadeDateAndZoneToArcadeDate(o,s);return!1===c.isValid?null:c})},t.timezone=function(e,t){return n(e,t,(n,r,a)=>{if(D(a,1,2,e,t),S(a[0])||b(a[0]))return`Unknown`;let o=C(a[0],F(e));if(o===null)return null;let s=o.timeZone;return s===`system`?i.systemTimeZoneCanonicalName:s.toLowerCase()===`utc`?`UTC`:s.toLowerCase()===`unknown`?`Unknown`:s})},t.timezoneoffset=function(e,t){return n(e,t,(n,r,i)=>{D(i,1,1,e,t);let a=C(i[0],F(e));return a===null?null:60*a.timeZoneOffset*1e3})},t.now=function(e,t){return n(e,t,(n,r,a)=>{D(a,0,0,e,t);let o=i.nowToArcadeDate(F(e));return!1===o.isValid?null:o})},t.timestamp=function(e,t){return n(e,t,(n,r,a)=>{D(a,0,0,e,t);let o=i.nowUTCToArcadeDate();return!1===o.isValid?null:o})},t.toutc=function(e,t){return n(e,t,(n,r,i)=>{D(i,1,1,e,t);let a=C(i[0],F(e));return a===null?null:a.toUTC()})},t.tolocal=function(e,t){return n(e,t,(n,r,i)=>{D(i,1,1,e,t);let a=C(i[0],F(e));return a===null?null:a.toLocal()})},t.day=function(e,t){return n(e,t,(n,r,i)=>{D(i,1,1,e,t);let a=H(i[0],F(e));return a===null?NaN:a.day})},t.month=function(e,t){return n(e,t,(n,r,i)=>{D(i,1,1,e,t);let a=H(i[0],F(e));return a===null?NaN:a.monthJS})},t.year=function(e,t){return n(e,t,(n,r,i)=>{D(i,1,1,e,t);let a=H(i[0],F(e));return a===null?NaN:a.year})},t.hour=function(e,t){return n(e,t,(n,r,i)=>{if(D(i,1,1,e,t),S(i[0]))return i[0].hour;let a=C(i[0],F(e));return a===null?NaN:a.hour})},t.second=function(e,t){return n(e,t,(n,r,i)=>{if(D(i,1,1,e,t),S(i[0]))return i[0].second;let a=C(i[0],F(e));return a===null?NaN:a.second})},t.millisecond=function(e,t){return n(e,t,(n,r,i)=>{if(D(i,1,1,e,t),S(i[0]))return i[0].millisecond;let a=C(i[0],F(e));return a===null?NaN:a.millisecond})},t.minute=function(e,t){return n(e,t,(n,r,i)=>{if(D(i,1,1,e,t),S(i[0]))return i[0].minute;let a=C(i[0],F(e));return a===null?NaN:a.minute})},t.week=function(e,t){return n(e,t,(n,r,i)=>{D(i,1,2,e,t);let a=H(i[0],F(e));if(a===null)return NaN;let o=w(k(i[1],0));if(o<0||o>6)throw new p(e,`InvalidParameter`,t);let s=a.day,c=a.monthJS,l=a.year,u=a.dayOfWeekJS,d=Ct(s,c,l)-1,f=Math.floor(d/7);return u-o+(u-o<0?7:0)<d-7*f?f+1:f})},t.weekday=function(e,t){return n(e,t,(n,r,i)=>{D(i,1,1,e,t);let a=H(i[0],F(e));return a===null?NaN:a.dayOfWeekJS})},t.isoweekday=function(e,t){return n(e,t,(n,r,i)=>{D(i,1,1,e,t);let a=H(i[0],F(e));return a===null?NaN:a.dayOfWeekISO})},t.isomonth=function(e,t){return n(e,t,(n,r,i)=>{D(i,1,1,e,t);let a=H(i[0],F(e));return a===null?NaN:a.monthISO})},t.isoweek=function(e,t){return n(e,t,(n,r,i)=>{D(i,1,1,e,t);let a=H(i[0],F(e));return a===null?NaN:a.weekISO})},t.isoyear=function(e,t){return n(e,t,(n,r,i)=>{D(i,1,1,e,t);let a=H(i[0],F(e));return a===null?NaN:a.yearISO})},t.date=function(e,t){return n(e,t,(n,r,a)=>{if(D(a,0,8,e,t),a.length===3){if(b(a[0])&&S(a[1])&&h(a[2])){let t=f(Dt(E(a[2])??`unknown`,e),!1);return t===null?null:V(i.fromParts(a[0].year,a[0].month,a[0].day,a[1].hour,a[1].minute,a[1].second,a[1].millisecond,t))}return V(i.fromParts(w(a[0]),w(a[1])+1,w(a[2]),0,0,0,0,F(e)))}if(a.length===4)return V(i.fromParts(w(a[0]),w(a[1])+1,w(a[2]),w(a[3]),0,0,0,F(e)));if(a.length===5)return V(i.fromParts(w(a[0]),w(a[1])+1,w(a[2]),w(a[3]),w(a[4]),0,0,F(e)));if(a.length===6)return V(i.fromParts(w(a[0]),w(a[1])+1,w(a[2]),w(a[3]),w(a[4]),w(a[5]),0,F(e)));if(a.length===7)return V(i.fromParts(w(a[0]),w(a[1])+1,w(a[2]),w(a[3]),w(a[4]),w(a[5]),w(a[6]),F(e)));if(a.length===8){let t=f(Dt(E(a[7])??`unknown`,e),!1);return t===null?null:V(i.fromParts(w(a[0]),w(a[1])+1,w(a[2]),w(a[3]),w(a[4]),w(a[5]),w(a[6]),t))}if(a.length===2){if(b(a[0])&&h(a[1])){let t=f(Dt(E(a[1])??`unknown`,e),!1);return t===null?null:V(i.fromParts(a[0].year,a[0].month,a[0].day,0,0,0,0,t))}if(b(a[0])&&S(a[1]))return V(i.fromParts(a[0].year,a[0].month,a[0].day,a[1].hour,a[1].minute,a[1].second,a[1].millisecond,`unknown`));let t,n=E(a[1]);return n===``?null:(n=Ce(n,!0),t=n===`X`?ue.fromSeconds(w(a[0])):n===`x`?ue.fromMillis(w(a[0])):ue.fromFormat(E(a[0]),n,{locale:oe(),numberingSystem:`latn`}),t.isValid?i.dateTimeToArcadeDate(t):null)}if(a.length===1){if(b(a[0]))return V(i.fromParts(a[0].year,a[0].month,a[0].day,0,0,0,0,`unknown`));if(h(a[0])){if(a[0].replaceAll(/^\s+|\s+$/g,``)===``)return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(a[0]))return C(a[0]+`-01-01`,F(e))}let t=w(a[0]);if(!1===isNaN(t)){let n=ue.fromMillis(t);return n.isValid?i.dateTimeAndZoneToArcadeDate(n,F(e)):null}return C(a[0],F(e))}return a.length===0?i.nowToArcadeDate(F(e)):null})},t.datediff=function(e,t){return n(e,t,(n,r,a)=>{if(D(a,2,4,e,t),S(a[0]))return S(a[1])?a[0].difference(a[1],E(a[2])):NaN;if(S(a[1]))return NaN;if(b(a[0]))return b(a[1])?a[0].difference(a[1],E(a[2])):NaN;if(b(a[1]))return NaN;let o=C(a[0],F(e)),s=C(a[1],F(e));if(o===null||s===null)return NaN;let c=k(a[3],``);return c!==``&&c!==null?(c=Dt(E(c),e),o=i.arcadeDateAndZoneToArcadeDate(o,c),s=i.arcadeDateAndZoneToArcadeDate(s,c)):o.timeZone!==s.timeZone&&(o.isUnknownTimeZone?o=i.arcadeDateAndZoneToArcadeDate(o,s.timeZone):s=(s.isUnknownTimeZone,i.arcadeDateAndZoneToArcadeDate(s,o.timeZone))),o.diff(s,kt(a[2]))})},t.dateadd=function(e,t){return n(e,t,(n,r,i)=>{D(i,2,3,e,t);let a=w(i[1]);if(isNaN(a)||a===1/0||a===-1/0)return S(i[0])||b(i[0])?i[0].clone():C(i[0],F(e));let o=kt(i[2]);if(o!==`days`&&o!==`months`||(a=b(i[0])?a:De(a)),S(i[0])||b(i[0]))return i[0].plus(o,a);let s=C(i[0],F(e));return s===null?null:s.plus({[o]:a})})}}function jt(e){let t=e?.fullSchema();return t?.datesInUnknownTimezone?`unknown`:t?.dateFieldsTimeZone||`UTC`}function Mt(e){let t=e.fullSchema()?.fieldsIndex;return t==null&&e instanceof L?e.fieldsIndex:t}var Nt={getAttributeSQL(e,t){let n=e.field(t);if(n==null)return n;if(x(n)){let r=n.toDateTime(),i=Mt(e)?.get(t)?.type;return i===`esriFieldTypeTimestampOffset`||i===`timestamp-offset`?Ke.fromDateTime(r):r}return n}};function Pt(e,t,n){e.domain=function(e,n){return t(e,n,(t,r,i)=>{if(D(i,2,3,e,n),A(i[0])){let t=Me(i[0],E(i[1]),i[2]===void 0?void 0:i[2]);return t&&t.domain?t.domain.type===`coded-value`||t.domain.type===`codedValue`?M.convertObjectToArcadeDictionary({type:`codedValue`,name:t.domain.name,dataType:Ve[t.field.type],codedValues:t.domain.codedValues.map(e=>({name:e.name,code:e.code}))},F(e)):M.convertObjectToArcadeDictionary({type:`range`,name:t.domain.name,dataType:Ve[t.field.type],min:t.domain.minValue,max:t.domain.maxValue},F(e)):null}throw new p(e,`InvalidParameter`,n)})},e.domaincode=function(e,n){return t(e,n,(t,r,i)=>{if(D(i,2,4,e,n),A(i[0]))return Te(i[0],E(i[1]),i[2],i[3]===void 0?void 0:i[3]);throw new p(e,`InvalidParameter`,n)})},e.domainname=function(e,n){return t(e,n,(t,r,i)=>{if(D(i,2,4,e,n),A(i[0]))return we(i[0],E(i[1]),i[2],i[3]===void 0?void 0:i[3]);throw new p(e,`InvalidParameter`,n)})},e.expects=function(e,n){return t(e,n,(t,r,i)=>{if(i.length<1)throw new p(e,`WrongNumberOfParameters`,n);return T})},e.featureinfilter=function(e,r){return t(e,r,(e,t,r)=>{D(r,2,2,e,t);let[i,a]=r;if(i==null)return!1;if(a===``||a==null)return!0;if(!A(i)||!h(a))throw new p(e,`InvalidParameter`,t);let o=qe.create(a,{fieldsIndex:Mt(i),timeZone:jt(i)}),s=o.getVariables();for(let t of s)o.parameters[t]=n(e,{name:t});return o.testFeature(i,Nt)})},e.gdbversion=function(e,n){return t(e,n,(t,r,i)=>{if(D(i,1,1,e,n),A(i[0]))return i[0].gdbVersion();throw new p(e,`InvalidParameter`,n)})},e.schema=function(e,n){return t(e,n,(t,r,i)=>{if(A(i[0])){let t=Se(i[0]);return t?M.convertObjectToArcadeDictionary(t,F(e)):null}throw new p(e,`InvalidParameter`,n)})},e.subtypecode=function(e,n){return t(e,n,(t,r,i)=>{if(D(i,1,1,e,n),A(i[0])){let e=ye(i[0]);if(!e)return null;if(e.subtypeField&&i[0].hasField(e.subtypeField)){let t=i[0].field(e.subtypeField);for(let n of e.subtypes)if(n.code===t)return n.code;return null}return null}throw new p(e,`InvalidParameter`,n)})},e.subtypename=function(e,n){return t(e,n,(t,r,i)=>{if(D(i,1,1,e,n),A(i[0])){let e=ye(i[0]);if(!e)return``;if(e.subtypeField&&i[0].hasField(e.subtypeField)){let t=i[0].field(e.subtypeField);for(let n of e.subtypes)if(n.code===t)return n.name;return``}return``}throw new p(e,`InvalidParameter`,n)})},e.subtypes=function(e,n){return t(e,n,(t,r,i)=>{if(D(i,1,1,e,n),A(i[0])){let t=ye(i[0]);return t?M.convertObjectToArcadeDictionary(t,F(e)):null}throw new p(e,`InvalidParameter`,n)})},e[y(`TimeReceived`)]=function(e,n){return t(e,n,(e,t,n)=>{if(D(n,1,1,e,t),A(n[0])){if(n[0].hasField(`__esri_time_received__`)){let t=n[0].field(Je);return v(t)?i.epochToArcadeDate(t,e.timeZone??`system`):x(t)?t:null}return null}throw new p(e,`InvalidParameter`,t)})}}function Ft(e,r){e.ringisclockwise=function(e,n){return r(e,n,(r,i,a)=>{D(a,1,1,e,n);let o=[];if(a[0]===null)return!1;if(_(a[0]))for(let r of a[0]){if(!(r instanceof t))throw new p(e,`InvalidParameter`,n);o.push(r.hasZ?r.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y])}else if(a[0]instanceof Re)o=a[0]._elements;else{if(!N(a[0]))throw new p(e,`InvalidParameter`,n);for(let r of a[0].toArray()){if(!(r instanceof t))throw new p(e,`InvalidParameter`,n);o.push(r.hasZ?r.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y])}}return!(o.length<3)&&pe(o)})},e.polygon=function(e,t){return r(e,t,(n,r,i)=>{let a;if(D(i,1,1,e,t),i[0]instanceof M){let t=P(I(i[0],e.spatialReference,`polygon`),e.spatialReference);if(t==null)return null;a=t}else if(i[0]instanceof ce)a=c(i[0].toJSON());else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=P(new ce(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new p(e,`WrongSpatialReference`,t);return j(a)})},e.polyline=function(e,t){return r(e,t,(r,i,a)=>{let o;if(D(a,1,1,e,t),a[0]instanceof M){let t=P(I(a[0],e.spatialReference,`polyline`),e.spatialReference);if(t==null)return null;o=t}else if(a[0]instanceof n)o=c(a[0].toJSON());else{let t=JSON.parse(a[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),o=P(new n(t),e.spatialReference)}if(o!==null&&!1===o.spatialReference.equals(e.spatialReference))throw new p(e,`WrongSpatialReference`,t);return j(o)})},e.point=function(e,n){return r(e,n,(r,i,a)=>{let o;if(D(a,1,1,e,n),a[0]instanceof M){let t=P(I(a[0],e.spatialReference,`point`),e.spatialReference);if(t==null)return null;o=t}else if(a[0]instanceof t)o=c(a[0].toJSON());else{let n=JSON.parse(a[0]);n&&!n.spatialReference&&(n.spatialReference=e.spatialReference),o=P(new t(n),e.spatialReference)}if(o!==null&&!1===o.spatialReference.equals(e.spatialReference))throw new p(e,`WrongSpatialReference`,n);return j(o)})},e.multipoint=function(e,t){return r(e,t,(n,r,i)=>{let a;if(D(i,1,1,e,t),i[0]instanceof M){let t=P(I(i[0],e.spatialReference,`multipoint`),e.spatialReference);if(t==null)return null;a=t}else if(i[0]instanceof re)a=c(i[0].toJSON());else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=P(new re(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new p(e,`WrongSpatialReference`,t);return j(a)})},e.extent=function(e,i){return r(e,i,(r,a,o)=>{o=Oe(o),D(o,1,1,e,i);let s=null;if(o[0]instanceof M)s=P(I(o[0],e.spatialReference),e.spatialReference);else if(o[0]instanceof t){let e={xmin:o[0].x,ymin:o[0].y,xmax:o[0].x,ymax:o[0].y,spatialReference:o[0].spatialReference.toJSON()},t=o[0];t.hasZ&&(e.zmin=t.z,e.zmax=t.z),t.hasM&&(e.mmin=t.m,e.mmax=t.m),s=c(e)}else if(o[0]instanceof ce)s=c(o[0].extent?.toJSON());else if(o[0]instanceof n)s=c(o[0].extent?.toJSON());else if(o[0]instanceof re)s=c(o[0].extent?.toJSON());else if(o[0]instanceof ee)s=c(o[0].toJSON());else{let t=JSON.parse(o[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),s=P(new ee(t),e.spatialReference)}if(s!==null&&!1===s.spatialReference.equals(e.spatialReference))throw new p(e,`WrongSpatialReference`,i);return j(s)})},e.geometry=function(e,t){return r(e,t,(n,r,i)=>{D(i,1,1,e,t);let a=null;if(i[0]===null)return null;if(A(i[0]))a=P(i[0].geometry(),e.spatialReference);else if(i[0]instanceof M)a=P(I(i[0],e.spatialReference),e.spatialReference);else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=P(c(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new p(e,`WrongSpatialReference`,t);return j(a)})},e.setgeometry=function(e,t){return r(e,t,(n,r,i)=>{if(D(i,2,2,e,t),!A(i[0]))throw new p(e,`InvalidParameter`,t);if(!0===i[0].immutable)throw new p(e,`Immutable`,t);if(!(i[1]instanceof ie||i[1]===null))throw new p(e,`InvalidParameter`,t);return i[0]._geometry=i[1],T})},e.feature=function(e,t){return r(e,t,(n,r,i)=>{if(i.length===0)throw new p(e,`WrongNumberOfParameters`,t);let a;if(i.length===1)if(h(i[0]))a=L.fromJson(JSON.parse(i[0]),e.timeZone);else if(A(i[0]))a=L.createFromArcadeFeature(i[0]);else if(i[0]instanceof ie)a=L.createFromGraphicLikeObject(i[0],null,null,e.timeZone);else{if(!(i[0]instanceof M))throw new p(e,`InvalidParameter`,t);{let n=i[0].hasField(`geometry`)?i[0].field(`geometry`):null,r=i[0].hasField(`attributes`)?i[0].field(`attributes`):null,o,s;if(O(n))o=I(n,e.spatialReference);else{if(n!=null&&!je(n))throw new p(e,`InvalidParameter`,t);o=n}if(O(r))s=L.parseAttributesFromDictionary(r);else{if(r!=null)throw new p(e,`InvalidParameter`,t);s=null}a=L.createFromGraphicLikeObject(o,s,null,e.timeZone)}}else if(i.length===2){let n=null,r=null;if(i[0]!==null)if(i[0]instanceof ie)n=i[0];else{if(!(i[0]instanceof M))throw new p(e,`InvalidParameter`,t);n=I(i[0],e.spatialReference)}if(i[1]!==null){if(!(i[1]instanceof M))throw new p(e,`InvalidParameter`,t);r=L.parseAttributesFromDictionary(i[1])}a=L.createFromGraphicLikeObject(n,r,null,e.timeZone)}else{let n=null,r={};if(i[0]!==null)if(i[0]instanceof ie)n=i[0];else{if(!(i[0]instanceof M))throw new p(e,`InvalidParameter`,t);n=I(i[0],e.spatialReference)}for(let n=1;n<i.length;n+=2){let a=E(i[n]),o=i[n+1];if(!(o==null||h(o)||isNaN(o)||x(o)||v(o)||S(o)||b(o)||m(o))||Be(o)||!1===ge(o))throw new p(e,`InvalidParameter`,t);r[a]=o===T?null:o}a=L.createFromGraphicLikeObject(n,r,null,e.timeZone)}return a._geometry=P(a.geometry(),e.spatialReference),a.immutable=!1,a})},e.dictionary=function(e,t){return r(e,t,(n,r,i)=>{if(i.length===0||i.length===1&&i[0]===null){let e=new M;return e.immutable=!1,e}if(i.length===1&&h(i[0]))try{let t=JSON.parse(i[0]),n=M.convertObjectToArcadeDictionary(t,F(e),!1);return n.immutable=!1,n}catch{throw new p(e,`InvalidParameter`,t)}if(i.length===1&&i[0]instanceof ie)try{let t=i[0].toJSON();t.hasZ=!0===i[0].hasZ,t.hasM=!0===i[0].hasM;let n=M.convertObjectToArcadeDictionary(t,F(e),!1);return n.immutable=!1,n}catch{throw new p(e,`InvalidParameter`,t)}if(i.length===1&&A(i[0]))try{let e=new M;e.immutable=!1,e.setField(`geometry`,i[0].geometry());let t=new M;t.immutable=!1,e.setField(`attributes`,t);for(let e of i[0].keys())t.setField(e,i[0].field(e));return e}catch{throw new p(e,`InvalidParameter`,t)}if(i.length===1&&(O(i[0])||Ae(i[0])||ke(i[0])))try{let e=new M;e.immutable=!1;for(let t of i[0].keys())e.setField(t,i[0].field(t));return e}catch{throw new p(e,`InvalidParameter`,t)}if(i.length===2&&i[0]instanceof M&&m(i[1]))try{if(!0!==i[1]){let e=new M;e.immutable=!1;for(let t of i[0].keys())e.setField(t,i[0].field(t));return e}return i[0].deepClone()}catch{throw new p(e,`InvalidParameter`,t)}if(i.length%2!=0)throw new p(e,`WrongNumberOfParameters`,t);let a=Object.create(null);for(let n=0;n<i.length;n+=2){let r=E(i[n]),o=i[n+1];if(!(o==null||h(o)||isNaN(o)||x(o)||v(o)||m(o)||b(o)||S(o)||_(o)||N(o))||Be(o))throw new p(e,`InvalidParameter`,t);a[r]=o===T?null:o}let o=new M(a);return o.immutable=!1,o})},e.haskey=function(e,t){return r(e,t,(n,r,i)=>{D(i,2,2,e,t);let a=E(i[1]);if(ze(i[0])||i[0]instanceof M)return i[0].hasField(a);if(i[0]instanceof ie){let e=Ge(i[0],a,null,null,2);return!e||e.keystate!==`notfound`}throw new p(e,`InvalidParameter`,t)})},e.hasvalue=function(e,t){return r(e,t,(n,r,i)=>(D(i,2,2,e,t),Ue(i[0],i[1])!=null))},e.indexof=function(e,t){return r(e,t,(n,r,i)=>{D(i,2,2,e,t);let a=i[1];if(_(i[0])){for(let e=0;e<i[0].length;e++)if(Le(a,i[0][e]))return e;return-1}if(N(i[0])){let e=i[0].length();for(let t=0;t<e;t++)if(Le(a,i[0].get(t)))return t;return-1}throw new p(e,`InvalidParameter`,t)})},e.angle=function(e,n){return r(e,n,(r,i,a)=>{if(a=Oe(a),D(a,2,3,e,n),!(a[0]instanceof t)||!(a[1]instanceof t)||a.length>2&&!(a[2]instanceof t))throw new p(e,`InvalidParameter`,n);return a.length===2?Xe(a[0],a[1]):Ze(a[0],a[1],a[2])})},e.bearing=function(e,n){return r(e,n,(r,i,a)=>{if(a=Oe(a),D(a,2,3,e,n),!(a[0]instanceof t)||!(a[1]instanceof t)||a.length>2&&!(a[2]instanceof t))throw new p(e,`InvalidParameter`,n);return a.length===2?Ye(a[0],a[1]):Qe(a[0],a[1],a[2])})}}function It(e,t){function n(e,t,n){let r=w(e);return isNaN(r)?r:isNaN(t)||isNaN(n)||t>n?NaN:r<t?t:r>n?n:r}e.number=function(e,n){return t(e,n,(t,r,i)=>{D(i,1,2,e,n);let a=i[0];if(v(a))return a;if(a===null)return 0;if(x(a)||S(a)||b(a))return a.toNumber();if(m(a))return Number(a);if(_(a))return NaN;if(a===``||a===void 0)return Number(a);if(h(a)){if(i[1]!==void 0){let e=ve(i[1],`‰`,``);return e=ve(e,`¤`,``),He(a,{pattern:e})}return Number(a.trim())}return Number(a)})},e.abs=function(e,n){return t(e,n,(t,r,i)=>(D(i,1,1,e,n),Math.abs(w(i[0]))))},e.acos=function(e,n){return t(e,n,(t,r,i)=>(D(i,1,1,e,n),Math.acos(w(i[0]))))},e.asin=function(e,n){return t(e,n,(t,r,i)=>(D(i,1,1,e,n),Math.asin(w(i[0]))))},e.atan=function(e,n){return t(e,n,(t,r,i)=>(D(i,1,1,e,n),Math.atan(w(i[0]))))},e.atan2=function(e,n){return t(e,n,(t,r,i)=>(D(i,2,2,e,n),Math.atan2(w(i[0]),w(i[1]))))},e.ceil=function(e,n){return t(e,n,(t,r,i)=>{if(D(i,1,2,e,n),i.length===2){let e=w(i[1]);return isNaN(e)&&(e=0),se(`ceil`,w(i[0]),-1*e)}return Math.ceil(w(i[0]))})},e.round=function(e,n){return t(e,n,(t,r,i)=>{if(D(i,1,2,e,n),i.length===2){let e=w(i[1]);return isNaN(e)&&(e=0),se(`round`,w(i[0]),-1*e)}return Math.round(w(i[0]))})},e.floor=function(e,n){return t(e,n,(t,r,i)=>{if(D(i,1,2,e,n),i.length===2){let e=w(i[1]);return isNaN(e)&&(e=0),se(`floor`,w(i[0]),-1*e)}return Math.floor(w(i[0]))})},e.cos=function(e,n){return t(e,n,(t,r,i)=>(D(i,1,1,e,n),Math.cos(w(i[0]))))},e.isnan=function(e,n){return t(e,n,(t,r,i)=>(D(i,1,1,e,n),typeof i[0]==`number`&&isNaN(i[0])))},e.exp=function(e,n){return t(e,n,(t,r,i)=>(D(i,1,1,e,n),Math.exp(w(i[0]))))},e.log=function(e,n){return t(e,n,(t,r,i)=>(D(i,1,1,e,n),Math.log(w(i[0]))))},e.pow=function(e,n){return t(e,n,(t,r,i)=>(D(i,2,2,e,n),w(i[0])**w(i[1])))},e.random=function(e,n){return t(e,n,(t,r,i)=>(D(i,0,0,e,n),Math.random()))},e.sin=function(e,n){return t(e,n,(t,r,i)=>(D(i,1,1,e,n),Math.sin(w(i[0]))))},e.sqrt=function(e,n){return t(e,n,(t,r,i)=>(D(i,1,1,e,n),Math.sqrt(w(i[0]))))},e.tan=function(e,n){return t(e,n,(t,r,i)=>(D(i,1,1,e,n),Math.tan(w(i[0]))))},e.isempty=function(e,n){return t(e,n,(e,t,n)=>{if(D(n,1,2,e,t),n.length>=2&&!m(n[1]))throw new p(e,`InvalidParameter`,t);return k(n[1],!1)?We(n[0]):Fe(n[0])})},e.boolean=function(e,n){return t(e,n,(t,r,i)=>{D(i,1,1,e,n);let a=i[0];return Pe(a)})},e.constrain=function(e,r){return t(e,r,(t,i,a)=>{D(a,3,3,e,r);let o=w(a[1]),s=w(a[2]);if(_(a[0])){let e=[];for(let t of a[0])e.push(n(t,o,s));return e}if(N(a[0])){let e=[];for(let t=0;t<a[0].length();t++)e.push(n(a[0].get(t),o,s));return e}return n(a[0],o,s)})}}function U(e,t){if(t.length===1){if(_(t[0]))return $e(e,t[0],-1);if(N(t[0]))return $e(e,t[0].toArray(),-1)}return $e(e,t,-1)}function Lt(e,t){e.stdev=function(e,n){return t(e,n,(e,t,n)=>U(`stdev`,n))},e.variance=function(e,n){return t(e,n,(e,t,n)=>U(`variance`,n))},e.average=function(e,n){return t(e,n,(e,t,n)=>U(`mean`,n))},e.mean=function(e,n){return t(e,n,(e,t,n)=>U(`mean`,n))},e.sum=function(e,n){return t(e,n,(e,t,n)=>U(`sum`,n))},e.min=function(e,n){return t(e,n,(e,t,n)=>U(`min`,n))},e.max=function(e,n){return t(e,n,(e,t,n)=>U(`max`,n))},e.distinct=function(e,n){return t(e,n,(e,t,n)=>U(`distinct`,n))},e.count=function(e,n){return t(e,n,(t,r,i)=>{if(D(i,1,1,e,n),i[0]==null)return 0;if(_(i[0])||h(i[0]))return i[0].length;if(N(i[0]))return i[0].length();if(O(i[0]))return i[0].entryCount();throw new p(e,`InvalidParameter`,n)})}}var Rt=e=>(t,n,r=14)=>+e(t,n).toFixed(r),zt=(e,t)=>e+t,Bt=(e,t)=>e*t,Vt=(e,t)=>e/t,Ht=(e,t,n)=>Rt(zt)(e,t,n),W=(e,t,n)=>Rt(Bt)(e,t,n),Ut=(e,t,n)=>Rt(Vt)(e,t,n),Wt=360,Gt=400,Kt=2*Math.PI,G=3600,qt=3240,Jt=60,K=60,Yt=180*G/Math.PI,Xt=Wt*Jt*K,Zt=90*G,q=180*G,Qt=270*G,$t=`ᵍ`,en=`°`;function tn(e){if(!1===h(e))throw new p(null,`InvalidParameter`,null);return e}function nn(e,t){let n=10**t;return Math.round(e*n)/n}function rn(e,t){return e%t}function J(e){let t=parseFloat(e.toString().replace(Math.trunc(e).toString(),`0`))*Math.sign(e);return e<0?{fraction:t,integer:Math.ceil(e)}:{fraction:t,integer:Math.floor(e)}}function an(e,t){switch(e){case 0:return t===`SHORT`?`N`:`North`;case 1:return t===`SHORT`?`E`:`East`;case 2:return t===`SHORT`?`S`:`South`;case 3:return t===`SHORT`?`W`:`West`}}function on(e,t){return e-Math.floor(e/t)*t}function sn(e){switch(e){case 6:case 1:return Wt;case 4:return Kt;case 5:return Gt;case 2:return Xt;case 7:return Jt;case 8:return K;default:throw new p(null,`LogicError`,null,{reason:`unsupported evaluations`})}}var cn=new o([],[[`NORTH`,1],[`NORTH AZIMUTH`,1],[`POLAR`,2],[`QUADRANT`,3],[`SOUTH`,4],[`SOUTH AZIMUTH`,4]]);function ln(e){let t=cn.lookup(e);if(t==null)throw new p(null,`LogicError`,null,{reason:`unsupported directionType`});return t}var un=new o([],[[`D`,1],[`DD`,1],[`DECIMAL DEGREE`,1],[`DEGREE`,1],[`DECIMAL DEGREES`,1],[`DEGREES`,1],[`DMS`,3],[`DEGREES MINUTES SECONDS`,3],[`R`,4],[`RAD`,4],[`RADS`,4],[`RADIAN`,4],[`RADIANS`,4],[`G`,5],[`GON`,5],[`GONS`,5],[`GRAD`,5],[`GRADS`,5],[`GRADIAN`,5],[`GRADIANS`,5]]);function dn(e){let t=un.lookup(e);if(t==null)throw new p(null,`LogicError`,null,{reason:`unsupported units`});return t}var fn=class e{constructor(e,t,n){this.m_degrees=e,this.m_minutes=t,this.m_seconds=n}getField(e){switch(e){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw new p(null,`LogicError`,null,{reason:`unexpected evaluation`})}}static secondsToDMS(t){let n=J(t).fraction,r=J(t).integer,i=Math.floor(r/G);r-=i*G;let a=Math.floor(r/K);return r-=a*K,new e(i,a,r+n)}static numberToDms(t){let n=J(t).fraction,r=J(t).integer,i=W(J(100*n).fraction,100),a=J(100*n).integer;return new e(r,a,i)}format(t,n){let r=nn(this.m_seconds,n),i=this.m_minutes,a=this.m_degrees;if(t===2||t===8)K<=r&&(r-=K,++i),Jt<=i&&(i=0,++a),Wt<=a&&(a=0);else if(t===7)r=0,i=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,a=this.m_degrees,Jt<=i&&(i=0,++a),Wt<=a&&(a=0);else if(t===1||t===6){let e=Ut(this.m_seconds,G),t=Ut(this.m_minutes,Jt);a=Math.round(this.m_degrees+t+e),i=0,r=0}return new e(a,i,r)}static dmsToSeconds(e,t,n){return e*G+t*K+n}},pn=class{constructor(e,t,n){this.meridian=e,this.angle=t,this.direction=n}fetchAzimuth(e){return e===0?this.meridian:this.direction}},Y=class e{constructor(e){this._angle=e}static createFromAngleAndDirection(t,n){return new e(new X(e._convertDirectionFormat(t.extractAngularUnits(2),n,1)))}getAngle(t){let n=this._angle.extractAngularUnits(2);switch(t){case 1:case 4:case 2:return new X(e._convertDirectionFormat(n,1,t));case 3:{let t=e.secondsNorthAzimuthToQuadrant(n);return new X(t.angle)}}}getMeridian(t){let n=this._angle.extractAngularUnits(2);switch(t){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return e.secondsNorthAzimuthToQuadrant(n).meridian}}getDirection(t){let n=this._angle.extractAngularUnits(2);switch(t){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return e.secondsNorthAzimuthToQuadrant(n).direction}}static secondsNorthAzimuthToQuadrant(e){let t=e<=Zt||e>=Qt?0:2,n=t===0?Math.min(Xt-e,e):Math.abs(e-q);return new pn(t,n,e>q?3:1)}static createFromAngleMeridianAndDirection(t,n,r){return new e(new X(e.secondsQuadrantToNorthAzimuth(t.extractAngularUnits(2),n,r)))}static secondsQuadrantToNorthAzimuth(e,t,n){return t===0?n===1?e:Xt-e:n===1?q-e:q+e}static _convertDirectionFormat(e,t,n){let r=0;switch(t){case 1:r=e;break;case 2:r=Zt-e;break;case 3:throw new p(null,`LogicError`,null,{reason:`unexpected evaluation`});case 4:r=e+q}let i=0;switch(n){case 1:i=r;break;case 2:i=Zt-r;break;case 3:throw new p(null,`LogicError`,null,{reason:`unexpected evaluation`});case 4:i=r-q}return i=rn(i,Xt),i<0?Xt+i:i}};function mn(e,t,n){let r=null;switch(t){case 1:r=W(e,G);break;case 2:r=e;break;case 5:r=W(e,qt);break;case 4:r=W(e,Yt);break;default:throw new p(null,`LogicError`,null,{reason:`unexpected evaluation`})}switch(n){case 1:return Ut(r,G);case 2:return r;case 5:return Ut(r,qt);case 4:return r/Yt;default:throw new p(null,`LogicError`,null,{reason:`unexpected evaluation`})}}var X=class e{constructor(e){this._seconds=e}static createFromAngleAndUnits(t,n){return new e(mn(t,n,2))}extractAngularUnits(e){return mn(this._seconds,2,hn(e))}static createFromDegreesMinutesSeconds(t,n,r){return new e(Ht(Ht(W(t,G),W(n,K)),r))}};function hn(e){switch(le(e),e){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;case 2:case 8:return 2}}var gn=class e{constructor(e,t,n,r){this.view=e,this.angle=t,this.merdian=n,this.direction=r,this._dms=null,this._formattedDms=null}static createFromStringAndBearing(t,n,r){return new e(t,n.getAngle(r),n.getMeridian(r),n.getDirection(r))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){return this._dms===null&&this._calculateDms(),this._dms}fetchFormattedDms(){return this._formattedDms===null&&this._calculateDms(),this._formattedDms}_calculateDms(){let e=null,t=6,n=0;for(let r=0;r<this.view.length;r++){let i=this.view[r];switch(i){case`m`:e=On(this.view,r,i),t=t===6?7:t,r=e.newpos;continue;case`s`:e=On(this.view,r,i),t=8,n=n<e.rounding?e.rounding:n,r=e.newpos;continue;default:continue}}this._dms=fn.secondsToDMS(this.angle.extractAngularUnits(2)),this._formattedDms=fn.secondsToDMS(this.angle.extractAngularUnits(2)).format(t,n)}};function _n(e,t,n,r,i){let a=null;switch(t){case 1:case 4:case 5:return a=on(nn(e.extractAngularUnits(t),r),sn(t)),a.toFixed(r).padStart(n+r+(r>0?1:0),`0`);case 6:case 7:return a=on(i.fetchFormattedDms().getField(t),sn(t)),a.toFixed(r).padStart(n+r+(r>0?1:0),`0`);case 8:return a=on(nn(i.fetchDms().getField(t),r),sn(t)),a.toFixed(r).padStart(n+r+(r>0?1:0),`0`);default:throw new p(null,`LogicError`,null,{reason:`unexpected evaluation`})}}function vn(e,t,n){if(n===3)throw new p(null,`LogicError`,null,{reason:`conversion error`});if(t===3){let t=fn.numberToDms(e);return Y.createFromAngleAndDirection(X.createFromDegreesMinutesSeconds(t.m_degrees,t.m_minutes,t.m_seconds),n)}return Y.createFromAngleAndDirection(X.createFromAngleAndUnits(e,hn(t)),n)}function yn(e){switch(w(e)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function bn(e){switch(e.toUpperCase().trim()){case`N`:case`NORTH`:return 0;case`E`:case`EAST`:return 1;case`S`:case`SOUTH`:return 2;case`W`:case`WEST`:return 3}return null}function xn(e){let t=parseFloat(e);if(v(t)){if(isNaN(t))throw new p(null,`LogicError`,null,{reason:`invalid conversion`});return t}throw new p(null,`LogicError`,null,{reason:`invalid conversion`})}function Sn(e,t,n){let r=n===3,i=null,a=null,o=0,s=0,c=0;if(r){if(e.length<2)throw new p(null,`LogicError`,null,{reason:`conversion error`});c=1;let t=yn(E(e[e.length-1]));if(t?(i=t.first,a=t.second):(o=1,i=bn(E(e[0])),a=bn(E(e[e.length-1]))),i===null||a===null)throw new p(null,`LogicError`,null,{reason:`invalid conversion`})}switch(t){case 1:case 4:case 5:if(e.length===0)throw new p(null,`LogicError`,null,{reason:`invalid conversion`});return r?Y.createFromAngleMeridianAndDirection(X.createFromAngleAndUnits(xn(e[o]),hn(t)),i,a):Y.createFromAngleAndDirection(X.createFromAngleAndUnits(xn(e[o]),hn(t)),n);case 3:if(s=e.length-c-o,s===3){let t=X.createFromDegreesMinutesSeconds(xn(e[o]),xn(e[o+1]),xn(e[o+2]));return r?Y.createFromAngleMeridianAndDirection(t,i,a):Y.createFromAngleAndDirection(t,n)}if(s===1){let t=xn(e[o]),s=fn.numberToDms(t),c=X.createFromDegreesMinutesSeconds(s.m_degrees,s.m_minutes,s.m_seconds);return r?Y.createFromAngleMeridianAndDirection(c,i,a):Y.createFromAngleAndDirection(c,n)}}throw new p(null,`LogicError`,null,{reason:`invalid conversion`})}function Cn(e){let t=new Set([` `,`-`,`/`,`'`,`"`,`\\`,`^`,en,$t,`	`,`\r`,`
`,`*`]),n=``;for(let r=0;r<e.length;r++){let i=e.charAt(r);t.has(i)?n+=`RRSPLITRRSPLITRR`:n+=i}return n.split(`RRSPLITRRSPLITRR`).filter(e=>e!==``)}function wn(e,t,n){if(v(e))return vn(w(e),t,n);if(h(e))return Sn(Cn(e),t,n);if(_(e))return Sn(e,t,n);if(N(e))return Sn(e.toArray(),t,n);throw new p(null,`LogicError`,null,{reason:`conversion error`})}function Tn(e,t,n){let r=hn(n);if(r&&n!==3)return e.getAngle(t).extractAngularUnits(r);throw new p(null,`LogicError`,null,{reason:`conversion error`})}function En(e,t,n){let r=e.getAngle(t);if(t===3&&n===3){let n=fn.secondsToDMS(r.extractAngularUnits(2));return[an(e.getMeridian(t),`SHORT`),n.m_degrees,n.m_minutes,n.m_seconds,an(e.getDirection(t),`SHORT`)]}if(n===3){let e=fn.secondsToDMS(r.extractAngularUnits(2));return[e.m_degrees,e.m_minutes,e.m_seconds]}return t===3?[an(e.getMeridian(t),`SHORT`),r.extractAngularUnits(n),an(e.getDirection(t),`SHORT`)]:[r.extractAngularUnits(n)]}function Dn(e,t){let n=``;switch(e){case 1:n=t===3?`DD.DD`+en:`DDD.DD`+en;break;case 3:n=t===3?`dd`+en+` mm' ss"`:`ddd`+en+` mm' ss.ss"`;break;case 4:n=`R.RR`;break;case 5:n=`GGG.GG`+$t;break;default:throw new p(null,`LogicError`,null,{reason:`conversion error`})}return t===3&&(n=`p `+n+` b`),n}function On(e,t,n){let r={padding:0,rounding:0,newpos:t},i=!1;for(;t<e.length;){let a=e[t];if(a===n)i?r.rounding++:r.padding++,t++;else{if(a!==`.`)break;i=!0,t++}}return r.newpos=t-1,r}function kn(e,t,n){let r={escaped:``,newpos:t};for(t++;t<e.length;){let n=e[t];if(t++,n===`]`)break;r.escaped+=n}return r.newpos=t-1,r}function An(e,t,n){let r=``,i=null,a=null,o=gn.createFromStringAndBearing(t,e,n),s={D:1,d:6,m:7,s:8,R:4,G:5};for(let c=0;c<t.length;c++){let l=t[c];switch(l){case`[`:i=kn(t,c),r+=i.escaped,c=i.newpos;continue;case`D`:case`d`:case`m`:case`s`:case`R`:case`G`:i=On(t,c,l),a=e.getAngle(n),r+=_n(a,s[l],i.padding,i.rounding,o),c=i.newpos;continue;case`P`:case`p`:r+=an(o.fetchMeridian(),l===`p`?`SHORT`:`LONG`);continue;case`B`:case`b`:r+=an(o.fetchDirection(),l===`b`?`SHORT`:`LONG`);continue;default:r+=l}}return r}var jn=new o([`TEXT`,`VALUE`]);function Mn(e,t,n){if(!(t instanceof M))throw new p(null,`InvalidParameter`,null);if(!1===t.hasField(`directionType`))throw new p(null,`LogicError`,null,{reason:`missing directionType`});if(!1===t.hasField(`angleType`))throw new p(null,`LogicError`,null,{reason:`missing angleType`});let r=ln(tn(t.field(`directiontype`))),i=wn(e,dn(tn(t.field(`angletype`))),r);if(!(n instanceof M))throw new p(null,`InvalidParameter`,null);if(!1===n.hasField(`directionType`))throw new p(null,`LogicError`,null,{reason:`missing directionType`});if(!1===n.hasField(`outputType`))throw new p(null,`LogicError`,null,{reason:`missing angleType`});let a=ln(tn(n.field(`directiontype`))),o=n.hasField(`angleType`)?dn(tn(n.field(`angletype`))):null,s=jn.get(tn(n.field(`outputType`)));if(!a||!s)throw new p(null,`LogicError`,null,{reason:`conversion error`});if(!(o||s===`TEXT`&&n.hasField(`format`)))throw new p(null,`LogicError`,null,{reason:`invalid unit`});switch(s){case`VALUE`:return a===3||o===3?En(i,a,o):Tn(i,a,o);case`TEXT`:{let e=``;return n.hasField(`format`)&&(e=E(n.field(`format`))),e!==null&&e!==``||(e=Dn(o,a)),An(i,e,a)}default:throw new p(null,`InvalidParameter`,null)}}var Z=2654435761,Nn=2246822519,Pn=3266489917,Fn=668265263,In=374761393;function Ln(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return new Uint8Array(t)}var Rn=class{constructor(e){this._seed=e,this._totallen=0,this._bufs=[],this.init()}init(){return this._bufs=[],this._totallen=0,this}updateFloatArray(e){let t=[];for(let n of e)isNaN(n)?t.push(`NaN`):n===1/0?t.push(`Infinity`):n===-1/0?t.push(`-Infinity`):n===0?t.push(`0`):t.push(n.toString(16));this.update(Ln(t.join(``)))}updateIntArray(e){let t=Int32Array.from(e);this.update(new Uint8Array(t.buffer))}updateUint8Array(e){this.update(Uint8Array.from(e))}updateWithString(e){return this.update(Ln(e))}update(e){return this._bufs.push(e),this._totallen+=e.length,this}digest(){let e=new Uint8Array(this._totallen),t=0;for(let n of this._bufs)e.set(n,t),t+=n.length;return this.init(),this._xxHash32(e,this._seed)}_xxHash32(e,t=0){let n=e,r=t+In&4294967295,i=0;if(n.length>=16){let n=[t+Z+Nn&4294967295,t+Nn&4294967295,t+0&4294967295,t-Z&4294967295],a=e,o=a.length-16,s=0;for(i=0;(4294967280&i)<=o;i+=4){let e=i,t=a[e]+(a[e+1]<<8),r=a[e+2]+(a[e+3]<<8),o=t*Nn+(r*Nn<<16),c=n[s]+o&4294967295;c=c<<13|c>>>19;let l=65535&c,u=c>>>16;n[s]=l*Z+(u*Z<<16)&4294967295,s=s+1&3}r=(n[0]<<1|n[0]>>>31)+(n[1]<<7|n[1]>>>25)+(n[2]<<12|n[2]>>>20)+(n[3]<<18|n[3]>>>14)&4294967295}r=r+e.length&4294967295;let a=e.length-4;for(;i<=a;i+=4){let e=i,t=n[e]+(n[e+1]<<8),a=n[e+2]+(n[e+3]<<8);r=r+(t*Pn+(a*Pn<<16))&4294967295,r=r<<17|r>>>15,r=(65535&r)*Fn+((r>>>16)*Fn<<16)&4294967295}for(;i<n.length;++i)r+=n[i]*In,r=r<<11|r>>>21,r=(65535&r)*Z+((r>>>16)*Z<<16)&4294967295;return r^=r>>>15,r=((65535&r)*Nn&4294967295)+((r>>>16)*Nn<<16),r^=r>>>13,r=((65535&r)*Pn&4294967295)+((r>>>16)*Pn<<16),r^=r>>>16,r<0?r+4294967296:r}};function zn(e){return e.loadStatus===`loaded`&&e.user?.sourceJSON?e.user.sourceJSON:null}function Bn(e,t){return!!e&&me(e,t?.restUrl||``)}function Vn(e,t){if(!e||!t)return e===t;if(e.x===t.x&&e.y===t.y){if(e.hasZ){if(e.z!==t.z)return!1}else if(t.hasZ)return!1;if(e.hasM){if(e.m!==t.m)return!1}else if(t.hasM)return!1;return!0}return!1}function Q(e,r,i){if(e!==null)if(_(e)){if(r.updateUint8Array([61]),i.map.has(e)){let t=i.map.get(e);r.updateIntArray([61237541^t])}else{i.map.set(e,i.currentLength++);for(let t of e)Q(t,r,i);i.map.delete(e),i.currentLength--}r.updateUint8Array([199])}else if(N(e)){if(r.updateUint8Array([61]),i.map.has(e)){let t=i.map.get(e);r.updateIntArray([61237541^t])}else{i.map.set(e,i.currentLength++);for(let t of e.toArray())Q(t,r,i);i.map.delete(e),i.currentLength--}r.updateUint8Array([199])}else{if(x(e))return r.updateIntArray([e.toNumber()]),void r.updateUint8Array([241]);if(b(e))return r.updateIntArray([e.toNumber()]),void r.updateIntArray([257]);if(S(e))return r.updateIntArray([e.toNumber()]),void r.updateIntArray([263]);if(h(e))return r.updateIntArray([e.length]),r.updateWithString(e),void r.updateUint8Array([41]);if(m(e))r.updateUint8Array([!0===e?1:0,113]);else{if(v(e))return r.updateFloatArray([e]),void r.updateUint8Array([173]);if(e instanceof tt||e instanceof et)throw new p(i.context,`UnsupportedHashType`,i.node);if(!(e instanceof M)){if(A(e))throw new p(i.context,`UnsupportedHashType`,i.node);if(e instanceof t)return r.updateIntArray([3833836621]),r.updateIntArray([0]),r.updateFloatArray([e.x]),r.updateIntArray([1]),r.updateFloatArray([e.y]),e.hasZ&&(r.updateIntArray([2]),r.updateFloatArray([e.z])),e.hasM&&(r.updateIntArray([3]),r.updateFloatArray([e.m])),r.updateIntArray([3765347959]),void Q(e.spatialReference.wkid,r,i);if(e instanceof ce){r.updateIntArray([1266616829]);for(let t=0;t<e.rings.length;t++){let n=e.rings[t],a=[],o=null,s=null;for(let r=0;r<n.length;r++){let i=e.getPoint(t,r);if(r===0)o=i;else if(Vn(s,i))continue;s=i,r===n.length-1&&Vn(o,i)||a.push(i)}r.updateIntArray([1397116793,a.length]);for(let e=0;e<a.length;e++){let t=a[e];r.updateIntArray([3962308117,e]),Q(t,r,i),r.updateIntArray([2716288009])}r.updateIntArray([2278822459])}r.updateIntArray([3878477243]),Q(e.spatialReference.wkid,r,i);return}if(e instanceof n){r.updateIntArray([4106883559]);for(let t=0;t<e.paths.length;t++){let n=e.paths[t];r.updateIntArray([1397116793,n.length]);for(let a=0;a<n.length;a++)r.updateIntArray([3962308117,a]),Q(e.getPoint(t,a),r,i),r.updateIntArray([2716288009]);r.updateIntArray([2278822459])}r.updateIntArray([2568784753]),Q(e.spatialReference.wkid,r,i);return}if(e instanceof re){r.updateIntArray([588535921,e.points.length]);for(let t=0;t<e.points.length;t++){let n=e.getPoint(t);r.updateIntArray([t]),Q(n,r,i)}r.updateIntArray([1700171621]),Q(e.spatialReference.wkid,r,i);return}if(e instanceof ee)return r.updateIntArray([3483648373]),r.updateIntArray([0]),r.updateFloatArray([e.xmax]),r.updateIntArray([1]),r.updateFloatArray([e.xmin]),r.updateIntArray([2]),r.updateFloatArray([e.ymax]),r.updateIntArray([3]),r.updateFloatArray([e.ymin]),e.hasZ&&(r.updateIntArray([4]),r.updateFloatArray([e.zmax]),r.updateIntArray([5]),r.updateFloatArray([e.zmin])),e.hasM&&(r.updateIntArray([6]),r.updateFloatArray([e.mmax]),r.updateIntArray([7]),r.updateFloatArray([e.mmin])),r.updateIntArray([3622027469]),void Q(e.spatialReference.wkid,r,i);if(e instanceof ne)return r.updateIntArray([14]),e.wkid!==void 0&&e.wkid!==null&&r.updateIntArray([e.wkid]),e.wkt&&r.updateWithString(e.wkt),void(e.wkt2&&r.updateWithString(e.wkt2));throw Be(e)||Ie(e)||be(e),new p(i.context,`UnsupportedHashType`,i.node)}if(r.updateUint8Array([223]),i.map.has(e)){let t=i.map.get(e);r.updateIntArray([61237541^t])}else{i.map.set(e,i.currentLength++);for(let t of e.keys())r.updateIntArray([t.length]),r.updateWithString(t),r.updateUint8Array([251]),Q(e.field(t),r,i),r.updateUint8Array([239]);i.map.delete(e),i.currentLength--}r.updateUint8Array([73])}}else r.updateUint8Array([0,139])}function Hn(e,t){e.portal=function(e,n){return t(e,n,(t,r,i)=>(D(i,1,1,e,n),new et(E(i[0]))))},e.typeof=function(e,n){return t(e,n,(t,r,i)=>{D(i,1,1,e,n);let a=Ee(i[0]);if(a===`Unrecognized Type`)throw new p(e,`UnrecognizedType`,n);return a})},e.trim=function(e,n){return t(e,n,(t,r,i)=>(D(i,1,1,e,n),E(i[0]).trim()))},e.tohex=function(e,n){return t(e,n,(t,r,i)=>{D(i,1,1,e,n);let a=w(i[0]);return isNaN(a)?a:a.toString(16)})},e.upper=function(e,n){return t(e,n,(t,r,i)=>(D(i,1,1,e,n),E(i[0]).toUpperCase()))};let n=new o([`every-word`,`first-word`]);e.proper=function(e,r){return t(e,r,(t,i,a)=>{D(a,1,2,e,r);let o=(a.length>=2?n.lookup(E(a[1])):null)??`every-word`,s=/\s/,c=E(a[0]),l=``,u=!0;for(let e=0;e<c.length;e++){let t=c[e];s.test(t)?o===`every-word`&&(u=!0):t.toUpperCase()!==t.toLowerCase()&&(u?(t=t.toUpperCase(),u=!1):t=t.toLowerCase()),l+=t}return l})},e.lower=function(e,n){return t(e,n,(t,r,i)=>(D(i,1,1,e,n),E(i[0]).toLowerCase()))};let r=new o([`digits`,`digits-hyphen`,`digits-hyphen-braces`,`digits-hyphen-parentheses`]);e.guid=function(e,n){return t(e,n,(t,i,a)=>{switch(D(a,0,1,e,n),a.length>0?r.lookup(E(a[0])):null){case`digits`:return s().replace(`-`,``).replace(`-`,``).replace(`-`,``).replace(`-`,``);case`digits-hyphen`:return s();case`digits-hyphen-parentheses`:return`(`+s()+`)`;default:return`{`+s()+`}`}})},e.standardizeguid=function(e,n){return t(e,n,(t,i,a)=>{D(a,2,2,e,n);let o=E(a[0]);if(o===``||o===null)return``;let s=/^(\{|\()?(?<partA>[0-9a-z]{8})(-?)(?<partB>[0-9a-z]{4})(-?)(?<partC>[0-9a-z]{4})(-?)(?<partD>[0-9a-z]{4})(-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(o);if(!s)return``;let c=s.groups;switch(o=c.partA+`-`+c.partB+`-`+c.partC+`-`+c.partD+`-`+c.partE,r.lookup(E(a[1]))){case`digits`:return o.replace(`-`,``).replace(`-`,``).replace(`-`,``).replace(`-`,``);case`digits-hyphen`:return o;case`digits-hyphen-parentheses`:return`(`+o+`)`;default:return`{`+o+`}`}})},e.console=function(e,n){return t(e,n,(t,n,r)=>(r.length===0||(r.length===1?e.console(E(r[0])):e.console(E(r))),T))},e.mid=function(e,n){return t(e,n,(t,r,i)=>{D(i,2,3,e,n);let a=w(i[1]);if(isNaN(a))return``;if(a=Math.max(0,a),i.length===2)return E(i[0]).slice(a);let o=w(i[2]);return isNaN(o)?``:(o<0&&(o=0),E(i[0]).slice(a,a+o))})},e.find=function(e,n){return t(e,n,(t,r,i)=>{D(i,2,3,e,n);let a=0;if(i.length>2){if(a=w(k(i[2],0)),isNaN(a))return-1;a<0&&(a=0)}return E(i[1]).indexOf(E(i[0]),a)})},e.left=function(e,n){return t(e,n,(t,r,i)=>{D(i,2,2,e,n);let a=w(i[1]);return isNaN(a)?``:(a<0&&(a=0),E(i[0]).slice(0,a))})},e.right=function(e,n){return t(e,n,(t,r,i)=>{D(i,2,2,e,n);let a=w(i[1]);return isNaN(a)||a<=0?``:E(i[0]).slice(-a)})},e.split=function(e,n){return t(e,n,(t,r,i)=>{let a;D(i,2,4,e,n);let o=w(k(i[2],-1)),s=Pe(k(i[3],!1));if(o===-1||o===null||!0===s?a=E(i[0]).split(E(i[1])):(isNaN(o)&&(o=-1),o<-1&&(o=-1),a=E(i[0]).split(E(i[1]),o)),!1===s)return a;let c=[];for(let e=0;e<a.length&&!(o!==-1&&c.length>=o);e++)a[e]!==``&&a[e]!==void 0&&c.push(a[e]);return c})},e.text=function(e,n){return t(e,n,(t,r,i)=>(D(i,1,2,e,n),_e(i[0],i[1])))},e.concatenate=function(e,n){return t(e,n,(e,t,n)=>{let r=[];if(n.length<1)return``;if(_(n[0])){let e=k(n[2],``);for(let t=0;t<n[0].length;t++)r[t]=_e(n[0][t],e);return n.length>1?r.join(n[1]):r.join(``)}if(N(n[0])){let e=k(n[2],``);for(let t=0;t<n[0].length();t++)r[t]=_e(n[0].get(t),e);return n.length>1?r.join(n[1]):r.join(``)}for(let e=0;e<n.length;e++)r[e]=_e(n[e]);return r.join(``)})},e.reverse=function(e,n){return t(e,n,(t,r,i)=>{if(D(i,1,1,e,n),_(i[0])){let e=i[0].slice();return e.reverse(),e}if(N(i[0])){let e=i[0].toArray().slice();return e.reverse(),e}throw new p(e,`InvalidParameter`,n)})},e.replace=function(e,n){return t(e,n,(t,r,i)=>{D(i,3,4,e,n);let a=E(i[0]),o=E(i[1]),s=E(i[2]);return i.length!==4||Pe(i[3])?ve(a,o,s):a.replace(o,s)})},e.urlencode=function(e,n){return t(e,n,(t,r,i)=>{if(D(i,1,1,e,n),i[0]===null)return``;if(i[0]instanceof M){let e=``;for(let t of i[0].keys()){let n=i[0].field(t);e!==``&&(e+=`&`),e+=n===null?encodeURIComponent(t)+`=`:encodeURIComponent(t)+`=`+encodeURIComponent(n)}return e}return encodeURIComponent(E(i[0]))})},e.hash=function(e,n){return t(e,n,(t,r,i)=>{D(i,1,1,e,n);let a=new Rn(0);return Q(i[0],a,{context:e,node:n,map:new Map,currentLength:0}),a.digest()})},e.convertdirection=function(e,n){return t(e,n,(t,r,i)=>(D(i,3,3,e,n),Mn(i[0],i[1],i[2])))},e.fromjson=function(e,n){return t(e,n,(t,r,i)=>{if(D(i,1,1,e,n),!1===h(i[0]))throw new p(e,`InvalidParameter`,n);return M.convertJsonToArcade(JSON.parse(E(i[0])),F(e))})},e.tocharcode=function(e,n){return t(e,n,(t,r,i)=>{D(i,1,2,e,n);let a=w(k(i[1],0)),o=E(i[0]);if(o.length===0&&i.length===1)return null;if(o.length<=a||a<0)throw new p(e,`OutOfBounds`,n);return o.charCodeAt(a)})},e.tocodepoint=function(e,n){return t(e,n,(t,r,i)=>{D(i,1,2,e,n);let a=w(k(i[1],0)),o=E(i[0]);if(o.length===0&&i.length===1)return null;if(o.length<=a||a<0)throw new p(e,`OutOfBounds`,n);return o.codePointAt(a)})},e.fromcharcode=function(e,n){return t(e,n,(t,r,i)=>{if(i.length<1)throw new p(e,`WrongNumberOfParameters`,n);let a=i.map(e=>Math.trunc(w(e))).filter(e=>e>=0&&e<=65535);return a.length===0?null:String.fromCharCode.apply(null,a)})},e.fromcodepoint=function(e,n){return t(e,n,(t,r,i)=>{if(i.length<1)throw new p(e,`WrongNumberOfParameters`,n);let a;try{a=i.map(e=>Math.trunc(w(e))).filter(e=>e<=1114111&&e>>>0===e)}catch{return null}return a.length===0?null:String.fromCodePoint.apply(null,a)})},e.getuser=function(e,n){return t(e,n,(t,r,i)=>{D(i,0,2,e,n);let a=k(i[1],``);if(a=!0===a||!1===a?``:E(a),a!==null&&a!==``)return null;if(i.length===0||i[0]instanceof et){let t=null;if(t=e.services?.portal?e.services.portal:fe.getDefault(),i.length>0&&!Bn(i[0].field(`url`),t)||!t)return null;if(a===``){let n=zn(t);if(n){let t=JSON.parse(JSON.stringify(n));for(let e of[`lastLogin`,`created`,`modified`])t[e]!==void 0&&t[e]!==null&&(t[e]=new Date(t[e]));return M.convertObjectToArcadeDictionary(t,F(e))}}return null}throw new p(e,`InvalidParameter`,n)})},e.getenvironment=function(e,n){return t(e,n,(t,r,i)=>(D(i,0,0,e,n),M.convertObjectToArcadeDictionary(xe(F(e),e.spatialReference),F(e),!0)))},e.standardizefilename=function(e,n){return t(e,n,(e,t,n)=>{D(n,1,1,e,t);let[r]=n;if(r==null)return``;if(!h(r))throw new p(e,`InvalidParameter`,t);return r.replaceAll(/[<>"?*]/g,`_`).replaceAll(/[/\\|]/g,`-`).replaceAll(`:`,`, `)})}}var Un;async function Wn(){Un??(Un=await r(()=>import(`./geodeticDistanceOperator-5yRHvNCV.js`),__vite__mapDeps([0,1,2,3])),await Un.load())}function $(e){let t=e.track;if(t==null)throw new p(e,`InvalidParameter`,null);return t}function Gn(e,t,n,r){let i=Math.max(0,Kn(e,t)),a=Math.max(0,Kn(e,n));return e.observations.slice(i,a).map((e,t)=>r(e,t+i))}function Kn(e,t){return e.currentObservationIndex+t}function qn(e,t){let n=Kn(e,t);if(n<0||n>=e.observations.length)throw new p(null,`InvalidParameter`,null);return n}function Jn(e,t){let{stats:n}=e.observations[t];if(n.totalDistance!=null)return n.totalDistance;if(t===0)return n.totalDistance=0;let r,i=0;for(r=t-1;r>0;r--){let t=e.observations[r].stats;if(t.totalDistance!=null){i=t.totalDistance;break}}for(let n=r+1;n<=t;n++){let t=e.observations[n];i+=Yn(e,n),t.stats.totalDistance=i}return i}function Yn(e,t){let n=e.observations[t],r=n.stats;if(r.distance!=null)return r.distance;if(t===0)return r.distance=0;let i=e.observations[t-1];return r.distance=Un.execute(i.feature.geometry(),n.feature.geometry())}function Xn(e,t){let n=e.observations[t],r=n.stats;if(r.speed!=null)return r.speed;if(t===0)return r.speed=0;let i=e.observations[t-1],a=n.endTime-i.startTime;return a<=0?r.speed=0:r.speed=Yn(e,t)/(a/1e3)}function Zn(e,t){let n=e.observations[t],r=n.stats;if(r.acceleration!=null)return r.acceleration;if(t===0)return r.acceleration=0;let i=e.observations[t-1],a=n.endTime-i.startTime;if(a<=0)return r.acceleration=0;let o=Xn(e,t),s=Xn(e,t-1);return r.acceleration=(o-s)/(a/1e3)}function Qn(e,t){e[y(`TrackIndex`)]=function(e,n){return t(e,n,(e,t,n)=>(D(n,0,0,e,t),$(e).currentObservationIndex))},e[y(`TrackWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{D(n,2,2,e,t);let r=w(n[0]),i=w(n[1]);return Gn($(e),r,i,e=>e.feature)})},e[y(`TrackFieldWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{D(n,3,3,e,t);let r=E(n[0]),i=w(n[1]),a=w(n[2]);return Gn($(e),i,a,e=>e.feature.field(r))})},e[y(`TrackGeometryWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{D(n,2,2,e,t);let r=w(n[0]),i=w(n[1]);return Gn($(e),r,i,e=>e.feature.geometry())})},e[y(`TrackStartTime`)]=function(e,n){return t(e,n,(e,t,n)=>(D(n,0,0,e,t),i.epochToArcadeDate($(e).observations[0].startTime,e.timeZone??`system`)))},e[y(`TrackCurrentTime`)]=function(e,n){return t(e,n,(e,t,n)=>{D(n,0,0,e,t);let r=$(e);return i.epochToArcadeDate(r.observations[r.currentObservationIndex].startTime,e.timeZone??`system`)})},e[y(`TrackDuration`)]=function(e,n){return t(e,n,(e,t,n)=>{D(n,0,0,e,t);let r=$(e);return r.observations[r.currentObservationIndex].startTime-r.observations[0].startTime})},e[y(`TrackCurrentDistance`)]=function(e,n){return t(e,n,(e,t,n)=>{D(n,0,0,e,t);let r=$(e);return Jn(r,r.currentObservationIndex)})},e[y(`TrackDistanceAt`)]=function(e,n){return t(e,n,(e,t,n)=>{D(n,1,1,e,t);let r=w(n[0]),i=$(e);return Jn(i,qn(i,r))})},e[y(`TrackDistanceWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{D(n,2,2,e,t);let r=w(n[0]),i=w(n[1]),a=$(e);return Gn(a,r,i,(e,t)=>Jn(a,t))})},e[y(`TrackCurrentSpeed`)]=function(e,n){return t(e,n,(e,t,n)=>{D(n,0,0,e,t);let r=$(e);return Xn(r,r.currentObservationIndex)})},e[y(`TrackSpeedAt`)]=function(e,n){return t(e,n,(e,t,n)=>{D(n,1,1,e,t);let r=w(n[0]),i=$(e);return Xn(i,qn(i,r))})},e[y(`TrackSpeedWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{D(n,2,2,e,t);let r=w(n[0]),i=w(n[1]),a=$(e);return Gn(a,r,i,(e,t)=>Xn(a,t))})},e[y(`TrackCurrentAcceleration`)]=function(e,n){return t(e,n,(e,t,n)=>{D(n,0,0,e,t);let r=$(e);return Zn(r,r.currentObservationIndex)})},e[y(`TrackAccelerationAt`)]=function(e,n){return t(e,n,(e,t,n)=>{D(n,1,1,e,t);let r=w(n[0]),i=$(e);return Zn(i,qn(i,r))})},e[y(`TrackAccelerationWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{D(n,2,2,e,t);let r=w(n[0]),i=w(n[1]),a=$(e);return Gn(a,r,i,(e,t)=>Zn(a,t))})}}export{ht as _,It as a,nt as b,At as c,vt as d,_t as f,gt as g,ft as h,Lt as i,St as l,mt as m,Wn as n,Ft as o,yt as p,Hn as r,Pt as s,Qn as t,bt as u,it as v,at as y};