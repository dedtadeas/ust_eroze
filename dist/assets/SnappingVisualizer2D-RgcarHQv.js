import{Ax as e,Bg as t,Gd as n,IC as r,Id as i,Jg as a,Nv as o,Ux as s,Yd as c,bv as l,id as u,lp as d,qh as f,vT as p}from"./index-BqmCqmfp.js";import{_ as m}from"./LineSnappingHint-BAcwqgNT.js";import{n as h}from"./ParallelSnappingHint-Knbe-U69.js";import{b as g}from"./SnappingContext-BiPKdvZN.js";var _=class extends g{constructor(e){super(),this._graphicsLayer=e,this._symbolPairingsByType=new Map}visualizeIntersectionPoint(t,n){return this._visualizeSnappingIndicator(new e({x:t.intersectionPoint[0],y:t.intersectionPoint[1],spatialReference:n.spatialReference}),this._getOrCreateSymbol(`intersectionPoint`,n.view.effectiveTheme.accentColor))}visualizePoint(t,n){return this._visualizeSnappingIndicator(new e({x:t.point[0],y:t.point[1],spatialReference:n.spatialReference}),this._getOrCreateSymbol(`point`,n.view.effectiveTheme.accentColor))}visualizeLine(e,n){return this._visualizeSnappingIndicator(new t({paths:[[[...e.lineStart],[...e.lineEnd]]],spatialReference:r(s,n.spatialReference)}),this._getOrCreateSymbol(`line`,n.view.effectiveTheme.accentColor))}visualizeParallelSign(e,n){return this._visualizeSnappingIndicator(new t({paths:[[[...e.lineStart],[...e.lineEnd]]],spatialReference:r(s,n.spatialReference)}),this._getOrCreateSymbol(`parallelSign`,n.view.effectiveTheme.accentColor))}visualizeRightAngleQuad(e,n){let i=u(),c=u(),d=a();l(i,m(e.centerVertex),m(e.previousVertex)),l(c,m(e.nextVertex),m(e.previousVertex)),o(d,i,c);let f=`rightAngleQuad${d[2]<0?45:225}`;return this._visualizeSnappingIndicator(new t({paths:[[[...e.previousVertex],[...e.centerVertex],[...e.nextVertex]]],spatialReference:r(s,n.spatialReference)}),this._getOrCreateSymbol(f,n.view.effectiveTheme.accentColor))}_visualizeSnappingIndicator(e,t){let n=new i({geometry:e,symbol:t});return this._graphicsLayer.add(n),p(()=>{this._graphicsLayer.remove(n)})}_getOrCreateSymbol(e,t){let n=this._symbolPairingsByType;return n.get(e)?.color!==t&&n.set(e,{color:t,symbol:v(e,t)}),n.get(e).symbol}};function v(e,t){let r=[...t.toRgb(),255*t.a];switch(e){case`point`:return new n({outline:{width:.5,color:[0,0,0,1]},size:10,color:t});case`intersectionPoint`:return new n({outline:new c({width:1.5,color:t}),size:15,color:[0,0,0,0]});case`line`:return new d({data:{type:`CIMSymbolReference`,symbol:{type:`CIMLineSymbol`,symbolLayers:[{type:`CIMSolidStroke`,enable:!0,capStyle:`Butt`,joinStyle:`Round`,miterLimit:10,width:f(h.lineHintWidthTarget),color:r}]}}});case`parallelSign`:return new d({data:{type:`CIMSymbolReference`,symbol:{type:`CIMLineSymbol`,symbolLayers:[{type:`CIMVectorMarker`,enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:`Relative`,size:5,markerPlacement:{type:`CIMMarkerPlacementOnLine`,placePerPart:!0,angleToLine:!0,relativeTo:`LineMiddle`},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:`CIMMarkerGraphic`,geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:`CIMPolygonSymbol`,symbolLayers:[{type:`CIMSolidFill`,enable:!0,color:r}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:`CIMVectorMarker`,enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:`Relative`,size:5,markerPlacement:{type:`CIMMarkerPlacementOnLine`,placePerPart:!0,angleToLine:!0,relativeTo:`LineMiddle`},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:`CIMMarkerGraphic`,geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:`CIMPolygonSymbol`,symbolLayers:[{type:`CIMSolidFill`,enable:!0,color:r}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}});case`rightAngleQuad45`:case`rightAngleQuad225`:{let n=e===`rightAngleQuad45`?45:225;return new d({data:{type:`CIMSymbolReference`,symbol:{type:`CIMLineSymbol`,symbolLayers:[{type:`CIMVectorMarker`,enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:`Relative`,size:f(h.rightAngleHintSize),rotation:n,markerPlacement:{type:`CIMMarkerPlacementOnVertices`,placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:`CIMMarkerGraphic`,geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:`CIMLineSymbol`,symbolLayers:[{type:`CIMSolidStroke`,enable:!0,capStyle:`Butt`,joinStyle:`Round`,miterLimit:10,width:f(h.rightAngleHintOutlineSize),color:r},{type:`CIMSolidFill`,enable:!0,color:[...t.toRgb(),255*t.a*.4]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}})}}}export{_ as t};