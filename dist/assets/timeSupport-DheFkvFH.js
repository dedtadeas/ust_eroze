const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/intersectsOperator-ClaQZN3K.js","assets/UnitFactory-J9WMNXdY.js","assets/index-BqmCqmfp.js","assets/index-kIqmb12G.css","assets/Envelope2D-BNwQDrOT.js","assets/Point2D-UYEfE6HP.js","assets/OperatorDefinitions-DQQu7-BK.js","assets/SimpleGeometryCursor-CI9GIWKa.js","assets/Transformation2D-DVoPQwGC.js","assets/OperatorIntersects-2BeH-u8U.js","assets/jsonConverter-DiNOXEUJ.js","assets/containsOperator-CdaGtqaE.js","assets/crossesOperator-DhgdkzX0.js","assets/OperatorCrosses-CYPcTIGt.js","assets/disjointOperator-BjG8HKOy.js","assets/overlapsOperator-BaczoQAZ.js","assets/OperatorOverlaps-WzZ0LOWT.js","assets/touchesOperator-DbqhpXAW.js","assets/OperatorTouches-8-hCpnzo.js","assets/withinOperator-n3qwdbGR.js","assets/OperatorWithin-BfiKgt0H.js"])))=>i.map(i=>d[i]);
import{$m as e,Cw as t,Dx as n,Ox as r,Tx as i,WS as a,Xm as o,_E as s,eh as c,wx as l,yD as u}from"./index-BqmCqmfp.js";import{t as d}from"./OptimizedGeometry-f3I9Z6C1.js";import{h as f,i as p,n as m,p as h,r as g,s as _,t as v,u as y}from"./featureConversionUtils-7vyVIZ6j.js";import{c as b}from"./queryUtils-BA7HiGeg.js";var x=new d,S=new d,C=new d,w={esriGeometryPoint:g,esriGeometryPolyline:m,esriGeometryPolygon:_,esriGeometryMultipoint:v};function T(e,t,n,r=e.hasZ,i=e.hasM){if(t==null)return null;let a=e.hasZ&&r,o=e.hasM&&i;if(n){let s=f(C,t,e.hasZ,e.hasM,`esriGeometryPoint`,n,r,i);return g(s,a,o)}return g(t,a,o)}function E(e,t,n,r,i,a,o=t,s=n){let c=t&&o,l=n&&s,u=r==null?null:`coords`in r?r:r.geometry;if(u==null)return null;if(i){let r=h(S,u,t,n,e,i,o,s);return a&&(r=f(C,r,c,l,e,a)),w[e]?.(r,c,l)??null}if(a){let r=f(C,u,t,n,e,a,o,s);return w[e]?.(r,c,l)??null}return p(x,u,t,n,o,s),w[e]?.(x,c,l)??null}function D(e){return e&&O in e?JSON.parse(JSON.stringify(e,k)):e}var O=`_geVersion`,k=(e,t)=>e===O?void 0:t;function A(e){return e===`mesh`?i:l(e)}function j(e,t){return e?t?4:3:t?3:2}function M(e,t,n,r){return P(e,t,n,r.coords[0],r.coords[1])}function N(e,t,n,r,i,a){let o=j(i,a),{coords:s,lengths:c}=r;if(!c)return!1;for(let r=0,i=0;r<c.length;r++,i+=o)if(!P(e,t,n,s[i],s[i+1]))return!1;return!0}function P(e,t,n,r,i){if(!e)return!1;let a=j(t,n),{coords:o,lengths:s}=e,c=!1,l=0;for(let e of s)c=F(c,o,a,l,e,r,i),l+=e*a;return c}function F(e,t,n,r,i,a,o){let s=e,c=r;for(let e=r,l=r+i*n;e<l;e+=n){c=e+n,c===l&&(c=r);let i=t[e],u=t[e+1],d=t[c],f=t[c+1];(u<o&&f>=o||f<o&&u>=o)&&i+(o-u)/(f-u)*(d-i)<a&&(s=!s)}return s}var I=`unsupported-query`,L={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultiPatch:!1,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultiPatch:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};function R(e){return e!=null&&!0===L.spatialRelationship[e]}function z(t){return t!=null&&!0===L.queryGeometry[e(t)]}function B(e){return e!=null&&!0===L.layerGeometry[e]}var V={esriSpatialRelIntersects:()=>t(()=>import(`./intersectsOperator-ClaQZN3K.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])),esriSpatialRelContains:()=>t(()=>import(`./containsOperator-CdaGtqaE.js`),__vite__mapDeps([11,1,2,3,4,5,6,7,8,10])),esriSpatialRelCrosses:()=>t(()=>import(`./crossesOperator-DhgdkzX0.js`),__vite__mapDeps([12,1,2,3,4,5,6,7,8,13,10])),esriSpatialRelDisjoint:()=>t(()=>import(`./disjointOperator-BjG8HKOy.js`),__vite__mapDeps([14,1,2,3,4,5,6,7,8,10])),esriSpatialRelEnvelopeIntersects:null,esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:()=>t(()=>import(`./overlapsOperator-BaczoQAZ.js`),__vite__mapDeps([15,1,2,3,4,5,6,7,8,16,10])),esriSpatialRelTouches:()=>t(()=>import(`./touchesOperator-DbqhpXAW.js`),__vite__mapDeps([17,1,2,3,4,5,6,7,8,18,10])),esriSpatialRelWithin:()=>t(()=>import(`./withinOperator-n3qwdbGR.js`),__vite__mapDeps([19,1,2,3,4,5,6,7,8,20,10])),esriSpatialRelRelation:null};function H(e){let t=V[e];if(t==null)throw Error(`Cannot load unsupported spatial operator: ${e}`);return t()}async function U(e,t,i,a,s){if(c(t)){if(i===`esriGeometryPoint`&&(e===`esriSpatialRelIntersects`||e===`esriSpatialRelContains`)){let e=y(new d,t,!1,!1);return t=>M(e,!1,!1,t)}if(i===`esriGeometryMultipoint`){let n=y(new d,t,!1,!1);if(e===`esriSpatialRelContains`)return e=>N(n,!1,!1,e,a,s)}}if(o(t)){if(i===`esriGeometryPoint`&&(e===`esriSpatialRelIntersects`||e===`esriSpatialRelContains`))return e=>r(t,E(i,a,s,e));if(i===`esriGeometryMultipoint`&&e===`esriSpatialRelContains`)return e=>n(t,E(i,a,s,e));if(e===`esriSpatialRelIntersects`){let e=A(i);return n=>e(t,E(i,a,s,n))}}e===`esriSpatialRelEnvelopeIntersects`&&(e=`esriSpatialRelIntersects`);let l=await H(e);return e=>l.execute(t,E(i,a,s,e))}async function W(e,t,n){let{spatialRel:r,geometry:i}=e;if(i){if(!R(r))throw new s(I,`Unsupported query spatial relationship`,{query:e});if(a(i.spatialReference)&&a(n)){if(!z(i))throw new s(I,`Unsupported query geometry type`,{query:e});if(!B(t))throw new s(I,`Unsupported layer geometry type`,{query:e});if(e.outSR)return b(e.geometry?.spatialReference,e.outSR)}}}function G(e){if(o(e))return!0;if(c(e)){for(let t of e.rings)if(t.length!==5||t[0][0]!==t[1][0]||t[0][0]!==t[4][0]||t[2][0]!==t[3][0]||t[0][1]!==t[3][1]||t[0][1]!==t[4][1]||t[1][1]!==t[2][1])return!1;return!0}return!1}async function K(e,t){if(!e)return null;let n=t.featureAdapter,{startTimeField:r,endTimeField:i}=e,a=1/0,o=-1/0;if(r&&i)await t.forEach(e=>{let t=n.getAttribute(u(e),r),s=n.getAttribute(u(e),i);t==null||isNaN(t)||(a=Math.min(a,t)),s==null||isNaN(s)||(o=Math.max(o,s))});else{let e=r||i;await t.forEach(t=>{let r=n.getAttribute(u(t),e);r==null||isNaN(r)||(a=Math.min(a,r),o=Math.max(o,r))})}return{start:a,end:o}}function q(e,t,n){if(!t||!e)return null;let{startTimeField:r,endTimeField:i}=e;if(!r&&!i)return null;let{start:a,end:o}=t;if(a===null&&o===null)return null;if(a===void 0&&o===void 0)return X();let s=n.getAttributeAsTimestamp?.bind(n)??n.getAttribute.bind(n);return r&&i?J(s,r,i,a,o):Y(s,r||i,a,o)}function J(e,t,n,r,i){return r!=null&&i!=null?a=>{let o=e(a,t),s=e(a,n);return(o==null||o<=i)&&(s==null||s>=r)}:r==null?i==null?void 0:n=>{let r=e(n,t);return r==null||r<=i}:t=>{let i=e(t,n);return i==null||i>=r}}function Y(e,t,n,r){return n!=null&&r!=null&&n===r?r=>e(r,t)===n:n!=null&&r!=null?i=>{let a=e(i,t);return a!=null&&a>=n&&a<=r}:n==null?r==null?void 0:n=>{let i=e(n,t);return i!=null&&i<=r}:r=>{let i=e(r,t);return i!=null&&i>=n}}function X(){return()=>!1}export{W as a,T as c,G as i,K as n,E as o,U as r,D as s,q as t};