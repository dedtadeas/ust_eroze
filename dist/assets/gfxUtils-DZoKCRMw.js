import{Sw as e,Wy as t,eg as n,nC as r,qn as i}from"./index-BqmCqmfp.js";import{i as a}from"./cimSymbolUtils-1FVTTBxd.js";var o=`picture-fill`,s=`simple-fill`,c=`simple-line`,l=`simple-marker`,u=`text`,d=`cim`,f=new Map([[`dash`,[4,3]],[`dashdot`,[4,3,1,3]],[`dot`,[1,3]],[`longdash`,[8,3]],[`longdashdot`,[8,3,1,3]],[`longdashdotdot`,[8,3,1,3,1,3]],[`shortdash`,[4,1]],[`shortdashdot`,[4,1,1,1]],[`shortdashdotdot`,[4,1,1,1,1,1]],[`shortdot`,[1,1]],[`solid`,[]]]),p=new i(1e3);function m(e){let t=e.style,i=null;if(e)switch(e.type){case l:t!==`cross`&&t!==`x`&&(i=e.color);break;case s:t&&t!==`solid`?t!==`none`&&(i={type:`pattern`,x:0,y:0,src:r(`esri/symbols/patterns/${t}.png`),width:5,height:5}):i=e.color;break;case o:i={type:`pattern`,src:e.url,width:n(e.width)*e.xscale,height:n(e.height)*e.yscale,x:n(e.xoffset),y:n(e.yoffset)};break;case u:i=e.color;break;case d:i=a(e)}return i}function h(t,n){let r=t+`-`+n,i=p.get(r);return i==null?e(t,{responseType:`image`}).then(e=>{let t=e.data,i=t.naturalWidth,a=t.naturalHeight,o=document.createElement(`canvas`);o.width=i,o.height=a;let s=o.getContext(`2d`);s.fillStyle=n,s.fillRect(0,0,i,a),s.globalCompositeOperation=`destination-in`,s.drawImage(t,0,0);let c=o.toDataURL();return p.put(r,c),c}):Promise.resolve(i)}function g(e){if(!e)return null;let t=null;switch(e.type){case s:case o:case l:t=g(e.outline);break;case c:{let r=n(e.width);e.style!=null&&e.style!==`none`&&r!==0&&(t={color:e.color,style:v(e.style),width:r,cap:e.cap,join:e.join===`miter`?n(e.miterLimit):e.join},t.dashArray=_(t).join(`,`)||`none`);break}default:t=null}return t}function _(e){if(!e?.style)return[];let{dashArray:t,style:n,width:r}=e;if(typeof t==`string`&&t!==`none`)return t.split(`,`).map(e=>Number(e));let i=r??0,a=f.has(n)?f.get(n).map(e=>e*i):[];if(e.cap!==`butt`)for(let[e,t]of a.entries())a[e]=e%2==1?t+i:Math.max(t-i,1);return a}var v=(()=>{let e={};return t=>{if(e[t])return e[t];let n=t.replaceAll(`-`,``);return e[t]=n,n}})(),y=new t([128,128,128]);export{v as a,m as i,h as n,g as o,_ as r,y as t};