import{CD as e,Kb as t,La as n,Pa as r,Ra as i,SC as a,Wb as o,ai as s,ct as c,gp as l,kC as u}from"./index-BqmCqmfp.js";import"./memoryEstimations-O7VgDRVG.js";import"./OptimizedFeature-Dx4_lHip.js";import"./OptimizedGeometry-f3I9Z6C1.js";import"./OptimizedFeatureSet-DlHqIhoP.js";import"./featureConversionUtils-7vyVIZ6j.js";import"./streamLayerUtils-BMw-RtDi.js";import"./QueueProcessor-C8_CgXms.js";import"./earcut-Drx511Ix.js";import"./layerViewUtils-Bbe7IKvz.js";import"./colorUtils-uG2qTogT.js";import"./timeSupport-DheFkvFH.js";import"./queryUtils-BA7HiGeg.js";import"./quantizationUtils-C5shine1.js";import"./normalizeUtilsSync-Btn24Gtg.js";import"./GeometryUtils-DBkUrkz1.js";import"./VertexAttributeLocations-IAhvKZqd.js";import"./VertexElementDescriptor-BGWnA0Rs.js";import"./labelPoint-B7zLrA23.js";import"./callExpressionWithCursor-kl7GHpJ1.js";import"./FeatureMetadata-H6WAS0Lx.js";import"./fontUtils-CWolFklQ.js";import"./CIMSymbolHelper-bdBsF42t.js";import"./rasterizingUtils-B0Pd5uE0.js";import"./Rect-BMNJQxpm.js";import"./BoundingBox-DnR5UeUT.js";import"./BidiEngine-CpIovbIK.js";import"./callExpressionWithFeature-BK7JnF3H.js";import"./OverrideHelper-BKNowJt8.js";import"./densifyCurvedGeometry-C2XDhl14.js";import"./config-BSvujflG.js";import"./dehydratedFeatureComparison-Ch8xWl-8.js";import"./WGLContainer-Caxzva6E.js";import"./utils-DBLYSlue.js";import"./ProgramTemplate-ks-pn-xm.js";import"./VertexArrayObject-Dzn28byJ.js";import"./BufferObject-lp8QWmVQ.js";import"./VertexBuffer-DL5rIQzc.js";import"./vec3f32-CZ7wi78s.js";import"./Container-DgT8F3N0.js";import"./EffectView-CvH-XuUh.js";import"./GraphShaderModule-D5xwSwIQ.js";import"./FramebufferObject-CkeUwNOD.js";import"./ShaderBuilder-C3C7fUwK.js";import{t as d}from"./LayerView2D-DVE2Teoj.js";import{t as f}from"./LayerView-DKEUJRIQ.js";import"./UpdateTracking2D-yw0xaCSk.js";import"./TechniqueInstance-BhM4b8eb.js";import"./TileContainer-BwjyXNO3.js";import"./FeatureCommandQueue-COnDeivB.js";import"./constants-BOI_CTg-.js";import"./utils-CY7cI7hp.js";import"./AGraphicContainer-ShIe2ypS.js";import{t as p}from"./GraphicContainer-DNktOekL.js";import"./ComputedAttributeStorage-D_u4lyEq.js";import{t as m}from"./GraphicsView2D-Dg0AUWQu.js";import"./dehydratedFeatures-DW1qFa9i.js";var h=Symbol(`isGeoRSSGraphicOrigin`),g,_=class extends n{get[(g=h,i)](){return this.layer}constructor(e){super(),this[g]=!0,this.type=`geo-rss`,this.layer=e}get id(){return this.layer.id}},v=class extends d(f){constructor(){super(...arguments),this._graphicsViewMap={},this.graphicsViews=[]}async hitTest(e,t){if(!this.graphicsViews.length)return null;let n=this.layer;return this.graphicsViews.reverse().flatMap(t=>t.hitTest(e)).map(t=>({type:`graphic`,graphic:t,layer:n,mapPoint:e}))}update(e){if(this.graphicsViews)for(let t of this.graphicsViews)t.processUpdate(e)}attach(){this.addAttachHandles([t(()=>this.layer?.featureCollections,e=>{this._clear();let{layer:t}=this,n=new _(this.layer);for(let{popupInfo:i,featureSet:o,layerDefinition:s}of e){let e=r.fromJSON(o),u=new a(e.features),d=i?l.fromJSON(i):null;u.forEach(e=>{e.layer=t,e.sourceLayer=t,e.popupTemplate=d,e.origin=n});let f=s.drawingInfo,h=c(f.renderer),g=new m({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:u,renderer:h,container:new p(this.view.featuresTilingScheme)});this._graphicsViewMap[e.geometryType]=g,e.geometryType!==`polygon`||this.layer.polygonSymbol?e.geometryType!==`polyline`||this.layer.lineSymbol?e.geometryType!==`point`||this.layer.pointSymbol||(this.layer.pointSymbol=h.symbol):this.layer.lineSymbol=h.symbol:this.layer.polygonSymbol=h.symbol,this.graphicsViews.push(g),this.container.addChild(g.container)}},o),t(()=>this.layer?.polygonSymbol,e=>{this._graphicsViewMap.polygon.renderer=new s({symbol:e})},o),t(()=>this.layer?.lineSymbol,e=>{this._graphicsViewMap.polyline.renderer=new s({symbol:e})},o),t(()=>this.layer?.pointSymbol,e=>{this._graphicsViewMap.point.renderer=new s({symbol:e})},o)])}detach(){this._clear()}moveEnd(){}viewChange(){for(let e of this.graphicsViews)e.viewChange()}_clear(){this.container.removeAllChildren();for(let e of this.graphicsViews)e.destroy();this._graphicsViewMap={},this.graphicsViews.length=0}};v=e([u(`esri.views.2d.layers.GeoRSSLayerView2D`)],v);var y=v;export{y as default};