import{Qa as e,Xa as t,eo as n,no as r}from"./index-BqmCqmfp.js";import"./originUtils-Xpg5-Q2D.js";import"./resourceUtils-CEABprin.js";import{n as i}from"./resourceUtils-Dtqy_ILo.js";import"./saveUtils-DsVVlvmj.js";import{n as a,t as o}from"./utils-yJnMCzaE.js";var s=`Media Layer`,c=`media-layer-save`,l=`media-layer-save-as`,u=[`media-layer:unsupported-source`];function d(e){return{isValid:e.type===`media`,errorMessage:`Layer.type should be 'media'`}}function f(e){return t(e,`portal-item`,!0)}function p(e){return Promise.resolve(e.layerJSON)}async function m(e,t){t.extent=e.fullExtent?await r(e.fullExtent):null}async function h(t,r){r.title||=t.title,await m(t,r),n(r,e.METADATA)}async function g(e,t){return a({layer:e,itemType:s,validateLayer:d,createJSONContext:e=>f(e),createItemData:p,errorNamePrefix:c,supplementalUnsupportedErrors:u,setItemProperties:m,saveResources:(t,n)=>i(e.resourceReferences,n)},t)}async function _(e,t,n){return o({layer:e,itemType:s,validateLayer:d,createJSONContext:e=>f(e),createItemData:p,errorNamePrefix:l,supplementalUnsupportedErrors:u,newItem:t,setItemProperties:h,saveResources:(t,n)=>i(e.resourceReferences,n)},n)}export{g as save,_ as saveAs};