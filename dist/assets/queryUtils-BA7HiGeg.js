const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/geodesicBufferOperator-B5AO4U75.js","assets/index-BqmCqmfp.js","assets/index-kIqmb12G.css","assets/SimpleGeometryCursor-CI9GIWKa.js","assets/operatorGeodesicBuffer-DoDy4Tre.js","assets/geodeticCurveType-hqCRc72W.js"])))=>i.map(i=>d[i]);
import{Cw as e,Fu as t,Fx as n,IS as r,Jm as i,Mx as a,NS as o,Nx as s,Vw as c,WS as l,Xm as u,Zm as d,_E as f,aC as p,eh as m,gg as h,hS as g,kS as _,nD as v,n_ as y,og as b,pg as x,zS as S}from"./index-BqmCqmfp.js";var C=[0,0];function w(e,t){if(!t)return null;if(`x`in t){let n={x:0,y:0};return[n.x,n.y]=e(t.x,t.y,C),t.z!=null&&(n.z=t.z),t.m!=null&&(n.m=t.m),n}if(`xmin`in t){let n={xmin:0,ymin:0,xmax:0,ymax:0};return[n.xmin,n.ymin]=e(t.xmin,t.ymin,C),[n.xmax,n.ymax]=e(t.xmax,t.ymax,C),t.hasZ&&(n.zmin=t.zmin,n.zmax=t.zmax,n.hasZ=!0),t.hasM&&(n.mmin=t.mmin,n.mmax=t.mmax,n.hasM=!0),n}return`rings`in t?{rings:T(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:`paths`in t?{paths:T(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:`points`in t?{points:E(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:null}function T(e,t){let n=[];for(let r of e)n.push(E(r,t));return n}function E(e,t){let n=[];for(let r of e){let e=t(r[0],r[1],[0,0]);n.push(e),r.length>2&&e.push(r[2]),r.length>3&&e.push(r[3])}return n}async function D(e,t){if(!e||!t)return;let n=Array.isArray(e)?e.map(e=>e.geometry==null?null:e.geometry.spatialReference).filter(v):[e];await h(n.map(e=>({source:e,dest:t})))}var O=w.bind(null,n),k=w.bind(null,s);function A(e,t,n,i){if(!e)return null;if(n||(n=t,t=e.spatialReference),!l(t)||!l(n)||r(t,n))return e;if(a(t,n)){let t=_(n)?O(e):k(e);return t.spatialReference=n,t}return b([e],t,n,i)[0]}var j=new class{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(e,t,n,i){if(!e?.length||!t||!n||r(t,n))return e;let a={geometries:e,inSpatialReference:t,outSpatialReference:n,options:i,resolve:c()};return this._jobs.push(a),this._timer??=setTimeout(this._process,10),a.resolve.promise}_process(){this._timer=null;let e=this._jobs.shift();if(!e)return;let{geometries:t,inSpatialReference:n,outSpatialReference:r,resolve:i,options:o}=e;a(n,r)&&o?.extendedParams==null?_(r)?i(t.map(O)):i(t.map(k)):i(b(t,n,r,o)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};function M(e,t,n,r){return j.push(e,t,n,r)}var N=new p({esriSRUnit_Meter:`meters`,esriSRUnit_Kilometer:`kilometers`,esriSRUnit_Foot:`feet`,esriSRUnit_StatuteMile:`miles`,esriSRUnit_NauticalMile:`nautical-miles`,esriSRUnit_USNauticalMile:`us-nautical-miles`}),P=Object.freeze({}),F=`frequency`;async function I(e,t,n){let r=e.bin;return r.onField&&=r.onField.trim(),r.onExpression?.value&&(r.onExpression.value=r.onExpression.value.trim()),r.splitBy&&(r.splitBy.value&&(r.splitBy.value=r.splitBy.value.trim()),r.splitBy.outAlias&&(r.splitBy.outAlias=r.splitBy.outAlias.trim())),r.stackBy&&(r.stackBy.value&&(r.stackBy.value=r.stackBy.value.trim()),r.stackBy.outAlias&&(r.stackBy.outAlias=r.stackBy.outAlias.trim())),`normalizationField`in r.parameters&&r.parameters.normalizationField&&(r.parameters.normalizationField=r.parameters.normalizationField.trim()),e.outStatistics?.length||(e.outStatistics=[{statisticType:`count`,onStatisticField:`1`,outStatisticFieldName:F}]),L(e,t,n)}async function L(e,t,n){let{outFields:r,orderByFields:i,groupByFieldsForStatistics:a,outStatistics:o}=e;if(r)for(let e=0;e<r.length;e++)r[e]=r[e].trim();if(i)for(let e=0;e<i.length;e++)i[e]=i[e].trim();if(a)for(let e=0;e<a.length;e++)a[e]=a[e].trim();if(o)for(let e=0;e<o.length;e++)o[e].onStatisticField&&(o[e].onStatisticField=o[e].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),R(e,t,n)}async function R(e,n,r){if(!e)return null;let{where:a}=e;if(e.where=a=a?.trim(),(!a||/^1 *= *1$/.test(a)||n&&n===a)&&(e.where=null),!e.geometry)return e;let o=await V(e);if(e.distance=0,e.units=null,e.spatialRel===`esriSpatialRelEnvelopeIntersects`){let{spatialReference:t}=e.geometry;o=y(o),o.spatialReference=t}if(o){await D(o.spatialReference,r),o=B(o,r);let n=(await t(i(o)))[0];if(n==null)throw P;let a=`quantizationParameters`in e&&e.quantizationParameters?.tolerance||`maxAllowableOffset`in e&&e.maxAllowableOffset||0,s=a&&z(o,r)?{extendedParams:{densificationStep:8*a}}:void 0,c=n.toJSON(),l=A(c,c.spatialReference,r,s);if(!l)throw P;l.spatialReference=r,e.geometry=l}return e}function z(e,t){if(!e)return!1;let n=e.spatialReference;return(u(e)||m(e)||d(e))&&!r(n,t)&&!x(n,t)}function B(e,t){let n=e.spatialReference;return z(e,t)&&u(e)?{spatialReference:n,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}:e}async function V(t){let{distance:n,units:r}=t,i=t.geometry;if(n==null||`vertexAttributes`in i)return i;let a=i.spatialReference,s=r?N.fromJSON(r):g(a),c=a&&(S(a)||_(a))?i:await D(a,o).then(()=>A(i,o)),l=await e(()=>import(`./geodesicBufferOperator-B5AO4U75.js`),__vite__mapDeps([0,1,2,3,4,5]));await l.load();let u=l.execute(c,n||1,{unit:s})??void 0;if(!u||!m(u)||u.rings.length===0)throw new f(`unsupported-query:invalid-parameters`,`Invalid parameters for query by distance`);return u}function H(e,t){return e==null?null:typeof e==`string`?t?new Date(`1970-01-01T${e}Z`).getTime():new Date(e).getTime():e instanceof Date?e.getTime():e}export{L as a,D as c,H as i,A as l,P as n,I as o,N as r,M as s,R as t};