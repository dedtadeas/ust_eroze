import{m as e,t,u as n}from"./dom-atD5WAsR.js";var r=`calciteInternalLabelClick`,i=`calciteInternalLabelConnected`,a=`calciteInternalLabelDisconnected`,o=`calcite-label`,s=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new Set,f=n=>{let{id:r}=n,i=r&&e(n,{selector:`${o}[for="${r}"]`});if(i)return i;let a=t(n,o);return!a||p(a,n)?null:a};function p(e,t){let n,r=`custom-element-ancestor-check`,i=r=>{r.stopImmediatePropagation();let i=r.composedPath();n=i.slice(i.indexOf(t),i.indexOf(e))};return e.addEventListener(r,i,{once:!0}),t.dispatchEvent(new CustomEvent(r,{composed:!0,bubbles:!0})),e.removeEventListener(r,i),n.filter(n=>n!==t&&n!==e).filter(e=>e.tagName?.includes(`-`)).length>0}function m(e){if(!e)return;let t=f(e.el);if(c.has(t)&&t===e.labelEl||!t&&d.has(e))return;let n=b.bind(e);if(t){e.labelEl=t;let o=s.get(t)||[];o.push(e),s.set(t,o.sort(g)),c.has(e.labelEl)||(c.set(e.labelEl,v),e.labelEl.addEventListener(r,v)),d.delete(e),document.removeEventListener(i,l.get(e)),u.set(e,n),document.addEventListener(a,n)}else d.has(e)||(n(),document.removeEventListener(a,u.get(e)))}function h(e){if(!e||(d.delete(e),document.removeEventListener(i,l.get(e)),document.removeEventListener(a,u.get(e)),l.delete(e),u.delete(e),!e.labelEl))return;let t=s.get(e.labelEl);t.length===1&&(e.labelEl.removeEventListener(r,c.get(e.labelEl)),c.delete(e.labelEl)),s.set(e.labelEl,t.filter(t=>t!==e).sort(g)),e.labelEl=null}function g(e,t){return n(e.el,t.el)?-1:1}function _(e){return e.label||e.labelEl?.textContent?.trim()||``}function v(e){let t=e.detail.sourceEvent.target,n=s.get(this),r=n.find(e=>e.el===t);if(n.includes(r))return;let i=n[0];i.disabled||i.onLabelClick(e)}function y(){d.has(this)&&m(this)}function b(){d.add(this);let e=l.get(this)||y.bind(this);l.set(this,e),document.addEventListener(i,e)}async function x(e){if(await e.componentOnReady(),s.has(e))return;let t=e.ownerDocument?.getElementById(e.for);t&&requestAnimationFrame(()=>{for(let e of d)if(e.el===t){m(e);break}})}export{i as a,_ as i,m as n,a as o,h as r,x as t};