import{$l as e,Al as t,Bh as n,Il as r,Jg as i,Jl as a,Jv as o,Nh as s,Ol as c,Pl as l,Qg as u,Uh as ee,Wl as d,Xg as f,Xl as p,Xy as te,eu as ne,iu as m,jl as h,np as g,nu as _,ru as v,vE as re}from"./index-BqmCqmfp.js";import{c as y,t as b}from"./vectorStacks-CKtslZxP.js";import{C as ie,a as ae,b as x,c as S,d as oe,o as se,r as C,s as ce,t as le,v as ue,x as de,y as w}from"./plane-CTjDePZl.js";import{O as T,k as E}from"./sphere-CicnK0Bn.js";import{d as fe,r as pe,t as D}from"./lineSegment-uFalXigL.js";var O=()=>re.getLogger(`esri.views.3d.support.geometryUtils.boundedPlane`);function k(e=J){return{plane:w(e.plane),origin:u(e.origin),basis1:u(e.basis1),basis2:u(e.basis2)}}function me(e,t,n){let r=Ae.get();return r.origin=e,r.basis1=t,r.basis2=n,r.plane=ue(0,0,0,0),M(r),r}function A(e,t=k()){return j(e.origin,e.basis1,e.basis2,t)}function he(e,t){v(t.origin,e.origin),v(t.basis1,e.basis1),v(t.basis2,e.basis2),ie(t.plane,e.plane)}function j(e,t,n,r=k()){return v(r.origin,e),v(r.basis1,t),v(r.basis2,n),M(r),Oe(r,`fromValues()`),r}function M(e){C(e.basis2,e.basis1,e.origin,e.plane)}function N(e,t,n){e!==n&&A(e,n);let r=a(b.get(),U(e),t);return m(n.origin,n.origin,r),n.plane[3]-=t,n}function ge(e,t,n){return P(t,n),N(n,H(e,e.origin),n),n}function _e(e,t){let n=e.basis1[0],r=e.basis2[1],[i,a]=e.origin;return o(i-n,a-r,i+n,a+r,t)}function P(t,n=k()){let r=(t[2]-t[0])/2,i=(t[3]-t[1])/2;return e(n.origin,t[0]+r,t[1]+i,0),e(n.basis1,r,0,0),e(n.basis2,0,i,0),de(0,0,1,0,n.plane),n}function F(e,t,n){return!!ae(e.plane,t,n)&&W(e,n)}function ve(e,t,n){if(F(e,t,n))return n;let r=I(e,t,b.get());return m(n,t.origin,a(b.get(),t.direction,ne(t.origin,r)/_(t.direction))),n}function I(e,t,n){let i=Y.get();q(e,t,i,Y.get());let a=1/0;for(let o of Z){let s=K(e,o,X.get()),c=b.get();if(se(i,s,c)){let e=l(b.get(),t.origin,c),i=Math.abs(te(r(t.direction,e)));i<a&&(a=i,v(n,c))}}return a===1/0?L(e,t,n):n}function ye(e,t){return(t-e)/t}function L(e,t,n){if(F(e,t,n))return n;let r=Y.get(),i=Y.get();q(e,t,r,i);let a=1/0;for(let o of Z){let s=K(e,o,X.get()),c=b.get();if(ce(r,s,c)){let e=T(t,c);if(!S(i,c))continue;e<a&&(a=e,v(n,c))}}return B(e,t.origin)<a&&R(e,t.origin,n),n}function R(e,t,n){let r=oe(e.plane,t,b.get()),i=D(G(e,e.basis1),r,-1,1,b.get()),a=D(G(e,e.basis2),r,-1,1,b.get());return d(n,m(b.get(),i,a),e.origin),n}function z(t,n,r){let{origin:i,basis1:a,basis2:o}=t,s=d(b.get(),n,i),c=y(a,s),l=y(o,s),u=y(U(t),s);return e(r,c,l,u)}function B(e,t){let n=z(e,t,b.get()),{basis1:r,basis2:i}=e,a=_(r),o=_(i),s=Math.max(Math.abs(n[0])-a,0),c=Math.max(Math.abs(n[1])-o,0),l=n[2];return s*s+c*c+l*l}function V(e,t){return Math.sqrt(B(e,t))}function be(e,t){let n=-1/0;for(let r of Z){let i=K(e,r,X.get()),a=pe(i,t);a>n&&(n=a)}return Math.sqrt(n)}function xe(e,t){return S(e.plane,t)&&W(e,t)}function Se(e,t,n,r){return De(e,n,r)}function H(e,t){let n=-e.plane[3];return y(U(e),t)-n}function Ce(e,t,n,r){let i=H(e,t),o=a(ke,U(e),n-i);return m(r,t,o),r}function we(e,t){return h(e.basis1,t.basis1)&&h(e.basis2,t.basis2)&&h(e.origin,t.origin)}function Te(e,n,r){return e!==r&&A(e,r),s(Q,n),ee(Q,Q),t(r.basis1,e.basis1,Q),t(r.basis2,e.basis2,Q),t(x(r.plane),x(e.plane),Q),t(r.origin,e.origin,n),le(r.plane,r.plane,r.origin),r}function Ee(e,r,i,a){return e!==a&&A(e,a),n($,r,i),t(a.basis1,e.basis1,$),t(a.basis2,e.basis2,$),M(a),a}function U(e){return x(e.plane)}function De(e,t,n){switch(t){case 0:v(n,e.basis1),c(n,n);break;case 1:v(n,e.basis2),c(n,n);break;case 2:v(n,U(e))}return n}function W(e,t){let n=d(b.get(),t,e.origin),i=p(e.basis1),a=p(e.basis2),o=r(e.basis1,n),s=r(e.basis2,n);return-o-i<0&&o-i<0&&-s-a<0&&s-a<0}function G(e,t){let n=X.get();return v(n.origin,e.origin),v(n.vector,t),n}function K(e,t,n){let{basis1:r,basis2:i,origin:o}=e,s=a(b.get(),r,t.origin[0]),c=a(b.get(),i,t.origin[1]);m(n.origin,s,c),m(n.origin,n.origin,o);let l=a(b.get(),r,t.direction[0]),u=a(b.get(),i,t.direction[1]);return a(n.vector,m(l,l,u),2),n}function Oe(e,t){Math.abs(r(e.basis1,e.basis2)/(_(e.basis1)*_(e.basis2)))>1e-6&&O().warn(t,`Provided basis vectors are not perpendicular`),Math.abs(r(e.basis1,U(e)))>1e-6&&O().warn(t,`Basis vectors and plane normal are not perpendicular`),Math.abs(-r(U(e),e.origin)-e.plane[3])>1e-6&&O().warn(t,`Plane offset is not consistent with plane origin`)}function q(e,t,n,r){let i=U(e);C(i,t.direction,t.origin,n),C(x(n),i,t.origin,r)}var J={plane:w(),origin:f(0,0,0),basis1:f(1,0,0),basis2:f(0,1,0)},Y=new E(w),X=new E(fe),ke=i(),Ae=new E(()=>k()),Z=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],Q=g(),$=g(),je=Object.freeze(Object.defineProperty({__proto__:null,altitudeAt:H,axisAt:Se,cameraFrustumCoverage:ye,closestPoint:L,closestPointOnSilhouette:I,copy:A,copyWithoutVerify:he,create:k,distance:V,distance2:B,distanceToSilhouette:be,elevate:N,equals:we,extrusionContainsPoint:xe,fromAABoundingRect:P,fromValues:j,getExtent:_e,intersectRay:F,intersectRayClosestSilhouette:ve,normal:U,projectPoint:R,projectPointLocal:z,rotate:Ee,setAltitudeAt:Ce,setExtent:ge,transform:Te,up:J,updateUnboundedPlane:M,wrap:me},Symbol.toStringTag,{value:`Module`}));export{P as a,M as i,A as n,V as o,j as r,k as s,je as t};