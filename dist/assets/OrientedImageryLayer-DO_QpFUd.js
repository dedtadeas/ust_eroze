import{AE as e,CD as t,EE as n,I as r,La as i,MC as a,Nb as o,OC as s,Ra as c,WS as l,_C as u,_E as d,aC as f,fp as p,hp as m,kC as h,na as g,oC as _,q as v,vC as y,zy as b}from"./index-BqmCqmfp.js";var x=Symbol(`isOrientedImageryGraphicOrigin`),S,ee=class extends i{get[(S=x,p)](){return this.layer}get[m](){return this.layer}get[c](){return this.layer}constructor(e){super(),this[S]=!0,this.type=`oriented-imagery`,this.layer=e}get id(){return this.layer.id}},C=class extends s{set horizontalWKID(e){e?l({wkid:+e})?this._set(`horizontalWKID`,+e):this._set(`horizontalWKID`,e):this._set(`horizontalWKID`,null)}set verticalWKID(e){e?this._set(`verticalWKID`,isFinite(e)&&l({wkid:+e})?+e:null):this._set(`verticalWKID`,null)}get isAdvanced(){let{affineTransformations:e,focalLength:t,principalOffsetPoint:n,radialDistortionCoefficients:r,tangentialDistortionCoefficients:i}=this;return e?.length>1&&!Number.isNaN(t)&&n?.length>1&&r?.length>1&&i?.length>1}};t([a({json:{write:!0}})],C.prototype,`affineTransformations`,void 0),t([a({json:{write:!0}})],C.prototype,`focalLength`,void 0),t([a({json:{write:!0}})],C.prototype,`principalOffsetPoint`,void 0),t([a({json:{write:!0}})],C.prototype,`radialDistortionCoefficients`,void 0),t([a({json:{write:!0}})],C.prototype,`tangentialDistortionCoefficients`,void 0),t([a({json:{write:!0}})],C.prototype,`horizontalWKID`,null),t([a({json:{write:!0}})],C.prototype,`verticalWKID`,null),t([a({json:{write:!0}})],C.prototype,`x`,void 0),t([a({json:{write:!0}})],C.prototype,`y`,void 0),t([a({json:{write:!0}})],C.prototype,`z`,void 0),t([a({json:{write:!0}})],C.prototype,`type`,void 0),C=t([h(`esri.layers.orientedImagery.core.CameraOrientation`)],C);var w=C,T=class extends b(u(w)){constructor(){super(...arguments),this.type=1}toString(){let{type:e,horizontalWKID:t,verticalWKID:n,x:r,y:i,z:a,heading:o,pitch:s,roll:c,affineTransformations:l,focalLength:u,principalOffsetPoint:d,radialDistortionCoefficients:f,tangentialDistortionCoefficients:p}=this,m=[e,t,n,r,i,a,o,s,c];return this.isAdvanced&&(l?.forEach(e=>m.push(e)),m.push(u),d?.forEach(e=>m.push(e)),f?.forEach(e=>m.push(e)),p?.forEach(e=>m.push(e))),m.map(e=>Number.isNaN(e)?``:e).join(`|`)}};t([a({json:{write:!0}})],T.prototype,`type`,void 0),t([a({type:[Number],json:{write:!0}})],T.prototype,`affineTransformations`,void 0),t([a({type:Number,json:{write:!0}})],T.prototype,`focalLength`,void 0),t([a({type:[Number],json:{write:!0}})],T.prototype,`principalOffsetPoint`,void 0),t([a({type:[Number],json:{write:!0}})],T.prototype,`radialDistortionCoefficients`,void 0),t([a({type:[Number],json:{write:!0}})],T.prototype,`tangentialDistortionCoefficients`,void 0),t([a({type:Number,json:{write:!0}})],T.prototype,`heading`,void 0),t([a({type:Number,json:{write:!0}})],T.prototype,`pitch`,void 0),t([a({type:Number,json:{write:!0}})],T.prototype,`roll`,void 0),t([a({type:Number,json:{write:!0}})],T.prototype,`x`,void 0),t([a({type:Number,json:{write:!0}})],T.prototype,`y`,void 0),t([a({type:Number,json:{write:!0}})],T.prototype,`z`,void 0),T=t([h(`esri.layers.orientedImagery.core.CameraOrientationHPR`)],T);var E=T,D=class extends b(u(w)){constructor(){super(...arguments),this.type=4}toString(){let{type:e,latitude:t,longitude:n,ellipsoidRadius:r,squaredEccentricity:i,properties:a}=this,o=`${a}`.split(`|`);return o.splice(1,1),`${e}|${t}|${n}|${r}|${i}|${o.join(`|`)}`}};t([a({json:{write:!0}})],D.prototype,`type`,void 0),t([a({json:{write:!0},type:Number})],D.prototype,`latitude`,void 0),t([a({json:{write:!0},type:Number})],D.prototype,`longitude`,void 0),t([a({json:{write:!0},type:Number})],D.prototype,`ellipsoidRadius`,void 0),t([a({json:{write:!0},type:Number})],D.prototype,`squaredEccentricity`,void 0),t([a({json:{write:!0}})],D.prototype,`properties`,void 0),D=t([h(`esri.layers.orientedImagery.core.CameraOrientationLTP`)],D);var O=D,k=class extends b(u(w)){constructor(){super(...arguments),this.type=2}toString(){let{type:e,horizontalWKID:t,verticalWKID:n,x:r,y:i,z:a,omega:o,phi:s,kappa:c,affineTransformations:l,focalLength:u,principalOffsetPoint:d,radialDistortionCoefficients:f,tangentialDistortionCoefficients:p}=this,m=[e,t,n,r,i,a,o,s,c];return this.isAdvanced&&(l?.forEach(e=>m.push(e)),m.push(u),d?.forEach(e=>m.push(e)),f?.forEach(e=>m.push(e)),p?.forEach(e=>m.push(e))),m.map(e=>isNaN(e)?``:e).join(`|`)}};t([a({json:{write:!0}})],k.prototype,`type`,void 0),t([a({type:[Number],json:{write:!0}})],k.prototype,`affineTransformations`,void 0),t([a({type:Number,json:{write:!0}})],k.prototype,`focalLength`,void 0),t([a({type:[Number],json:{write:!0}})],k.prototype,`principalOffsetPoint`,void 0),t([a({type:[Number],json:{write:!0}})],k.prototype,`radialDistortionCoefficients`,void 0),t([a({type:[Number],json:{write:!0}})],k.prototype,`tangentialDistortionCoefficients`,void 0),t([a({type:Number,json:{write:!0}})],k.prototype,`omega`,void 0),t([a({type:Number,json:{write:!0}})],k.prototype,`phi`,void 0),t([a({type:Number,json:{write:!0}})],k.prototype,`kappa`,void 0),t([a({type:Number,json:{write:!0}})],k.prototype,`x`,void 0),t([a({type:Number,json:{write:!0}})],k.prototype,`y`,void 0),t([a({type:Number,json:{write:!0}})],k.prototype,`z`,void 0),k=t([h(`esri.layers.orientedImagery.core.CameraOrientationOPK`)],k);var A=k,j=class extends b(u(w)){constructor(){super(...arguments),this.type=3}get isAdvanced(){let{affineTransformations:e,focalLength:t,principalOffsetPoint:n,radialDistortionCoefficients:r,tangentialDistortionCoefficients:i}=this;return e?.length>1||!Number.isNaN(t)||n?.length>1||r?.length>1||i?.length>1}toString(){let{type:e,horizontalWKID:t,verticalWKID:n,x:r,y:i,z:a,yaw:o,pitch:s,roll:c,affineTransformations:l,focalLength:u,principalOffsetPoint:d,radialDistortionCoefficients:f,tangentialDistortionCoefficients:p}=this,m=[e,t,n,r,i,a,o,s,c];return this.isAdvanced&&(l?.forEach(e=>m.push(e)),m.push(u),d?.forEach(e=>m.push(e)),d?.forEach(e=>m.push(e)),f?.forEach(e=>m.push(e)),p?.forEach(e=>m.push(e))),m.map(e=>Number.isNaN(e)?``:e).join(`|`)}};t([a({json:{write:!0}})],j.prototype,`type`,void 0),t([a({type:[Number],json:{write:!0}})],j.prototype,`affineTransformations`,void 0),t([a({type:Number,json:{write:!0}})],j.prototype,`focalLength`,void 0),t([a({type:[Number],json:{write:!0}})],j.prototype,`principalOffsetPoint`,void 0),t([a({type:[Number],json:{write:!0}})],j.prototype,`radialDistortionCoefficients`,void 0),t([a({type:[Number],json:{write:!0}})],j.prototype,`tangentialDistortionCoefficients`,void 0),t([a({type:Number,json:{write:!0}})],j.prototype,`yaw`,void 0),t([a({type:Number,json:{write:!0}})],j.prototype,`pitch`,void 0),t([a({type:Number,json:{write:!0}})],j.prototype,`roll`,void 0),t([a({type:Number,json:{write:!0}})],j.prototype,`x`,void 0),t([a({type:Number,json:{write:!0}})],j.prototype,`y`,void 0),t([a({type:Number,json:{write:!0}})],j.prototype,`z`,void 0),j=t([h(`esri.layers.orientedImagery.core.CameraOrientationYPR`)],j);var M=j,N=new Map;N.set(`2`,{desc:`Using Omega Phi Kappa`,constructor:A}),N.set(`1`,{desc:`Using Heading, Pitch and Roll`,constructor:E}),N.set(`3`,{desc:`Using Yaw, Pitch and Roll`,constructor:M}),N.set(`4`,{desc:`Using Local Tangent Plane`,constructor:O});var P=class extends b(y){constructor(){super(...arguments),this.url=null}};t([a({type:Number,json:{write:!0}})],P.prototype,`lod`,void 0),t([a({type:String,json:{write:!0}})],P.prototype,`rasterFunction`,void 0),t([a({type:String,json:{write:!0}})],P.prototype,`url`,void 0),P=t([h(`esri.layers.orientedImagery.core.ElevationSourceDefinitions.ElevationSource`)],P);var F=class extends b(y){constructor(){super(...arguments),this.constantElevation=null}};t([a({type:Number,json:{write:!0}})],F.prototype,`constantElevation`,void 0),F=t([h(`esri.layers.orientedImagery.core.ElevationSourceDefinitions.ConstantElevation`)],F);var I=e=>e!=null&&typeof e.constantElevation==`number`;function te(e,t,n){return t&&(e=`${t}${e}`),n&&(e+=`${n}`),e}function ne(e,t,n){let{url:r}=e;return r?(r=te(r,t,n),new P({...e,url:r})):null}function re(e,t,n){return e&&(I(e)?new F(e):ne(e,t,n))}var L=new f({Minutes:`minutes`,Hours:`hours`,Days:`days`,Weeks:`weeks`,Months:`months`,Years:`years`}),R=new f({Feet:`feet`,Meter:`meter`}),z=new f({360:`360`,Horizontal:`horizontal`,Inspection:`inspection`,Nadir:`nadir`,Oblique:`oblique`,Terrestrial360Video:`terrestrial-360-video`,TerrestrialFrameVideo:`terrestrial-frame-video`,Aerial360Video:`aerial-360-video`,AerialFrameVideo:`aerial-frame-video`,"":null}),B=new Map;function V(e){let[t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,y,b,x,S]=e.slice(1);return{horizontalWKID:t,verticalWKID:n,x:r,y:i,z:a,omega:o,phi:s,kappa:c,...U([l,u,d,f,p,m],[g,_],[v,y,b],[x,S],h)}}B.set(`1`,W),B.set(`3`,G),B.set(`2`,V),B.set(`4`,K);var H=e=>{let t=e.map(e=>parseFloat(e)).filter(e=>!isNaN(e));if(t.length===e.length)return t};function U(e,t,n,r,i){let a=H(e),o=H(t),s=H(n),c=H(r);return{affineTransformations:a?.length===6?a:void 0,focalLength:a?.length===6?parseFloat(i):void 0,principalOffsetPoint:o?.length===2?o:[0,0],radialDistortionCoefficients:s?.length===3?s:[0,0,0],tangentialDistortionCoefficients:c?.length===2?c:[0,0]}}function W(e){let[t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,y,b,x,S]=e.slice(1);return{horizontalWKID:t,verticalWKID:n,x:r,y:i,z:a,heading:o,pitch:s,roll:c,...U([l,u,d,f,p,m],[g,_],[v,y,b],[x,S],h)}}function G(e){let[t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,y,b,x,S]=e.slice(1);return{horizontalWKID:t,verticalWKID:n,x:r,y:i,z:a,yaw:o,pitch:s,roll:c,...U([l,u,d,f,p,m],[g,_],[v,y,b],[x,S],h)}}function K(e){let[t,n,r,i,a,...o]=e.slice(1),s=B.get(a),c=N.get(a)?.constructor;return!s||!c?null:{latitude:t,longitude:n,ellipsoidRadius:r,squaredEccentricity:i,properties:new c(s([a,``,...o]))}}function q(e){return Array.isArray(e)&&e?.length>5&&!e.some(isNaN)}function J(e){for(e=e.slice(0,8);e.length<8;)e.push(0);return e}var Y=new Set([`demPathPrefix`,`demPathSuffix`,`depthImagePathPrefix`,`depthImagePathSuffix`,`elevationSource`,`horizontalMeasurementUnit`,`imageGeometryField`,`imageReferenceField`,`referenceIDField`,`sequenceOrderField`,`verticalMeasurementUnit`,`videoPathPrefix`,`videoPathSuffix`,`timeAnimation`,`visibilityTimeExtent`]),X=new Set([`elevationSource`]),Z=(e,t)=>!Y.has(t)&&e,ie=(e,t,n)=>{let r=`orientedImageryProperties.${e}`,i={allowNull:X.has(e),ignoreOrigin:!0};return{name:r,write:t?{...i,target:r,writer:t}:i,read:n?{ignoreOrigin:!0,source:r,reader:n}:{ignoreOrigin:!0}}};function ae(e){return e.json?(e.json.origins=e.json.origins??{},e.json.origins[`web-scene`]={write:!1,read:!1},e):e}function Q(e,t,n,r){let{name:i,write:a,read:o}=ie(e,t,n),s={name:i,write:a,read:o,origins:{service:{name:`orientedImageryInfo.${i}`,write:t,read:n},"web-scene":{name:i,write:Z(a,e),read:Z(o,e)},"web-map":{name:i,write:a,read:o}}};return r&&s.origins?(s.type=r,s.origins[`web-map`].type=r,s.origins[`web-scene`].type=r,s):s}var $=class extends r{constructor(e){super(e),this.attributeTableTemplate=null,this.cameraHeading=null,this.cameraHeight=null,this.cameraPitch=null,this.cameraRoll=null,this.coveragePercent=null,this.demPathPrefix=null,this.demPathSuffix=null,this.depthImagePathPrefix=null,this.depthImagePathSuffix=null,this.elevationSource=null,this.farDistance=null,this.geometryType=`point`,this.graphicOrigin=new ee(this),this.horizontalFieldOfView=null,this.horizontalMeasurementUnit=null,this.imageGeometryField=`ImageGeometry`,this.imagePathPrefix=null,this.imagePathSuffix=null,this.imageReferenceField=`OIObjectID`,this.imageRotation=null,this.maximumDistance=null,this.nearDistance=null,this.operationalLayerType=`OrientedImageryLayer`,this.orientationAccuracy=null,this.orientedImageryType=null,this.referenceIDField=`OBJECTID`,this.sequenceOrderField=`SequenceOrder`,this.supportedSourceTypes=new Set([`Oriented Imagery Layer`]),this.type=`oriented-imagery`,this.timeIntervalUnit=`days`,this.useViewTime=!0,this.verticalFieldOfView=null,this.verticalMeasurementUnit=null,this.videoPathPrefix=null,this.videoPathSuffix=null,this.virtualCacheDirectory=null,this.visibilityTimeExtent=null}get effectiveElevationSource(){let{elevationSource:e,demPathPrefix:t,demPathSuffix:n}=this;return re(e,t,n)}set fieldConfigurations(e){}get fieldConfigurations(){}writePopupTemplate(e,t,n,r){e&&(t[n]=e.toJSON(r))}set portalItem(e){super.portalItem=e}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,t){return this._debouncedSaveOperations(1,t,e)}findFirstValidLayerId(e){return e.layers?.find(e=>this.supportedSourceTypes.has(e.type))?.id}_verifySource(){if(super._verifySource(),this.geometryType!==`point`)throw new d(`oriented-imagery-layer:invalid-geometry-type`,`OrientedImageryLayer only supports point geometry type`)}};t([a({type:g,json:{write:!1,read:!1}})],$.prototype,`attributeTableTemplate`,void 0),t([a({type:Number,json:Q(`cameraHeading`)})],$.prototype,`cameraHeading`,void 0),t([a({type:Number,json:Q(`cameraHeight`)})],$.prototype,`cameraHeight`,void 0),t([a({type:Number,json:Q(`cameraPitch`)})],$.prototype,`cameraPitch`,void 0),t([a({type:Number,json:Q(`cameraRoll`)})],$.prototype,`cameraRoll`,void 0),t([a({type:Number,json:Q(`coveragePercent`)})],$.prototype,`coveragePercent`,void 0),t([a({type:String,json:Q(`demPathPrefix`)})],$.prototype,`demPathPrefix`,void 0),t([a({type:String,json:Q(`demPathSuffix`)})],$.prototype,`demPathSuffix`,void 0),t([a({type:String,json:Q(`depthImagePathPrefix`)})],$.prototype,`depthImagePathPrefix`,void 0),t([a({type:String,json:Q(`depthImagePathSuffix`)})],$.prototype,`depthImagePathSuffix`,void 0),t([a({type:Object,json:Q(`elevationSource`)})],$.prototype,`elevationSource`,void 0),t([a({readOnly:!0})],$.prototype,`effectiveElevationSource`,null),t([a({type:Number,json:Q(`farDistance`)})],$.prototype,`farDistance`,void 0),t([a({json:{write:!1}})],$.prototype,`fieldConfigurations`,null),t([a()],$.prototype,`geometryType`,void 0),t([a({readOnly:!0,clonable:!1})],$.prototype,`graphicOrigin`,void 0),t([a({type:Number,json:Q(`horizontalFieldOfView`)})],$.prototype,`horizontalFieldOfView`,void 0),t([a({type:String,json:Q(`horizontalMeasurementUnit`)})],$.prototype,`horizontalMeasurementUnit`,void 0),t([a({type:String,json:{...Q(`imageGeometryField`),default:`ImageGeometry`}})],$.prototype,`imageGeometryField`,void 0),t([a({type:String,json:Q(`imagePathPrefix`)})],$.prototype,`imagePathPrefix`,void 0),t([a({type:String,json:Q(`imagePathSuffix`)})],$.prototype,`imagePathSuffix`,void 0),t([a({type:String,json:{...Q(`imageReferenceField`),default:`OIObjectID`}})],$.prototype,`imageReferenceField`,void 0),t([a({type:Number,json:Q(`imageRotation`)})],$.prototype,`imageRotation`,void 0),t([a({type:Number,json:Q(`maximumDistance`)})],$.prototype,`maximumDistance`,void 0),t([a({type:Number,json:Q(`nearDistance`)})],$.prototype,`nearDistance`,void 0),t([a({type:[`OrientedImageryLayer`],json:{origins:{"portal-item":{name:`layerType`,write:{enabled:!0,ignoreOrigin:!0}}}}})],$.prototype,`operationalLayerType`,void 0),t([a({json:{...Q(`orientationAccuracy`,(e,t,r)=>{n(r,e.join(`;`),t)},e=>{let t=e?.split(`;`)?.map(Number);return q(t)?J(t):[0,0,0,0,0,0,0,0]},String)}})],$.prototype,`orientationAccuracy`,void 0),t([a({json:{...Q(`orientedImageryType`,z.write,z.read,z.jsonValues.slice(1))}})],$.prototype,`orientedImageryType`,void 0),t([_(`popupTemplate`)],$.prototype,`writePopupTemplate`,null),t([a({type:String,json:{...Q(`referenceIDField`),default:`OBJECTID`}})],$.prototype,`referenceIDField`,void 0),t([a({type:String,json:{...Q(`sequenceOrderField`),default:`SequenceOrder`}})],$.prototype,`sequenceOrderField`,void 0),t([a({json:{read:!1},value:`oriented-imagery`,readOnly:!0})],$.prototype,`type`,void 0),t([a({type:L.apiValues,json:{...Q(`timeIntervalUnit`,L.write,L.read,L.jsonValues)}})],$.prototype,`timeIntervalUnit`,void 0),t([a(ae(e(v)))],$.prototype,`useViewTime`,void 0),t([a({type:Number,json:Q(`verticalFieldOfView`)})],$.prototype,`verticalFieldOfView`,void 0),t([a({type:R.apiValues,json:{...Q(`verticalMeasurementUnit`,R.write,R.read,R.jsonValues)}})],$.prototype,`verticalMeasurementUnit`,void 0),t([a({type:String,json:Q(`videoPathPrefix`)})],$.prototype,`videoPathPrefix`,void 0),t([a({type:String,json:Q(`videoPathSuffix`)})],$.prototype,`videoPathSuffix`,void 0),t([a({type:String,json:{read:!1,write:!1,origins:{service:{name:`orientedImageryInfo.orientedImageryProperties.virtualCacheDirectory`,read:!0}}}})],$.prototype,`virtualCacheDirectory`,void 0),t([a({type:o,json:{origins:{"web-scene":{write:!1,read:!1}}}})],$.prototype,`visibilityTimeExtent`,void 0),$=t([h(`esri.layers.OrientedImageryLayer`)],$);var oe=$;export{oe as default};