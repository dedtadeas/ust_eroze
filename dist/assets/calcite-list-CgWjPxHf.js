import{Do as e,Mo as t,To as n,Uo as r,Xo as i,Zo as a,bo as o,jo as s,yo as c}from"./index-BqmCqmfp.js";import{t as l}from"./guid-D8BoG5RM.js";import"./controllers-DZ7pbtKF.js";import{t as u}from"./useT9n-bRfAARgx.js";import"./calcite-loader-C2BnVEC6.js";import{_ as d,o as f}from"./dom-atD5WAsR.js";import{t as p}from"./observers-Ca90Dkfx.js";import"./logger-N52NEE_B.js";import"./calcite-icon-DU8UXGam.js";import{t as m}from"./keyed-CU6bsPrA.js";import{n as h,t as g}from"./interactive-C1Xh6Lv0.js";import{t as _}from"./useSetFocus-BOgV9A-L.js";import"./form-CYe_Hdps.js";import{t as v}from"./debounce-JuHvylml.js";import"./static-CFhWbVpa.js";import"./key-UZzOT_rp.js";import{t as y}from"./useCancelable-CRHa62_S.js";import"./label-CbTib4du.js";import"./calcite-progress-B9qY8ZRX.js";import"./calcite-scrim-ChNbuBJA.js";import"./calcite-input-message-BD7sw1wZ.js";import{n as ee}from"./calcite-input-C8DWvaD7.js";import{a as b,c as te,i as ne,o as x,s as S,t as C}from"./utils2-B1dhLot4.js";function re(e){return e}function w(e){return e.replace(/[\\^$.*+?()[\]{}|]/g,`\\$&`)}
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */
var T={container:`container`,actionsStart:`actions-start`,contentStart:`content-start`,content:`content`,contentEnd:`content-end`,actionsEnd:`actions-end`},E={actionsStart:`actions-start`,contentStart:`content-start`,contentEnd:`content-end`,actionsEnd:`actions-end`},ie=a`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]) .content{cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) .content *,:host([disabled]) .content ::slotted(*){pointer-events:none}:host{display:flex;flex:1 1 0%;flex-direction:column}.container{display:flex;flex:1 1 auto;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}.content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;padding-inline:var(--calcite-stack-padding-inline, .75rem);padding-block:var(--calcite-stack-padding-block, .5rem)}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:0 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){margin-inline:.75rem;align-self:center}.actions-start,.actions-end,.content-start,.content-end{display:flex;align-items:center}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}:host([hidden]){display:none}[hidden]{display:none}`,ae=class extends n{constructor(){super(...arguments),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.disabled=!1}static{this.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}]}}static{this.styles=ie}handleActionsStartSlotChange(e){this.hasActionsStart=d(e)}handleActionsEndSlotChange(e){this.hasActionsEnd=d(e)}handleContentStartSlotChange(e){this.hasContentStart=d(e)}handleContentEndSlotChange(e){this.hasContentEnd=d(e)}renderActionsStart(){let{hasActionsStart:t}=this;return m(`actions-start-container`,i`<div class=${e(T.actionsStart)} .hidden=${!t}><slot name=${E.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){let{hasActionsEnd:t}=this;return m(`actions-end-container`,i`<div class=${e(T.actionsEnd)} .hidden=${!t}><slot name=${E.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>`)}renderContentStart(){let{hasContentStart:t}=this;return i`<div class=${e(T.contentStart)} .hidden=${!t}><slot name=${E.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderDefaultContent(){return i`<div class=${e(T.content)}><slot></slot></div>`}renderContentEnd(){let{hasContentEnd:t}=this;return i`<div class=${e(T.contentEnd)} .hidden=${!t}><slot name=${E.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}render(){return i`<div class=${e(T.container)}>${this.renderActionsStart()}${this.renderContentStart()}${this.renderDefaultContent()}${this.renderContentEnd()}${this.renderActionsEnd()}</div>`}};o(`calcite-stack`,ae);function oe(e){if(e==null)return``;if(typeof e==`string`)return e;if(Array.isArray(e))return e.map(oe).join(`,`);let t=String(e);return t===`0`&&Object.is(Number(e),-0)?`-0`:t}function se(e,t=re){if(e==null)return e;for(let n in e)if(t(e[n],n,e)===!1)break;return e}function ce(e){return w(oe(e))}var le=(e,t,n)=>{let r=ce(t),i=new RegExp(r,`i`);e.length===0&&console.warn(`No data was passed to the filter function.
    The data argument should be an array of objects`);let a=(e,t,n)=>{if(e?.constant||e?.filterDisabled)return!0;let r=!1;return se(e,(e,i)=>{typeof e==`function`||e==null||n&&!n.includes(i)||(Array.isArray(e)||typeof e==`object`&&e?a(e,t)&&(r=!0):t.test(e)&&(r=!0))}),r};return e.filter(e=>a(e,i,n))},ue={container:`container`},de={search:`search`},fe=a`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{display:flex;inline-size:100%}:host([scale=s]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-sm))}:host([scale=m]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-md))}:host([scale=l]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-lg))}label{position:relative;margin-block:0px;display:flex;inline-size:100%;align-items:center;overflow:hidden}calcite-input{inline-size:100%;--calcite-input-background-color: var(--calcite-filter-input-background-color);--calcite-input-border-color: var(--calcite-filter-input-border-color);--calcite-input-corner-radius: var(--calcite-filter-input-corner-radius);--calcite-input-shadow: var(--calcite-filter-input-shadow);--calcite-input-icon-color: var(--calcite-filter-input-icon-color);--calcite-input-text-color: var(--calcite-filter-input-text-color);--calcite-input-placeholder-text-color: var(--calcite-filter-input-placeholder-text-color);--calcite-input-actions-background-color: var(--calcite-filter-input-actions-background-color);--calcite-input-actions-background-color-hover: var(--calcite-filter-input-actions-background-color-hover);--calcite-input-actions-background-color-press: var(--calcite-filter-input-actions-background-color-press);--calcite-input-actions-icon-color: var(--calcite-filter-input-actions-icon-color);--calcite-input-actions-icon-color-hover: var(--calcite-filter-input-actions-icon-color-hover);--calcite-input-actions-icon-color-press: var(--calcite-filter-input-actions-icon-color-press)}:host([hidden]){display:none}[hidden]{display:none}`,pe=class extends n{constructor(){super(...arguments),this.cancelable=y()(this),this.filterDebounced=v((e,t=!1,n)=>this.updateFiltered(le(this.items??[],e,this.filterProps),t,n),c.filter),this.textInput=s(),this._value=``,this.messages=u(),this.focusSetter=_()(this),this.disabled=!1,this.filteredItems=[],this.items=[],this.scale=`m`,this.calciteFilterChange=r({cancelable:!1})}static{this.properties={disabled:[7,{},{reflect:!0,type:Boolean}],filterProps:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],items:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],placeholder:1,scale:[3,{},{reflect:!0}],value:1}}static{this.shadowRootOptions={mode:`open`,delegatesFocus:!0}}static{this.styles=fe}get value(){return this._value}set value(e){let t=this._value;e!==t&&(this._value=e,this.valueHandler(e))}async filter(e=this.value){return new Promise(t=>{this.value=e,this.updateFiltered(le(this.items??[],e,this.filterProps),!1,t)})}async setFocus(e){return this.focusSetter(()=>this.textInput.value,e)}connectedCallback(){super.connectedCallback(),this.cancelable.add(this.filterDebounced)}async load(){this.updateFiltered(le(this.items??[],this.value,this.filterProps))}willUpdate(e){(e.has(`items`)&&(this.hasUpdated||this.items?.length>0)||e.has(`filterProps`))&&this.filterDebounced(this.value)}updated(){h(this)}valueHandler(e){this.filterDebounced(e)}inputHandler(e){let t=e.target;this.value=t.value,this.filterDebounced(t.value,!0)}keyDownHandler(e){e.defaultPrevented||(e.key===`Escape`&&(this.clear(),e.preventDefault()),e.key===`Enter`&&e.preventDefault())}clear(){this.value=``,this.filterDebounced(``,!0),this.setFocus()}updateFiltered(e,t=!1,n){this.filteredItems=e,t&&this.calciteFilterChange.emit(),n?.()}render(){let{disabled:n,scale:r}=this;return g({disabled:n,children:i`<div class=${e(ue.container)}><label><calcite-input clearable .disabled=${n} .icon=${de.search} .label=${this.label??this.messages.label} .messageOverrides=${{clear:this.messages.clear}} @keydown=${this.keyDownHandler} @calciteInputInput=${this.inputHandler} .placeholder=${this.placeholder} .scale=${r} type=text .value=${this.value} ${t(this.textInput)}></calcite-input></label></div>`})}};o(`calcite-filter`,pe);
/**!
* Sortable 1.15.6
* @author	RubaXa   <trash@rubaxa.org>
* @author	owenm    <owen23355@gmail.com>
* @license MIT
*/
function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?me(Object(n),!0).forEach(function(t){ge(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function he(e){"@babel/helpers - typeof";return he=typeof Symbol==`function`&&typeof Symbol.iterator==`symbol`?function(e){return typeof e}:function(e){return e&&typeof Symbol==`function`&&e.constructor===Symbol&&e!==Symbol.prototype?`symbol`:typeof e},he(e)}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(this,arguments)}function _e(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function ve(e,t){if(e==null)return{};var n=_e(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var ye=`1.15.6`;function k(e){if(typeof window<`u`&&window.navigator)return!!navigator.userAgent.match(e)}var A=k(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),be=k(/Edge/i),xe=k(/firefox/i),Se=k(/safari/i)&&!k(/chrome/i)&&!k(/android/i),Ce=k(/iP(ad|od|hone)/i),we=k(/chrome/i)&&k(/android/i),Te={capture:!1,passive:!1};function j(e,t,n){e.addEventListener(t,n,!A&&Te)}function M(e,t,n){e.removeEventListener(t,n,!A&&Te)}function Ee(e,t){if(t){if(t[0]===`>`&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function De(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function N(e,t,n,r){if(e){n||=document;do{if(t!=null&&(t[0]===`>`?e.parentNode===n&&Ee(e,t):Ee(e,t))||r&&e===n)return e;if(e===n)break}while(e=De(e))}return null}var Oe=/\s+/g;function P(e,t,n){e&&t&&(e.classList?e.classList[n?`add`:`remove`](t):e.className=((` `+e.className+` `).replace(Oe,` `).replace(` `+t+` `,` `)+(n?` `+t:``)).replace(Oe,` `))}function F(e,t,n){var r=e&&e.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,``):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in r)&&t.indexOf(`webkit`)===-1&&(t=`-webkit-`+t),r[t]=n+(typeof n==`string`?``:`px`)}}function ke(e,t){var n=``;if(typeof e==`string`)n=e;else do{var r=F(e,`transform`);r&&r!==`none`&&(n=r+` `+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function Ae(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,a=r.length;if(n)for(;i<a;i++)n(r[i],i);return r}return[]}function I(){return document.scrollingElement||document.documentElement}function L(e,t,n,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var a,o,s,c,l,u,d;if(e!==window&&e.parentNode&&e!==I()?(a=e.getBoundingClientRect(),o=a.top,s=a.left,c=a.bottom,l=a.right,u=a.height,d=a.width):(o=0,s=0,c=window.innerHeight,l=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(i||=e.parentNode,!A))do if(i&&i.getBoundingClientRect&&(F(i,`transform`)!==`none`||n&&F(i,`position`)!==`static`)){var f=i.getBoundingClientRect();o-=f.top+parseInt(F(i,`border-top-width`)),s-=f.left+parseInt(F(i,`border-left-width`)),c=o+a.height,l=s+a.width;break}while(i=i.parentNode);if(r&&e!==window){var p=ke(i||e),m=p&&p.a,h=p&&p.d;p&&(o/=h,s/=m,d/=m,u/=h,c=o+u,l=s+d)}return{top:o,left:s,bottom:c,right:l,width:d,height:u}}}function je(e,t,n){for(var r=Ie(e,!0),i=L(e)[t];r;){var a=L(r)[n],o=void 0;if(o=n===`top`||n===`left`?i>=a:i<=a,!o)return r;if(r===I())break;r=Ie(r,!1)}return!1}function Me(e,t,n,r){for(var i=0,a=0,o=e.children;a<o.length;){if(o[a].style.display!==`none`&&o[a]!==Z.ghost&&(r||o[a]!==Z.dragged)&&N(o[a],n.draggable,e,!1)){if(i===t)return o[a];i++}a++}return null}function Ne(e,t){for(var n=e.lastElementChild;n&&(n===Z.ghost||F(n,`display`)===`none`||t&&!Ee(n,t));)n=n.previousElementSibling;return n||null}function R(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!==`TEMPLATE`&&e!==Z.clone&&(!t||Ee(e,t))&&n++;return n}function Pe(e){var t=0,n=0,r=I();if(e)do{var i=ke(e),a=i.a,o=i.d;t+=e.scrollLeft*a,n+=e.scrollTop*o}while(e!==r&&(e=e.parentNode));return[t,n]}function Fe(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n)}return-1}function Ie(e,t){if(!e||!e.getBoundingClientRect)return I();var n=e,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=F(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX==`auto`||i.overflowX==`scroll`)||n.clientHeight<n.scrollHeight&&(i.overflowY==`auto`||i.overflowY==`scroll`)){if(!n.getBoundingClientRect||n===document.body)return I();if(r||t)return n;r=!0}}while(n=n.parentNode);return I()}function Le(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Re(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var ze;function Be(e,t){return function(){if(!ze){var n=arguments,r=this;n.length===1?e.call(r,n[0]):e.apply(r,n),ze=setTimeout(function(){ze=void 0},t)}}}function Ve(){clearTimeout(ze),ze=void 0}function He(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Ue(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function We(e,t,n){var r={};return Array.from(e.children).forEach(function(i){if(!(!N(i,t.draggable,e,!1)||i.animated||i===n)){var a=L(i);r.left=Math.min(r.left??1/0,a.left),r.top=Math.min(r.top??1/0,a.top),r.right=Math.max(r.right??-1/0,a.right),r.bottom=Math.max(r.bottom??-1/0,a.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var z=`Sortable`+new Date().getTime();function Ge(){var e=[],t;return{captureAnimationState:function(){e=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(t){if(!(F(t,`display`)===`none`||t===Z.ghost)){e.push({target:t,rect:L(t)});var n=D({},e[e.length-1].rect);if(t.thisAnimationDuration){var r=ke(t,!0);r&&(n.top-=r.f,n.left-=r.e)}t.fromRect=n}})},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(Fe(e,{target:t}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(t),typeof n==`function`&&n();return}var i=!1,a=0;e.forEach(function(e){var t=0,n=e.target,o=n.fromRect,s=L(n),c=n.prevFromRect,l=n.prevToRect,u=e.rect,d=ke(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&Re(c,s)&&!Re(o,s)&&(u.top-s.top)/(u.left-s.left)===(o.top-s.top)/(o.left-s.left)&&(t=qe(u,c,l,r.options)),Re(s,o)||(n.prevFromRect=o,n.prevToRect=s,t||=r.options.animation,r.animate(n,u,s,t)),t&&(i=!0,a=Math.max(a,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout(function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null},t),n.thisAnimationDuration=t)}),clearTimeout(t),i?t=setTimeout(function(){typeof n==`function`&&n()},a):typeof n==`function`&&n(),e=[]},animate:function(e,t,n,r){if(r){F(e,`transition`,``),F(e,`transform`,``);var i=ke(this.el),a=i&&i.a,o=i&&i.d,s=(t.left-n.left)/(a||1),c=(t.top-n.top)/(o||1);e.animatingX=!!s,e.animatingY=!!c,F(e,`transform`,`translate3d(`+s+`px,`+c+`px,0)`),this.forRepaintDummy=Ke(e),F(e,`transition`,`transform `+r+`ms`+(this.options.easing?` `+this.options.easing:``)),F(e,`transform`,`translate3d(0,0,0)`),typeof e.animated==`number`&&clearTimeout(e.animated),e.animated=setTimeout(function(){F(e,`transition`,``),F(e,`transform`,``),e.animated=!1,e.animatingX=!1,e.animatingY=!1},r)}}}}function Ke(e){return e.offsetWidth}function qe(e,t,n,r){return Math.sqrt((t.top-e.top)**2+(t.left-e.left)**2)/Math.sqrt((t.top-n.top)**2+(t.left-n.left)**2)*r.animation}var Je=[],Ye={initializeByDefault:!0},Xe={mount:function(e){for(var t in Ye)Ye.hasOwnProperty(t)&&!(t in e)&&(e[t]=Ye[t]);Je.forEach(function(t){if(t.pluginName===e.pluginName)throw`Sortable: Cannot mount plugin ${e.pluginName} more than once`}),Je.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=e+`Global`;Je.forEach(function(r){t[r.pluginName]&&(t[r.pluginName][i]&&t[r.pluginName][i](D({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](D({sortable:t},n)))})},initializePlugins:function(e,t,n,r){for(var i in Je.forEach(function(r){var i=r.pluginName;if(!(!e.options[i]&&!r.initializeByDefault)){var a=new r(e,t,e.options);a.sortable=e,a.options=e.options,e[i]=a,O(n,a.defaults)}}),e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);a!==void 0&&(e.options[i]=a)}},getEventProperties:function(e,t){var n={};return Je.forEach(function(r){typeof r.eventProperties==`function`&&O(n,r.eventProperties.call(t[r.pluginName],e))}),n},modifyOption:function(e,t,n){var r;return Je.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[t]==`function`&&(r=i.optionListeners[t].call(e[i.pluginName],n))}),r}};function Ze(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,a=e.cloneEl,o=e.toEl,s=e.fromEl,c=e.oldIndex,l=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,f=e.originalEvent,p=e.putSortable,m=e.extraEventProperties;if(t||=n&&n[z],t){var h,g=t.options,_=`on`+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!A&&!be?h=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(h=document.createEvent(`Event`),h.initEvent(r,!0,!0)),h.to=o||n,h.from=s||n,h.item=i||n,h.clone=a,h.oldIndex=c,h.newIndex=l,h.oldDraggableIndex=u,h.newDraggableIndex=d,h.originalEvent=f,h.pullMode=p?p.lastPutMode:void 0;var v=D(D({},m),Xe.getEventProperties(r,t));for(var y in v)h[y]=v[y];n&&n.dispatchEvent(h),g[_]&&g[_].call(t,h)}}var Qe=[`evt`],B=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,i=ve(n,Qe);Xe.pluginEvent.bind(Z)(e,t,D({dragEl:H,parentEl:U,ghostEl:W,rootEl:G,nextEl:$e,lastDownEl:et,cloneEl:K,cloneHidden:tt,dragStarted:mt,putSortable:J,activeSortable:Z.active,originalEvent:r,oldIndex:nt,oldDraggableIndex:rt,newIndex:q,newDraggableIndex:it,hideGhostForTarget:Mt,unhideGhostForTarget:Nt,cloneNowHidden:function(){tt=!0},cloneNowShown:function(){tt=!1},dispatchSortableEvent:function(e){V({sortable:t,name:e,originalEvent:r})}},i))};function V(e){Ze(D({putSortable:J,cloneEl:K,targetEl:H,rootEl:G,oldIndex:nt,oldDraggableIndex:rt,newIndex:q,newDraggableIndex:it},e))}var H,U,W,G,$e,et,K,tt,nt,q,rt,it,at,J,ot=!1,st=!1,ct=[],lt,Y,ut,dt,ft,pt,mt,ht,gt,_t=!1,vt=!1,yt,X,bt=[],xt=!1,St=[],Ct=typeof document<`u`,wt=Ce,Tt=be||A?`cssFloat`:`float`,Et=Ct&&!we&&!Ce&&`draggable`in document.createElement(`div`),Dt=function(){if(Ct){if(A)return!1;var e=document.createElement(`x`);return e.style.cssText=`pointer-events:auto`,e.style.pointerEvents===`auto`}}(),Ot=function(e,t){var n=F(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=Me(e,0,t),a=Me(e,1,t),o=i&&F(i),s=a&&F(a),c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+L(i).width,l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+L(a).width;if(n.display===`flex`)return n.flexDirection===`column`||n.flexDirection===`column-reverse`?`vertical`:`horizontal`;if(n.display===`grid`)return n.gridTemplateColumns.split(` `).length<=1?`vertical`:`horizontal`;if(i&&o.float&&o.float!==`none`){var u=o.float===`left`?`left`:`right`;return a&&(s.clear===`both`||s.clear===u)?`vertical`:`horizontal`}return i&&(o.display===`block`||o.display===`flex`||o.display===`table`||o.display===`grid`||c>=r&&n[Tt]===`none`||a&&n[Tt]===`none`&&c+l>r)?`vertical`:`horizontal`},kt=function(e,t,n){var r=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,o=n?t.left:t.top,s=n?t.right:t.bottom,c=n?t.width:t.height;return r===o||i===s||r+a/2===o+c/2},At=function(e,t){var n;return ct.some(function(r){var i=r[z].options.emptyInsertThreshold;if(!(!i||Ne(r))){var a=L(r),o=e>=a.left-i&&e<=a.right+i,s=t>=a.top-i&&t<=a.bottom+i;if(o&&s)return n=r}}),n},jt=function(e){function t(e,n){return function(r,i,a,o){var s=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(e==null&&(n||s))return!0;if(e==null||e===!1)return!1;if(n&&e===`clone`)return e;if(typeof e==`function`)return t(e(r,i,a,o),n)(r,i,a,o);var c=(n?r:i).options.group.name;return e===!0||typeof e==`string`&&e===c||e.join&&e.indexOf(c)>-1}}var n={},r=e.group;(!r||he(r)!=`object`)&&(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},Mt=function(){!Dt&&W&&F(W,`display`,`none`)},Nt=function(){!Dt&&W&&F(W,`display`,``)};Ct&&!we&&document.addEventListener(`click`,function(e){if(st)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),st=!1,!1},!0);var Pt=function(e){if(H){e=e.touches?e.touches[0]:e;var t=At(e.clientX,e.clientY);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[z]._onDragOver(n)}}},Ft=function(e){H&&H.parentNode[z]._isOutsideThisEl(e.target)};function Z(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw`Sortable: \`el\` must be an HTMLElement, not ${{}.toString.call(e)}`;this.el=e,this.options=t=O({},t),e[z]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?`>li`:`>*`,swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ot(e,this.options)},ghostClass:`sortable-ghost`,chosenClass:`sortable-chosen`,dragClass:`sortable-drag`,ignore:`a, img`,filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData(`Text`,t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:`data-id`,delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:`sortable-fallback`,fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Z.supportPointer!==!1&&`PointerEvent`in window&&(!Se||Ce),emptyInsertThreshold:5};for(var r in Xe.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var i in jt(t),this)i.charAt(0)===`_`&&typeof this[i]==`function`&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:Et,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?j(e,`pointerdown`,this._onTapStart):(j(e,`mousedown`,this._onTapStart),j(e,`touchstart`,this._onTapStart)),this.nativeDraggable&&(j(e,`dragover`,this),j(e,`dragenter`,this)),ct.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),O(this,Ge())}Z.prototype={constructor:Z,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ht=null)},_getDirection:function(e,t){return typeof this.options.direction==`function`?this.options.direction.call(this,e,t,H):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,i=r.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType===`touch`&&e,s=(o||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,l=r.filter;if(Gt(n),!H&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||r.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Se&&s&&s.tagName.toUpperCase()===`SELECT`)&&(s=N(s,r.draggable,n,!1),!(s&&s.animated)&&et!==s)){if(nt=R(s),rt=R(s,r.draggable),typeof l==`function`){if(l.call(this,e,s,this)){V({sortable:t,rootEl:c,name:`filter`,targetEl:s,toEl:n,fromEl:n}),B(`filter`,t,{evt:e}),i&&e.preventDefault();return}}else if(l&&(l=l.split(`,`).some(function(r){if(r=N(c,r.trim(),n,!1),r)return V({sortable:t,rootEl:r,name:`filter`,targetEl:s,fromEl:n,toEl:n}),B(`filter`,t,{evt:e}),!0}),l)){i&&e.preventDefault();return}r.handle&&!N(c,r.handle,n,!1)||this._prepareDragStart(e,o,s)}}},_prepareDragStart:function(e,t,n){var r=this,i=r.el,a=r.options,o=i.ownerDocument,s;if(n&&!H&&n.parentNode===i){var c=L(n);if(G=i,H=n,U=H.parentNode,$e=H.nextSibling,et=n,at=a.group,Z.dragged=H,lt={target:H,clientX:(t||e).clientX,clientY:(t||e).clientY},ft=lt.clientX-c.left,pt=lt.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,H.style[`will-change`]=`all`,s=function(){if(B(`delayEnded`,r,{evt:e}),Z.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!xe&&r.nativeDraggable&&(H.draggable=!0),r._triggerDragStart(e,t),V({sortable:r,name:`choose`,originalEvent:e}),P(H,a.chosenClass,!0)},a.ignore.split(`,`).forEach(function(e){Ae(H,e.trim(),Rt)}),j(o,`dragover`,Pt),j(o,`mousemove`,Pt),j(o,`touchmove`,Pt),a.supportPointer?(j(o,`pointerup`,r._onDrop),!this.nativeDraggable&&j(o,`pointercancel`,r._onDrop)):(j(o,`mouseup`,r._onDrop),j(o,`touchend`,r._onDrop),j(o,`touchcancel`,r._onDrop)),xe&&this.nativeDraggable&&(this.options.touchStartThreshold=4,H.draggable=!0),B(`delayStart`,this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(be||A))){if(Z.eventCanceled){this._onDrop();return}a.supportPointer?(j(o,`pointerup`,r._disableDelayedDrag),j(o,`pointercancel`,r._disableDelayedDrag)):(j(o,`mouseup`,r._disableDelayedDrag),j(o,`touchend`,r._disableDelayedDrag),j(o,`touchcancel`,r._disableDelayedDrag)),j(o,`mousemove`,r._delayedDragTouchMoveHandler),j(o,`touchmove`,r._delayedDragTouchMoveHandler),a.supportPointer&&j(o,`pointermove`,r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(s,a.delay)}else s()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){H&&Rt(H),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;M(e,`mouseup`,this._disableDelayedDrag),M(e,`touchend`,this._disableDelayedDrag),M(e,`touchcancel`,this._disableDelayedDrag),M(e,`pointerup`,this._disableDelayedDrag),M(e,`pointercancel`,this._disableDelayedDrag),M(e,`mousemove`,this._delayedDragTouchMoveHandler),M(e,`touchmove`,this._delayedDragTouchMoveHandler),M(e,`pointermove`,this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t||=e.pointerType==`touch`&&e,!this.nativeDraggable||t?this.options.supportPointer?j(document,`pointermove`,this._onTouchMove):t?j(document,`touchmove`,this._onTouchMove):j(document,`mousemove`,this._onTouchMove):(j(H,`dragend`,this),j(G,`dragstart`,this._onDragStart));try{document.selection?Kt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(ot=!1,G&&H){B(`dragStarted`,this,{evt:t}),this.nativeDraggable&&j(document,`dragover`,Ft);var n=this.options;!e&&P(H,n.dragClass,!1),P(H,n.ghostClass,!0),Z.active=this,e&&this._appendGhost(),V({sortable:this,name:`start`,originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Y){this._lastX=Y.clientX,this._lastY=Y.clientY,Mt();for(var e=document.elementFromPoint(Y.clientX,Y.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Y.clientX,Y.clientY),e!==t);)t=e;if(H.parentNode[z]._isOutsideThisEl(e),t)do{if(t[z]){var n=void 0;if(n=t[z]._onDragOver({clientX:Y.clientX,clientY:Y.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=De(t));Nt()}},_onTouchMove:function(e){if(lt){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,i=e.touches?e.touches[0]:e,a=W&&ke(W,!0),o=W&&a&&a.a,s=W&&a&&a.d,c=wt&&X&&Pe(X),l=(i.clientX-lt.clientX+r.x)/(o||1)+(c?c[0]-bt[0]:0)/(o||1),u=(i.clientY-lt.clientY+r.y)/(s||1)+(c?c[1]-bt[1]:0)/(s||1);if(!Z.active&&!ot){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(W){a?(a.e+=l-(ut||0),a.f+=u-(dt||0)):a={a:1,b:0,c:0,d:1,e:l,f:u};var d=`matrix(${a.a},${a.b},${a.c},${a.d},${a.e},${a.f})`;F(W,`webkitTransform`,d),F(W,`mozTransform`,d),F(W,`msTransform`,d),F(W,`transform`,d),ut=l,dt=u,Y=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!W){var e=this.options.fallbackOnBody?document.body:G,t=L(H,!0,wt,!0,e),n=this.options;if(wt){for(X=e;F(X,`position`)===`static`&&F(X,`transform`)===`none`&&X!==document;)X=X.parentNode;X!==document.body&&X!==document.documentElement?(X===document&&(X=I()),t.top+=X.scrollTop,t.left+=X.scrollLeft):X=I(),bt=Pe(X)}W=H.cloneNode(!0),P(W,n.ghostClass,!1),P(W,n.fallbackClass,!0),P(W,n.dragClass,!0),F(W,`transition`,``),F(W,`transform`,``),F(W,`box-sizing`,`border-box`),F(W,`margin`,0),F(W,`top`,t.top),F(W,`left`,t.left),F(W,`width`,t.width),F(W,`height`,t.height),F(W,`opacity`,`0.8`),F(W,`position`,wt?`absolute`:`fixed`),F(W,`zIndex`,`100000`),F(W,`pointerEvents`,`none`),Z.ghost=W,e.appendChild(W),F(W,`transform-origin`,ft/parseInt(W.style.width)*100+`% `+pt/parseInt(W.style.height)*100+`%`)}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,i=n.options;if(B(`dragStart`,this,{evt:e}),Z.eventCanceled){this._onDrop();return}B(`setupClone`,this),Z.eventCanceled||(K=Ue(H),K.removeAttribute(`id`),K.draggable=!1,K.style[`will-change`]=``,this._hideClone(),P(K,this.options.chosenClass,!1),Z.clone=K),n.cloneId=Kt(function(){B(`clone`,n),!Z.eventCanceled&&(n.options.removeCloneOnHide||G.insertBefore(K,H),n._hideClone(),V({sortable:n,name:`clone`}))}),!t&&P(H,i.dragClass,!0),t?(st=!0,n._loopId=setInterval(n._emulateDragOver,50)):(M(document,`mouseup`,n._onDrop),M(document,`touchend`,n._onDrop),M(document,`touchcancel`,n._onDrop),r&&(r.effectAllowed=`move`,i.setData&&i.setData.call(n,r,H)),j(document,`drop`,n),F(H,`transform`,`translateZ(0)`)),ot=!0,n._dragStartId=Kt(n._dragStarted.bind(n,t,e)),j(document,`selectstart`,n),mt=!0,window.getSelection().removeAllRanges(),Se&&F(document.body,`user-select`,`none`)},_onDragOver:function(e){var t=this.el,n=e.target,r,i,a,o=this.options,s=o.group,c=Z.active,l=at===s,u=o.sort,d=J||c,f,p=this,m=!1;if(xt)return;function h(o,s){B(o,p,D({evt:e,isOwner:l,axis:f?`vertical`:`horizontal`,revert:a,dragRect:r,targetRect:i,canSort:u,fromSortable:d,target:n,completed:_,onMove:function(n,i){return Lt(G,t,H,r,n,L(n),e,i)},changed:v},s))}function g(){h(`dragOverAnimationCapture`),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function _(r){return h(`dragOverCompleted`,{insertion:r}),r&&(l?c._hideClone():c._showClone(p),p!==d&&(P(H,J?J.options.ghostClass:c.options.ghostClass,!1),P(H,o.ghostClass,!0)),J!==p&&p!==Z.active?J=p:p===Z.active&&J&&(J=null),d===p&&(p._ignoreWhileAnimating=n),p.animateAll(function(){h(`dragOverAnimationComplete`),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===H&&!H.animated||n===t&&!n.animated)&&(ht=null),!o.dragoverBubble&&!e.rootEl&&n!==document&&(H.parentNode[z]._isOutsideThisEl(e.target),!r&&Pt(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function v(){q=R(H),it=R(H,o.draggable),V({sortable:p,name:`change`,toEl:t,newIndex:q,newDraggableIndex:it,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=N(n,o.draggable,t,!0),h(`dragOver`),Z.eventCanceled)return m;if(H.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||p._ignoreWhileAnimating===n)return _(!1);if(st=!1,c&&!o.disabled&&(l?u||(a=U!==G):J===this||(this.lastPutMode=at.checkPull(this,c,H,e))&&s.checkPut(this,c,H,e))){if(f=this._getDirection(e,n)===`vertical`,r=L(H),h(`dragOverValid`),Z.eventCanceled)return m;if(a)return U=G,g(),this._hideClone(),h(`revert`),Z.eventCanceled||($e?G.insertBefore(H,$e):G.appendChild(H)),_(!0);var y=Ne(t,o.draggable);if(!y||Vt(e,f,this)&&!y.animated){if(y===H)return _(!1);if(y&&t===e.target&&(n=y),n&&(i=L(n)),Lt(G,t,H,r,n,i,e,!!n)!==!1)return g(),y&&y.nextSibling?t.insertBefore(H,y.nextSibling):t.appendChild(H),U=t,v(),_(!0)}else if(y&&Bt(e,f,this)){var ee=Me(t,0,o,!0);if(ee===H)return _(!1);if(n=ee,i=L(n),Lt(G,t,H,r,n,i,e,!1)!==!1)return g(),t.insertBefore(H,ee),U=t,v(),_(!0)}else if(n.parentNode===t){i=L(n);var b=0,te,ne=H.parentNode!==t,x=!kt(H.animated&&H.toRect||r,n.animated&&n.toRect||i,f),S=f?`top`:`left`,C=je(n,`top`,`top`)||je(H,`top`,`top`),re=C?C.scrollTop:void 0;ht!==n&&(te=i[S],_t=!1,vt=!x&&o.invertSwap||ne),b=Ht(e,n,i,f,x?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,vt,ht===n);var w;if(b!==0){var T=R(H);do T-=b,w=U.children[T];while(w&&(F(w,`display`)===`none`||w===W))}if(b===0||w===n)return _(!1);ht=n,gt=b;var E=n.nextElementSibling,ie=!1;ie=b===1;var ae=Lt(G,t,H,r,n,i,e,ie);if(ae!==!1)return(ae===1||ae===-1)&&(ie=ae===1),xt=!0,setTimeout(zt,30),g(),ie&&!E?t.appendChild(H):n.parentNode.insertBefore(H,ie?E:n),C&&He(C,0,re-C.scrollTop),U=H.parentNode,te!==void 0&&!vt&&(yt=Math.abs(te-L(n)[S])),v(),_(!0)}if(t.contains(H))return _(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){M(document,`mousemove`,this._onTouchMove),M(document,`touchmove`,this._onTouchMove),M(document,`pointermove`,this._onTouchMove),M(document,`dragover`,Pt),M(document,`mousemove`,Pt),M(document,`touchmove`,Pt)},_offUpEvents:function(){var e=this.el.ownerDocument;M(e,`mouseup`,this._onDrop),M(e,`touchend`,this._onDrop),M(e,`pointerup`,this._onDrop),M(e,`pointercancel`,this._onDrop),M(e,`touchcancel`,this._onDrop),M(document,`selectstart`,this)},_onDrop:function(e){var t=this.el,n=this.options;if(q=R(H),it=R(H,n.draggable),B(`drop`,this,{evt:e}),U=H&&H.parentNode,q=R(H),it=R(H,n.draggable),Z.eventCanceled){this._nulling();return}ot=!1,vt=!1,_t=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),qt(this.cloneId),qt(this._dragStartId),this.nativeDraggable&&(M(document,`drop`,this),M(t,`dragstart`,this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Se&&F(document.body,`user-select`,``),F(H,`transform`,``),e&&(mt&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),W&&W.parentNode&&W.parentNode.removeChild(W),(G===U||J&&J.lastPutMode!==`clone`)&&K&&K.parentNode&&K.parentNode.removeChild(K),H&&(this.nativeDraggable&&M(H,`dragend`,this),Rt(H),H.style[`will-change`]=``,mt&&!ot&&P(H,J?J.options.ghostClass:this.options.ghostClass,!1),P(H,this.options.chosenClass,!1),V({sortable:this,name:`unchoose`,toEl:U,newIndex:null,newDraggableIndex:null,originalEvent:e}),G===U?q!==nt&&q>=0&&(V({sortable:this,name:`update`,toEl:U,originalEvent:e}),V({sortable:this,name:`sort`,toEl:U,originalEvent:e})):(q>=0&&(V({rootEl:U,name:`add`,toEl:U,fromEl:G,originalEvent:e}),V({sortable:this,name:`remove`,toEl:U,originalEvent:e}),V({rootEl:U,name:`sort`,toEl:U,fromEl:G,originalEvent:e}),V({sortable:this,name:`sort`,toEl:U,originalEvent:e})),J&&J.save()),Z.active&&((q==null||q===-1)&&(q=nt,it=rt),V({sortable:this,name:`end`,toEl:U,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){B(`nulling`,this),G=H=U=W=$e=K=et=tt=lt=Y=mt=q=it=nt=rt=ht=gt=J=at=Z.dragged=Z.ghost=Z.clone=Z.active=null,St.forEach(function(e){e.checked=!0}),St.length=ut=dt=0},handleEvent:function(e){switch(e.type){case`drop`:case`dragend`:this._onDrop(e);break;case`dragenter`:case`dragover`:H&&(this._onDragOver(e),It(e));break;case`selectstart`:e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,r=0,i=n.length,a=this.options;r<i;r++)t=n[r],N(t,a.draggable,this.el,!1)&&e.push(t.getAttribute(a.dataIdAttr)||Wt(t));return e},sort:function(e,t){var n={},r=this.el;this.toArray().forEach(function(e,t){var i=r.children[t];N(i,this.options.draggable,r,!1)&&(n[e]=i)},this),t&&this.captureAnimationState(),e.forEach(function(e){n[e]&&(r.removeChild(n[e]),r.appendChild(n[e]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return N(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var r=Xe.modifyOption(this,e,t);r===void 0?n[e]=t:n[e]=r,e===`group`&&jt(n)},destroy:function(){B(`destroy`,this);var e=this.el;e[z]=null,M(e,`mousedown`,this._onTapStart),M(e,`touchstart`,this._onTapStart),M(e,`pointerdown`,this._onTapStart),this.nativeDraggable&&(M(e,`dragover`,this),M(e,`dragenter`,this)),Array.prototype.forEach.call(e.querySelectorAll(`[draggable]`),function(e){e.removeAttribute(`draggable`)}),this._onDrop(),this._disableDelayedDragEvents(),ct.splice(ct.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!tt){if(B(`hideClone`,this),Z.eventCanceled)return;F(K,`display`,`none`),this.options.removeCloneOnHide&&K.parentNode&&K.parentNode.removeChild(K),tt=!0}},_showClone:function(e){if(e.lastPutMode!==`clone`){this._hideClone();return}if(tt){if(B(`showClone`,this),Z.eventCanceled)return;H.parentNode==G&&!this.options.group.revertClone?G.insertBefore(K,H):$e?G.insertBefore(K,$e):G.appendChild(K),this.options.group.revertClone&&this.animate(H,K),F(K,`display`,``),tt=!1}}};function It(e){e.dataTransfer&&(e.dataTransfer.dropEffect=`move`),e.cancelable&&e.preventDefault()}function Lt(e,t,n,r,i,a,o,s){var c,l=e[z],u=l.options.onMove,d;return window.CustomEvent&&!A&&!be?c=new CustomEvent(`move`,{bubbles:!0,cancelable:!0}):(c=document.createEvent(`Event`),c.initEvent(`move`,!0,!0)),c.to=t,c.from=e,c.dragged=n,c.draggedRect=r,c.related=i||t,c.relatedRect=a||L(t),c.willInsertAfter=s,c.originalEvent=o,e.dispatchEvent(c),u&&(d=u.call(l,c,o)),d}function Rt(e){e.draggable=!1}function zt(){xt=!1}function Bt(e,t,n){var r=L(Me(n.el,0,n.options,!0)),i=We(n.el,n.options,W),a=10;return t?e.clientX<i.left-a||e.clientY<r.top&&e.clientX<r.right:e.clientY<i.top-a||e.clientY<r.bottom&&e.clientX<r.left}function Vt(e,t,n){var r=L(Ne(n.el,n.options.draggable)),i=We(n.el,n.options,W),a=10;return t?e.clientX>i.right+a||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>i.bottom+a||e.clientX>r.right&&e.clientY>r.top}function Ht(e,t,n,r,i,a,o,s){var c=r?e.clientY:e.clientX,l=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,f=!1;if(!o){if(s&&yt<l*i){if(!_t&&(gt===1?c>u+l*a/2:c<d-l*a/2)&&(_t=!0),_t)f=!0;else if(gt===1?c<u+yt:c>d-yt)return-gt}else if(c>u+l*(1-i)/2&&c<d-l*(1-i)/2)return Ut(t)}return f||=o,f&&(c<u+l*a/2||c>d-l*a/2)?c>u+l/2?1:-1:0}function Ut(e){return R(H)<R(e)?1:-1}function Wt(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function Gt(e){St.length=0;for(var t=e.getElementsByTagName(`input`),n=t.length;n--;){var r=t[n];r.checked&&St.push(r)}}function Kt(e){return setTimeout(e,0)}function qt(e){return clearTimeout(e)}Ct&&j(document,`touchmove`,function(e){(Z.active||ot)&&e.cancelable&&e.preventDefault()}),Z.utils={on:j,off:M,css:F,find:Ae,is:function(e,t){return!!N(e,t,e,!1)},extend:Le,throttle:Be,closest:N,toggleClass:P,clone:Ue,index:R,nextTick:Kt,cancelNextTick:qt,detectDirection:Ot,getChild:Me,expando:z},Z.get=function(e){return e[z]},Z.mount=function(){var e=[...arguments];e[0].constructor===Array&&(e=e[0]),e.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw`Sortable: Mounted plugin must be a constructor function, not ${{}.toString.call(e)}`;e.utils&&(Z.utils=D(D({},Z.utils),e.utils)),Xe.mount(e)})},Z.create=function(e,t){return new Z(e,t)},Z.version=ye;var Q=[],Jt,Yt,Xt=!1,Zt,Qt,$t,en;function tn(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)e.charAt(0)===`_`&&typeof this[e]==`function`&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?j(document,`dragover`,this._handleAutoScroll):this.options.supportPointer?j(document,`pointermove`,this._handleFallbackAutoScroll):t.touches?j(document,`touchmove`,this._handleFallbackAutoScroll):j(document,`mousemove`,this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?M(document,`dragover`,this._handleAutoScroll):(M(document,`pointermove`,this._handleFallbackAutoScroll),M(document,`touchmove`,this._handleFallbackAutoScroll),M(document,`mousemove`,this._handleFallbackAutoScroll)),rn(),nn(),Ve()},nulling:function(){$t=Yt=Jt=Xt=en=Zt=Qt=null,Q.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(r,i);if($t=e,t||this.options.forceAutoScrollFallback||be||A||Se){an(e,this.options,a,t);var o=Ie(a,!0);Xt&&(!en||r!==Zt||i!==Qt)&&(en&&rn(),en=setInterval(function(){var a=Ie(document.elementFromPoint(r,i),!0);a!==o&&(o=a,nn()),an(e,n.options,a,t)},10),Zt=r,Qt=i)}else{if(!this.options.bubbleScroll||Ie(a,!0)===I()){nn();return}an(e,this.options,Ie(a,!1),!1)}}},O(e,{pluginName:`scroll`,initializeByDefault:!0})}function nn(){Q.forEach(function(e){clearInterval(e.pid)}),Q=[]}function rn(){clearInterval(en)}var an=Be(function(e,t,n,r){if(t.scroll){var i=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,o=t.scrollSensitivity,s=t.scrollSpeed,c=I(),l=!1,u;Yt!==n&&(Yt=n,nn(),Jt=t.scroll,u=t.scrollFn,Jt===!0&&(Jt=Ie(n,!0)));var d=0,f=Jt;do{var p=f,m=L(p),h=m.top,g=m.bottom,_=m.left,v=m.right,y=m.width,ee=m.height,b=void 0,te=void 0,ne=p.scrollWidth,x=p.scrollHeight,S=F(p),C=p.scrollLeft,re=p.scrollTop;p===c?(b=y<ne&&(S.overflowX===`auto`||S.overflowX===`scroll`||S.overflowX===`visible`),te=ee<x&&(S.overflowY===`auto`||S.overflowY===`scroll`||S.overflowY===`visible`)):(b=y<ne&&(S.overflowX===`auto`||S.overflowX===`scroll`),te=ee<x&&(S.overflowY===`auto`||S.overflowY===`scroll`));var w=b&&(Math.abs(v-i)<=o&&C+y<ne)-(Math.abs(_-i)<=o&&!!C),T=te&&(Math.abs(g-a)<=o&&re+ee<x)-(Math.abs(h-a)<=o&&!!re);if(!Q[d])for(var E=0;E<=d;E++)Q[E]||(Q[E]={});(Q[d].vx!=w||Q[d].vy!=T||Q[d].el!==p)&&(Q[d].el=p,Q[d].vx=w,Q[d].vy=T,clearInterval(Q[d].pid),(w!=0||T!=0)&&(l=!0,Q[d].pid=setInterval(function(){r&&this.layer===0&&Z.active._onTouchMove($t);var t=Q[this.layer].vy?Q[this.layer].vy*s:0,n=Q[this.layer].vx?Q[this.layer].vx*s:0;typeof u==`function`&&u.call(Z.dragged.parentNode[z],n,t,e,$t,Q[this.layer].el)!==`continue`||He(Q[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==c&&(f=Ie(f,!1)));Xt=l}},30),on=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var c=n||i;o();var l=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(l.clientX,l.clientY);s(),c&&!c.el.contains(u)&&(a(`spill`),this.onSpill({dragEl:r,putSortable:n}))}};function sn(){}sn.prototype={startIndex:null,dragStart:function(e){this.startIndex=e.oldDraggableIndex},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Me(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:on},O(sn,{pluginName:`revertOnSpill`});function cn(){}cn.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:on},O(cn,{pluginName:`removeOnSpill`}),Z.mount(new tn),Z.mount(cn,sn);var ln=Z,un=new Set,dn={ghostClass:`calcite-sortable--ghost`,chosenClass:`calcite-sortable--chosen`,dragClass:`calcite-sortable--drag`,fallbackClass:`calcite-sortable--fallback`};function fn(e){if(hn(e))return;pn(e),un.add(e);let{group:t,handleSelector:n,dragSelector:r,sortDisabled:i}=e;e.sortable=ln.create(e.el,{dataIdAttr:`id`,swapThreshold:.5,...dn,...!!r&&{draggable:r},...!!t&&{sort:!i,group:{name:t,...!!e.canPull&&{pull:(t,n,r,{newDraggableIndex:i,oldDraggableIndex:a})=>e.canPull({toEl:t.el,fromEl:n.el,dragEl:r,newIndex:i,oldIndex:a})},...!!e.canPut&&{put:(t,n,r,{newDraggableIndex:i,oldDraggableIndex:a})=>e.canPut({toEl:t.el,fromEl:n.el,dragEl:r,newIndex:i,oldIndex:a})}}},onMove:({from:t,dragged:n,to:r,related:i})=>{e.onDragMove&&e.onDragMove({fromEl:t,dragEl:n,toEl:r,relatedEl:i})},handle:n,filter:`${n}[disabled]`,onStart:({from:t,item:n,to:r,newDraggableIndex:i,oldDraggableIndex:a})=>{mn.active=!0,gn(),e.onDragStart({fromEl:t,dragEl:n,toEl:r,newIndex:i,oldIndex:a})},onEnd:({from:t,item:n,to:r,newDraggableIndex:i,oldDraggableIndex:a})=>{mn.active=!1,_n(),e.onDragEnd({fromEl:t,dragEl:n,toEl:r,newIndex:i,oldIndex:a})},onSort:({from:t,item:n,to:r,newDraggableIndex:i,oldDraggableIndex:a})=>{e.onDragSort({fromEl:t,dragEl:n,toEl:r,newIndex:i,oldIndex:a})}})}function pn(e){hn(e)||(un.delete(e),e.sortable?.destroy(),e.sortable=null)}var mn={active:!1};function hn(e){return e.dragEnabled&&mn.active}function gn(){Array.from(un).forEach(e=>e.onGlobalDragStart())}function _n(){Array.from(un).forEach(e=>e.onGlobalDragEnd())}var $={container:`container`,table:`table`,scrim:`scrim`,stack:`stack`,tableContainer:`table-container`,sticky:`sticky-pos`,assistiveText:`assistive-text`,containerHeight:`container-height`},vn={filterNoResults:`filter-no-results`,filterActionsStart:`filter-actions-start`,filterActionsEnd:`filter-actions-end`},yn=a`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{position:relative;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.container-height{block-size:100%}.table-container{box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;background-color:transparent}.table-container *{box-sizing:border-box}.table{inline-size:100%}.stack{--calcite-stack-padding-inline: 0;--calcite-stack-padding-block: 0}.sticky-pos{position:sticky;inset-block-start:0px;z-index:var(--calcite-z-index-sticky);background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,bn=`${b}, ${x}`,xn=class extends n{constructor(){super(),this.dragSelector=x,this.focusableItems=[],this.handleSelector=`calcite-sort-handle`,this.listItems=[],this.listItemGroups=[],this.mutationObserver=p(`mutation`,()=>{this.willPerformFilter=!0,this.updateListItemsDebounced()}),this.cancelable=y()(this),this.updateListItemsDebounced=v(this.updateListItems,c.nextTick),this.visibleItems=[],this.willFilterEmit=!1,this.willPerformFilter=!1,this.messages=u({blocking:!0}),this.focusSetter=_()(this),this.dataForFilter=[],this.hasFilterActionsEnd=!1,this.hasFilterActionsStart=!1,this.hasFilterNoResults=!1,this.sortHandleMenuItems=[],this.disabled=!1,this.dragEnabled=!1,this.filterEnabled=!1,this.filteredData=[],this.filteredItems=[],this.interactionMode=`interactive`,this.loading=!1,this.displayMode=`flat`,this.scale=`m`,this.selectedItems=[],this.selectionAppearance=`icon`,this.selectionMode=`none`,this.sortDisabled=!1,this.calciteInternalListDefaultSlotChange=r({cancelable:!1}),this.calciteListChange=r({cancelable:!1}),this.calciteListDragEnd=r({cancelable:!1}),this.calciteListDragStart=r({cancelable:!1}),this.calciteListFilter=r({cancelable:!1}),this.calciteListMoveHalt=r({cancelable:!1}),this.calciteListOrderChange=r({cancelable:!1}),this.listen(`calciteInternalListItemToggle`,this.handleCalciteListItemToggle),this.listen(`calciteInternalFocusPreviousItem`,this.handleCalciteInternalFocusPreviousItem),this.listen(`calciteInternalListItemActive`,this.handleCalciteInternalListItemActive),this.listen(`calciteListItemSelect`,this.handleCalciteListItemSelect),this.listen(`calciteInternalAssistiveTextChange`,this.handleCalciteInternalAssistiveTextChange),this.listen(`calciteListItemSortHandleBeforeOpen`,this.updateListItemsDebounced),this.listen(`calciteSortHandleReorder`,this.handleSortReorder),this.listen(`calciteSortHandleMove`,this.handleSortMove),this.listen(`calciteSortHandleAdd`,this.handleSortAdd),this.listen(`calciteInternalListItemSelect`,this.handleCalciteInternalListItemSelect),this.listen(`calciteInternalListItemSelectMultiple`,this.handleCalciteInternalListItemSelectMultiple),this.listen(`calciteInternalListItemChange`,this.handleCalciteInternalListItemChange),this.listen(`calciteInternalListItemGroupDefaultSlotChange`,this.handleCalciteInternalListItemGroupDefaultSlotChange)}static{this.properties={assistiveText:[16,{},{state:!0}],dataForFilter:[16,{},{state:!0}],hasFilterActionsEnd:[16,{},{state:!0}],hasFilterActionsStart:[16,{},{state:!0}],hasFilterNoResults:[16,{},{state:!0}],sortHandleMenuItems:[16,{},{state:!0}],canPull:[0,{},{attribute:!1}],canPut:[0,{},{attribute:!1}],disabled:[7,{},{reflect:!0,type:Boolean}],dragEnabled:[7,{},{reflect:!0,type:Boolean}],filterEnabled:[7,{},{reflect:!0,type:Boolean}],filterPredicate:[0,{},{attribute:!1}],filterLabel:[3,{},{reflect:!0}],filterPlaceholder:[3,{},{reflect:!0}],filterProps:[0,{},{attribute:!1}],filterText:[3,{},{reflect:!0}],filteredData:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],group:[3,{},{reflect:!0}],interactionMode:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],numberingSystem:1,scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],sortDisabled:[7,{},{reflect:!0,type:Boolean}]}}static{this.styles=yn}get hasActiveFilter(){return this.filterEnabled&&this.filterText&&this.filteredItems.length!==this.visibleItems.length}get showNoResultsContainer(){return this.filterEnabled&&this.filterText&&this.hasFilterNoResults&&this.visibleItems.length&&!this.filteredItems.length}async setFocus(e){return this.focusSetter(()=>this.filterEnabled?this.filterEl:this.focusableItems.find(e=>e.active),e)}emitOrderChangeEvent(e){this.calciteListOrderChange.emit(e)}connectedCallback(){super.connectedCallback(),this.connectObserver(),this.willPerformFilter=!0,this.updateListItemsDebounced(),this.setUpSorting(),this.setParentList(),this.setListItemGroups(),this.cancelable.add(this.updateListItemsDebounced)}async load(){this.handleInteractionModeWarning()}willUpdate(e){(e.has(`filterText`)||e.has(`filterProps`)||e.has(`filterPredicate`))&&this.performFilter(),(e.has(`filterEnabled`)&&(this.hasUpdated||this.filterEnabled!==!1)||e.has(`group`)||e.has(`sortDisabled`)&&(this.hasUpdated||this.sortDisabled!==!1)||e.has(`dragEnabled`)&&(this.hasUpdated||this.dragEnabled!==!1)||e.has(`selectionMode`)&&(this.hasUpdated||this.selectionMode!==`none`)||e.has(`selectionAppearance`)&&(this.hasUpdated||this.selectionAppearance!==`icon`)||e.has(`displayMode`)&&this.hasUpdated||e.has(`scale`)&&this.hasUpdated||e.has(`canPull`)&&this.hasUpdated||e.has(`canPut`)&&this.hasUpdated||e.has(`filterPredicate`)&&this.hasUpdated)&&this.handleListItemChange()}updated(){h(this)}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver(),pn(this)}updateListItems(){this.updateGroupItems();let{selectionAppearance:e,selectionMode:t,interactionMode:n,dragEnabled:r,el:i,filterEl:a,displayMode:o,scale:s,sortDisabled:c,sortHandleMenuItems:l}=this,u=Array.from(this.el.querySelectorAll(x)),d=i,f=Array.from(d.children).filter(ne);if(u.forEach(a=>{a.scale=s,a.selectionAppearance=e,a.selectionMode=t,a.interactionMode=n,a.closest(`calcite-list`)===i&&(a.moveToItems=l.filter(e=>this.validateSortMenuItem({type:`move`,fromEl:d,toEl:e.element,dragEl:a,newIndex:0,oldIndex:f.indexOf(a)})),a.addToItems=this.sortHandleMenuItems.filter(e=>this.validateSortMenuItem({type:`add`,fromEl:d,toEl:e.element,dragEl:a,newIndex:0,oldIndex:f.indexOf(a)})),a.dragHandle=r,a.displayMode=o,a.sortDisabled=c)}),this.parentListEl){this.setUpSorting();return}this.listItems=u,this.filterEnabled&&this.willPerformFilter&&(this.willPerformFilter=!1,this.dataForFilter=this.getItemData(),a&&(a.items=this.dataForFilter,this.filterAndUpdateData())),this.visibleItems=this.listItems.filter(e=>!e.closed&&!e.hidden),this.updateFilteredItems(),this.borderItems(),this.focusableItems=this.filteredItems.filter(e=>!e.disabled),this.setActiveListItem(),this.updateSelectedItems(),this.setUpSorting()}handleListItemChange(){this.willPerformFilter=!0,this.updateListItemsDebounced()}handleCalciteListItemToggle(e){this.parentListEl||(e.stopPropagation(),this.borderItems())}handleCalciteInternalFocusPreviousItem(e){if(this.parentListEl)return;e.stopPropagation();let{focusableItems:t}=this,n=t.findIndex(e=>e.active)-1;t[n]&&this.focusRow(t[n])}handleCalciteInternalListItemActive(e){if(this.parentListEl)return;e.stopPropagation();let t=e.target,{listItems:n}=this;n.forEach(e=>{e.active=e===t})}handleCalciteListItemSelect(){this.parentListEl||this.updateSelectedItems(!0)}handleCalciteInternalAssistiveTextChange(e){this.assistiveText=e.detail.message,e.stopPropagation()}handleSortReorder(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleReorder(e))}handleSortAdd(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleAdd(e))}handleSortMove(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleMove(e))}handleCalciteInternalListItemSelect(e){if(this.parentListEl)return;e.stopPropagation();let t=e.target,{listItems:n,selectionMode:r}=this;t.selected&&(r===`single`||r===`single-persist`)&&n.forEach(e=>e.selected=e===t),this.updateSelectedItems()}handleCalciteInternalListItemSelectMultiple(e){if(this.parentListEl)return;e.stopPropagation();let{target:t,detail:n}=e,{focusableItems:r,lastSelectedInfo:i}=this,a=t;if(n.selectMultiple&&i){let e=r.indexOf(a),t=r.indexOf(i.selectedItem),n=Math.min(t,e),o=Math.max(t,e);r.slice(n,o+1).forEach(e=>e.selected=i.selected)}else this.lastSelectedInfo={selectedItem:a,selected:a.selected}}handleCalciteInternalListItemChange(e){this.parentListEl||(e.stopPropagation(),this.updateListItemsDebounced())}handleCalciteInternalListItemGroupDefaultSlotChange(e){e.stopPropagation()}connectObserver(){this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0})}disconnectObserver(){this.mutationObserver?.disconnect()}setUpSorting(){let{dragEnabled:e,defaultSlotEl:t}=this;e&&(t&&te(t),fn(this))}onGlobalDragStart(){this.disconnectObserver()}onGlobalDragEnd(){this.connectObserver()}onDragEnd(e){this.calciteListDragEnd.emit(e)}onDragStart(e){e.dragEl.sortHandleOpen=!1,this.calciteListDragStart.emit(e)}onDragSort(e){this.setParentList(),this.updateListItemsDebounced(),this.calciteListOrderChange.emit(e)}setParentList(){this.parentListEl=this.el.parentElement?.closest(S)}handleDefaultSlotChange(){this.parentListEl&&this.calciteInternalListDefaultSlotChange.emit()}setListItemGroups(){this.listItemGroups=Array.from(this.el.querySelectorAll(b))}handleFilterActionsStartSlotChange(e){this.hasFilterActionsStart=d(e)}handleFilterActionsEndSlotChange(e){this.hasFilterActionsEnd=d(e)}handleFilterNoResultsSlotChange(e){this.hasFilterNoResults=d(e)}setActiveListItem(){let{focusableItems:e}=this;e.some(e=>e.active)||e[0]&&(e[0].active=!0)}async updateSelectedItems(e=!1){await this.updateComplete,this.selectedItems=this.visibleItems.filter(e=>e.selected),e&&this.calciteListChange.emit()}filterElements({el:e,filteredItems:t,visibleParents:n}){let r=!n.has(e)&&!t.includes(e);e.filterHidden=r;let i=e.parentElement.closest(bn);i&&(r||n.add(i),this.filterElements({el:i,filteredItems:t,visibleParents:n}))}allParentListItemsExpanded(e){let t=e.parentElement?.closest(x);if(t){if(!t.expanded)return!1}else return!0;return this.allParentListItemsExpanded(t)}borderItems(){let e=this.visibleItems.filter(e=>!e.filterHidden&&this.allParentListItemsExpanded(e));e.forEach(t=>t.bordered=t!==e[e.length-1])}updateFilteredItems(){let{visibleItems:e,filteredData:t,filterText:n,filterPredicate:r}=this,i=e?.filter(t=>e.every(e=>e===t||!t.contains(e))),a=r?e.filter(r):n?t.map(e=>e.el):e||[],o=new WeakSet;i.forEach(e=>this.filterElements({el:e,filteredItems:a,visibleParents:o})),this.filteredItems=a,this.willFilterEmit&&(this.willFilterEmit=!1,this.calciteListFilter.emit())}updateFilteredData(){let{filterEl:e}=this;e&&(e.filteredItems&&(this.filteredData=e.filteredItems),this.updateListItemsDebounced())}async filterAndUpdateData(){await this.filterEl?.filter(this.filterText),this.updateFilteredData()}get effectiveFilterProps(){return this.filterProps?this.filterProps.filter(e=>e!==`el`):[`description`,`label`,`metadata`,`heading`]}performFilter(){let{filterEl:e,filterText:t,effectiveFilterProps:n}=this;e&&(e.value=t,e.filterProps=n,this.filterAndUpdateData())}setDefaultSlotEl(e){this.defaultSlotEl=e}setFilterEl(e){this.filterEl=e,this.performFilter()}handleFilterChange(e){e.stopPropagation();let{value:t}=e.currentTarget;this.filterText=t,this.willFilterEmit=!0,this.updateFilteredData()}getItemData(){return this.listItems.map(e=>({label:e.label,description:e.description,metadata:e.metadata,heading:this.getGroupHeading(e),el:e}))}getGroupHeading(e){return this.listItemGroups.filter(t=>t.contains(e)).map(e=>e.heading)}updateGroupItems(){let{el:e,group:t,scale:n}=this,r=f(e);this.sortHandleMenuItems=(t?Array.from(r.querySelectorAll(`${S}[group="${t}"]`)).filter(e=>!e.disabled&&e.dragEnabled):[]).map(e=>({element:e,label:e.label??e.id,id:l()})),Array.from(this.el.querySelectorAll(b)).forEach(e=>{e.scale=n})}focusRow(e){let{focusableItems:t}=this;e&&(t.forEach(t=>t.active=t===e),e.setFocus())}isNavigable(e){let t=e.parentElement?.closest(x);return t?t.expanded&&this.isNavigable(t):!0}handleListKeydown(e){if(e.defaultPrevented||this.parentListEl)return;let{key:t}=e,n=this.focusableItems.filter(e=>this.isNavigable(e)),r=n.findIndex(e=>e.active);if(t===`ArrowDown`){e.preventDefault();let t=e.target===this.filterEl?0:r+1;n[t]&&this.focusRow(n[t])}else if(t===`ArrowUp`){if(e.preventDefault(),r===0&&this.filterEnabled){this.filterEl.setFocus();return}let t=r-1;n[t]&&this.focusRow(n[t])}else if(t===`Home`){e.preventDefault();let t=n[0];t&&this.focusRow(t)}else if(t===`End`){e.preventDefault();let t=n[n.length-1];t&&this.focusRow(t)}}handleInteractionModeWarning(){this.interactionMode===`static`&&this.selectionMode!==`none`&&this.selectionAppearance===`border`&&console.warn(`selection-appearance="border" requires interaction-mode="interactive"`)}validateSortMenuItem({fromEl:e,toEl:t,dragEl:n,newIndex:r,oldIndex:i,type:a}){if(!e||!t||t===e||n.contains(t))return!1;let o=e.canPull?.({toEl:t,fromEl:e,dragEl:n,newIndex:r,oldIndex:i})??!0,s=t.canPut?.({toEl:t,fromEl:e,dragEl:n,newIndex:r,oldIndex:i})??!0;return(a===`add`?o===`clone`:o===!0)&&s}handleAdd(e){let{addTo:t}=e.detail,n=e.target,r=n?.parentElement,i=t.element,a=Array.from(r.children).filter(ne).indexOf(n);if(!this.validateSortMenuItem({type:`add`,fromEl:r,toEl:i,dragEl:n,newIndex:0,oldIndex:a}))return;n.sortHandleOpen=!1,this.disconnectObserver();let o=n.cloneNode();i.prepend(o),C(n),this.updateListItemsDebounced(),this.connectObserver();let s={dragEl:n,fromEl:r,toEl:i,newIndex:0,oldIndex:a};this.calciteListOrderChange.emit(s),i.emitOrderChangeEvent(s)}handleMove(e){let{moveTo:t}=e.detail,n=e.target,r=n?.parentElement,i=t.element,a=Array.from(r.children).filter(ne).indexOf(n);if(!this.validateSortMenuItem({type:`move`,fromEl:r,toEl:i,dragEl:n,newIndex:0,oldIndex:a}))return;n.sortHandleOpen=!1,this.disconnectObserver(),i.prepend(n),C(n),this.updateListItemsDebounced(),this.connectObserver();let o={dragEl:n,fromEl:r,toEl:i,newIndex:0,oldIndex:a};this.calciteListOrderChange.emit(o),i.emitOrderChangeEvent(o)}handleReorder(e){let{reorder:t}=e.detail,n=e.target,r=n?.parentElement;if(!r)return;n.sortHandleOpen=!1;let i=Array.from(r.children).filter(ne),a=i.length-1,o=i.indexOf(n),s=o;switch(t){case`top`:s=0;break;case`bottom`:s=a;break;case`up`:s=o===0?0:o-1;break;case`down`:s=o===a?a:o+1;break}this.disconnectObserver();let c=t===`up`||t===`top`?i[s]:i[s].nextSibling;r.insertBefore(n,c),this.updateListItemsDebounced(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:n,fromEl:r,toEl:r,newIndex:s,oldIndex:o})}render(){let{loading:n,label:r,disabled:a,dataForFilter:o,filterEnabled:s,filterPlaceholder:c,filterText:l,filterLabel:u,hasFilterActionsStart:d,hasFilterActionsEnd:f,effectiveFilterProps:p}=this;return g({disabled:this.disabled,children:i`<div class=${e({[$.container]:!0,[$.containerHeight]:this.listItems.length<1&&n})}>${this.dragEnabled?i`<span aria-live=assertive class=${e($.assistiveText)}>${this.assistiveText}</span>`:null}${this.renderItemAriaLive()}${n?i`<calcite-scrim class=${e($.scrim)} .loading=${n}></calcite-scrim>`:null}<div .ariaBusy=${n} .ariaLabel=${r||``} class=${e($.table)} @keydown=${this.handleListKeydown} role=treegrid>${s||d||f?i`<div class=${e($.sticky)} role=rowgroup><div role=row><div role=columnheader><calcite-stack class=${e($.stack)}><slot name=${vn.filterActionsStart} @slotchange=${this.handleFilterActionsStartSlotChange} slot=${E.actionsStart}></slot><calcite-filter .ariaLabel=${c} .disabled=${a} .filterProps=${p} .items=${o} .label=${u} @calciteFilterChange=${this.handleFilterChange} .placeholder=${c} .scale=${this.scale} .value=${l} ${t(this.setFilterEl)}></calcite-filter><slot name=${vn.filterActionsEnd} @slotchange=${this.handleFilterActionsEndSlotChange} slot=${E.actionsEnd}></slot></calcite-stack></div></div></div>`:null}<div class=${e($.tableContainer)} role=rowgroup><slot @slotchange=${this.handleDefaultSlotChange} ${t(this.setDefaultSlotEl)}></slot></div></div><div aria-live=polite data-test-id=no-results-container .hidden=${!this.showNoResultsContainer}><slot name=${vn.filterNoResults} @slotchange=${this.handleFilterNoResultsSlotChange}></slot></div></div>`})}renderItemAriaLive(){let{messages:t,filteredItems:n,parentListEl:r,messages:{_lang:a},numberingSystem:o}=this;return ee.numberFormatOptions={locale:a,numberingSystem:o},r?null:i`<div aria-live=polite class=${e($.assistiveText)}>${this.hasActiveFilter?m(`aria-filter-enabled`,i`<div>${t.filterEnabled}</div>`):null}${m(`aria-item-count`,i`<div>${t.total.replace(`{count}`,ee.localize(n.length.toString()))}</div>`)}${n.length?m(`aria-item-list`,i`<ol>${n.map(e=>i`<li>${e.label}</li>`)}</ol>`):null}</div>`}};o(`calcite-list`,xn);export{xn as List};