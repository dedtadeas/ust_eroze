import{Kp as e,Vp as t}from"./index-BqmCqmfp.js";async function n(n,r=n.popupTemplate){if(r==null)return[];let i=await r.getRequiredFields(n.fieldsIndex),{lastEditInfoEnabled:a}=r,{objectIdField:o,typeIdField:s,globalIdField:c,relationships:l}=n;if(i.includes(`*`))return[`*`];let u=a?t(n):[],d=e(n.fieldsIndex,[...i,...u]);return s&&d.push(s),d&&o&&n.fieldsIndex?.has(o)&&!d.includes(o)&&d.push(o),d&&c&&n.fieldsIndex?.has(c)&&!d.includes(c)&&d.push(c),l?.forEach(e=>{let{keyField:t}=e;d&&t&&n.fieldsIndex?.has(t)&&!d.includes(t)&&d.push(t)}),d}function r(e,t){return e&&typeof e==`object`?t?.checkPopupEnabled&&`popupEnabled`in e&&!e.popupEnabled?null:`popupTemplate`in e&&e.popupTemplate?e.popupTemplate:t!=null&&t.defaultPopupTemplateEnabled&&`defaultPopupTemplate`in e&&e.defaultPopupTemplate?e.defaultPopupTemplate:null:null}function i(e,t){return r(e,{defaultPopupTemplateEnabled:t})!=null}export{n,i as r,r as t};