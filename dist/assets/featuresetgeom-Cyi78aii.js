import{Vn as e,jn as t}from"./index-BqmCqmfp.js";import"./ImmutableArray-C3KNQCVd.js";import{W as n,Y as r,g as i,k as a,s as o}from"./Dictionary-B3Q9BFVY.js";import"./shared-BZhQTnH4.js";import"./number-Dq0Kt6xf.js";import"./Feature-Bd-5gqon.js";import"./memoryEstimations-O7VgDRVG.js";import"./OptimizedFeature-Dx4_lHip.js";import"./OptimizedGeometry-f3I9Z6C1.js";import"./OptimizedFeatureSet-DlHqIhoP.js";import"./featureConversionUtils-7vyVIZ6j.js";import"./WhereClause-h6PJ6gjs.js";import{t as s}from"./operatorsWorkerConnection-Dtd10goJ.js";import{n as c,t as l}from"./SpatialFilter-CpSqX1mM.js";function u(n){return async(u,d,f)=>{if(r(f,2,2,u,d),(f=i(f))[0]===null&&f[1]===null)return!1;if(o(f[0])){if(a(f[1]))return new l({parentfeatureset:f[0],relation:n,relationGeom:f[1]});if(f[1]===null)return new c({parentfeatureset:f[0]});throw new e(u,`InvalidParameter`,d)}if(a(f[0])){if(a(f[1])){switch(n){case`esriSpatialRelEnvelopeIntersects`:{let e=t(f[0]),n=t(f[1]);return e!=null&&n!=null&&s(`intersects`,[e.toJSON(),n.toJSON()])}case`esriSpatialRelIntersects`:return s(`intersects`,[f[0].toJSON(),f[1].toJSON()]);case`esriSpatialRelContains`:return s(`contains`,[f[0].toJSON(),f[1].toJSON()]);case`esriSpatialRelOverlaps`:return s(`overlaps`,[f[0].toJSON(),f[1].toJSON()]);case`esriSpatialRelWithin`:return s(`within`,[f[0].toJSON(),f[1].toJSON()]);case`esriSpatialRelTouches`:return s(`touches`,[f[0].toJSON(),f[1].toJSON()]);case`esriSpatialRelCrosses`:return s(`crosses`,[f[0].toJSON(),f[1].toJSON()])}throw new e(u,`InvalidParameter`,d)}if(o(f[1]))return new l({parentfeatureset:f[1],relation:n,relationGeom:f[0]});if(f[1]===null)return!1;throw new e(u,`InvalidParameter`,d)}if(f[0]===null){if(o(f[1]))return new c({parentfeatureset:f[1]});if(a(f[1])||f[1]===null)return!1}throw new e(u,`InvalidParameter`,d)}}function d(t){t.mode===`async`&&(t.functions.intersects=function(e,n){return t.standardFunctionAsync(e,n,u(`esriSpatialRelIntersects`))},t.functions.envelopeintersects=function(e,n){return t.standardFunctionAsync(e,n,u(`esriSpatialRelEnvelopeIntersects`))},t.signatures.push({name:`envelopeintersects`,min:2,max:2}),t.functions.contains=function(e,n){return t.standardFunctionAsync(e,n,u(`esriSpatialRelContains`))},t.functions.overlaps=function(e,n){return t.standardFunctionAsync(e,n,u(`esriSpatialRelOverlaps`))},t.functions.within=function(e,n){return t.standardFunctionAsync(e,n,u(`esriSpatialRelWithin`))},t.functions.touches=function(e,n){return t.standardFunctionAsync(e,n,u(`esriSpatialRelTouches`))},t.functions.crosses=function(e,n){return t.standardFunctionAsync(e,n,u(`esriSpatialRelCrosses`))},t.functions.relate=function(l,u){return t.standardFunctionAsync(l,u,async(t,d,f)=>{if(f=i(f),r(f,3,3,l,u),a(f[0])&&a(f[1]))return s(`relate`,[f[0].toJSON(),f[1].toJSON(),n(f[2])]);if(a(f[0])&&f[1]===null||a(f[1])&&f[0]===null)return!1;if(o(f[0])&&f[1]===null)return new c({parentfeatureset:f[0]});if(o(f[1])&&f[0]===null)return new c({parentfeatureset:f[1]});if(o(f[0])&&a(f[1]))return f[0].relate(f[1],n(f[2]));if(o(f[1])&&a(f[0]))return f[1].relate(f[0],n(f[2]));if(f[0]===null&&f[1]===null)return!1;throw new e(l,`InvalidParameter`,u)})})}export{d as registerFunctions};