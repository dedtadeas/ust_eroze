import{Ad as e}from"./index-BqmCqmfp.js";var t=`Raster.`,n=`Raster.Dim.`,r=`.Max`,i={servicePixelValue:`Raster.ServicePixelValue`,rawServicePixelValue:`Raster.ServicePixelValue.Raw`,itemPixelValue:`Raster.ItemPixelValue`,magnitude:`Raster.Magnitude`,direction:`Raster.Direction`,variable:`Raster.Variable`},a=new Map([[`quarters`,`Quarter`],[`months`,`Month`],[`weeks`,`Week of the year`],[`days`,`Day of the year`]]);function o(t,n){return new e({name:t,alias:n,domain:null,editable:!1,length:50,type:`string`})}function s(t,n){return new e({name:t,alias:n,domain:null,editable:!1,type:`double`})}function c(t,n){return new e({name:t,alias:n,domain:null,editable:!1,type:`date`})}function l(e){return o(i.servicePixelValue,e??`Service Pixel Value`)}function u(e){return o(i.rawServicePixelValue,e??`Raw Service Pixel Value`)}function d(){return o(i.itemPixelValue,`Item Pixel Value`)}function f(e){return o(`${i.servicePixelValue}.${e}`,e)}function p(e){return s(`${i.magnitude}`,`Magnitude`+(e?` (${e})`:``))}function m(){return s(`${i.direction}`,`Direction (Â°)`)}function h(e){return e.fields.filter(e=>e.type!==`oid`&&e.name.toLowerCase()!==`value`).map(e=>{let n=e.clone();return n.name=`${t}${e.name}`,n})}function g(e){let t=new Set,a=new Set,l=new Map;return e.variables.forEach(({dimensions:e})=>{e.forEach(e=>{if(e.recurring)l.set(e.name,e.unit);else{let n=e.unit?.trim()===`ISO8601`||e.name?.trim()?.toLowerCase()===`stdtime`?t:a;n.add(e.name),e.hasRanges&&n.add(`${e.name}${r}`)}})}),[o(i.variable,`Variable`),...[...t].map(e=>c(`${n}${e}`,v(e))),...[...a].map(e=>s(`${n}${e}`,v(e))),...[...l].map(([e,t])=>s(`${n}${e}`,_(e,t)))]}function _(e,t){return t=t?.toLowerCase(),t&&a.has(t)?a.get(t):v(e)}function v(e){let t=e.endsWith(r),n=t?e.slice(0,-4):e,i=n===`StdTime`?`Standard Time`:n===`StdZ`?`Standard Z`:n;return t?`${i} Max`:i}function y(e,t){return t?new Date(e):e}function b(e,t,n){n?.length&&(t[i.variable]=n[0].variableName,n.forEach(({dimensionName:n,values:i})=>{if(n&&i?.length){let a=`Raster.Dim.${n}`,o=e.find(({name:e})=>e===a);if(!o)return;let s=o.type===`date`,c=i[0];if(Array.isArray(c)){if(t[`Raster.Dim.${n}`]=y(c[0],s),c[1]!=null){let i=`Raster.Dim.${n}${r}`;e.some(({name:e})=>e===i)&&(t[i]=y(c[1],s))}}else t[`Raster.Dim.${n}`]=y(c,s)}}))}function x(e,t){if(t.pixelType.startsWith(`f`)&&e.forEach(({format:e,fieldName:t})=>{e&&t&&/^raster\.(item|service)pixelvalue/i.test(t)&&(e.places=2)}),t.multidimensionalInfo){let n=t.multidimensionalInfo.variables.flatMap(({dimensions:e})=>e);e.forEach(({format:e,fieldName:t})=>{if(e&&t?.startsWith(`Raster.Dim.`)){let i=t.slice(11),a=`${i}${r}`;n.find(({name:e})=>e===i||e===a)?.values?.every(e=>Number.isInteger(e))&&(e.places=0)}})}}export{u as a,i as c,l as d,g as f,x as i,d as l,b as n,p as o,h as p,t as r,f as s,m as t,n as u};