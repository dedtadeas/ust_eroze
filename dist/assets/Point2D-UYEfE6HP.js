function e(e){switch(e){case 1:return`Unknown error`;case 2:return`Corrupted geometry`;case 3:return`Empty geometry`;case 4:return`Math singularity`;case 5:return`Buffer is too small`;case 6:return`Invalid shape type`;case 7:return`Projection out of supported range`;case 8:return`Non simple geometry`;case 9:return`Cannot calculate geodesic`;case 10:return`Notation conversion`;case 11:return`Missing grid file`;case 12:return`Invalid call`;case 13:return`Internal error`;case 14:return`Not implemented`;case 15:return`IO error`;case 16:return`Invalid 3D`;case 17:return`An ambiguous geography edge with antipodal points`;case 18:return`Geocentric coordinates require ellipsoidal height`;case 19:return`Geography cannot be projected into a gnomonic plane or a result of an operation cannot fit into a gnomonic plane`;case 20:return`Geometry is too large to be exported in to a given format`;case 22:return`Operation is canceled by the user`;case 21:return`The operation, such as projection or geodetic computation, cannot be performed without pe-wasm loaded`;default:return`unknown error`}}function t(e,t){try{if(!e)throw Error(t)}catch(e){throw e}}var n=class extends Error{constructor(e,t){super(t),this.m_AdditionalMessage=t,this.m_ErrorType=e,this.name=`GeometryError`}what(){return e(this.m_ErrorType)}additionalMessage(){return this.m_AdditionalMessage?this.m_AdditionalMessage:``}code(){return this.m_ErrorType}},r=class extends n{constructor(e){super(2,e),this.name=`CorruptedGeometryError`}},i=class extends n{constructor(e){super(3,e),this.name=`EmptyGeometryError`}},a=class extends n{constructor(e){super(4,e),this.name=`MathSingularityError`}},o=class extends n{constructor(e){super(21,e),this.name=`ProjectionEngineNotLoadedError`}},s=class extends n{constructor(e){super(8,e),this.name=`NonSimpleGeometryError`}},c;(function(e){e[e.enumUnknown=0]=`enumUnknown`,e[e.enumPoint=513]=`enumPoint`,e[e.enumLine=5122]=`enumLine`,e[e.enumBezier=5123]=`enumBezier`,e[e.enumEllipticArc=5124]=`enumEllipticArc`,e[e.enumEnvelope=3077]=`enumEnvelope`,e[e.enumMultiPoint=8710]=`enumMultiPoint`,e[e.enumPolyline=25607]=`enumPolyline`,e[e.enumPolygon=27656]=`enumPolygon`,e[e.enumMultipatch=40969]=`enumMultipatch`,e[e.enumGeometryCollection=3594]=`enumGeometryCollection`,e[e.enumRationalBezier2=5134]=`enumRationalBezier2`,e[e.enumBezier2=5135]=`enumBezier2`,e[e.enumRationalBezier23d=5392]=`enumRationalBezier23d`,e[e.enumGreatArc3d=5393]=`enumGreatArc3d`})(c||={});var l=[0,0,1,1,1,2,0,1,2,3,-1,-1,-1,-1,1,1];function u(e){return l[15&e]}function d(e){return!!(512&e)}function f(e){return!!(1024&e)}function p(e){return!!(2048&e)}function m(e){return!!(4096&e)}function h(e){return!!(8192&e)}function g(e){return!!(16384&e)}function _(e){return!!(32768&e)}function v(e){let t=e.getGeometryType();return h(t)?e.getPointCount():e.isEmpty()?0:t===c.enumEnvelope?4:t===c.enumPoint?1:m(t)?2:void T(`missing type`)}function y(e){let t=e.getGeometryType();if(g(t))return e.hasNonLinearSegments();if(t===c.enumGeometryCollection){let t=e;for(let e=0,n=t.getGeometryCount();e<n;e++)if(y(t.getGeometry(e)))return!0;return!1}return!!m(t)&&t!==c.enumLine}function b(e){throw new o(e)}function x(e){throw new r(e)}function S(e){throw Error(e)}function ee(e){throw new a(e)}function te(){S(`Geometry type is not supported for 3D operations.`)}function ne(e){throw new n(12,e)}function re(e){throw new i(e)}function C(e){throw new n(14,e)}function w(e){throw Error(e)}function T(e){throw new n(13,e)}function ie(e){throw Error(e)}function ae(e){throw new s(e)}function oe(){C(`Operation does not support curves.`)}function se(e){e&&y(e)&&oe()}function ce(e){e&&_(e.getGeometryType())&&C(`Unsupported geometry type.`)}function le(e){e===c.enumGeometryCollection&&S(`Geometry_collection instances are not supported in this operation`)}function ue(e){le(e.getGeometryType())}function de(e){S(`bad wkid: ${e}`)}function fe(e){let t=`bad wkt: `;t+=e,t+=`...`,S(t)}function pe(e,t){e||S(t)}var E=class e{constructor(e){this.sum=e,this.compensation=0}assign(e){return this.compensation=e.compensation,this.sum=e.sum,this}reset(){this.sum=this.compensation=0}resetToStart(e){this.sum=e,this.compensation=0}normalize(){let e=[NaN];this.sum=I(this.sum,this.compensation,e),this.compensation=e[0]}add(e){let t=this.sum+e,n;if(Math.abs(this.sum)>=Math.abs(e)){let r=this.sum-t+e;n=this.compensation+r}else{let r=e-t+this.sum;n=this.compensation+r}this.sum=t,this.compensation=n}sub(e){this.add(-e)}addProduct(e,t){let n=[0],r=F(e,t,n);this.add(r),this.add(n[0])}mul(t){let n=new e(0);n.addProduct(this.sum,t),n.addProduct(this.compensation,t),this.assign(n)}getResult(){return this.sum+this.compensation}pe(e){return this.add(e),this}me(e){return this.add(-e),this}},me=4294967295n,he=65535n,ge=255n,_e=15n,ve=4294901760n,ye=65280n,be=240n,xe=[5,1,2,1,3,1,2,1,4,1,2,1,3,1,2,1],Se=[-1,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3];function Ce(e){let t=0;return e&he||(t+=16,e>>=16n),e&ge||(t+=8,e>>=8n),e&_e||(t+=4,e>>=4n),t+xe[Number(BigInt.asUintN(4,e))]}function we(e){let t=0;return e&ve&&(t+=16,e>>=16n),e&ye&&(t+=8,e>>=8n),e&be&&(t+=4,e>>=4n),t+Se[Number(BigInt.asUintN(4,e))]+1}function Te(e){let t=0;return e&me||(t=32,e>>=32n),t+Ce(BigInt.asUintN(32,e))}function Ee(e){let t=0;return 18446744069414584320n&e&&(t=32,e>>=32n),t+we(e)}var De=class e{constructor(t,n){if(this.m_EnvelopeType=1,t!==void 0){if(t instanceof e)return this.vmin=t.vmin,void(this.vmax=t.vmax);this.vmin=t,this.vmax=n,this.normalize()}else this.setEmpty()}static construct(t,n){return new e(t,n)}static constructEmpty(){return new e}setCoords(e,t){this.vmin=e,this.vmax=t,this.normalize()}setCoordsFromEnvelope(e){this.vmin=e.vmin,this.vmax=e.vmax}setEmpty(){this.vmin=NaN,this.vmax=NaN}getCenter(){return .5*(this.vmin+this.vmax)}equalsRange(e,t){return nn(this.vmin,e)&&nn(this.vmax,t)}equals(e,t){return!(!this.isEmpty()||!e.isEmpty())||(t===void 0?this.vmin===e.vmin&&this.vmax===e.vmax:Math.abs(this.vmin-e.vmin)<=t&&Math.abs(this.vmax-e.vmax)<=t)}width(){return this.vmax-this.vmin}isEmpty(){return Number.isNaN(this.vmin)||Number.isNaN(this.vmax)}isZero(){return this.vmin===this.vmax}setInfinite(){this.vmin=-1/0,this.vmax=1/0}move(e){this.isEmpty()||(this.vmin+=e,this.vmax+=e)}contains(e){return e.vmin>=this.vmin&&e.vmax<=this.vmax}containsCoordinate(e){return e>=this.vmin&&e<=this.vmax}containsRightExclusive(e){return e>=this.vmin&&e<this.vmax}containsExclusiveCoordinate(e){return e>this.vmin&&e<this.vmax}containsExclusive(e){return e.vmin>this.vmin&&e.vmax<this.vmax}isIntersecting(e){return this.vmin<=e.vmin?this.vmax>=e.vmin:e.vmax>=this.vmin}mergeCoordinate(e){if(this.isEmpty())return this.vmin=e,void(this.vmax=e);this.mergeNeCoordinate(e)}merge(e){if(e.isEmpty())return;let t=e.vmin,n=e.vmax;this.mergeCoordinate(t),this.mergeCoordinate(n)}mergeNe(e){let t=e.vmin,n=e.vmax;this.mergeNeCoordinate(t),this.mergeNeCoordinate(n)}mergeNeCoordinate(e){e<this.vmin?this.vmin=e:e>this.vmax&&(this.vmax=e)}intersect(e){this.isEmpty()||e.isEmpty()?this.setEmpty():(this.vmin<e.vmin&&(this.vmin=e.vmin),this.vmax>e.vmax&&(this.vmax=e.vmax),this.vmin>this.vmax&&this.setEmpty())}inflate(e){this.isEmpty()||(this.vmin-=e,this.vmax+=e,this.vmax<this.vmin&&this.setEmpty())}normalize(){this.vmin<=this.vmax||(this.vmin>this.vmax?this.vmax=B(this.vmin,this.vmin=this.vmax):this.setEmpty())}isValid(){return this.isEmpty()||this.vmin<=this.vmax}snapClip(e){return jn(e,this.vmin,this.vmax)}calculateToleranceFromEnvelope(){return this.isEmpty()?Dn():(Math.abs(this.vmin)+Math.abs(this.vmax)+1)*Dn()}static unit(){return Oe}normalizeNoNAN(){this.vmin>this.vmax&&(this.vmax=B(this.vmin,this.vmin=this.vmax))}setCoordsNoNAN(e,t){this.vmin=e,this.vmax=t,this.normalizeNoNAN()}clone(){return new e(this.vmin,this.vmax)}},Oe=new De(0,1),D=class e{static getNAN(){return new e(NaN)}constructor(e,t){this.m_value=e??0,this.m_eps=t??0}[Symbol.toPrimitive](e){return this}clone(){return new e(this.m_value,this.m_eps)}assign(e){return this.m_value=e.m_value,this.m_eps=e.m_eps,this}scaleError(e){this.m_eps*=e}setError(e){this.m_eps=e}set(e,t){return this.m_value=e,this.m_eps=t??0,this}setWithEps(t,n){return n===void 0&&(n=1),this.m_value=t,this.m_eps=e.ulp(t)*n,this}setE(e){return this.m_value=e.m_value,this.m_eps=e.m_eps,this}precise(){return new e(this.m_value)}value(){return this.m_value}toDouble(){return this.m_value}eps(){return this.m_eps}resetError(){return this.m_eps=0,this}absThis(){return this.m_value=Math.abs(this.m_value),this}add(e){return this.clone().addThis(e)}addE(e){return this.clone().addThisE(e)}addThisE(t){let n=this.m_value+t.m_value,r=this.m_eps+t.m_eps+e.ulp(n);return this.m_value=n,this.m_eps=r,this}addThis(t){let n=this.m_value+t,r=this.m_eps+e.ulp(n);return this.m_value=n,this.m_eps=r,this}subE(e){return this.clone().subThisE(e)}sub(e){return this.clone().subThis(e)}subThisE(t){let n=this.m_value-t.m_value,r=this.m_eps+t.m_eps+e.ulp(n);return this.m_value=n,this.m_eps=r,this}subThis(t){let n=this.m_value-t,r=this.m_eps+e.ulp(n);return this.m_value=n,this.m_eps=r,this}setAddE(t,n){return this.m_value=t.m_value+n.m_value,this.m_eps=t.m_eps+n.m_eps+e.ulp(this.m_value),this}setAdd(t,n){return this.m_value=t+n,this.m_eps=e.ulp(this.m_value),this}setAddEN(t,n){return this.m_value=t.m_value+n,this.m_eps=t.m_eps+e.ulp(this.m_value),this}setAddNE(t,n){return this.m_value=t+n.m_value,this.m_eps=n.m_eps+e.ulp(this.m_value),this}setSubE(t,n){return this.m_value=t.m_value-n.m_value,this.m_eps=t.m_eps+n.m_eps+e.ulp(this.m_value),this}setSub(t,n){return this.m_value=t-n,this.m_eps=e.ulp(this.m_value),this}setSubEN(t,n){return this.m_value=t.m_value-n,this.m_eps=t.m_eps+e.ulp(this.m_value),this}setSubNE(t,n){return this.m_value=t-n.m_value,this.m_eps=n.m_eps+e.ulp(this.m_value),this}mulThisE(t){let n=this.m_value*t.m_value;return this.m_eps=this.m_eps*Math.abs(t.m_value)+t.m_eps*Math.abs(this.m_value)+this.m_eps*t.m_eps+e.ulp(n),this.m_value=n,this}mulThis(t){let n=this.m_value*t;return this.m_eps=this.m_eps*Math.abs(t)+e.ulp(n),this.m_value=n,this}mul(e){return this.clone().mulThis(e)}mulE(e){return this.clone().mulThisE(e)}setMulE(t,n){let r=t.m_value*n.m_value;return this.m_eps=t.m_eps*Math.abs(n.m_value)+n.m_eps*Math.abs(t.m_value)+t.m_eps*n.m_eps+e.ulp(r),this.m_value=r,this}setMul(t,n){return this.m_value=t*n,this.m_eps=e.ulp(this.m_value),this}setMulEN(e,t){return this.setE(e),this.mulThis(t)}setMulNE(e,t){return this.setE(t),this.mulThis(e)}mulThisByPower2(e){return this.m_value*=e,this.m_eps*=Math.abs(e),this}static st_mulByPower2(t,n){return new e(t.m_value,t.m_eps).mulThisByPower2(n)}divE(e){return this.clone().divThisE(e)}divThisE(t){let n=Math.abs(t.m_value),r=this.m_value/t.m_value,i=(this.m_eps+Math.abs(r)*t.m_eps)/n;if(t.m_eps>.01*n){let e=t.m_eps/n;i*=1+(1+e)*e}return this.m_value=r,this.m_eps=i+e.ulp(r),this}divThis(t){let n=Math.abs(t);return this.m_value/=t,this.m_eps=this.m_eps/n+e.ulp(this.m_value),this}setDivE(e,t){return this.setE(e),this.divThisE(t)}setDiv(t,n){return this.m_value=t/n,this.m_eps=e.ulp(this.m_value),this}setDivEN(e,t){return this.setE(e),this.divThis(t)}setDivNE(e,t){return this.set(e),this.divThisE(t)}divThisByPower2(e){return this.m_value/=e,this.m_eps/=Math.abs(e),this}invThis(){return this.setE(j.clone().divThisE(this)),this}sqrt(){return this.clone().sqrtThis()}sqrtThis(){let t,n;return this.m_value>=0?(t=Math.sqrt(this.m_value),n=this.m_value>10*this.m_eps?.5*this.m_eps/t:this.m_value>this.m_eps?t-Math.sqrt(this.m_value-this.m_eps):Math.max(t,Math.sqrt(this.m_value+this.m_eps)-t),n+=e.ulp(t)):this.m_value<-this.m_eps?(t=NaN,n=NaN):(t=0,n=Math.sqrt(this.m_eps)),this.m_value=t,this.m_eps=n,this}sqr(){return this.clone().sqrThis()}sqrThis(){let t=this.m_value*this.m_value;return this.m_eps=2*this.m_eps*Math.abs(this.m_value)+this.m_eps*this.m_eps+e.ulp(t),this.m_value=t,this}setSin(t){let n=Math.sin(t.m_value),r=Math.cos(t.m_value);this.m_value=n;let i=Math.abs(n),a=Math.abs(t.value());return this.m_eps=(Math.abs(r)+.5*i*t.m_eps)*t.m_eps+e.ulp(i+a),this}static ulp(e){let t=H(e),n=((9218868437227405312n&t)>>52n)-1075n;return n>-1023n?(t=n+1023n<<52n,en(t)):e===0?0:Number.MIN_VALUE}setCos(t){let n=Math.sin(t.m_value),r=Math.cos(t.m_value);this.m_value=r;let i=Math.abs(r),a=Math.abs(t.value());return this.m_eps=(Math.abs(n)+.5*i*t.m_eps)*t.m_eps+e.ulp(i+a),this}static st_cosAndSin(t,n,r){let i=Math.sin(t.m_value),a=Math.cos(t.m_value);r.m_value=i,n.m_value=a;let o=Math.abs(i),s=Math.abs(a),c=Math.abs(t.value());r.m_eps=(Math.abs(a)+.5*o*t.m_eps)*t.m_eps+e.ulp(o+c),n.m_eps=(Math.abs(i)+.5*s*t.m_eps)*t.m_eps+e.ulp(s+c)}negate(){return this.clone().negateThis()}negateThis(){return this.m_value=-this.m_value,this}setAbs(){return this.m_value=Math.abs(this.m_value),this}isInInterval(e){return De.construct(this.m_value-this.m_eps,this.m_value+this.m_eps).isIntersecting(e)}eq(e){return Math.abs(this.m_value-e.m_value)<=this.m_eps+e.m_eps}ne(e){return!this.eq(e)}gt(e){return this.m_value-e.m_value>this.m_eps+e.m_eps}lt(e){return e.m_value-this.m_value>this.m_eps+e.m_eps}ge(e){return!this.lt(e)}le(e){return!this.gt(e)}tolEQ(e,t){return Math.abs(this.m_value-e.m_value)<=t||this.eq(e)}tolNE(e,t){return!this.tolEQ(e,t)}tolGT(e,t){return this.m_value-e.m_value>t&&this.gt(e)}tolLT(e,t){return e.m_value-this.m_value>t&&this.lt(e)}tolGE(e,t){return!this.tolLT(e,t)}tolLE(e,t){return!this.tolGT(e,t)}isZero(){return Math.abs(this.m_value)<=this.m_eps}isFuzzyZero(){return this.isZero()&&this.m_eps!==0}tolIsZero(e){return Math.abs(this.m_value)<=Math.max(this.m_eps,e)}setPi(){this.setE(Ae)}setEuler(){this.set(2.718281828459045,ke())}static size(){return 1}};function O(e,t){let n=U(e),r=U(t),i=53-Te(n),a=53-Te(r);return(i>=0?i:0)+(a>=0?a:0)<=52}function k(e,t){let n=e+t;return n-e===t&&n-t===e}function A(e,t){let n=e-t;return e-n===t&&t+n===e}function ke(){return X()}D.dimensions=1;var Ae=new D(Math.PI,.5*ke()),je=new D(0,0),j=new D(1,0),Me=new D(4,0);function Ne(e,t,n){return e.addE(t.subE(e).mulE(n))}function Pe(e,t,n){return t.subE(t.subE(e).mulE(j.subE(n)))}function Fe(e){return Math.atanh(e)}function Ie(e){let t;if(e===0)t=1;else if(Math.abs(e)>.01)t=Fe(e)/e;else{let n;t=0;let r=e*e;for(let e=2*Math.trunc(-36.841361487904734/Math.log(r)+2.5)-1;e>1;e-=2)n=1/e,t=(t+n)*r;t+=1}return t}function M(e){let t=Math.PI*Math.PI/6,n;if(e===1)n=t;else if(e>1)n=t;else if(e===0)n=e;else if(e<0){let t=1+(e=Math.abs(e)),r=Math.log(t);n=r*r/-2-M(e/t)}else if(e>.5){let r=1-e,i=Math.log(e)*Math.log(r);n=t-M(r)-i}else{n=0;let t=1+Math.trunc(-16*Math.log(10)/Math.log(e)+1.5),r=t;for(let i=t;i>0;i--,--r)n*=e,n+=1/(r*r);n*=e}return n}function Le(e,t){let n=t*e;if(Math.abs(t)<.1){let t=0;for(let e=60;e>=1;e--)t*=n,t+=1/e/e;return t*=e,t}return M(n)/t}function Re(e,t){return e<t?V(e,t):V(t,e)}function ze(e,t){let n=Math.abs(e);return t>=0?n:-n}function Be(e){return Math.round(e)}function Ve(e,t,n,r,i){i[0]=t[0]+(n[0]-t[0])*r,i[1]=t[1]+(n[1]-t[1])*r,e===3&&(i[2]=t[2]+(n[2]-t[2])*r)}function He(e,t,n,r,i){i[0]=n[0]-(n[0]-t[0])*(1-r),i[1]=n[1]-(n[1]-t[1])*(1-r),e===3&&(i[2]=n[2]-(n[2]-t[2])*(1-r))}function Ue(e,t,n,r,i){r<=.5?Ve(e,t,n,r,i):He(e,t,n,r,i)}function We(e,t,n,r,i){i[0]=t[0].addE(n[0].subE(t[0]).mulE(r)),i[1]=t[1].addE(n[1].subE(t[1]).mulE(r))}function Ge(e,t,n,r,i){i[0]=n[0].subE(n[0].subE(t[0]).mulE(j.subE(r))),i[1]=n[1].subE(n[1].subE(t[1]).mulE(j.subE(r)))}function N(e,t,n){let r;return r=n<=.5?e+(t-e)*n:t-(t-e)*(1-n),r}function Ke(e,t,n){return e+(t-e)*n}function qe(e,t,n){return t-(t-e)*(1-n)}function Je(e,t,n,r){n<=.5?(r.x=e.x+(t.x-e.x)*n,r.y=e.y+(t.y-e.y)*n):(r.x=t.x-(t.x-e.x)*(1-n),r.y=t.y-(t.y-e.y)*(1-n))}function Ye(e,t,n,r){n<=.5?(r.x=e.x+(t.x-e.x)*n,r.y=e.y+(t.y-e.y)*n,r.z=e.z+(t.z-e.z)*n):(r.x=t.x-(t.x-e.x)*(1-n),r.y=t.y-(t.y-e.y)*(1-n),r.z=t.z-(t.z-e.z)*(1-n))}function P(e){return e*e}function Xe(e){return e*e*e}function Ze(e){return 1/Math.sqrt(e)}function Qe(e){return e<0?-1:e>0?1:0}function $e(e,t,n,r){let i=[0],a=[0],o=[0];return I(F(e,n,i),F(t,r,a),o)+(i[0]+a[0]+o[0])}var et=[0],tt=[0];function nt(e,t,n){return ut(F(e,t,et),n,et[0],tt)}var rt=[0],it=[0],at=[0],ot=[0];function F(e,t,n){let r=e*t;return st(e,rt,it),st(t,at,ot),n[0]=it[0]*ot[0]-(r-rt[0]*at[0]-it[0]*at[0]-rt[0]*ot[0]),r}function st(e,t,n){let r=134217729*e;t[0]=r-(r-e),n[0]=e-t[0]}var ct=[0],lt=[0];function ut(e,t,n,r){let i=I(e,t,ct),a=I(i,n,lt);return I(a,ct[0]+lt[0],r)}function I(e,t,n){let r=e+t;return Math.abs(e)>Math.abs(t)?n[0]=e-r+t:n[0]=t-r+e,r}function dt(e,t){return e%t}function L(e){let t=1-e;if(t===0)return 1;let n;if(t<=.01){let e=t,r=Math.log(e);n=1+e*(.4431471805599453-.25*r+e*(.05680519270997949-.09375*r+e*(.02183137044373718-.05859375*r+e*(.011544521417308362-.042724609375*r+e*(.00714200031339596-.0336456298828125*r+e*(.004854743337164948-.027757644653320312*r+e*(.003514687963781376-.023627042770385742*r)))))))}else{if(e<.016){let t=e;return Z()*(1-t*(.25+t*(.046875+t*(.01953125+t*(.01068115234375+t*(.0067291259765625+t*(.004626274108886719+t*(.0033752918243408203+t*.0025710230693221092))))))))}n=mt(0,t,1)-e*ht(0,t,1)/3}return jn(n,1,Z())}function ft(e,n,r=NaN){if(t(n>=0&&n<=1),n===0)return e;let i=1,a=e;if(a<0&&(a=-a,i=-1),n===1){let e=Math.round(a/Pn()),t=a-e*Pn();return i*(2*e+Math.sin(t))}let o=Z(),s=Math.floor(a/o);1&s?a=(s+1)*o-a:a-=s*o;let c=Math.sin(a),l=Number.isNaN(r)?L(n):r,u;if(c===1)u=l+Math.sqrt(1-n)*(a-o);else{let e=a*a;if(.01424*e**4<=2*X())u=a*(1+e*n*(-1/6+e*((4-3*n)/120-(16+(45*n-60)*n)/5040*e)));else if(n<=.01){let e=Math.sin(2*a),t=Math.sin(4*a),r=Math.sin(6*a),i=Math.sin(8*a),o=Math.sin(10*a);u=a+n*((2*-a+e)/8+n*((-3*a+2*e-.25*t)/64+n*((-20*a+15*e-3*t+r/3)/1024+n*(5*(-140*a+112*e-28*t+16/3*r-.5*i)/65536+7*n*((-63*a+52.5*e-15*t+3.75*r-.625*i+.05*o)/65536+n*(-693*a+594*e-185.625*t+1.375*r-12.375*i+1.8*o-.125*Math.sin(12*a))/1048576)))))}else{let e=c*c,t=Math.cos(a),r=t*t,i=gt(c,t,n);u=c*(mt(r,i,1)-n*e*ht(r,i,1)/3)}}return 1&s?u=l*(s+1)-u:u+=l*s,i*u}function pt(e,t,n=NaN){if(e===0)return 0;let r=1,i=e;e<0&&(i=-i,r=-1);let a=Number.isNaN(n)?L(t):n,o=Math.floor(i/a);1&o?i=(o+1)*a-i:i-=o*a;let s=i<=0?0:i>=a?Z():_t(i,t,a);return 1&o?s=Z()*(o+1)-s:s+=Z()*o,r*s}function mt(e,n,r){t((e===0?0:1)+(n===0?0:1)+1>1);let i=e,a=n,o=r;for(;;){let e=Math.sqrt(i*a)+Math.sqrt(a*o)+Math.sqrt(o*i);i=.25*(i+e),a=.25*(a+e),o=.25*(o+e);let t=(i+a+o)/3,n=(t-i)/t,r=(t-a)/t,s=(t-o)/t;if(Math.abs(n)<=.0024&&Math.abs(r)<=.0024&&Math.abs(s)<=.0024){let e=n*r-s*s,i=n*r*s;return(1+(1/24*e-.1-3/44*i-5*e*e/208+e*i/16)*e+(1/14+3*i/104)*i)/Math.sqrt(t)}}}function ht(e,n,r){t(e!==0||n!==0);let i=e,a=n,o=r,s=new E(0),c=1;for(;;){let e=.2*(i+a+3*o),t=(e-i)/e,n=(e-a)/e,r=(e-o)/e;if(Math.abs(t)<=.0015&&Math.abs(n)<=.0015&&Math.abs(r)<=.0015){let i=t*n,a=r*r,o=i-a,l=i-6*a,u=l+o+o,d=3/26,f=l*(.25*(9/22)*l-.21428571428571427-1.5*d*r*u),p=r*(1/6*u+r*(-.4090909090909091*o+r*d*i));return 3*s.getResult()+c*(1+f+p)/(e*Math.sqrt(e))}let l=Math.sqrt(i),u=Math.sqrt(a),d=Math.sqrt(o),f=l*(u+d)+u*d;s.add(c/(d*(o+f))),c*=.25,i=.25*(i+f),a=.25*(a+f),o=.25*(o+f)}}function gt(e,t,n){return e<.999?1-n*P(e):1-n+n*P(t)}function _t(e,t,n){if(t===0)return e;if(t===1)return Math.asin(e);let r=0,i=!0;if(e<.2){let n=e*e,a=e*(1+n*t*(1/6+n*((13*t-4)/120+(16-284*t+493*t*t)/5040*n))),o=Math.abs(t*(4944*t-64-31224*t*t+37369*t*t*t)/362880*e**9);if(o<Math.abs(a)*X())return a;r=a,i=o>.1*a}if(i){let i=1-t,a=1-e/n,o=Math.sqrt(a*a+i*i),s=Math.atan2(i,e+X());r=Z()+Math.sqrt(o)*(s-Z())}let a=0;for(let i=0;i<7;i++){a=ft(r,t,n);let o=gt(Math.sin(r),Math.cos(r),t);if(r-=(a-e)/Math.sqrt(o),i>0&&Math.abs(a-e)<=4*X()*e)break}return r}var vt=class{constructor(e){for(this.values=[[1]];this.values.length<e+1;){let e=this.values.at(-1),t=Vt(e.length+1,1);for(let n=1;n<e.length;++n)t[n]=e[n-1]+e[n];this.values.push(t)}}get(e,t){return this.values[e][t]}};function yt(e,n){return t(0),0}var bt=new vt(32);function R(e,t){if(e<bt.values.length)return bt.get(e,t);let n=Math.exp(yt());return n+.01>G()&&w(`The result value of n choose k is out of range`),n+.01}function xt(e,t){if(e.isZero())return e.clone();let n=e.clone().divThis(e);if(t<0)return n.divThis(xt(e,-t));for(e=e.clone(),t=Math.trunc(t);1&t&&n.mulThis(e),t>>=1;)e.mulThis(e);return n}function St(e,t){if(t===0)return[];let n=e[0].clone().mulDoubleThis(0),r=[];r.length=t;let i=t-1;for(let t=0;t<=i;++t){r[t]=n.clone();for(let n=0;n<=t;++n)r[t].addThis(e[n].clone().mulDoubleThis(R(t,n)/R(i,n)))}return r}function Ct(e,t,n,r,i){return e===0?r===0?t:r===1?n:i:e===1?r===0?t:r===1?n:N(t,n,r):(e===2&&C(`angular interpolation`),void C(``))}function wt(e,t,n,r,i,a,o,s){if(e===0)for(let e=0;e<a;++e)r[e+i]=o===0?t[e]:o===1?n[e]:s;else if(e===1)if(o===0)z(r,t,i,0,a);else if(o===1)z(r,n,i,0,a);else for(let e=0;e<a;++e)r[e+i]=N(t[e],n[e],o);else if(e===2)if(o===0)z(r,t,i,0,a);else if(o===1)z(r,n,i,0,a);else{let e=0;for(let s=0,c=i;s<a;++s,++c)r[c]=N(t[s],n[s],o),e+=r[c]*r[c];if(e>0){e=Math.sqrt(e);for(let t=i;t<i+a;++t)r[t]/=e}else{for(let e=i;e<i+a;++e)r[e]=0;r[i]=1}}else C(``)}function z(e,t,n,r,i){if(i===0)return;let a=0,o=n,s=r;for(;a++<i;)e[o++]=t[s++]}function Tt(e,t,n){let r=0;for(let i=0;!r&&i<n;++i)r=e[i]-t[i];return r}function B(e,t){return e}function Et(e){e.sort((e,t)=>e<t?-1:e>t?1:0)}function Dt(e,t){let n=e.slice(0,t);Et(n),z(e,n,0,0,t)}function Ot(e,t,n,r){let i=e.slice(t,t+n);i.sort(r),z(e,i,t,0,n)}function kt(e,t){return e<t?-1:e>t?1:0}function At(e,t,n,r){return e<n?-1:e>n?1:t<r?-1:t>r?1:0}function jt(e,t){if(e.length<2)return e.length;let n=0;for(let r=1;r<e.length;++r)t(e[r],e[n])||(n++,e[r]=B(e[n],e[n]=e[r]));return 1+n}function Mt(e,t){e[t]=e.at(-1),e.pop()}function Nt(e,t=!1){return{[Symbol.dispose](){this.bForget||e()},bForget:t}}function Pt(e,t,n){e.length=t,e.fill(n)}function Ft(e,t,n){e.length=n;for(let r=0;r<n;++r)e[r]=new t}function It(e,t){let n=Array(t);for(let r=0;r<t;++r)n[r]=new e;return n}function Lt(e,t,n){for(let r=0;r<n;++r)e[r].assign(t[r]);return n}function Rt(e,t){let n=e.slice(0,t);for(let e=0;e<t;++e)n[e]=n[e].clone();return n}function zt(e){return Array.from({length:e},()=>null)}function Bt(e,t){return Array.from({length:t},()=>e())}function Vt(e,t){let n=Array(e);return n.fill(t),n}function Ht(e,t){return t in e&&Object.getOwnPropertyNames(e).length===1}var Ut=class{constructor(...e){this.m_elts=e}get length(){return this.m_elts.length}at(e){return this.m_elts[e]}[Symbol.dispose](){for(let e of this.m_elts)e[Symbol.dispose]()}};function V(e,t){return{first:e,second:t}}var Wt=Math.PI,Gt=2*Math.PI,Kt=.5*Math.PI,qt=class{constructor(e,t){this.m_cr=e,this.m_cc=t,this.m_v=Vt(e*t,0)}get(e,t){return this.m_v[e*this.m_cc+t]}set(e,t,n){this.m_v[e*this.m_cc+t]=n}inc(e,t){return++this.m_v[e*this.m_cc+t]}},Jt=new ArrayBuffer(8),Yt=new Float64Array(Jt),Xt=new BigUint64Array(Jt),Zt=4503599627370495n,Qt=9218868437227405312n;function $t(){return 2**-52*En}function H(e){return Yt[0]=e,Xt[0]}function en(e){return Xt[0]=e,Yt[0]}function U(e){return H(e)&Zt}function tn(e){return Number((H(e)&Qt)>>52n)}function W(e){if(e===0n)return-1n;if(e===1n||-1n===e)return 0n;e<0n&&(e=-e);let t=0n,n=512n,r=1n<<t+n;for(;e>=r;)t+=n,n<<=1n,r<<=n;let i=t;n>>=1n;let a=i+n;for(;n>0n;)e<1n<<a||(i=a),n>>=1n,a=i+n;return i}function nn(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}function rn(e,t,n){return e===t||Math.abs(e-t)<=n||Number.isNaN(e)&&Number.isNaN(t)}function an(e,t){return e<t?-1:e>t?1:0}function on(e,t){if(e<t)return-1;if(e>t)return 1;if(e===t)return 0;{let n=Number.isNaN(e),r=Number.isNaN(t);return n<r?-1:n>r?1:0}}function sn(){return 2147483647}function cn(){return 32767}function G(){return 2147483647}function ln(){return-2147483648}var K=G(),un=BigInt(K),dn=2166136261,q=16777619;function fn(e){let t=dn,n=e;return t=(t^255&n)*q,n>>=8,t=(t^255&n)*q,n>>=8,t=(t^255&n)*q,n>>=8,t=(t^255&n)*q,t&K}var pn=14695981039346656037n,J=1099511628211n;function mn(e){let t=pn,n=e;return t=(t^255n&n)*J,n>>=8n,t=(t^255n&n)*J,n>>=8n,t=(t^255n&n)*J,n>>=8n,t=(t^255n&n)*J,n>>=8n,t=(t^255n&n)*J,n>>=8n,t=(t^255n&n)*J,n>>=8n,t=(t^255n&n)*J,t&un}function hn(e){return 1103515245*e+12345&2147483647}function gn(e){let t=dn;for(let n=0,r=e.length;n<r;++n)t=(t^e.charCodeAt(n))*q;return t&K}function Y(e,t){return t+2654435769+(e<<6)+(e>>2)&K}function _n(e,t){return Y(e,xn(t))}function vn(e){return Y(3735928559,e)}function yn(e,t){return Y(e,vn(t))}function bn(e){return fn(e)}function xn(e){return Number(mn(e))}function Sn(e){return Rn(e)}function Cn(e){return xn(H(Sn(e)))}function wn(e){return hn(e)}var Tn=100,En=100;function Dn(){return 2**-52*Tn}function On(){return .38196601125010515}function kn(){return 1.4142135623730951}function X(){return 2**-52}function An(e,t,n){return e===t||e===n}function jn(e,t,n){return e>=t?e<=n?e:n:t}function Mn(e,t,n){let r=e[0];if(r>=t){if(r<=n)return!1;e[0]=n}else e[0]=t;return!0}function Nn(e,t){return e>=t?t:e<-t?-t:e}function Pn(){return Wt}function Fn(){return Gt}function Z(){return Kt}var In=3*Z();function Ln(){return In}function Rn(e){return e+0}function zn(e){return{v:e}}var Q=class e{constructor(){this.m_rn=zn(0n),this.m_rd=zn(1n),this.m_bNaN=!1,this.m_bNormalized=!1,this.m_power=0,this.m_sign=0}static constructAssign(e,t){let n=e.clone();return t!==void 0&&n.limitPrecisionThis(t),n}static constructDouble(t){return new e().setDouble(t)}static constructInt64(t){return new e().setInt64(t)}static constructRational(t,n){return new e().setRational(t,n)}static constructInt32(e){return this.constructInt64(BigInt(Math.trunc(e)))}[Symbol.toPrimitive](e){return this}compare(e){return this.lt(e)?-1:this.gt(e)?1:0}assignCopy(e){return this.setThis(e)}abs(){return this.clone().absThis()}absThis(){return this.isNAN()||(this.m_sign*=this.m_sign),this}clone(){return new e().setThis(this)}setThis(e){return this.m_bNaN=e.m_bNaN,this.m_bNormalized=e.m_bNormalized,this.m_rn.v=e.m_rn.v,this.m_rd.v=e.m_rd.v,this.m_power=e.m_power,this.m_sign=e.m_sign,this}setZero(){return this.m_rn.v=0n,this.m_rd.v=1n,this.m_bNaN=!1,this.m_power=0,this.m_bNormalized=!0,this.m_sign=0,this}setDouble(t){if(this.setZero(),t===0)return this;if(Number.isInteger(t)&&Math.abs(t)<G())return this.setInt32(t);let n=H(t),r=(n&e.s_em)>>52n,i=!!(n&e.s_sm),a=n&e.s_fm;if(r===e.s_emax)return a?(this.m_rn.v=this.m_rd.v=0n,this.m_bNaN=!0,this):(this.m_rn.v=i?-1n:1n,this.m_rd.v=0n,this);r===0n&&C(`denormalized numbers not yet implemented`);let o=r-1023n,s=o>=0n?o:0n,c=o<0n?-o:0n;return this.m_rn.v=(1n<<52n|a)<<s,this.m_rd.v=1n<<52n+c,this.m_sign=i?-1:1,this.m_bNormalized=!1,this.normalizeThis()}setInt64(e){return e===0n?this.setZero():(this.m_bNaN=!1,this.m_sign=e>0n?1:-1,this.m_rn.v=e>0n?e:-e,this.m_rd.v=1n,this.m_power=0,this.m_bNormalized=!1,this.normalizeThis())}setRational(e,t){return e===0n?t===0n?this.setNAN():this.setZero():t===0n?e>0n?this.setPositiveInf():this.setNegativeInf():(this.m_sign=(e>0n?1:-1)*(t>0n?1:-1),this.m_rn.v=e>0n?e:-e,this.m_rd.v=t>0n?t:-t,this.m_power=0,this.m_bNormalized=!1,this.normalizeThis())}setInt32(e){return this.setInt64(BigInt(Math.trunc(e)))}getDouble(){return this.convertToDouble()}toDouble(){return this.convertToDouble()}value(){return this.convertToDouble()}isNAN(){return this.m_bNaN}isPositiveInf(){return!this.isNAN()&&this.m_rd.v===0n&&this.m_sign===1}isNegativeInf(){return!this.isNAN()&&this.m_rd.v===0n&&this.m_sign===-1}isFinite(){return!this.isNAN()&&this.m_rd.v!==0n}setNAN(){return this.m_bNaN=!0,this.m_rn.v=0n,this.m_rd.v=0n,this.m_power=0,this.m_bNormalized=!0,this}setPositiveInf(){return this.m_rn.v=1n,this.m_rd.v=0n,this.m_bNaN=!1,this.m_bNormalized=!0,this.m_sign=1,this.m_power=0,this}setNegativeInf(){return this.m_rn.v=1n,this.m_rd.v=0n,this.m_bNaN=!1,this.m_bNormalized=!0,this.m_sign=-1,this.m_power=0,this}subThis(e){if(e.isNAN()&&this.setNAN(),this.isPositiveInf()&&e.isPositiveInf())this.setNAN();else{if(this.isPositiveInf()&&e.isNegativeInf())return this.setPositiveInf(),this;if(this.isNegativeInf()&&e.isNegativeInf())this.setNAN();else if(this.isNegativeInf()&&e.isPositiveInf())return this.setNegativeInf(),this}return this.isNAN()?this:this.opPlusMinus(e,!1)}thisSubAbs(e){return t(0),this}mulThis(e){return e.isNAN()&&this.setNAN(),this.isNAN()?this:(this.m_sign*=e.m_sign,this.m_sign===0?this.setZero():(this.m_rn.v*=e.m_rn.v,this.m_rd.v*=e.m_rd.v,this.m_power+=e.m_power,this.m_bNormalized=!1,this.normalizeThis(),this))}mulDoubleThis(t){return this.mulThis(e.constructDouble(t))}thisMulInt64(e){return t(0),this}thisMulInt32(e){return t(0),this}divThis(e){return this.mulThis(e.clone().invertThis())}divDoubleThis(t){return this.divThis(e.constructDouble(t))}addDoubleThis(t){return this.addThis(e.constructDouble(t))}subDoubleThis(t){return this.subThis(e.constructDouble(t))}mul(e){return this.clone().mulThis(e)}mulBigIntThis(t){return this.mulThis(e.constructInt64(t))}mulDouble(t){return this.clone().mulThis(e.constructDouble(t))}div(e){return this.clone().divThis(e)}divDouble(e){return this.clone().divDoubleThis(e)}add(e){return this.clone().addThis(e)}fmSubThis(e,t){return this.subThis(e.clone().mulThis(t))}fmAddThis(e,t){return this.addThis(e.clone().mulThis(t))}addThis(e){if(e.isNAN()&&this.setNAN(),this.isPositiveInf()&&e.isPositiveInf())return this.setPositiveInf(),this;if(this.isPositiveInf()&&e.isNegativeInf())this.setNAN();else{if(this.isNegativeInf()&&e.isNegativeInf())return this.setNegativeInf(),this;this.isNegativeInf()&&e.isPositiveInf()&&this.setNAN()}return this.isNAN()?this:this.opPlusMinus(e,!0)}addDouble(t){return this.clone().addThis(e.constructDouble(t))}sub(e){return this.clone().subThis(e)}subDouble(t){return this.clone().subThis(e.constructDouble(t))}isZero(){return this.m_sign===0}equals(e){return this.clone().subThis(e).isZero()}lt(e){return!this.isNAN()&&!e.isNAN()&&!(this.isPositiveInf()&&e.isPositiveInf()||this.isNegativeInf()&&e.isNegativeInf())&&!this.isPositiveInf()&&(!!e.isPositiveInf()||this.clone().sub(e).LZ())}absLessAbs(e){return this.abs().lt(e.abs())}gt(e){return this.clone().sub(e).GZ()}lte(e){return this.sub(e).LEZ()}gte(e){return this.sub(e).GEZ()}normalizeThis(){if(this.m_bNormalized)return this;if(this.m_rn.v===0n)return this.setZero();let e=0,t=4294967295n;for(;(this.m_rn.v&t)===0n&&t<=this.m_rn.v;)t<<=32n,e+=32;t&=this.m_rn.v,t>>=BigInt(e),e+=Ce(BigInt.asUintN(32,t))-1;let n=0;for(t=4294967295n;(this.m_rd.v&t)===0n&&t<=this.m_rd.v;)t<<=32n,n+=32;return t&=this.m_rd.v,t>>=BigInt(n),n+=Ce(BigInt.asUintN(32,t))-1,this.m_rn.v>>=BigInt(e),this.m_rd.v>>=BigInt(n),this.m_power+=e-n,this.m_rn.v>1n&&this.m_rd.v>1n&&(this.m_rn.v%this.m_rd.v===0n?(this.m_rn.v/=this.m_rd.v,this.m_rd.v=1n):this.m_rd.v%this.m_rn.v===0n&&(this.m_rd.v/=this.m_rn.v,this.m_rn.v=1n)),this.m_bNormalized=!0,this}negateThis(){return this.isNAN()||(this.m_sign*=-1),this}negate(){return this.clone().negateThis()}invertThis(){return this.isNAN()?this:this.isPositiveInf()||this.isNegativeInf()?(this.setZero(),this):this.m_rn.v===0n?(this.setPositiveInf(),this):(this.m_rd=B(this.m_rn,this.m_rn=this.m_rd),this.m_power=-this.m_power,this)}limitPrecisionThis(e){if(e===0)return this;if(this.isZero())return this.setZero();if(!this.isFinite())return this;this.normalizeThis();let t=Number(W(this.m_rn.v));if(t>e){let n=t-e;this.m_rn.v>>=BigInt(t-e),this.m_power+=n}if(t=Number(W(this.m_rd.v)),t>e){let n=t-e;this.m_rd.v>>=BigInt(t-e),this.m_power-=n}return this}hiBitIndex(){return Math.max(Number(W(this.m_rn.v)),Number(W(this.m_rd.v)))}ldexp(e){return this.clone().ldexpThis(e)}ldexpThis(e){return e&&(this.m_bNormalized=!1,this.m_power+=e,this.normalizeThis()),this}static lerp(t,n,r){return e.lerpLo(n,n,r)}static lerpLo(e,t,n){return t.sub(e).mulThis(n).addThis(e)}static lerpHi(e,t,n){return t.sub(e).mulThis(Bn.sub(n)).addThis(e)}LZ(){return!this.isNAN()&&this.m_sign===-1}GZ(){return!this.isNAN()&&this.m_sign===1}LEZ(){return!this.isNAN()&&this.m_sign<=0}GEZ(){return!this.isNAN()&&this.m_sign>=0}toString(){return this.toDouble().toString()}sqr(){return this.clone().sqrThis()}sqrThis(){return this.mulThis(this.clone())}static sqrt(n,r){if(n.m_sign<0n&&w(`MP_value: sqrt(-1)`),n.isZero())return n.clone();let i=52,a=2220446049250313e-31;for(;i<r;)2*i<=r?(a*=a,i*=2):(a*=2220446049250313e-31,i+=52);i+=52;let o=W(n.m_rn.v),s=W(n.m_rd.v),c,l=n.m_power+Number(o-s),u=new e;Math.abs(l)>200?(1&Math.abs(l)&&(l+=1),c=e.constructAssign(n,53).ldexpThis(-l).value(),u.setThis(n).ldexpThis(-l),t(Number.isFinite(c))):(u.setThis(n),c=u.value(),t(Number.isFinite(c)),l=0),c=Math.sqrt(c);let d=e.constructDouble(c),f=e.constructDouble(a);f.mulThis(d).ldexpThis(1);let p=a*c*2,m=d.clone(),h=new e,g;for(let e=0;e<10;++e){m.mulThis(d),h.setThis(u).subThis(m).absThis();let e=h.value();if(g=1,e<.9)for(;e>p;)e*=e,++g;else g=4;if(h.lte(f))break;for(let e=0;e<g;e++)m.setThis(d).divThis(u).invertThis().addThis(d).ldexpThis(-1).limitPrecisionThis(i),d.setThis(m)}return d.ldexpThis(l/2)}static cubicRoot(t,n){if(t.isZero())return t.clone();let r=52,i=2220446049250313e-31;for(;r<n;)2*r<=n?(i*=i,r*=2):(i*=2220446049250313e-31,r+=52);r+=52;let a=Math.abs(t.value())**(1/3),o=e.constructDouble(a),s=o.clone();s.sqrThis().mulDoubleThis(3).mulDoubleThis(i),s.limitPrecisionThis(32),t.LZ()&&o.negateThis();for(let e=0;e<10;++e){let e=o.clone();e.sqrThis().mulThis(o);let n=e.clone();if(n.subThis(t),n.absThis().limitPrecisionThis(32),n.lte(s))break;n.setThis(t),n.ldexpThis(1),n.addThis(e);let i=e.clone();i.ldexpThis(1),i.addThis(t),n.divThis(i),o.mulThis(n),o.limitPrecisionThis(r)}return o}isInTheRangeOfDouble(){return t(0),!1}sign(){return this.m_sign}cosAndSin(e,n){t(0)}pow(e){return xt(this,e)}static nan(){return t(0),new e}convertToDouble(){if(this.m_bNaN)return NaN;if(this.isZero())return 0;if(this.m_rd.v===0n)return this.m_sign===1?1/0:-1/0;let e=this.m_sign===-1,t=this.m_rn.v<<(this.m_power>=0?BigInt(this.m_power):0n),n=this.m_rd.v<<(this.m_power<0?BigInt(-this.m_power):0n),r=t/n,i=Number(r);if(BigInt(i)!==r)return e?-i:i;let a=t-r*n;if(a){let e=W(n)-1023n;e>0n&&(n>>=e,a<<=52n,a>>=e);let t=Number(a);Number.isFinite(t)||(a>>=52n,t=Number(a),e=0n),e>0n&&(t/=2**52),i+=t/Number(n)}return e?-i:i}signVal(){return this.m_sign===1?1n:this.m_sign===-1?-1n:0n}opPlusMinus(e,t){let n=Math.min(this.m_power,e.m_power),r,i;this.m_power>n?(r=BigInt(this.m_power-n),i=0n):(r=0n,i=BigInt(e.m_power-n));let a=this.signVal()*this.m_rn.v*e.m_rd.v<<r,o=e.signVal()*e.m_rn.v*this.m_rd.v<<i;return this.m_rn.v=t?a+o:a-o,this.m_rd.v*=e.m_rd.v,this.m_power=n,this.m_sign=1,this.m_rn.v<0n&&(this.m_sign=-1,this.m_rn.v=-this.m_rn.v),this.m_bNormalized=!1,this.normalizeThis(),this}};Q.s_sm=9223372036854775808n,Q.s_em=9218868437227405312n,Q.s_fm=4503599627370495n,Q.s_emax=2047n;var Bn=Q.constructInt32(1),Vn=Q.constructInt32(0),Hn=Q.constructDouble(.5);function Un(e,t){return Ee(e^t)}function Wn(e,t){let n=tn(e),r=tn(t);return n===r?(n-=53-Un(U(e),U(t)),n):n>r?n:r}function Gn(e,t){for(let n=0,r=0,i=e.length;n<i;n+=2,r++)t[r].x=e[n],t[r].y=e[n+1]}function Kn(e){let t=new Float64Array(2*e.length);for(let n=0,r=e.length;n<r;++n){let r=n<<1;t[r]=e[n].x,t[r+1]=e[n].y}return t}function qn(e){let t=It($,e.length);for(let n=0,r=e.length;n<r;++n)t[n].setCoords(e[n][0],e[n][1]);return t}var $=class e{static construct(t,n){return new e(t,n)}constructor(e,t){e===void 0?this.x=this.y=NaN:(this.x=e,this.y=t)}clone(){return new e(this.x,this.y)}assign(e){this.setCoordsPoint2D(e)}setCoords(e,t){return this.x=e,this.y=t,this}setCoordsPoint2D(e){this.x=e.x,this.y=e.y}isEqualPoint2D(e,t){return t===void 0?this.x===e.x&&this.y===e.y:Math.abs(this.x-e.x)<=t&&Math.abs(this.y-e.y)<=t}isEqual(e,t,n){return n===void 0?this.x===e&&this.y===t:Math.abs(this.x-e)<=n&&Math.abs(this.y-t)<=n}equalsPoint2D(e,t){return this.isEqualPoint2D(e,t)}setSub(e,t){this.x=e.x-t.x,this.y=e.y-t.y}addThis(e){return this.x+=e.x,this.y+=e.y,this}setAdd(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}absoluteOther(e){}absolute(){return t(0),this}setNegate(){this.x=-this.x,this.y=-this.y}setNegateOther(e){this.x=-e.x,this.y=-e.y}interpolateThis(e,t){}interpolate(e,n,r){t(0)}scaleAddThis(e,t){this.x=this.x*e+t.x,this.y=this.y*e+t.y}setScaleAdd(e,t,n){this.x=t.x*e+n.x,this.y=t.y*e+n.y}scaleOther(e,n){t(0)}scale(e){this.x*=e,this.y*=e}compare(e){return this.y<e.y?-1:this.y>e.y?1:this.x<e.x?-1:this.x>e.x?1:0}compareX(e){return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}normalizeOther(e){t(0)}normalize(){let e=this.length();return e?(this.x/=e,this.y/=e):(this.x=1,this.y=0),this}getUnitVector(){return this.clone().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}sqrLength(){return this.x*this.x+this.y*this.y}static averageFast(e,n){return t(0),{}}static average(t,n){let r=new e;if(n===0)return r.setNAN(),r;if(n===1)return r.assign(t[0]),r;let i=new E(t[0].x),a=new E(t[0].y);for(let e=1;e<n;e++)i.add(t[e].x),a.add(t[e].y),255&e||(i.normalize(),a.normalize());return r.x=i.getResult()/n,r.y=a.getResult()/n,r}static calculateLength(t,n){let r=new E(0);for(let i=1;i<n;i++)r.add(e.distance(t[i],t[i-1]));return r.getResult()}offset(t,n){let r=e.distance(t,n),i=e.construct(this.x,this.y);if(r===0)return e.distance(i,t);let a=n.clone();return a.subThis(t),i.subThis(t),i.crossProduct(a)/r}side(t,n){return t.equals(n)?this.equals(t)?0:1:e.orientationRobust(n,t,this)}static sqrDistance(e,t){let n=e.x-t.x,r=e.y-t.y;return n*n+r*r}static sqrDistanceCoords(e,t,n,r){let i=n-e,a=r-t;return i*i+a*a}static distance(t,n){return Math.sqrt(e.sqrDistance(t,n))}dotProduct(e){return this.x*e.x+this.y*e.y}dotProductAbs(e){return Math.abs(this.x*e.x)+Math.abs(this.y*e.y)}crossProduct(e){return this.x*e.y-this.y*e.x}crossProductAbs(e){return t(0),0}rotateDirect(e,t){let n=this.x*e-this.y*t,r=this.x*t+this.y*e;this.x=n,this.y=r}rotateReverse(e,t){let n=this.x*e+this.y*t,r=-this.x*t+this.y*e;this.x=n,this.y=r}leftPerpendicularThis(){let e=this.x;this.x=-this.y,this.y=e}leftPerpendicularOther(e){let t=e.x;this.x=-e.y,this.y=t}rightPerpendicularThis(){let e=this.x;this.x=this.y,this.y=-e}rightPerpendicularOther(e){let t=e.x;this.x=e.y,this.y=-t}equals(e){return this.x===e.x&&this.y===e.y}notequals(e){return this.x!==e.x||this.y!==e.y}not(){return!this.x&&!this.y}gt(e){return this.y>e.y||this.y===e.y&&this.x>e.x}gte(e){return!this.lt(e)}lt(e){return this.y<e.y||this.y===e.y&&this.x<e.x}lte(e){return!this.gt(e)}subThis(e){return this.x-=e.x,this.y-=e.y,this}divThis(e){return this.x/=e,this.y/=e,this}add(t){return new e(this.x+t.x,this.y+t.y)}sub(t){return new e(this.x-t.x,this.y-t.y)}negateThis(){return this.x=-this.x,this.y=-this.y,this}negate(){return new e(-this.x,-this.y)}mul(t){return new e(this.x*t,this.y*t)}mulThis(e){return this.x*=e,this.y*=e,this}divide(t){return new e(this.x/t,this.y/t)}setNAN(){this.x=this.y=NaN}isNAN(){return Number.isNaN(this.x)||Number.isNaN(this.y)}static getNAN(){return new e(NaN,NaN)}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)}isZero(){return this.x===0&&this.y===0}norm(e){switch(e){case 0:{let e=Math.abs(this.x),t=Math.abs(this.y),n=e-t;return n>=0?e:n<=0?t:NaN}case 1:return Math.abs(this.x)+Math.abs(this.y);case 2:return Math.sqrt(this.x*this.x+this.y*this.y);default:S(`norm`)}}getQuarter(){return e.getQuarterCoords(this.x,this.y)}static getQuarterCoords(e,t){return e>0?t>=0?1:4:t>0?2:e===0?4:3}static compareVectors(t,n){let r=t.getQuarter(),i=n.getQuarter();return i===r?e.orientationRobustImpl(e.construct(0,0),n,t,!0):r<i?-1:1}static compareVectorsOrigin(t,n,r){let i=n.sub(t),a=r.sub(t),o=i.getQuarter(),s=a.getQuarter();return s===o?e.orientationRobustImpl(t,r,n,!0):o<s?-1:1}static orientationRobust(t,n,r){return e.orientationRobustImpl(t,n,r,!1)}static orientationRobustEx(t,n,r,i){if(t.equals(n)||r.equals(i))return 0;let a=n.x-t.x,o=n.y-t.y,s=i.x-r.x,c=i.y-r.y;{let t=e.getQuarterCoords(a,o)-1,n=e.getQuarterCoords(s,c)-1,r=e.d[t][n];if(r!==0)return r}let l=a*c,u=o*s,d=4*X()*(Math.abs(l)+Math.abs(u)),f=l-u;return Math.abs(f)>=d?f<0?-1:f>0?1:0:e.orientationRobustExMp(t,n,r,i)}static orientationRobustExMp(e,t,n,r){let i=Q.constructDouble(t.x),a=Q.constructDouble(r.x);i.subThis(Q.constructDouble(e.x)),a.subThis(Q.constructDouble(n.x));let o=Q.constructDouble(t.y),s=Q.constructDouble(r.y);return o.subThis(Q.constructDouble(e.y)),s.subThis(Q.constructDouble(n.y)),i.mulThis(s),o.mulThis(a),i.subThis(o),i.LZ()?-1:i.GZ()?1:0}static orientationNonRobust(e,t,n){let r=t.sub(e).crossProduct(n.sub(e));return r<0?-1:r>0?1:0}static orientationRobustImpl(t,n,r,i){if(n.isEqualPoint2D(t)||r.isEqualPoint2D(t)||n.isEqualPoint2D(r))return 0;let a=n.x-t.x,o=n.y-t.y,s=r.x-t.x,c=r.y-t.y;if(!i){let t=e.getQuarterCoords(a,o)-1,n=e.getQuarterCoords(s,c)-1,r=e.d[t][n];if(r!==0)return r}let l=(Math.abs(a)+Math.abs(o)+Math.abs(s)+Math.abs(c))*(Math.abs(n.x)+Math.abs(n.y)+Math.abs(r.x)+Math.abs(r.y))*8*ke(),u=a*c-o*s;if(Math.abs(u)>l)return u<0?-1:1;if(A(n.x,t.x)&&A(r.y,t.y)&&A(n.y,t.y)&&A(r.x,t.x)&&O(a,c)&&O(o,s)){let e=a*c,t=o*s;if(A(e,t)){let n=e-t;return n<0?-1:n>0?1:0}}return e.orientationRobustMp(t,n,r)}static orientationRobustMp(e,t,n){let r=Q.constructDouble(t.x),i=Q.constructDouble(n.x);{let t=Q.constructDouble(e.x);r.subThis(t),i.subThis(t)}let a=Q.constructDouble(n.y),o=Q.constructDouble(t.y);{let t=Q.constructDouble(e.y);a.subThis(t),o.subThis(t)}return r.mulThis(a),o.mulThis(i),r.subThis(o),r.LZ()?-1:r.GZ()?1:0}static inCircleRobust(t,n,r,i){let a=new D,o=new D;a.set(t.x),a.subThis(i.x),o.set(t.y),o.subThis(i.y);let s=new D,c=new D;s.set(n.x),s.subThis(i.x),c.set(n.y),c.subThis(i.y);let l=new D,u=new D;l.set(r.x),l.subThis(i.x),u.set(r.y),u.subThis(i.y);let d=a.mulE(c).subE(o.mulE(s)),f=s.mulE(u).subE(c.mulE(l)),p=a.mulE(u).subE(o.mulE(l)),m=a.mulE(a).addE(o.mulE(o)),h=s.mulE(s).addE(c.mulE(c)),g=l.mulE(l).addE(u.mulE(u)),_=m.mulE(f).subE(h.mulE(p)).addE(g.mulE(d));if(!_.isFuzzyZero()){let e=_.value();return e<0?-1:e>0?1:0}return e.inCircleRobustMp(t,n,r,i)}static inCircleRobustMp(e,t,n,r){do{if(!A(e.x,r.x)||!A(e.y,r.y)||!A(t.x,r.x)||!A(t.y,r.y)||!A(n.x,r.x)||!A(n.y,r.y))break;let i=e.x-r.x,a=e.y-r.y,o=t.x-r.x,s=t.y-r.y,c=n.x-r.x,l=n.y-r.y;if(!O(i,s)||!O(a,o)||!O(o,l)||!O(s,c)||!O(i,l)||!O(a,c)||!O(i,i)||!O(a,a)||!O(o,o)||!O(s,s)||!O(c,c)||!O(l,l))break;let u=i*s,d=a*o,f=o*l,p=s*c,m=i*l,h=a*c,g=i*i,_=a*a,v=o*o,y=s*s,b=c*c,x=l*l;if(!A(u,d)||!A(f,p)||!A(m,h)||!k(g,_)||!k(v,y)||!k(b,x))break;let S=u-d,ee=f-p,te=m-h,ne=g+_,re=v+y,C=b+x;if(!O(ne,ee)||!O(re,te)||!O(C,S))break;let w=ne*ee,T=re*te,ie=C*S;if(!A(w,T))break;let ae=w-T;if(!k(ae,ie))break;let oe=ae+ie;return oe<0?-1:oe>0?1:0}while(0);let i=Q.constructDouble(r.x),a=Q.constructDouble(r.y),o=Q.constructDouble(e.x),s=Q.constructDouble(e.y);o.subThis(i),s.subThis(a);let c=Q.constructDouble(t.x),l=Q.constructDouble(t.y);c.subThis(i),l.subThis(a);let u=Q.constructDouble(n.x),d=Q.constructDouble(n.y);u.subThis(i),d.subThis(a);let f=o.mul(l).sub(s.mul(c)),p=c.mul(d).sub(l.mul(u)),m=o.mul(d).sub(s.mul(u)),h=o.mul(o).add(s.mul(s)),g=c.mul(c).add(l.mul(l)),_=u.mul(u).add(d.mul(d)),v=h.mul(p).sub(g.mul(m)).add(_.mul(f));return v.LZ()?-1:v.GZ()?1:0}static inCircleRobustMp3Point(e,t,n){let r=Q.constructDouble(e.x),i=Q.constructDouble(e.y),a=Q.constructDouble(t.x),o=Q.constructDouble(t.y),s=Q.constructDouble(n.x),c=Q.constructDouble(n.y),l=s.mul(s).add(c.mul(c)).sub(s.mul(r).add(c.mul(i)).add(s.mul(a)).add(c.mul(o))).add(r.mul(a).add(i.mul(o)));return l.LZ()?-1:l.GZ()?1:0}static inCircleRobust3Point(t,n,r){let i=new D(t.x),a=new D(t.y),o=new D(n.x),s=new D(n.y),c=new D(r.x),l=new D(r.y),u=c.mulE(c).addE(l.mulE(l)).subE(c.mulE(i).addE(l.mulE(a)).addE(c.mulE(o)).addE(l.mulE(s))).addE(i.mulE(o).addE(a.mulE(s)));if(!u.isFuzzyZero()){let e=u.value();return e<0?-1:e>0?1:0}return e.inCircleRobustMp3Point(t,n,r)}static calculateCircleCenterFromThreePoints(t,n,r){if(t.equals(r)||t.equals(n)||r.equals(n))return e.getNAN();let i=Jn(t,n,r);return i.isNAN()?Yn(t,n,r):i}static calculateAngle(e,t){return Math.atan2(e.crossProduct(t),e.dotProduct(t))}static isBisectorRobust(e,n,r){return t(0),!1}static size(){return 2}get 0(){return this.x}get 1(){return this.y}set 0(e){this.x=e}set 1(e){this.y=e}static compareZorder(t,n){let r=e.c_compare_zorder_xx[t.x<0?1:0]|e.c_compare_zorder_yy[t.y<0?1:0],i=e.c_compare_zorder_xx[n.x<0?1:0]|e.c_compare_zorder_yy[n.y<0?1:0];if(r===i){let e=0,r=0;for(let i=0;i<2;++i){let a=Wn(t[i],n[i]);a>e&&(e=a,r=i)}return t[r]<n[r]}return r<i}static lerp(t,n,r){let i=new e;return Je(t,n,r,i),i}static getClosestCoordinate(t,n,r,i=!1){let a=e.getNAN();a.setSub(n,t);let o=a.sqrLength();if(o===0)return .5;if(n.isEqualPoint2D(r))return 1;let s=e.getNAN();s.setSub(r,t);let c=s.dotProduct(a)/o;return i||(c<0?c=0:c>1&&(c=1)),c}static intersectLinesAtOnePoint(t,n,r,i){if(t.equals(n)||r.equals(i))return e.getNAN();let a=n.x-t.x,o=r.x-i.x,s=n.y-t.y,c=r.y-i.y,l=a*c-o*s;if(!l)return e.getNAN();let u=l;if(u===0)return e.getNAN();let d=(r.x-t.x)*c-(r.y-t.y)*o;d/=u;let f=new e;return Je(t,n,d,f),f.isFinite()?f:e.getNAN()}toString(){return`[${this.x},${this.y}]`}};function Jn(e,t,n){let r=new D(t.x);r.subThis(e.x);let i=new D(t.y);i.subThis(e.y);let a=new D(n.x);a.subThis(e.x);let o=new D(n.y);o.subThis(e.y);let s=r.clone();s.mulThisE(o);let c=i.clone();if(c.mulThisE(a),s.subThisE(c),s.value()===0)return $.getNAN();s.mulThis(2);let l=r.clone();l.mulThisE(r);let u=i.clone();u.mulThisE(i);let d=l.clone();d.addThisE(u);let f=a.clone();f.mulThisE(a);let p=o.clone();p.mulThisE(o);let m=f.clone();m.addThisE(p);let h=i.clone();h.mulThisE(m),c=o.clone(),c.mulThisE(d),h.subThisE(c),h.divThisE(s);let g=r.clone();g.mulThisE(m),c=a.clone(),c.mulThisE(d),g.subThisE(c),g.divThisE(s);let _=$.construct(e.x-h.value(),e.y+g.value()),v=e.sub(_).length(),y=t.sub(_).length(),b=n.sub(_).length(),x=1e-15*(v+Math.abs(e.x)+Math.abs(t.x)+Math.abs(n.x)+Math.abs(e.y)+Math.abs(t.y)+Math.abs(n.y));return Math.abs(v-y)<=x&&Math.abs(v-b)<=x&&h.eps()<x&&g.eps()<x?_:$.getNAN()}function Yn(e,t,n){let r=Q.constructDouble(t.x);r.subDoubleThis(e.x);let i=Q.constructDouble(t.y);i.subDoubleThis(e.y);let a=Q.constructDouble(n.x);a.subDoubleThis(e.x);let o=Q.constructDouble(n.y);o.subDoubleThis(e.y);let s=r.clone();s.mulThis(o);let c=i.clone();if(c.mulThis(a),s.subThis(c),s.isZero())return $.getNAN();s.mulDoubleThis(2);let l=r.clone();l.mulThis(r);let u=i.clone();u.mulThis(i);let d=l.clone();d.addThis(u);let f=a.clone();f.mulThis(a);let p=o.clone();p.mulThis(o);let m=f.clone();m.addThis(p);let h=i.clone();h.mulThis(m),c=o.clone(),c.mulThis(d),h.subThis(c),h.divThis(s);let g=r.clone();return g.mulThis(m),c=a.clone(),c.mulThis(d),g.subThis(c),g.divThis(s),$.construct(e.x-h.value(),e.y+g.value())}$.dimensions=2,$.d=[[0,1,0,-1],[-1,0,1,0],[0,-1,0,1],[1,0,-1,0]],$.c_compare_zorder_xx=[2,0],$.c_compare_zorder_yy=[1,0];export{zt as $,b as $t,Gt as A,E as At,N as B,pt as Bt,Ut as C,h as Cn,Ye as Ct,Z as D,Nt as Dt,Ze as E,Ve as Et,On as F,Et as Ft,Be as G,Ie as Gt,Rt as H,wt as Ht,It as I,$t as It,qe as J,w as Jt,wn as K,yn as Kt,Pe as L,Q as Lt,Dn as M,qn as Mt,Ft as N,D as Nt,Wt as O,nn as Ot,We as P,vn as Pt,An as Q,y as Qt,_n as R,nt as Rt,Pn as S,re as Sn,Bn as St,Ct as T,Ht as Tt,Re as U,De as Ut,X as V,j as Vt,At as W,ln as Wt,Bt as X,ne as Xt,jn as Y,te as Yt,Ke as Z,pe as Zt,Pt as _,u as _n,Vn as _t,Y as a,de as an,Je as at,Lt as b,x as bn,R as bt,Cn as c,c as cn,bn as ct,kt as d,m as dn,ft as dt,le as en,$e as et,Me as f,_ as fn,Kn as ft,He as g,d as gn,G as gt,St as h,ae as hn,dt as ht,Ne as i,S as in,qt as it,Ue as j,Hn as jt,Qe as k,$ as kt,jt as l,T as ln,Ot as lt,z as m,ce as mn,rn as mt,Fn as n,ee as nn,Kt as nt,Tt as o,ie as on,Mn as ot,gn as p,g as pn,cn as pt,Mt as q,Dt as qt,V as r,se as rn,Rn as rt,ze as s,fe as sn,Vt as st,Xe as t,ue as tn,Ln as tt,Le as u,p as un,on as ut,Ge as v,t as vn,an as vt,je as w,C as wn,Nn as wt,P as x,v as xn,Gn as xt,kn as y,f as yn,L as yt,B as z,sn as zt};