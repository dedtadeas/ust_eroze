import{Ax as e,Bg as t,Sx as n,Vg as r,e_ as i}from"./index-BqmCqmfp.js";import{cn as a,kt as o}from"./Point2D-UYEfE6HP.js";import{$t as s,E as c,En as l,kn as u,q as d}from"./UnitFactory-J9WMNXdY.js";import{a as f,o as p}from"./jsonConverter-DiNOXEUJ.js";var m=`_gxVersion`,h=2,g=1;function _(e){return Array.isArray(e)?e[0].spatialReference:e.spatialReference}function v(e){switch(e.type){case`point`:return x(e);case`multipoint`:return b(e);case`polyline`:return C(e);case`polygon`:return S(e);case`extent`:return y(e);default:throw Error(`Unsupported geometry type: ${e.type}`)}}function y(e){if(!e.getCacheValue(m)){let t=new u;t.setCoords(e.xmin,e.ymin,e.xmax,e.ymax),e.hasM&&t.setInterval(h,0,e.mmin,e.mmax),e.hasZ&&t.setInterval(g,0,e.zmin,e.zmax),e.setCacheValue(m,t)}return e.getCacheValue(m)}function b(e){if(!e.getCacheValue(m)){let t=new s,n=new l,r=e.points,i=e.hasM,a=e.hasZ,o=a?3:2;for(let e=0,s=r.length;e<s;e++){let s=r[e];n.setXYCoords(s[0],s[1]),a&&n.setZ(s[2]??0),i&&n.setM(s[o]??NaN),t.add(n)}e.setCacheValue(m,t)}return e.getCacheValue(m)}function x(e){if(!e.getCacheValue(m)){let t=new l;t.setXYCoords(e.x,e.y),e.hasM&&t.setM(e.m),e.hasZ&&t.setZ(e.z),e.setCacheValue(m,t)}return e.getCacheValue(m)}function S(e){if(!e.getCacheValue(m)){let{curveRings:t,hasM:n,hasZ:r,rings:i}=e,a=p({curveRings:t,hasM:n,hasZ:r,rings:i});e.setCacheValue(m,a)}return e.getCacheValue(m)}function C(e){if(!e.getCacheValue(m)){let{curvePaths:t,hasM:n,hasZ:r,paths:i}=e,a=p({curvePaths:t,hasM:n,hasZ:r,paths:i});e.setCacheValue(m,a)}return e.getCacheValue(m)}function w(e){if(e.wkid)return c(e.wkid);let t=e.wkt2||e.wkt;return t?d(t):null}function T(e,t){if(e)switch(e.getGeometryType()){case a.enumPoint:return O(e,t);case a.enumEnvelope:return E(e,t);case a.enumMultiPoint:return D(e,t);case a.enumPolyline:return A(e,t);case a.enumPolygon:return k(e,t)}return null}function E(e,t){if(e.isEmpty())return null;let r=new n({xmin:e.getXMin(),ymin:e.getYMin(),xmax:e.getXMax(),ymax:e.getYMax(),spatialReference:t}),i=e.getDescription();if(i.hasM()){let t=e.queryInterval(h,0);r.mmin=t.vmin,r.mmax=t.vmax}if(i.hasZ()){let t=e.queryInterval(g,0);r.zmin=t.vmin,r.zmax=t.vmax}return r.setCacheValue(m,e),r}function D(e,t){if(e.isEmpty())return null;let n=e.getDescription(),i=n.hasM(),a=n.hasZ(),o=[],s=new l;for(let t=0,n=e.getPointCount();t<n;t++){e.getPointByVal(t,s);let n=[s.getX(),s.getY()];a&&n.push(s.getZ()),i&&n.push(s.getM()),o.push(n)}let c=new r({hasM:i,hasZ:a,points:o,spatialReference:t});return c.setCacheValue(m,e),c}function O(t,n){if(t instanceof o)return new e({x:t.x,y:t.y,spatialReference:n});if(t.isEmpty())return null;let r=new e({x:t.getX(),y:t.getY(),spatialReference:n}),i=t.getDescription();return i.hasM()&&(r.m=t.getM()),i.hasZ()&&(r.z=t.getZ()),r.setCacheValue(m,t),r}function k(e,t){if(e.isEmpty())return null;let n=i.fromJSON({spatialReference:t,...f(e,null)});return n.setCacheValue(m,e),n}function A(e,n){if(e.isEmpty())return null;let r=t.fromJSON({spatialReference:n,...f(e,null)});return r.setCacheValue(m,e),r}export{O as a,k as c,S as d,x as f,C as i,T as l,A as m,E as n,b as o,v as p,y as r,w as s,_ as t,D as u};