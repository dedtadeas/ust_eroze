import{Am as e,CD as t,MC as n,TC as r,gC as i,kC as a,mT as o,vE as s,zb as c}from"./index-BqmCqmfp.js";import{a as l}from"./layerViewUtils-Bbe7IKvz.js";var u=class extends c(i(r)){get spatialReferenceSupported(){return!0}constructor(t){super(t),this._updatingHandles=new e,this.layer=null,this.parent=null}initialize(){this.when().catch(e=>{if(e.name!==`layerview:create-error`){let t=this.layer&&this.layer.id||`no id`,n=this.layer?.title||`no title`;s.getLogger(this).error(`#resolve()`,`Failed to resolve layer view (layer title: '${n}', id: '${t}')`,e)}})}destroy(){this._updatingHandles=o(this._updatingHandles),this._set(`parent`,null)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome(`visible`,e)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){let e=this.view.timeExtent,t=this.layer?.visibilityTimeExtent;return!e||!t||!e.intersection(t).isEmpty}canResume(){let e=this.layer&&`effectiveScaleRange`in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&this.parent&&!this.parent.suspended&&this.view?.ready&&l(e)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){let e=this.parent?.suspended?this.parent.suspendInfo:{};this.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0);let t=this.layer&&`effectiveScaleRange`in this.layer?this.layer.effectiveScaleRange:null;return l(t)&&this.visibleAtCurrentScale||(e.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(e.outsideVisibilityTimeExtent=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};t([n({readOnly:!0})],u.prototype,`spatialReferenceSupported`,null),t([n()],u.prototype,`view`,void 0),t([n()],u.prototype,`fullOpacity`,null),t([n()],u.prototype,`layer`,void 0),t([n()],u.prototype,`parent`,void 0),t([n({readOnly:!0})],u.prototype,`suspended`,null),t([n({readOnly:!0})],u.prototype,`suspendInfo`,null),t([n({readOnly:!0})],u.prototype,`legendEnabled`,null),t([n({type:Boolean,readOnly:!0})],u.prototype,`updating`,null),t([n({readOnly:!0})],u.prototype,`updatingProgress`,null),t([n()],u.prototype,`updateSuspended`,null),t([n()],u.prototype,`visible`,null),t([n({readOnly:!0})],u.prototype,`visibleAtCurrentScale`,null),t([n({readOnly:!0})],u.prototype,`visibleAtCurrentTimeExtent`,null),u=t([a(`esri.views.layers.LayerView`)],u);export{u as t};