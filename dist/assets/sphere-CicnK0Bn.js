import{$l as e,Al as t,Bh as n,Il as r,Iv as i,Jg as a,Jl as o,Ml as s,Ol as c,Qg as l,Ul as u,Wl as d,Xl as ee,Xy as te,au as ne,eb as re,eu as f,iu as p,k_ as ie,nu as m,ow as ae,ru as h,tu as oe,vt as se}from"./index-BqmCqmfp.js";import{n as ce,o as le,t as g}from"./vectorStacks-CKtslZxP.js";var _=class{constructor(e){this._allocator=e,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&ae(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){let e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*v);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,v));e++)this._items.push(this._allocator())}},v=1024;function y(e){return e?b(l(e.origin),l(e.direction)):b(a(),a())}function b(e,t){return{origin:e,direction:t}}function ue(e,t){let n=me.get();return n.origin=e,n.direction=t,n}function de(e,t=y()){return S(e.origin,e.direction,t)}function x(e,t,n=y()){return h(n.origin,e),d(n.direction,t,e),n}function S(e,t,n=y()){return h(n.origin,e),h(n.direction,t),n}function fe(e,t){let n=u(g.get(),c(g.get(),e.direction),d(g.get(),t,e.origin));return r(n,n)}function pe(e,t,n){let i=r(e.direction,d(n,t,e.origin));return p(n,e.origin,o(n,e.direction,i)),n}var me=new _(()=>y());a(),a(),a(),ie();function C(t,n){let r=m(t),i=re(t[2]/r),a=Math.atan2(t[1]/r,t[0]/r);return e(n,r,i,a),n}var w=E();function T(e,t,n,r){return[e,t,n,r]}function E(){return T(0,0,0,0)}function D(e,t){return T(e[0],e[1],e[2],t)}function O(e){return T(e[0],e[1],e[2],e[3])}function k(e,t,n){return A(e,t[0],t[1],t[2],n)}function A(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function j(e,t){return M(e,t)}function M(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function N(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function he(e){return T(e[0],e[1],e[2],e[3])}function ge(e){e[0]=0,e[1]=0,e[2]=0,e[3]=0}function P(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=t,e}function F(e){return e[3]}function I(t,n){return e(n,t[0],t[1],t[2])}function L(t){return e(Q,t[0],t[1],t[2])}function R(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2]}function z(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2]}function _e(e,t,n,r){e[0]=t,e[1]=n,e[2]=r}function B(e,n,r){R(e,t(Q,n,r))}function ve(e,t,n,r,i){e[0]=t,e[1]=n,e[2]=r,e[3]=i}function ye(e){return se(e[0],e[1],e[2],e[3])}function be(e,t,n){return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),n[3]=e[3]+t,n}function xe(e,t,n){return e!==n&&N(e,n),n}function Se(e,t){return t}function V(e,t,n){if(t==null||!W(e,t,U))return!1;let{t0:r,t1:i}=U;if((r<0||i<r&&i>0)&&(r=i),r<0)return!1;if(n){let{origin:e,direction:i}=t;n[0]=e[0]+i[0]*r,n[1]=e[1]+i[1]*r,n[2]=e[2]+i[2]*r}return!0}function H(e,t,n){let r=x(t,n);if(!W(e,r,U))return[];let{origin:o,direction:s}=r,{t0:c,t1:l}=U,u=t=>{let n=a();return oe(n,o,s,t),J(e,n,n)};return Math.abs(c-l)<i()?[u(c)]:[u(c),u(l)]}var U={t0:0,t1:0};function W(e,t,n){let{origin:r,direction:i}=t,a=Ce;a[0]=r[0]-e[0],a[1]=r[1]-e[1],a[2]=r[2]-e[2];let o=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];if(o===0)return!1;let s=2*(i[0]*a[0]+i[1]*a[1]+i[2]*a[2]),c=s*s-4*o*(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]-e[3]*e[3]);if(c<0)return!1;let l=Math.sqrt(c);return n.t0=(-s-l)/(2*o),n.t1=(-s+l)/(2*o),!0}var Ce=a();function G(e,t){return V(e,t,null)}function we(e,t,n){if(V(e,t,n))return n;let r=K(e,t,g.get());return p(n,t.origin,o(g.get(),t.direction,f(t.origin,r)/m(t.direction))),n}function K(e,r,i){let a=g.get(),s=ce.get();u(a,r.origin,r.direction);let c=F(e);u(i,a,r.origin),o(i,i,1/m(i)*c);let l=Y(e,r.origin),d=le(r.origin,i);return n(s,d+l,a),t(i,i,s),i}function q(e,t,n,r){let i=F(e),a=i*i,o=t+.5*Math.PI,s=n*n+a-2*Math.cos(o)*n*i,c=Math.sqrt(s),l=s-a;if(l<=0)return .5;let u=Math.sqrt(l),d=Math.acos(u/c)-Math.asin(i/(c/Math.sin(o)));return Math.min(1,(d+.5*r)/r)}function Te(e,t,n){return V(e,t,n)?n:(pe(t,L(e),n),J(e,n,n))}function J(e,t,n){let r=d(g.get(),t,L(e)),i=o(g.get(),r,e[3]/m(r));return p(n,i,L(e))}function Ee(e,t){let n=d(g.get(),t,L(e)),r=ee(n),i=e[3]*e[3];return Math.sqrt(Math.abs(r-i))}function Y(e,t){let n=d(g.get(),t,L(e)),r=m(n),i=F(e),a=i+Math.abs(i-r);return te(i/a)}var X=a();function Z(t,n,r,i){let a=d(X,n,L(t));switch(r){case 0:{let t=C(a,X)[2];return e(i,-Math.sin(t),Math.cos(t),0)}case 1:{let t=C(a,X),n=t[1],r=t[2],o=Math.sin(n);return e(i,-o*Math.cos(r),-o*Math.sin(r),Math.cos(n))}case 2:return c(i,a);default:return}}function De(e,t){let n=d($,t,L(e));return m(n)-e[3]}function Oe(e,t,n,r){let i=De(e,t),a=Z(e,t,2,$),s=o($,a,n-i);return p(r,t,s)}function ke(e,t){let n=ne(L(e),t),r=F(e);return n<=r*r}function Ae(e,t,n=E()){let r=f(L(e),I(t,je)),i=e[3],a=t[3];return r+a<i?(N(e,n),n):r+i<a?(N(t,n),n):(s(Q,L(e),I(t,je),(r+a-i)/(2*r)),k(n,Q,(r+i+a)/2),n)}var Q=a(),je=a(),Me=E(),$=a(),Ne=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:w,altitudeAt:De,angleToSilhouette:Y,axisAt:Z,cameraFrustumCoverage:q,clear:ge,clone:he,closestPoint:Te,closestPointOnSilhouette:K,containsPoint:ke,copy:N,copyCenter:z,create:E,distanceToSilhouette:Ee,elevate:be,equals:M,exactEquals:j,fromCenterAndRadius:D,fromRadius:P,fromValues:T,fromVec4:O,getCenter:I,getCenterTemp:L,getExtent:Se,getRadius:F,intersectLine:H,intersectRay:V,intersectRayClosestSilhouette:we,intersectsRay:G,projectPoint:J,set:A,setAltitudeAt:Oe,setCenter:R,setCenterFromValues:_e,setExtent:xe,setFromCenterAndRadius:k,setFromValues:ve,setTransformedCenter:B,tmpSphere:Me,toVec4:ye,union:Ae},Symbol.toStringTag,{value:`Module`}));export{x as C,de as D,S as E,fe as O,I as S,ue as T,ke as _,F as a,G as b,E as c,j as d,z as f,Ne as g,q as h,L as i,_ as k,O as l,H as m,B as n,R as o,k as p,ye as r,N as s,T as t,w as u,D as v,y as w,P as x,J as y};