import{Do as e,Ko as t,Mo as n,To as r,Uo as i,Xo as a,Zo as o,bo as s,yo as c}from"./index-BqmCqmfp.js";import"./guid-D8BoG5RM.js";import"./controllers-DZ7pbtKF.js";import{t as l}from"./useT9n-bRfAARgx.js";import"./calcite-loader-C2BnVEC6.js";import{_ as u,g as d,i as f}from"./dom-atD5WAsR.js";import{t as p}from"./observers-Ca90Dkfx.js";import"./logger-N52NEE_B.js";import"./calcite-icon-DU8UXGam.js";import"./keyed-CU6bsPrA.js";import"./interactive-C1Xh6Lv0.js";import{t as m}from"./useSetFocus-BOgV9A-L.js";import"./form-CYe_Hdps.js";import"./calcite-action-CVrDQiWf.js";import"./floating-ui-bSZlirwY.js";import{t as h}from"./debounce-JuHvylml.js";import"./openCloseComponent-C1bAqVbv.js";import"./static-CFhWbVpa.js";import{n as g}from"./calcite-action-menu-CKG8WFN_.js";import"./FloatingArrow-B1y4p2MR.js";import"./key-UZzOT_rp.js";import"./array-GwTbyvCf.js";import{n as _}from"./calcite-action-group-Bb_6JISA.js";import{t as v}from"./useCancelable-CRHa62_S.js";var y=e=>Array.from(e.querySelectorAll(`calcite-action`)).filter(e=>e.closest(`calcite-action-menu`)?e.slot===g.trigger:!0),b=({actionGroups:e,expanded:t,overflowCount:n})=>{let r=n;e.reverse().forEach(e=>{let n=0,i=y(e).reverse();i.forEach(e=>{e.slot===_.menuActions&&(e.removeAttribute(`slot`),e.textEnabled=t)}),r>0&&i.some(e=>(i.filter(e=>!e.slot).length>1&&i.length>2&&!e.closest(`calcite-action-menu`)&&(e.textEnabled=!0,e.setAttribute(`slot`,_.menuActions),n++,n>1&&r--),r<1)),e.manager.component.requestUpdate()})},x={chevronsLeft:`chevrons-left`,chevronsRight:`chevrons-right`};function S(e,t){return e||t.closest(`calcite-shell-panel`)?.position||`start`}function C({el:e,expanded:t}){y(e).filter(e=>e.slot!==_.menuActions).forEach(e=>e.textEnabled=t),e.querySelectorAll(`calcite-action-group, calcite-action-menu`).forEach(e=>e.expanded=t)}var w=({tooltip:e,referenceElement:t,expanded:n,ref:r})=>(e&&(e.referenceElement=!n&&t?t:null),r&&r(t),t),T=({expanded:e,expandText:r,collapseText:i,expandLabel:o,collapseLabel:s,toggle:c,el:l,position:u,tooltip:d,ref:p,scale:m})=>{let h=f(l)===`rtl`,g=e?i:r,_=e?s:o,v=[x.chevronsLeft,x.chevronsRight];h&&v.reverse();let y=S(u,l)===`end`,b=y?v[1]:v[0],C=y?v[0]:v[1];return a`<calcite-action .aria=${{expanded:e}} .icon=${e?b:C} id=expand-toggle .label=${_} @click=${c} .scale=${m} .text=${g} .textEnabled=${e} title=${(!e&&!d?g:null)??t} ${n(t=>w({tooltip:d,referenceElement:t,expanded:e,ref:p}))}></calcite-action>`},E=({bufferSize:e=0,containerSize:t,itemSizes:n})=>{let r=t-e,i=n.length,a=0;for(let[e,t]of n.entries())if(a+=t,a>r){i=e;break}else continue;return i},D=({bufferSize:e=0,containerSize:t,itemSizes:n})=>Math.max(n.length-E({bufferSize:e,itemSizes:n,containerSize:t}),0),O={container:`container`,actionGroupEnd:`action-group--end`},k={actionsEnd:`actions-end`,bottomActions:`bottom-actions`,expandTooltip:`expand-tooltip`},A=o`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:inline-flex;align-self:stretch;background:transparent}.container{display:inline-flex;flex:1 1 auto;flex-direction:column;gap:var(--calcite-action-bar-items-space, 0);background-color:var(--calcite-action-bar-background-color, var(--calcite-color-foreground-1))}@keyframes in{0%{opacity:0}to{opacity:1}}:host([floating]) .container{animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;overflow:hidden;border-radius:var(--calcite-action-bar-corner-radius, var(--calcite-corner-radius-round));--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--calcite-action-bar-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow))}:host([layout=vertical]){flex-direction:column}:host([layout=vertical]):host([overflow-actions-disabled]) .container{overflow-y:auto}:host([layout=vertical]):host([expanded]) .container{max-inline-size:var(--calcite-action-bar-expanded-max-width, auto)}:host([layout=vertical]) .action-group--end{margin-block-start:auto}:host([layout=vertical]) ::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}:host([layout=horizontal]){flex-direction:row}:host([layout=horizontal]) .container{flex-direction:row}:host([layout=horizontal]):host([overflow-actions-disabled]) .container{overflow-x:auto}:host([layout=horizontal]) .action-group--end{margin-inline-start:auto}:host([layout=horizontal]) ::slotted(calcite-action-group:not(:last-of-type)){border-inline-end-width:var(--calcite-border-width-sm)}.action-group--end{justify-content:flex-end}:host([hidden]){display:none}[hidden]{display:none}`,j=class extends r{constructor(){super(),this.mutationObserver=p(`mutation`,()=>this.mutationObserverHandler()),this.cancelable=v()(this),this.resize=h(({width:e,height:t})=>{let{expanded:n,expandDisabled:r,layout:i,overflowActionsDisabled:a,actionGroups:o}=this;if(a||i===`vertical`&&!t||i===`horizontal`&&!e)return;let s=this.getItemSizes();this.updateGroups();let c=this.hasActionsEnd||this.hasBottomActions||!r?o.length+1:o.length,l=D({bufferSize:c,containerSize:i===`horizontal`?e:t,itemSizes:s});b({actionGroups:o,expanded:n,overflowCount:l})},c.resize),this.resizeHandler=e=>{let{width:t,height:n}=e.contentRect;this.resize({width:t,height:n})},this.resizeObserver=p(`resize`,e=>this.resizeHandlerEntries(e)),this.toggleExpand=()=>{this.expanded=!this.expanded,this.calciteActionBarToggle.emit()},this.messages=l(),this.focusSetter=m()(this),this.hasActionsEnd=!1,this.hasBottomActions=!1,this.floating=!1,this.expandDisabled=!1,this.expanded=!1,this.layout=`vertical`,this.overflowActionsDisabled=!1,this.overlayPositioning=`absolute`,this.scale=`m`,this.calciteActionBarCollapse=i({cancelable:!1}),this.calciteActionBarExpand=i({cancelable:!1}),this.calciteActionBarToggle=i({cancelable:!1}),this.listen(`calciteActionMenuOpen`,this.actionMenuOpenHandler)}static{this.properties={expandTooltip:[16,{},{state:!0}],hasActionsEnd:[16,{},{state:!0}],hasBottomActions:[16,{},{state:!0}],actionsEndGroupLabel:1,floating:[7,{},{reflect:!0,type:Boolean}],expandDisabled:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],overflowActionsDisabled:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],position:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]}}static{this.styles=A}async overflowActions(){this.resize({width:this.el.clientWidth,height:this.el.clientHeight})}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.updateGroups(),this.overflowActions(),this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0}),this.overflowActionsDisabledHandler(this.overflowActionsDisabled),this.cancelable.add(this.resize)}willUpdate(e){e.has(`expandDisabled`)&&(this.hasUpdated||this.expandDisabled!==!1)&&this.overflowActions(),e.has(`layout`)&&(this.hasUpdated||this.layout!==`vertical`)&&this.updateGroups(),e.has(`overflowActionsDisabled`)&&(this.hasUpdated||this.overflowActionsDisabled!==!1)&&this.overflowActionsDisabledHandler(this.overflowActionsDisabled),e.has(`expanded`)&&this.hasUpdated&&(this.expandedHandler(),this.expanded?this.calciteActionBarExpand.emit():this.calciteActionBarCollapse.emit())}loaded(){this.overflowActions()}disconnectedCallback(){super.disconnectedCallback(),this.mutationObserver?.disconnect(),this.resizeObserver?.disconnect()}getItemSizes(){let{el:e,layout:t,expandToggleEl:n}=this,r=y(e);n&&r.push(n);let i=t===`horizontal`?`clientWidth`:`clientHeight`,a=Math.max(...r.map(e=>e[i]||0));return r.map(e=>e[i]||a)}expandedHandler(){let{el:e,expanded:t}=this;C({el:e,expanded:t}),this.overflowActions()}overflowActionsDisabledHandler(e){if(e){this.resizeObserver?.disconnect();return}this.resizeObserver?.observe(this.el),this.overflowActions()}actionMenuOpenHandler(e){if(e.target.menuOpen){let t=e.composedPath();this.actionGroups?.forEach(e=>{t.includes(e)||(e.menuOpen=!1)})}}mutationObserverHandler(){this.updateGroups(),this.overflowActions()}resizeHandlerEntries(e){e.forEach(this.resizeHandler)}updateGroups(){let e=Array.from(this.el.querySelectorAll(`calcite-action-group`));this.actionGroups=e,e.forEach(e=>{e.layout=this.layout,e.scale=this.scale})}handleDefaultSlotChange(){this.updateGroups()}handleActionsEndSlotChange(e){this.hasActionsEnd=u(e)}handleBottomActionsSlotChange(e){this.hasBottomActions=u(e)}handleTooltipSlotChange(e){this.expandTooltip=d(e).filter(e=>e?.matches(`calcite-tooltip`))[0]}renderBottomActionGroup(){let{expanded:t,expandDisabled:n,el:r,position:i,toggleExpand:o,scale:s,layout:c,messages:l,actionsEndGroupLabel:u,overlayPositioning:d}=this,f=n?null:T({collapseLabel:l.collapseLabel,collapseText:l.collapse,el:r,expandLabel:l.expandLabel,expandText:l.expand,expanded:t,position:i,ref:e=>this.expandToggleEl=e,scale:s,toggle:o,tooltip:this.expandTooltip});return a`<calcite-action-group class=${e(O.actionGroupEnd)} .hidden=${this.expandDisabled&&!(this.hasActionsEnd||this.hasBottomActions)} .label=${u} .layout=${c} .overlayPositioning=${d} .scale=${s}><slot name=${k.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot><slot name=${k.bottomActions} @slotchange=${this.handleBottomActionsSlotChange}></slot><slot name=${k.expandTooltip} @slotchange=${this.handleTooltipSlotChange}></slot>${f}</calcite-action-group>`}render(){return a`<div class=${e(O.container)}><slot @slotchange=${this.handleDefaultSlotChange}></slot>${this.renderBottomActionGroup()}</div>`}};s(`calcite-action-bar`,j);export{j as ActionBar};