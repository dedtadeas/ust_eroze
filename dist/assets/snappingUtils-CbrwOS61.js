import{Cd as e,HC as t,Kb as n,Pb as r,au as i,bd as a,qb as o,so as s,wm as c,ym as l}from"./index-BqmCqmfp.js";import{n as u}from"./dehydratedPoint-Dwb3orme.js";import{h as d}from"./LineSnappingHint-BAcwqgNT.js";var f=Symbol(`grid-placement-graphic`);function p(e,t){let n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function m(e,t){return Math.sqrt(p(e,t))}function h(e,t){t.sort((t,n)=>i(t.targetPoint,e)-i(n.targetPoint,e))}function g({parameters:{point:t,distance:n,returnEdge:i,vertexMode:a,coordinateHelper:{spatialReference:o},filter:s},mode:c,returnZ:d,filter:f}){let p=f?.clone()??new e({where:`1=1`});return p.returnZ=d??c===`3d`,s&&(p.geometry=s.geometry,p.distance=s.distance,p.spatialRelationship=s.spatialRelationship,p.where=l(p.where,s.where),p.timeExtent=r(p.timeExtent,s.timeExtent),p.objectIds=_(p.objectIds,s.objectIds)),{point:u(t[0],t[1],t[2],o.toJSON()),mode:c,distance:n,returnEdge:i,vertexMode:a,query:p.toJSON()}}function _(e,n){return e||n?n?e?Array.from(t(new Set(e),new Set(n))):n:e:null}function v(e,t,n){return{left:d(e.leftVertex.pos,t,n),right:d(e.rightVertex.pos,t,n)}}var y=Symbol(`snapping-toggle`);function b(e,t=()=>{}){let r=n(()=>({view:e.view,snappingOptions:e.snappingOptions}),({view:n,snappingOptions:r})=>{if(e.removeHandles(y),!n||!r)return;let i=c.TOOL,o=[n.on(`key-down`,e=>{e.key!==a.toggle||e.repeat||(r.enabledToggled=!0,t())},i),n.on(`key-up`,e=>{e.key===a.toggle&&(r.enabledToggled=!1,t())},i),n.on(`pointer-move`,e=>{let n=e.native.ctrlKey;r.enabledToggled!==n&&(r.enabledToggled=n,t())},i)];e.addHandles(o,y)},o);e.addHandles(r)}function x(e){return s(e)&&`utilityNetworks`in e&&!!e.utilityNetworks?.length}function S(e){return e?.type===`line`}export{v as a,x as c,g as i,h as l,m as n,S as o,p as r,b as s,f as t};