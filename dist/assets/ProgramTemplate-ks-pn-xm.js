import{bD as e,dc as t,fc as n,tc as r}from"./index-BqmCqmfp.js";var i=class{constructor(e){this._readFile=e}resolveIncludes(e){return this._resolve(e)}_resolve(e,t=new Map){if(t.has(e))return t.get(e);let n=this._read(e);if(!n)throw Error(`cannot find shader file ${e}`);let r=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm,i=r.exec(n),a=[];for(;i!=null;)a.push({path:i[1],start:i.index,length:i[0].length}),i=r.exec(n);let o=0,s=``;return a.forEach(e=>{s+=n.slice(o,e.start),s+=t.has(e.path)?``:this._resolve(e.path,t),o=e.start+e.length}),s+=n.slice(o),t.set(e,s),s}_read(e){return this._readFile(e)}},a=`layout.centroid.smooth.case.mat2x2.mat2x3.mat2x4.mat3x2.mat3x3.mat3x4.mat4x2.mat4x3.mat4x4.uint.uvec2.uvec3.uvec4.samplerCubeShadow.sampler2DArray.sampler2DArrayShadow.isampler2D.isampler3D.isamplerCube.isampler2DArray.usampler2D.usampler3D.usamplerCube.usampler2DArray.coherent.restrict.readonly.writeonly.resource.atomic_uint.noperspective.patch.sample.subroutine.common.partition.active.filter.image1D.image2D.image3D.imageCube.iimage1D.iimage2D.iimage3D.iimageCube.uimage1D.uimage2D.uimage3D.uimageCube.image1DArray.image2DArray.iimage1DArray.iimage2DArray.uimage1DArray.uimage2DArray.image1DShadow.image2DShadow.image1DArrayShadow.image2DArrayShadow.imageBuffer.iimageBuffer.uimageBuffer.sampler1DArray.sampler1DArrayShadow.isampler1D.isampler1DArray.usampler1D.usampler1DArray.isampler2DRect.usampler2DRect.samplerBuffer.isamplerBuffer.usamplerBuffer.sampler2DMS.isampler2DMS.usampler2DMS.sampler2DMSArray.isampler2DMSArray.usampler2DMSArray.trunc.round.roundEven.isnan.isinf.floatBitsToInt.floatBitsToUint.intBitsToFloat.uintBitsToFloat.packSnorm2x16.unpackSnorm2x16.packUnorm2x16.unpackUnorm2x16.packHalf2x16.unpackHalf2x16.outerProduct.transpose.determinant.inverse.texture.textureSize.textureProj.textureLod.textureOffset.texelFetch.texelFetchOffset.textureProjOffset.textureLodOffset.textureProjLod.textureProjLodOffset.textureGrad.textureGradOffset.textureProjGrad.textureProjGradOffset`.split(`.`),o={enableCache:!1},s=`precision.highp.mediump.lowp.attribute.const.uniform.varying.break.continue.do.for.while.if.else.in.out.inout.float.int.void.bool.true.false.discard.return.mat2.mat3.mat4.vec2.vec3.vec4.ivec2.ivec3.ivec4.uvec2.uvec3.uvec4.bvec2.bvec3.bvec4.sampler1D.sampler2D.sampler3D.usampler1D.usampler2D.usampler3D.samplerCube.sampler1DShadow.sampler2DShadow.struct.asm.class.union.enum.typedef.template.this.packed.goto.switch.default.inline.noinline.volatile.public.static.extern.external.interface.long.short.double.half.fixed.unsigned.input.output.hvec2.hvec3.hvec4.dvec2.dvec3.dvec4.fvec2.fvec3.fvec4.sampler2DRect.sampler3DRect.sampler2DRectShadow.sizeof.cast.namespace.using`.split(`.`),c=`<<= >>= ++ -- << >> <= >= == != && || += -= *= /= %= &= ^^ ^= |= ( ) [ ] . ! ~ * / % + - < > & ^ | ? : = , ; { }`.split(` `),l=`abs.acos.all.any.asin.atan.ceil.clamp.cos.cross.dFdx.dFdy.degrees.distance.dot.equal.exp.exp2.faceforward.floor.fract.gl_BackColor.gl_BackLightModelProduct.gl_BackLightProduct.gl_BackMaterial.gl_BackSecondaryColor.gl_ClipPlane.gl_ClipVertex.gl_Color.gl_DepthRange.gl_DepthRangeParameters.gl_EyePlaneQ.gl_EyePlaneR.gl_EyePlaneS.gl_EyePlaneT.gl_Fog.gl_FogCoord.gl_FogFragCoord.gl_FogParameters.gl_FragColor.gl_FragCoord.gl_FragData.gl_FragDepth.gl_FragDepthEXT.gl_FrontColor.gl_FrontFacing.gl_FrontLightModelProduct.gl_FrontLightProduct.gl_FrontMaterial.gl_FrontSecondaryColor.gl_LightModel.gl_LightModelParameters.gl_LightModelProducts.gl_LightProducts.gl_LightSource.gl_LightSourceParameters.gl_MaterialParameters.gl_MaxClipPlanes.gl_MaxCombinedTextureImageUnits.gl_MaxDrawBuffers.gl_MaxFragmentUniformComponents.gl_MaxLights.gl_MaxTextureCoords.gl_MaxTextureImageUnits.gl_MaxTextureUnits.gl_MaxVaryingFloats.gl_MaxVertexAttribs.gl_MaxVertexTextureImageUnits.gl_MaxVertexUniformComponents.gl_ModelViewMatrix.gl_ModelViewMatrixInverse.gl_ModelViewMatrixInverseTranspose.gl_ModelViewMatrixTranspose.gl_ModelViewProjectionMatrix.gl_ModelViewProjectionMatrixInverse.gl_ModelViewProjectionMatrixInverseTranspose.gl_ModelViewProjectionMatrixTranspose.gl_MultiTexCoord0.gl_MultiTexCoord1.gl_MultiTexCoord2.gl_MultiTexCoord3.gl_MultiTexCoord4.gl_MultiTexCoord5.gl_MultiTexCoord6.gl_MultiTexCoord7.gl_Normal.gl_NormalMatrix.gl_NormalScale.gl_ObjectPlaneQ.gl_ObjectPlaneR.gl_ObjectPlaneS.gl_ObjectPlaneT.gl_Point.gl_PointCoord.gl_PointParameters.gl_PointSize.gl_Position.gl_ProjectionMatrix.gl_ProjectionMatrixInverse.gl_ProjectionMatrixInverseTranspose.gl_ProjectionMatrixTranspose.gl_SecondaryColor.gl_TexCoord.gl_TextureEnvColor.gl_TextureMatrix.gl_TextureMatrixInverse.gl_TextureMatrixInverseTranspose.gl_TextureMatrixTranspose.gl_Vertex.greaterThan.greaterThanEqual.inversesqrt.length.lessThan.lessThanEqual.log.log2.matrixCompMult.max.min.mix.mod.normalize.not.notEqual.pow.radians.reflect.refract.sign.sin.smoothstep.sqrt.step.tan.texture2D.texture2DLod.texture2DProj.texture2DProjLod.textureCube.textureCubeLod.texture2DLodEXT.texture2DProjLodEXT.textureCubeLodEXT.texture2DGradEXT.texture2DProjGradEXT.textureCubeGradEXT.textureSize.texelFetch`.split(`.`),u=999,d=9999,f=0,p=1,m=2,h=3,g=4,_=5,v=6,y=7,b=8,x=9,S=10,C=11,w=[`block-comment`,`line-comment`,`preprocessor`,`operator`,`integer`,`float`,`ident`,`builtin`,`keyword`,`whitespace`,`eof`,`integer`];function T(){var e,t,n,r=0,i=0,a=u,o=[],T=[],E=1,D=0,O=0,k=!1,A=!1,j=``;return function(e){return T=[],e===null?P():N(e.replace?e.replace(/\r\n/g,`
`):e)};function M(e){e.length&&T.push({type:w[a],data:e,position:O,line:E,column:D})}function N(t){var o;for(r=0,n=(j+=t).length;e=j[r],r<n;){switch(o=r,a){case f:r=z();break;case p:r=R();break;case m:r=L();break;case h:r=B();break;case g:r=U();break;case C:r=H();break;case _:r=W();break;case d:r=G();break;case x:r=I();break;case u:r=F()}o!==r&&(j[o]===`
`?(D=0,++E):++D)}return i+=r,j=j.slice(r),T}function P(e){return o.length&&M(o.join(``)),a=S,M(`(eof)`),T}function F(){return o=o.length?[]:o,t===`/`&&e===`*`?(O=i+r-1,a=f,t=e,r+1):t===`/`&&e===`/`?(O=i+r-1,a=p,t=e,r+1):e===`#`?(a=m,O=i+r,r):/\s/.test(e)?(a=x,O=i+r,r):(k=/\d/.test(e),A=/[^\w_]/.test(e),O=i+r,a=k?g:A?h:d,r)}function I(){return/[^\s]/g.test(e)?(M(o.join(``)),a=u,r):(o.push(e),t=e,r+1)}function L(){return e!==`\r`&&e!==`
`||t===`\\`?(o.push(e),t=e,r+1):(M(o.join(``)),a=u,r)}function R(){return L()}function z(){return e===`/`&&t===`*`?(o.push(e),M(o.join(``)),a=u,r+1):(o.push(e),t=e,r+1)}function B(){if(t===`.`&&/\d/.test(e))return a=_,r;if(t===`/`&&e===`*`)return a=f,r;if(t===`/`&&e===`/`)return a=p,r;if(e===`.`&&o.length){for(;V(o););return a=_,r}if(e===`;`||e===`)`||e===`(`){if(o.length)for(;V(o););return M(e),a=u,r+1}var n=o.length===2&&e!==`=`;if(/[\w_\d\s]/.test(e)||n){for(;V(o););return a=u,r}return o.push(e),t=e,r+1}function V(e){for(var t,n,r=0;;){if(t=c.indexOf(e.slice(0,e.length+r).join(``)),n=c[t],t===-1){if(r--+e.length>0)continue;n=e.slice(0,1).join(``)}return M(n),O+=n.length,(o=o.slice(n.length)).length}}function H(){return/[^a-fA-F0-9]/.test(e)?(M(o.join(``)),a=u,r):(o.push(e),t=e,r+1)}function U(){return e===`.`||/[eE]/.test(e)?(o.push(e),a=_,t=e,r+1):e===`x`&&o.length===1&&o[0]===`0`?(a=C,o.push(e),t=e,r+1):/[^\d]/.test(e)?(M(o.join(``)),a=u,r):(o.push(e),t=e,r+1)}function W(){return e===`f`&&(o.push(e),t=e,r+=1),/[eE]/.test(e)||e===`-`&&/[eE]/.test(t)?(o.push(e),t=e,r+1):/[^\d]/.test(e)?(M(o.join(``)),a=u,r):(o.push(e),t=e,r+1)}function G(){if(/[^\d\w_]/.test(e)){var n=o.join(``);return a=s.indexOf(n)>-1?b:l.indexOf(n)>-1?y:v,M(o.join(``)),a=u,r}return o.push(e),t=e,r+1}}function E(e){var t=T(),n=[];return n=(n=n.concat(t(e))).concat(t(null))}function D(e){return E(e)}function O(e){return e.map(e=>e.type===`eof`?``:e.data).join(``)}var k=new Set([`GL_OES_standard_derivatives`,`GL_EXT_frag_depth`,`GL_EXT_draw_buffers`,`GL_EXT_shader_texture_lod`]);function A(e,t=`100`,n=`300 es`){let r=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(let i of e)if(i.type===`preprocessor`){let e=r.exec(i.data);if(e){let r=e[1].replaceAll(/\s{2,}/g,` `);if(r===n)return r;if(r===t)return i.data=`#version `+n,t;throw Error(`unknown glsl version: `+r)}}return e.splice(0,0,{type:`preprocessor`,data:`#version `+n},{type:`whitespace`,data:`
`}),null}function j(e,t){for(let n=t-1;n>=0;n--){let t=e[n];if(t.type!==`whitespace`&&t.type!==`block-comment`){if(t.type!==`keyword`)break;if(t.data===`attribute`||t.data===`in`)return!0}}return!1}function M(e,t,n,r){r||=n;for(let i of e)if(i.type===`ident`&&i.data===n)return r in t?t[r]++:t[r]=0,M(e,t,r+`_`+t[r],r);return n}function N(e,t,n=`afterVersion`){function r(e,t){for(let n=t;n<e.length;n++){let t=e[n];if(t.type===`operator`&&t.data===`;`)return n}return null}function i(e){let t=-1,i=0,a=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.type===`preprocessor`&&(/#(if|ifdef|ifndef)\s+.+/.test(s.data)?++i:/#endif\s*.*/.test(s.data)&&--i),n!==`afterVersion`&&n!==`afterPrecision`||s.type===`preprocessor`&&s.data.startsWith(`#version`)&&(a=Math.max(a,o)),n===`afterPrecision`&&s.type===`keyword`&&s.data===`precision`){let t=r(e,o);if(t===null)throw Error(`precision statement not followed by any semicolons!`);a=Math.max(a,t)}t<a&&i===0&&(t=o)}return t+1}let a={data:`
`,type:`whitespace`},o=t=>t<e.length&&/[^\r\n]$/.test(e[t].data),s=i(e);o(s-1)&&e.splice(s++,0,a);for(let n of t)e.splice(s++,0,n);o(s-1)&&o(s)&&e.splice(s,0,a)}function P(e,t,n,r=`lowp`){N(e,[{type:`keyword`,data:`out`},{type:`whitespace`,data:` `},{type:`keyword`,data:r},{type:`whitespace`,data:` `},{type:`keyword`,data:n},{type:`whitespace`,data:` `},{type:`ident`,data:t},{type:`operator`,data:`;`}],`afterPrecision`)}function F(e,t,n,r,i=`lowp`){N(e,[{type:`keyword`,data:`layout`},{type:`operator`,data:`(`},{type:`keyword`,data:`location`},{type:`whitespace`,data:` `},{type:`operator`,data:`=`},{type:`whitespace`,data:` `},{type:`integer`,data:r.toString()},{type:`operator`,data:`)`},{type:`whitespace`,data:` `},{type:`keyword`,data:`out`},{type:`whitespace`,data:` `},{type:`keyword`,data:i},{type:`whitespace`,data:` `},{type:`keyword`,data:n},{type:`whitespace`,data:` `},{type:`ident`,data:t},{type:`operator`,data:`;`}],`afterPrecision`)}function I(e,t){let n,r,i=-1;for(let a=t;a<e.length;a++){let t=e[a];if(t.type===`operator`&&(t.data===`[`&&(n=a),t.data===`]`)){r=a;break}t.type===`integer`&&(i=parseInt(t.data,10))}return n&&r&&e.splice(n,r-n+1),i}function L(e,t){if(e.startsWith(`#version 300`))return e;let n=z(e);if(n!=null)return n;let r=D(e);if(A(r,`100`,`300 es`)===`300 es`)return e;let i=null,o=null,s={},c={};for(let e=0;e<r.length;++e){let n=r[e];switch(n.type){case`keyword`:t===35633&&n.data===`attribute`?n.data=`in`:n.data===`varying`&&(n.data=t===35633?`out`:`in`);break;case`builtin`:if(/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(n.data.trim())&&(n.data=n.data.replaceAll(/(2D|Cube|EXT)/g,``)),t===35632&&n.data===`gl_FragColor`&&(i||(i=M(r,s,`fragColor`),P(r,i,`vec4`)),n.data=i),t===35632&&n.data===`gl_FragData`){let t=I(r,e+1),i=M(r,s,`fragData`);F(r,i,`vec4`,t,`mediump`),n.data=i}else t===35632&&n.data===`gl_FragDepthEXT`&&(o||=M(r,s,`gl_FragDepth`),n.data=o);break;case`ident`:if(a.includes(n.data)){if(t===35633&&j(r,e))throw Error(`attribute in vertex shader uses a name that is a reserved word in glsl 300 es`);n.data in c||(c[n.data]=M(r,s,n.data)),n.data=c[n.data]}}}for(let e=r.length-1;e>=0;--e){let t=r[e];if(t.type===`preprocessor`){let n=t.data.match(/#extension\s+(.*):/);if(n?.[1]&&k.has(n[1].trim())){let t=r[e+1];r.splice(e,t&&t.type===`whitespace`?2:1)}let i=t.data.match(/#ifdef\s+(.*)/);i?.[1]&&k.has(i[1].trim())&&(t.data=`#if 1`);let a=t.data.match(/#ifndef\s+(.*)/);a?.[1]&&k.has(a[1].trim())&&(t.data=`#if 0`)}}return B(e,O(r))}var R=new Map;function z(e){return o.enableCache?R.get(e):null}function B(e,t){return o.enableCache&&R.set(e,t),t}var V=4294967295,H=!!e(`esri-tests-disable-gpu-memory-measurements`),U=class{constructor(e,t,i,a,o=new Map,s=[]){this._context=e,this._refCount=1,this._compiled=!1,this._linesOfCode=0,this._nameToUniformLocation=new Map,this._nameToUniform1=new Map,this._nameToUniform1v=new Map,this._nameToUniform2=new Map,this._nameToUniform3=new Map,this._nameToUniform4=new Map,this._nameToUniformMatrix3=new Map,this._nameToUniformMatrix4=new Map,e||console.error(`RenderingContext isn't initialized!`),t.length===0&&console.error(`Shaders source should not be empty!`),t=L(t,35633),i=L(i,35632),this._vShader=W(this._context,35633,t),this._fShader=W(this._context,35632,i),J.enabled&&(this._linesOfCode=t.match(/\n/g).length+i.match(/\n/g).length+2,e.instanceCounter.increment(r.LinesOfCode,this._vShader,this._linesOfCode)),this._vShader&&this._fShader||console.error(`Error loading shaders!`),e.instanceCounter.increment(r.Shader,this),n()&&(this.vertexShader=t,this.fragmentShader=i),this.usedMemory=H?0:t.length+i.length;let c=this._context.gl,l=c.createProgram();c.attachShader(l,this._vShader),c.attachShader(l,this._fShader),a.forEach((e,t)=>c.bindAttribLocation(l,e,t)),this.hasTransformFeedbackVaryings=!!s?.length,this.hasTransformFeedbackVaryings&&c.transformFeedbackVaryings(l,s,c.SEPARATE_ATTRIBS),c.linkProgram(l),n()&&!c.getProgramParameter(l,c.LINK_STATUS)&&console.error(`Could not link shader\nvalidated: ${c.getProgramParameter(l,c.VALIDATE_STATUS)}, gl error ${c.getError()}, vertex: ${c.getShaderParameter(this._vShader,c.COMPILE_STATUS)}, fragment: ${c.getShaderParameter(this._fShader,c.COMPILE_STATUS)}, info log: ${c.getProgramInfoLog(l)}, vertex source: ${this.vertexShader}, fragment source: ${this.fragmentShader}`);for(let[e,t]of o){let n=c.getUniformBlockIndex(l,e);n<V&&c.uniformBlockBinding(l,n,t)}this._glName=l,e.instanceCounter.increment(r.Program,this)}get glName(){return this._glName}get hasGLName(){return this._glName!=null}get compiled(){return!!this._compiled||(this._context.capabilities.parallelShaderCompile&&this.glName!=null?(this._compiled=!!this._context.gl.getProgramParameter(this.glName,37297),this._compiled):(this._compiled=!0,!0))}dispose(){if(--this._refCount>0)return;let e=this._context.gl,t=this._context.instanceCounter;this._nameToUniformLocation.forEach(e=>e&&t.decrement(r.Uniform,e)),this._nameToUniformLocation.clear(),this._vShader&&(this._linesOfCode>0&&(t.decrement(r.LinesOfCode,this._vShader,this._linesOfCode),this._linesOfCode=0),e.deleteShader(this._vShader),this._vShader=null,t.decrement(r.Shader,this)),this._fShader&&=(e.deleteShader(this._fShader),null),this._glName&&(e.deleteProgram(this._glName),this._glName=null,t.decrement(r.Program,this))}ref(){++this._refCount}_getUniformLocation(e){let t=this._nameToUniformLocation.get(e);if(t!==void 0)return t;if(this.glName){let t=this._context.gl.getUniformLocation(this.glName,e);return this._nameToUniformLocation.set(e,t),t&&this._context.instanceCounter.increment(r.Uniform,t),t}return null}hasUniform(e){return this._getUniformLocation(e)!=null}setUniform1i(e,t,n){Y(n,t);let r=this._nameToUniform1.get(e);r!==void 0&&t===r||(this._context.gl.uniform1i(this._getUniformLocation(e),t),this._nameToUniform1.set(e,t))}setUniform1iv(e,t,n){X(n,t),q(this._nameToUniform1v,e,t)&&this._context.gl.uniform1iv(this._getUniformLocation(e),t)}setUniform2iv(e,t,n){X(n,t),q(this._nameToUniform2,e,t)&&this._context.gl.uniform2iv(this._getUniformLocation(e),t)}setUniform3iv(e,t,n){X(n,t),q(this._nameToUniform3,e,t)&&this._context.gl.uniform3iv(this._getUniformLocation(e),t)}setUniform4iv(e,t,n){X(n,t),q(this._nameToUniform4,e,t)&&this._context.gl.uniform4iv(this._getUniformLocation(e),t)}setUniform1f(e,t,n){Y(n,t);let r=this._nameToUniform1.get(e);r!==void 0&&t===r||(this._context.gl.uniform1f(this._getUniformLocation(e),t),this._nameToUniform1.set(e,t))}setUniform1fv(e,t,n){X(n,t),q(this._nameToUniform1v,e,t)&&this._context.gl.uniform1fv(this._getUniformLocation(e),t)}setUniform2f(e,t,n,r){Y(r,t,n);let i=this._nameToUniform2.get(e);i===void 0?(this._context.gl.uniform2f(this._getUniformLocation(e),t,n),this._nameToUniform2.set(e,[t,n])):t===i[0]&&n===i[1]||(this._context.gl.uniform2f(this._getUniformLocation(e),t,n),i[0]=t,i[1]=n)}setUniform2fv(e,t,n){X(n,t),q(this._nameToUniform2,e,t)&&this._context.gl.uniform2fv(this._getUniformLocation(e),t)}setUniform3f(e,t,n,r,i){Y(i,t,n,r);let a=this._nameToUniform3.get(e);a===void 0?(this._context.gl.uniform3f(this._getUniformLocation(e),t,n,r),this._nameToUniform3.set(e,[t,n,r])):t===a[0]&&n===a[1]&&r===a[2]||(this._context.gl.uniform3f(this._getUniformLocation(e),t,n,r),a[0]=t,a[1]=n,a[2]=r)}setUniform3fv(e,t,n){X(n,t);let r=this._getUniformLocation(e);r!=null&&q(this._nameToUniform3,e,t)&&this._context.gl.uniform3fv(r,t)}setUniform4f(e,t,n,r,i,a){Y(a,t,n,r,i);let o=this._nameToUniform4.get(e);o===void 0?(this._context.gl.uniform4f(this._getUniformLocation(e),t,n,r,i),this._nameToUniform4.set(e,[t,n,r,i])):o!==void 0&&t===o[0]&&n===o[1]&&r===o[2]&&i===o[3]||(this._context.gl.uniform4f(this._getUniformLocation(e),t,n,r,i),o[0]=t,o[1]=n,o[2]=r,o[3]=i)}setUniform4fv(e,t,n){X(n,t);let r=this._getUniformLocation(e);r!=null&&q(this._nameToUniform4,e,t)&&this._context.gl.uniform4fv(r,t)}setUniformMatrix3fv(e,t,n=!1,r){X(r,t);let i=this._getUniformLocation(e);i!=null&&q(this._nameToUniformMatrix3,e,t)&&this._context.gl.uniformMatrix3fv(i,n,t)}setUniformMatrix4fv(e,t,n=!1,r){X(r,t);let i=this._getUniformLocation(e);if(i!=null){let r=this._nameToUniformMatrix4,a=r.get(e),o=!1;if(a){let n=t.length;if(a.length!==n)r.set(e,Array.from(t)),o=!0;else for(let e=0;e<n;++e){let r=t[e];if(a[e]!==r){for(a[e]=r;e<n;++e)a[e]=t[e];o=!0;break}}}else r.set(e,Array.from(t)),o=!0;o&&this._context.gl.uniformMatrix4fv(i,n,t)}}setUniformMatrices4fv(e,t,n=!1,r){X(r,t);let i=this._getUniformLocation(e);i!=null&&q(this._nameToUniformMatrix4,e,t)&&this._context.gl.uniformMatrix4fv(i,n,t)}stop(){}};function W(e,t,r){let i=e.gl,a=i.createShader(t);return i.shaderSource(a,r),i.compileShader(a),n()&&!i.getShaderParameter(a,i.COMPILE_STATUS)&&(console.error(`Compile error in ${t===35633?`vertex`:`fragment`} shader`),console.error(i.getShaderInfoLog(a)),console.error(G(r))),a}function G(e){let t=2;return e.replaceAll(`
`,()=>`
`+K(t++)+`:`)}function K(e){return e>=1e3?e.toString():(`  `+e).slice(-3)}function q(e,t,n){let r=e.get(t);if(!r)return e.set(t,Array.from(n)),!0;let i=n.length;if(r.length!==i)return e.set(t,Array.from(n)),!0;for(let e=0;e<i;++e){let t=n[e];if(r[e]!==t){for(r[e]=t;e<i;++e)r[e]=n[e];return!0}}return!1}var J={enabled:!1},Y=t()?(e,...t)=>X(e,t):()=>{},X=t()?(e,t)=>{if(e?.supportsNaN)return;let n=t.length;for(let e=0;e<n;++e){let n=t[e];Number.isNaN(n)&&console.error(`Got ${n} as uniform value from ${Error().stack}`)}}:()=>{};function Z(e,t,n,r=``){return new U(e,r+t.vertexShader,r+t.fragmentShader,n)}export{U as n,i as r,Z as t};