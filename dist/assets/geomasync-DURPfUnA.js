const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/unitConversion-DaJ5NJNr.js","assets/unitConversion-BbIQHFw4.js","assets/index-BqmCqmfp.js","assets/index-kIqmb12G.css"])))=>i.map(i=>d[i]);
import{Ax as e,Bg as t,Cw as n,Jm as r,Mn as i,NT as a,Sw as o,Sx as s,Vg as c,Vn as l,Vx as u,e_ as d,hm as f,uD as p,vx as m}from"./index-BqmCqmfp.js";import{$ as h,C as g,D as _,J as v,K as y,O as b,W as x,Y as S,at as C,ct as w,g as T,k as E,o as D,s as O,t as k,tt as A,u as j,v as M}from"./Dictionary-B3Q9BFVY.js";import{a as N,c as P,i as F,n as I,o as L,r as R,s as z,t as B}from"./functions-WMuSJ2is.js";import{t as V}from"./ArcadePortal-B5V7N8wX.js";import{t as H}from"./portalUtils-DQ6_t55e.js";import{t as U}from"./operatorsWorkerConnection-Dtd10goJ.js";async function W(e,t,n){if(!a?.findCredential(e.restUrl))return null;if(e.loadStatus===`loaded`&&t===``&&e.user?.sourceJSON&&!1===n)return e.user.sourceJSON;let r={responseType:`json`,query:{f:`json`}};if(n&&(r.query.returnUserLicenseTypeExtensions=!0),t===``){let t=await o(e.restUrl+`/community/self`,r);if(t.data){let e=t.data;if(e?.username)return e}return null}let i=await o(e.restUrl+`/community/users/`+t,r);if(i.data){let e=i.data;return e.error?null:e}return null}function G(e){if(e==null)return e;switch(typeof e){case`string`:case`number`:return e;default:throw new l(null,`InvalidParameter`,null)}}function K(a){a.mode===`async`&&(a.functions.disjoint=function(e,t){return a.standardFunctionAsync(e,t,(n,r,i)=>(i=T(i),F(i,e,t),i[0]===null||i[1]===null||U(`disjoint`,[i[0].toJSON(),i[1].toJSON()])))},a.functions.intersects=function(e,t){return a.standardFunctionAsync(e,t,(n,r,i)=>(i=T(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`intersects`,[i[0].toJSON(),i[1].toJSON()])))},a.functions.touches=function(e,t){return a.standardFunctionAsync(e,t,(n,r,i)=>(i=T(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`touches`,[i[0].toJSON(),i[1].toJSON()])))},a.functions.crosses=function(e,t){return a.standardFunctionAsync(e,t,(n,r,i)=>(i=T(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`crosses`,[i[0].toJSON(),i[1].toJSON()])))},a.functions.within=function(e,t){return a.standardFunctionAsync(e,t,(n,r,i)=>(i=T(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`within`,[i[0].toJSON(),i[1].toJSON()])))},a.functions.contains=function(e,t){return a.standardFunctionAsync(e,t,(n,r,i)=>(i=T(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`contains`,[i[0].toJSON(),i[1].toJSON()])))},a.functions.overlaps=function(e,t){return a.standardFunctionAsync(e,t,(n,r,i)=>(i=T(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`overlaps`,[i[0].toJSON(),i[1].toJSON()])))},a.functions.equals=function(e,t){return a.standardFunctionAsync(e,t,(n,r,i)=>(S(i,2,2,e,t),i[0]===i[1]||(i[0]instanceof u&&i[1]instanceof u?U(`equals`,[i[0].toJSON(),i[1].toJSON()]):(v(i[0])&&v(i[1])||!!(y(i[0])&&y(i[1])||h(i[0])&&h(i[1])))&&i[0].equals(i[1]))))},a.functions.relate=function(e,t){return a.standardFunctionAsync(e,t,(n,r,i)=>{if(i=T(i),S(i,3,3,e,t),i[0]instanceof u&&i[1]instanceof u)return U(`relate`,[i[0].toJSON(),i[1].toJSON(),x(i[2])]);if(i[0]instanceof u&&i[1]===null||i[1]instanceof u&&i[0]===null||i[0]===null&&i[1]===null)return!1;throw new l(e,`InvalidParameter`,t)})},a.functions.intersection=function(e,t){return a.standardFunctionAsync(e,t,async(n,i,a)=>(a=T(a),F(a,e,t),a[0]===null||a[1]===null?null:r(await U(`intersection`,[a[0].toJSON(),a[1].toJSON()]))))},a.functions.union=function(e,t){return a.standardFunctionAsync(e,t,async(n,a,o)=>{if((o=T(o)).length===0)throw new l(e,`WrongNumberOfParameters`,t);let s=[];if(o.length===1)if(f(o[0])){for(let n of T(o[0]))if(n!==null){if(!(n instanceof u))throw new l(e,`InvalidParameter`,t);s.push(n.toJSON())}}else{if(!A(o[0])){if(o[0]instanceof u)return j(i(o[0]),e.spatialReference);if(o[0]===null)return null;throw new l(e,`InvalidParameter`,t)}for(let n of T(o[0].toArray()))if(n!==null){if(!(n instanceof u))throw new l(e,`InvalidParameter`,t);s.push(n.toJSON())}}else for(let n of o)if(n!==null){if(!(n instanceof u))throw new l(e,`InvalidParameter`,t);s.push(n.toJSON())}return s.length===0?null:r(await U(`union`,[s]))})},a.functions.difference=function(e,t){return a.standardFunctionAsync(e,t,async(n,a,o)=>(o=T(o),F(o,e,t),o[0]===null?null:o[1]===null?i(o[0]):r(await U(`difference`,[o[0].toJSON(),o[1].toJSON()]))))},a.functions.symmetricdifference=function(e,t){return a.standardFunctionAsync(e,t,async(n,a,o)=>(o=T(o),F(o,e,t),o[0]===null&&o[1]===null?null:o[0]===null?i(o[1]):o[1]===null?i(o[0]):r(await U(`symmetricDifference`,[o[0].toJSON(),o[1].toJSON()]))))},a.functions.clip=function(e,t){return a.standardFunctionAsync(e,t,async(n,i,a)=>{if(a=T(a),S(a,2,2,e,t),!(a[1]instanceof s)&&a[1]!==null)throw new l(e,`InvalidParameter`,t);if(a[0]===null)return null;if(!(a[0]instanceof u))throw new l(e,`InvalidParameter`,t);return a[1]===null?null:r(await U(`clip`,[a[0].toJSON(),a[1].toJSON()]))})},a.functions.cut=function(e,n){return a.standardFunctionAsync(e,n,async(a,o,s)=>{if(s=T(s),S(s,2,2,e,n),!(s[1]instanceof t)&&s[1]!==null)throw new l(e,`InvalidParameter`,n);if(s[0]===null)return[];if(!(s[0]instanceof u))throw new l(e,`InvalidParameter`,n);return s[1]===null?[i(s[0])]:(await U(`cut`,[s[0].toJSON(),s[1].toJSON()])).map(e=>r(e))})},a.functions.area=function(e,t){return a.standardFunctionAsync(e,t,async(n,r,i)=>{if(S(i,1,2,e,t),i=T(i),O(i[0])){let n=await i[0].sumArea(G(i[1]),null,e.abortSignal);if(e.abortSignal.aborted)throw new l(e,`Cancelled`,t);return n}let a=i[0];if((f(a)||A(a))&&(a=_(i[0],e.spatialReference)),a===null)return 0;if(!(a instanceof u))throw new l(e,`InvalidParameter`,t);return U(`area`,[a.toJSON(),G(i[1])])})},a.functions.areageodetic=function(e,t){return a.standardFunctionAsync(e,t,async(n,r,i)=>{S(i,1,3,e,t);let a=(i=T(i))[0];(f(a)||A(a))&&(a=_(a,e.spatialReference));let o=G(i[1]),s=B(i[2]);if(O(a)){let n=await a.sumArea(o,s,e.abortSignal);if(e.abortSignal.aborted)throw new l(e,`Cancelled`,t);return n}if(a==null)return 0;if(!E(a))throw new l(e,`InvalidParameter`,t);return U(`geodeticArea`,[a.toJSON(),o,s])})},a.functions.length=function(e,t){return a.standardFunctionAsync(e,t,async(n,r,i)=>{if(S(i,1,2,e,t),i=T(i),O(i[0])){let n=await i[0].sumLength(G(i[1]),null,e.abortSignal);if(e.abortSignal.aborted)throw new l(e,`Cancelled`,t);return n}let a=i[0];if((f(i[0])||A(i[0]))&&(a=C(i[0],e.spatialReference)),a===null)return 0;if(!(a instanceof u))throw new l(e,`InvalidParameter`,t);return U(`length`,[a.toJSON(),G(i[1])])})},a.functions.length3d=function(e,t){return a.standardFunctionAsync(e,t,async(r,i,a)=>{if(S(a,1,2,e,t),(a=T(a))[0]===null)return 0;let o=a[0];if((f(a[0])||A(a[0]))&&(o=C(a[0],e.spatialReference)),o===null)return 0;if(!(o instanceof u))throw new l(e,`InvalidParameter`,t);if(!0===o.hasZ){let{convertFromSpatialReferenceUnit:e,toLengthUnit:t}=await n(async()=>{let{convertFromSpatialReferenceUnit:e,toLengthUnit:t}=await import(`./unitConversion-DaJ5NJNr.js`);return{convertFromSpatialReferenceUnit:e,toLengthUnit:t}},__vite__mapDeps([0,1,2,3])),r=z(o);return e(o.spatialReference,t(a[1]),r)}return U(`length`,[o.toJSON(),G(a[1])])})},a.functions.lengthgeodetic=function(e,t){return a.standardFunctionAsync(e,t,async(n,r,i)=>{S(i,1,3,e,t);let a=(i=T(i))[0];(f(i[0])||A(i[0]))&&(a=C(i[0],e.spatialReference));let o=G(i[1]),s=B(i[2]);if(O(a)){let n=await a.sumLength(o,s,e.abortSignal);if(e.abortSignal.aborted)throw new l(e,`Cancelled`,t);return n}if(a===null)return 0;if(!E(a))throw new l(e,`InvalidParameter`,t);return U(`geodeticLength`,[a.toJSON(),o,s])})},a.functions.distance=function(e,t){return a.standardFunctionAsync(e,t,async(n,r,i)=>{i=T(i),S(i,2,3,e,t);let a=i[0];if((f(i[0])||A(i[0]))&&(a=g(i[0],e.spatialReference)),!(a instanceof u))throw new l(e,`InvalidParameter`,t);let o=i[1];if((f(i[1])||A(i[1]))&&(o=g(i[1],e.spatialReference)),!(o instanceof u))throw new l(e,`InvalidParameter`,t);return U(`distance`,[a.toJSON(),o.toJSON(),G(i[2])])})},a.functions.distancegeodetic=function(n,r){return a.standardFunctionAsync(n,r,async(i,a,o)=>{o=T(o),S(o,2,4,n,r);let s=o[0];if(!(s instanceof e))throw new l(n,`InvalidParameter`,r);let c=o[1];if(!(c instanceof e))throw new l(n,`InvalidParameter`,r);let u=new t({paths:[],spatialReference:s.spatialReference});return u.addPath([s,c]),U(`geodeticLength`,[u.toJSON(),G(o[2]),B(o[3])])})},a.functions.densify=function(e,t){return a.standardFunctionAsync(e,t,async(n,i,a)=>{if(a=T(a),S(a,2,3,e,t),a[0]===null)return null;if(!(a[0]instanceof u))throw new l(e,`InvalidParameter`,t);let o=b(a[1]);if(isNaN(o)||o<=0)throw new l(e,`InvalidParameter`,t);switch(a[0].type){case`polygon`:case`polyline`:case`extent`:return r(await U(`densify`,[a[0].toJSON(),o,G(a[2])]));default:return a[0]}})},a.functions.densifygeodetic=function(e,t){return a.standardFunctionAsync(e,t,async(n,i,a)=>{a=T(a),S(a,2,4,e,t);let o=a[0];if(o==null)return null;if(!E(o))throw new l(e,`InvalidParameter`,t);let s=b(a[1]);if(isNaN(s)||s<=0)throw new l(e,`InvalidParameter`,t);let c=G(a[2]),u=B(a[3]);switch(o.type){case`polygon`:case`polyline`:case`extent`:return r(await U(`geodeticDensify`,[o.toJSON(),s,c,u]));default:return o}})},a.functions.generalize=function(e,t){return a.standardFunctionAsync(e,t,async(n,i,a)=>{if(a=T(a),S(a,2,4,e,t),a[0]===null)return null;if(!(a[0]instanceof u))throw new l(e,`InvalidParameter`,t);let o=b(a[1]);if(isNaN(o))throw new l(e,`InvalidParameter`,t);let s=D(w(a[2],!0));return r(await U(`generalize`,[a[0].toJSON(),o,G(a[3]),{removeDegenerateParts:s}]))})},a.functions.buffer=function(e,t){return a.standardFunctionAsync(e,t,async(n,a,o)=>{if(o=T(o),S(o,2,3,e,t),o[0]===null)return null;if(!(o[0]instanceof u))throw new l(e,`InvalidParameter`,t);let s=b(o[1]);if(isNaN(s))throw new l(e,`InvalidParameter`,t);return s===0?i(o[0]):r(await U(`buffer`,[o[0].toJSON(),s,G(o[2])]))})},a.functions.buffergeodetic=function(e,t){return a.standardFunctionAsync(e,t,async(n,a,o)=>{o=T(o),S(o,2,4,e,t);let s=o[0];if(s==null)return null;if(!E(s))throw new l(e,`InvalidParameter`,t);let c=b(o[1]);if(isNaN(c))throw new l(e,`InvalidParameter`,t);if(c===0)return i(s);let u=G(o[2]),d=B(o[3]);return r(await U(`geodesicBuffer`,[s.toJSON(),c,u,d]))})},a.functions.offset=function(e,n){return a.standardFunctionAsync(e,n,async(i,a,o)=>{o=T(o),S(o,2,6,e,n);let s=o[0];if(s===null)return null;if(!(s instanceof d||s instanceof t))throw new l(e,`InvalidParameter`,n);let c=b(o[1]);if(isNaN(c))throw new l(e,`InvalidParameter`,n);let u=o[2],f=P(o[3]),p=b(w(o[4],10));if(isNaN(p))throw new l(e,`InvalidParameter`,n);let m=b(w(o[5],0));if(isNaN(m))throw new l(e,`InvalidParameter`,n);return r(await U(`offset`,[s.toJSON(),c,G(u),f,p,m]))})},a.functions.rotate=function(t,n){return a.standardFunctionAsync(t,n,async(i,a,o)=>{if(o=T(o),S(o,2,3,t,n),o[0]===null)return null;if(!(o[0]instanceof u))throw new l(t,`InvalidParameter`,n);let c=o[0]instanceof s?d.fromExtent(o[0]):o[0],f=b(o[1]);if(isNaN(f))throw new l(t,`InvalidParameter`,n);let p=w(o[2],null);if(p===null){let e=c.type===`point`?c:c.extent?.center;return r(await U(`rotate`,[c.toJSON(),f,e?.x,e?.y]))}if(p instanceof e)return r(await U(`rotate`,[c.toJSON(),f,p.x,p.y]));throw new l(t,`InvalidParameter`,n)})},a.functions.centroid=function(e,t){return a.standardFunctionAsync(e,t,async(n,i,a)=>{if(a=T(a),S(a,1,2,e,t),a[0]===null)return null;let o=R(a[1]),s=a[0];if((f(a[0])||A(a[0]))&&(s=o===`geometric`?g(a[0],e.spatialReference):_(a[0],e.spatialReference),s===null))return null;if(!(s instanceof u))throw new l(e,`InvalidParameter`,t);return r(o===`geometric`?await U(`centroid`,[s.toJSON()]):await U(`labelPoint`,[s.toJSON()]))})},a.functions.measuretocoordinate=function(e,t){return a.standardFunctionAsync(e,t,I)},a.functions.pointtocoordinate=function(e,t){return a.standardFunctionAsync(e,t,N)},a.functions.distancetocoordinate=function(e,t){return a.standardFunctionAsync(e,t,L)},a.functions.multiparttosinglepart=function(n,o){return a.standardFunctionAsync(n,o,async(a,f,p)=>{if(p=T(p),S(p,1,1,n,o),p[0]===null)return null;if(!(p[0]instanceof u))throw new l(n,`InvalidParameter`,o);if(p[0]instanceof e||p[0]instanceof s)return[j(i(p[0]),n.spatialReference)];let m=r(await U(`simplify`,[p[0].toJSON()]));if(m instanceof d){let e=[],t=[];for(let n=0;n<m.rings.length;n++)if(m.isClockwise(m.rings[n])){let t=r({rings:[m.rings[n]],hasZ:!0===m.hasZ,hasM:!0===m.hasM,spatialReference:m.spatialReference.toJSON()});e.push(t)}else t.push({ring:m.rings[n],pt:m.getPoint(n,0)});for(let n=0;n<t.length;n++)for(let r=0;r<e.length;r++)if(e[r].contains(t[n].pt)){e[r].addRing(t[n].ring);break}return e}if(m instanceof t){let e=[];for(let t=0;t<m.paths.length;t++){let n=r({paths:[m.paths[t]],hasZ:!0===m.hasZ,hasM:!0===m.hasM,spatialReference:m.spatialReference.toJSON()});e.push(n)}return e}if(p[0]instanceof c){let e=[],t=j(i(p[0]),n.spatialReference);for(let n=0;n<t.points.length;n++)e.push(t.getPoint(n));return e}return null})},a.functions.isselfintersecting=function(e,n){return a.standardFunctionAsync(e,n,async(e,n,r)=>{S(r,1,1,e,n);let i=(r=T(r))[0];if((f(r[0])||A(r[0]))&&(i=C(r[0],e.spatialReference)),i instanceof c){let e=i.points;for(let t=0;t<e.length;t++)for(let n=t+1;n<e.length;n++)if(p(e[t],e[n]))return!0;return!1}return(i instanceof t||i instanceof d)&&await U(`isSelfIntersecting`,[i.toJSON()])})},a.functions.issimple=function(e,t){return a.standardFunctionAsync(e,t,(n,r,i)=>{if(i=T(i),S(i,1,1,e,t),i[0]===null)return!0;if(!(i[0]instanceof u))throw new l(e,`InvalidParameter`,t);return U(`isSimple`,[i[0].toJSON()])})},a.functions.simplify=function(e,t){return a.standardFunctionAsync(e,t,async(n,i,a)=>{if(a=T(a),S(a,1,1,e,t),a[0]===null)return null;if(!(a[0]instanceof u))throw new l(e,`InvalidParameter`,t);return r(await U(`simplify`,[a[0].toJSON()]))})},a.functions.convexhull=function(e,t){return a.standardFunctionAsync(e,t,async(n,i,a)=>{if(a=T(a),S(a,1,1,e,t),a[0]===null)return null;if(!(a[0]instanceof u))throw new l(e,`InvalidParameter`,t);return r(await U(`convexHull`,[a[0].toJSON()]))})},a.functions.getuser=function(e,t){return a.standardFunctionAsync(e,t,async(n,r,i)=>{S(i,0,2,e,t);let a=w(i[1],``),o=!0===a;if(a=!0===a||!1===a?``:x(a),i.length===0||i[0]instanceof V){let t;t=e.services?.portal?e.services.portal:m.getDefault(),i.length>0&&(t=H(i[0],t));let n=await W(t,a,o);if(n){let t=JSON.parse(JSON.stringify(n));for(let e of[`lastLogin`,`created`,`modified`])t[e]!==void 0&&t[e]!==null&&(t[e]=new Date(t[e]));return k.convertObjectToArcadeDictionary(t,M(e))}return null}let s=null;if(O(i[0])&&(s=i[0]),s){if(o=!1,a)return null;await s.load();let t=await s.getOwningSystemUrl();if(!t){if(!a){let t=await s.getIdentityUser();return t?k.convertObjectToArcadeDictionary({username:t},M(e)):null}return null}let n;n=e.services?.portal?e.services.portal:m.getDefault(),n=H(new V(t),n);let r=await W(n,a,o);if(r){let t=JSON.parse(JSON.stringify(r));for(let e of[`lastLogin`,`created`,`modified`])t[e]!==void 0&&t[e]!==null&&(t[e]=new Date(t[e]));return k.convertObjectToArcadeDictionary(t,M(e))}return null}throw new l(e,`InvalidParameter`,t)})},a.functions.nearestcoordinate=function(t,n){return a.standardFunctionAsync(t,n,async(i,a,o)=>{if(o=T(o),S(o,2,2,t,n),!(o[0]instanceof u||o[0]===null)||!(o[1]instanceof e||o[1]===null))throw new l(t,`InvalidParameter`,n);if(o[0]===null||o[1]===null)return null;let c=o[0]instanceof s?d.fromExtent(o[0]):o[0],f=await U(`getNearestCoordinate`,[c.toJSON(),o[1].toJSON(),{calculateLeftRightSide:!0}]);return f===null?null:k.convertObjectToArcadeDictionary({coordinate:r(f.coordinate),distance:f.distance,sideOfLine:f.distance===0?`straddle`:f.isRightSide?`right`:`left`},M(t),!1,!0)})},a.functions.nearestvertex=function(t,n){return a.standardFunctionAsync(t,n,async(i,a,o)=>{if(o=T(o),S(o,2,2,t,n),!(o[0]instanceof u||o[0]===null)||!(o[1]instanceof e||o[1]===null))throw new l(t,`InvalidParameter`,n);if(o[0]===null||o[1]===null)return null;let c=o[0]instanceof s?d.fromExtent(o[0]):o[0],f=await U(`getNearestVertex`,[c.toJSON(),o[1].toJSON()]);return f===null?null:k.convertObjectToArcadeDictionary({coordinate:r(f.coordinate),distance:f.distance,sideOfLine:f.distance===0?`straddle`:f.isRightSide?`right`:`left`},M(t),!1,!0)})})}export{K as t};