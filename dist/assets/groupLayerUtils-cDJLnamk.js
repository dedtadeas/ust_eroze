import{Qa as e,Xa as t,eo as n,ro as r,to as i}from"./index-BqmCqmfp.js";import"./originUtils-Xpg5-Q2D.js";import"./resourceUtils-CEABprin.js";import{n as a}from"./resourceUtils-Dtqy_ILo.js";import"./saveUtils-DsVVlvmj.js";import{n as o,t as s}from"./utils-yJnMCzaE.js";var c=`Group Layer`,l=`group-layer-save`,u=`group-layer-save-as`,d=e.GROUP_LAYER_MAP;function f(e){return{isValid:e.type===`group`,errorMessage:`Layer.type should be 'group'`}}function p(e){return{isValid:r(e,d),errorMessage:`Layer.portalItem.typeKeywords should have '${d}'`}}function m(e,n){return{...t(e,`web-map`,!0),initiator:n}}function h(e){let t=e.layerJSON;return Promise.resolve(t&&Object.keys(t).length?t:null)}async function g(t,r){r.title||=t.title,n(r,e.METADATA),i(r,d)}async function _(e,t){return o({layer:e,itemType:c,validateLayer:f,validateItem:p,createJSONContext:t=>m(t,e),createItemData:h,errorNamePrefix:l,saveResources:async(t,n)=>(e.sourceIsPortalItem||await t.removeAllResources().catch(()=>{}),a(e.resourceReferences,n))},t)}async function v(e,t,n){return s({layer:e,itemType:c,validateLayer:f,createJSONContext:t=>m(t,e),createItemData:h,errorNamePrefix:u,newItem:t,setItemProperties:g,saveResources:(t,n)=>a(e.resourceReferences,n)},n)}export{_ as save,v as saveAs};