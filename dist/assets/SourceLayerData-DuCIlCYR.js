import{r as e}from"./constants-gtdOjz1K.js";import{_ as t}from"./GeometryUtils-DBkUrkz1.js";var n=class{constructor(e,t,n=0){this.values={},this._geometry=void 0,this._pbfGeometry=null,this.featureIndex=n;let r=t.keys,i=t.values,a=e.asUnsafe();for(;a.next();)switch(a.tag()){case 1:this.id=a.getUInt64();break;case 2:{let e=a.getMessage().asUnsafe(),t=this.values;for(;!e.empty();){let n=e.getUInt32(),a=e.getUInt32();t[r[n]]=i[a]}e.release();break}case 3:this.type=a.getUInt32();break;case 4:this._pbfGeometry=a.getMessage();break;default:a.skip()}}getGeometry(e){if(this._geometry!==void 0)return this._geometry;if(!this._pbfGeometry)return null;let n=this._pbfGeometry.asUnsafe(),r,i;this._pbfGeometry=null,e?e.reset(this.type):r=[];let a,o=1,s=0,c=0,l=0;for(;!n.empty();){if(s===0){let e=n.getUInt32();o=7&e,s=e>>3}switch(s--,o){case 1:c+=n.getSInt32(),l+=n.getSInt32(),e?e.moveTo(c,l):r&&(i&&r.push(i),i=[],i.push(new t(c,l)));break;case 2:c+=n.getSInt32(),l+=n.getSInt32(),e?e.lineTo(c,l):i&&i.push(new t(c,l));break;case 7:e?e.close():i&&!i[0].equals(c,l)&&i.push(i[0].clone());break;default:throw n.release(),Error(`Invalid path operation`)}}return e?a=e.result():r&&(i&&r.push(i),a=r),n.release(),this._geometry=a,a}},r=class t{constructor(n){this.extent=e,this.keys=[],this.values=[],this._pbfLayer=n.clone();let r=n.asUnsafe();for(;r.next();)switch(r.tag()){case 1:this.name=r.getString();break;case 3:this.keys.push(r.getString());break;case 4:this.values.push(r.processMessage(t._parseValue));break;case 5:this.extent=r.getUInt32();break;default:r.skip()}}getData(){return this._pbfLayer}static _parseValue(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getInt64();case 5:return e.getUInt64();case 6:return e.getSInt64();case 7:return e.getBool();default:e.skip()}return null}};export{n,r as t};