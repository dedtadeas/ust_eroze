import{wD as e,xD as t}from"./index-BqmCqmfp.js";import"./SimpleGeometryCursor-CI9GIWKa.js";import{Ut as n,cn as r,dn as i,in as a,mn as o}from"./Point2D-UYEfE6HP.js";import"./Envelope2D-BNwQDrOT.js";import{Bt as s,Ct as c,F as l,J as u,Wt as d,a as f,n as p,o as m,qt as h,u as g}from"./UnitFactory-J9WMNXdY.js";import"./Transformation2D-DVoPQwGC.js";import"./OperatorDefinitions-DQQu7-BK.js";import{t as _}from"./OperatorShapePreservingLength-BqyB7-AW.js";var v=class{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}execute(e,t,f,m){if(f===4)return new _().execute(e,t,m);if(t.getCoordinateSystemType()===0&&a(``),o(e),e.isEmpty()||e.getDimension()<1)return 0;let v=t.getGCS(),y=g();v.querySpheroidData(y);let b=y.majorSemiAxis,x=y.e2,S=v.getUnit().getUnitToBaseFactor(),C,w=e.getGeometryType();if(w===r.enumPolygon?C=e.getBoundary():w===r.enumEnvelope?C=d(e):i(w)?(C=new h({vd:e.getDescription()}),C.addSegment(e,!0)):C=e,C.hasNonLinearSegments()&&(C=new s().execute(C,0,t.getTolerance(0),0,m)),v!==t){let i=t.getSRToGCSTransform();if(t.isPannable()){C=p(C,t),w===r.enumPolyline&&C===e&&(C=e.clone());let i=new n;t.getPannableExtent().queryIntervalX(i);for(let e=0,t=C.getPointCount();e<t;e++){let t=C.getXY(e);t.x=l(t.x,i),C.setXY(e,t)}}let a=C.createInstance();C=u(i,C,a,m)?a:new c().execute(C,i,m)}return this._ExecuteMultiPathGeodeticLength(C,f,b,x,S)}_ExecuteMultiPathGeodeticLength(n,r,i,a,o){let s={stack:[],error:void 0,hasError:!1};try{let e=t(s,new f,!1),c=0,l=n.querySegmentIterator();for(;l.nextPath();)for(;l.hasNextSegment();){let t=l.nextSegment(),n=t.getStartXY(),s=t.getEndXY();n.scale(o),s.scale(o),m.geodeticDistance(i,a,n.x,n.y,s.x,s.y,e,null,null,r),c+=e.val}return c}catch(e){s.error=e,s.hasError=!0}finally{e(s)}}};export{v as OperatorGeodeticLength};