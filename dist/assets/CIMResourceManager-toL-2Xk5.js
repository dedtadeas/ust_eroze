import{ws as e}from"./index-BqmCqmfp.js";import{t}from"./fontUtils-CWolFklQ.js";var n=class{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(t,n){let r=this._resourceMap.get(t);if(r)return{width:r.width,height:r.height};let i=this._inFlightResourceMap.get(t);return i?i.then(e=>({width:e.width,height:e.height})):(i=e(t,n),this._inFlightResourceMap.set(t,i),i.then(e=>(this._inFlightResourceMap.delete(t),this._resourceMap.set(t,e),{width:e.width,height:e.height}),()=>({width:0,height:0})))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(e){return t(e)}};export{n as t};