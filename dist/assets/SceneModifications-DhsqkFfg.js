import{AE as e,Ay as t,CD as n,MC as r,SC as i,Sw as a,Tg as o,WT as s,_C as c,e_ as l,jC as u,kC as d,oC as f,pg as p,vC as m}from"./index-BqmCqmfp.js";var h,g=h=class extends m{constructor(e){super(e),this.geometry=null,this.type=`clip`}writeGeometry(e,t,n,r){if(r.layer?.spatialReference&&!r.layer.spatialReference.equals(this.geometry.spatialReference)){if(!p(e.spatialReference,r.layer.spatialReference))return void(r?.messages&&r.messages.push(new u(`scenemodification:unsupported`,`Scene modifications with incompatible spatial references are not supported`,{modification:this,spatialReference:r.layer.spatialReference,context:r})));let i=new l;o(e,i,r.layer.spatialReference),t[n]=i.toJSON(r)}else t[n]=e.toJSON(r)}clone(){return new h({geometry:e(this.geometry),type:this.type})}};n([r({type:l}),t()],g.prototype,`geometry`,void 0),n([f([`web-scene`,`portal-item`],`geometry`)],g.prototype,`writeGeometry`,null),n([r({type:[`clip`,`mask`,`replace`],nonNullable:!0}),t()],g.prototype,`type`,void 0),g=h=n([d(`esri.layers.support.SceneModification`)],g);var _,v=_=class extends c(i.ofType(g)){constructor(e){super(e),this.url=null}clone(){return new _({url:this.url,items:this.items.map(e=>e.clone())})}toJSON(e){return this.toArray().map(t=>t.toJSON(e)).filter(e=>!!e.geometry)}static fromJSON(e,t){let n=new _;for(let r of e)n.add(g.fromJSON(r,t));return n}static async fromUrl(e,t,n){let r={url:s(e),origin:`service`},i=await a(e,{responseType:`json`,signal:n?.signal}),o=t.toJSON(),c=[];for(let e of i.data)c.push(g.fromJSON({...e,geometry:{spatialReference:o,...e.geometry}},r));return new _({url:e,items:c})}};n([r({type:String})],v.prototype,`url`,void 0),v=_=n([d(`esri.layers.support.SceneModifications`)],v);export{v as t};