import{qn as e}from"./index-BqmCqmfp.js";import{t}from"./WhereClause-h6PJ6gjs.js";var n=class{constructor(t,n){this._cache=new e(t),this._invalidCache=new e(n)}get(e,n){let r=`${n?.uid}:${e}`,i=this._cache.get(r);if(i)return i;if(this._invalidCache.get(r)!=null)return null;try{let i=t.create(e,{fieldsIndex:n});return this._cache.put(r,i),i}catch(e){return this._invalidCache.put(r,e),null}}getError(e,t){let n=`${t?.uid}:${e}`;return this._invalidCache.get(n)??null}};export{n as t};