import{SD as e}from"./index-BqmCqmfp.js";import{$t as t,A as n,E as r,F as i,M as a,O as o,Qt as s,Wt as c,Yt as l,Zt as u,d,f,ft as p,i as m,jt as h,k as g,lt as _,m as v,n as y,r as b,t as x,w as S}from"./Theme-Dpr4FPaR.js";import{n as C}from"./DefaultTheme-CKCDheUT.js";import{a as w,i as T,n as E,r as D,t as O}from"./Tick-3KKt_E4N.js";import{t as k}from"./ColorSet-BiQ4UCjk.js";var A=class extends b{constructor(){super(...arguments),Object.defineProperty(this,`_display`,{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeRadialText(``,this.textStyle)})}_afterNew(){super._afterNew()}_beforeChanged(){super._beforeChanged(),this._display.clear(),this.isDirty(`textType`)&&(this._display.textType=this.get(`textType`),this.markDirtyBounds()),this.isDirty(`radius`)&&(this._display.radius=this.get(`radius`),this.markDirtyBounds()),this.isDirty(`startAngle`)&&(this._display.startAngle=(this.get(`startAngle`,0)+90)*S,this.markDirtyBounds()),this.isDirty(`inside`)&&(this._display.inside=this.get(`inside`),this.markDirtyBounds()),this.isDirty(`orientation`)&&(this._display.orientation=this.get(`orientation`),this.markDirtyBounds()),this.isDirty(`kerning`)&&(this._display.kerning=this.get(`kerning`),this.markDirtyBounds())}};Object.defineProperty(A,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`RadialText`}),Object.defineProperty(A,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([A.className])});var j=class extends y{constructor(){super(...arguments),Object.defineProperty(this,`_flipped`,{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._textKeys.push(`textType`,`kerning`),super._afterNew()}_makeText(){this._text=this.children.push(A.new(this._root,{}))}baseRadius(){let e=this.getPrivate(`radius`,0),t=this.getPrivate(`innerRadius`,0),n=this.get(`baseRadius`,0);return t+p(n,e-t)}radius(){let e=this.get(`inside`,!1);return this.baseRadius()+this.get(`radius`,0)*(e?-1:1)}_updateChildren(){if(super._updateChildren(),this.isDirty(`baseRadius`)||this.isPrivateDirty(`radius`)||this.isPrivateDirty(`innerRadius`)||this.isDirty(`labelAngle`)||this.isDirty(`radius`)||this.isDirty(`inside`)||this.isDirty(`orientation`)||this.isDirty(`textType`)){let e=this.get(`textType`,`adjusted`),t=this.get(`inside`,!1),i=this.get(`orientation`),o=n(this.get(`labelAngle`,0));this._text.set(`startAngle`,this.get(`labelAngle`,0)),this._text.set(`inside`,t);let c=a(o),l=r(o),u=this.baseRadius(),d=this.radius();if(this._display.angle=0,e==`circular`)this.setAll({paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}),this.setRaw(`x`,void 0),this.setRaw(`y`,void 0),this._text.set(`orientation`,i),this._text.set(`radius`,d);else{u==0&&(o=0,d=0);let t=d*l,n=d*c;e==`radial`?(this.setRaw(`x`,t),this.setRaw(`y`,n),o<90||o>270||i!=`auto`?(this._display.angle=o,this._flipped=!1):(this._display.angle=o+180,this._flipped=!0),this._dirty.rotation=!1):e==`adjusted`?(this.setRaw(`centerX`,s),this.setRaw(`centerY`,s),this.setRaw(`x`,t),this.setRaw(`y`,n)):e==`regular`&&(this.setRaw(`x`,t),this.setRaw(`y`,n))}this.markDirtyPosition(),this.markDirtyBounds()}}_updatePosition(){let e=this.get(`textType`,`regular`),t=this.get(`inside`,!1),n=0,i=0,o=this.get(`labelAngle`,0),s=this.localBounds(),c=s.right-s.left,u=s.bottom-s.top;if(e==`radial`){if(this._flipped){let e=this.get(`centerX`);e instanceof l&&(c*=1-e.value*2),n=c*r(o),i=c*a(o)}}else !t&&e==`adjusted`&&(n=c/2*r(o),i=u/2*a(o));this.setRaw(`dx`,n),this.setRaw(`dy`,i),super._updatePosition()}get text(){return this._text}};Object.defineProperty(j,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`RadialLabel`}),Object.defineProperty(j,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:y.classNames.concat([j.className])});const M=Math.abs,N=Math.atan2,P=Math.cos,F=Math.max,I=Math.min,L=Math.sin,R=Math.sqrt,z=Math.PI,B=z/2,ee=2*z;function te(e){return e>1?0:e<-1?z:Math.acos(e)}function ne(e){return e>=1?B:e<=-1?-B:Math.asin(e)}function V(e){return e.innerRadius}function H(e){return e.outerRadius}function U(e){return e.startAngle}function W(e){return e.endAngle}function G(e){return e&&e.padAngle}function re(e,t,n,r,i,a,o,s){var c=n-e,l=r-t,u=o-i,d=s-a,f=d*c-u*l;if(!(f*f<1e-12))return f=(u*(t-a)-d*(e-i))/f,[e+f*c,t+f*l]}function K(e,t,n,r,i,a,o){var s=e-n,c=t-r,l=(o?a:-a)/R(s*s+c*c),u=l*c,d=-l*s,f=e+u,p=t+d,m=n+u,h=r+d,g=(f+m)/2,_=(p+h)/2,v=m-f,y=h-p,b=v*v+y*y,x=i-a,S=f*h-m*p,C=(y<0?-1:1)*R(F(0,x*x*b-S*S)),w=(S*y-v*C)/b,T=(-S*v-y*C)/b,E=(S*y+v*C)/b,D=(-S*v+y*C)/b,O=w-g,k=T-_,A=E-g,j=D-_;return O*O+k*k>A*A+j*j&&(w=E,T=D),{cx:w,cy:T,x01:-u,y01:-d,x11:w*(i/x-1),y11:T*(i/x-1)}}function q(){var e=V,t=H,n=T(0),r=null,i=U,a=W,o=G,s=null,c=D(l);function l(){var l,u,d=+e.apply(this,arguments),f=+t.apply(this,arguments),p=i.apply(this,arguments)-B,m=a.apply(this,arguments)-B,h=M(m-p),g=m>p;if(s||=l=c(),f<d&&(u=f,f=d,d=u),!(f>1e-12))s.moveTo(0,0);else if(h>ee-1e-12)s.moveTo(f*P(p),f*L(p)),s.arc(0,0,f,p,m,!g),d>1e-12&&(s.moveTo(d*P(m),d*L(m)),s.arc(0,0,d,m,p,g));else{var _=p,v=m,y=p,b=m,x=h,S=h,C=o.apply(this,arguments)/2,w=C>1e-12&&(r?+r.apply(this,arguments):R(d*d+f*f)),T=I(M(f-d)/2,+n.apply(this,arguments)),E=T,D=T,O,k;if(w>1e-12){var A=ne(w/d*L(C)),j=ne(w/f*L(C));(x-=A*2)>1e-12?(A*=g?1:-1,y+=A,b-=A):(x=0,y=b=(p+m)/2),(S-=j*2)>1e-12?(j*=g?1:-1,_+=j,v-=j):(S=0,_=v=(p+m)/2)}var F=f*P(_),V=f*L(_),H=d*P(b),U=d*L(b);if(T>1e-12){var W=f*P(v),G=f*L(v),q=d*P(y),J=d*L(y),Y;if(h<z)if(Y=re(F,V,q,J,W,G,H,U)){var X=F-Y[0],Z=V-Y[1],Q=W-Y[0],$=G-Y[1],ie=1/L(te((X*Q+Z*$)/(R(X*X+Z*Z)*R(Q*Q+$*$)))/2),ae=R(Y[0]*Y[0]+Y[1]*Y[1]);E=I(T,(d-ae)/(ie-1)),D=I(T,(f-ae)/(ie+1))}else E=D=0}S>1e-12?D>1e-12?(O=K(q,J,F,V,f,D,g),k=K(W,G,H,U,f,D,g),s.moveTo(O.cx+O.x01,O.cy+O.y01),D<T?s.arc(O.cx,O.cy,D,N(O.y01,O.x01),N(k.y01,k.x01),!g):(s.arc(O.cx,O.cy,D,N(O.y01,O.x01),N(O.y11,O.x11),!g),s.arc(0,0,f,N(O.cy+O.y11,O.cx+O.x11),N(k.cy+k.y11,k.cx+k.x11),!g),s.arc(k.cx,k.cy,D,N(k.y11,k.x11),N(k.y01,k.x01),!g))):(s.moveTo(F,V),s.arc(0,0,f,_,v,!g)):s.moveTo(F,V),!(d>1e-12)||!(x>1e-12)?s.lineTo(H,U):E>1e-12?(O=K(H,U,W,G,d,-E,g),k=K(F,V,q,J,d,-E,g),s.lineTo(O.cx+O.x01,O.cy+O.y01),E<T?s.arc(O.cx,O.cy,E,N(O.y01,O.x01),N(k.y01,k.x01),!g):(s.arc(O.cx,O.cy,E,N(O.y01,O.x01),N(O.y11,O.x11),!g),s.arc(0,0,d,N(O.cy+O.y11,O.cx+O.x11),N(k.cy+k.y11,k.cx+k.x11),g),s.arc(k.cx,k.cy,E,N(k.y11,k.x11),N(k.y01,k.x01),!g))):s.arc(0,0,d,b,y,g)}if(s.closePath(),l)return s=null,l+``||null}return l.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-z/2;return[P(r)*n,L(r)*n]},l.innerRadius=function(t){return arguments.length?(e=typeof t==`function`?t:T(+t),l):e},l.outerRadius=function(e){return arguments.length?(t=typeof e==`function`?e:T(+e),l):t},l.cornerRadius=function(e){return arguments.length?(n=typeof e==`function`?e:T(+e),l):n},l.padRadius=function(e){return arguments.length?(r=e==null?null:typeof e==`function`?e:T(+e),l):r},l.startAngle=function(e){return arguments.length?(i=typeof e==`function`?e:T(+e),l):i},l.endAngle=function(e){return arguments.length?(a=typeof e==`function`?e:T(+e),l):a},l.padAngle=function(e){return arguments.length?(o=typeof e==`function`?e:T(+e),l):o},l.context=function(e){return arguments.length?(s=e??null,l):s},l}var J=class extends d{constructor(){super(...arguments),Object.defineProperty(this,`ix`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`iy`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`_generator`,{enumerable:!0,configurable:!0,writable:!0,value:q()})}_getTooltipPoint(){let e=this.get(`tooltipX`),t=this.get(`tooltipY`),n=0,r=0;c(e)&&(n=e),c(t)&&(r=t);let i=this.get(`radius`,0),a=this.get(`innerRadius`,0),o=this.get(`dRadius`,0),s=this.get(`dInnerRadius`,0);return i+=o,a+=s,a<0&&(a=i+a),e instanceof l&&(n=this.ix*(a+(i-a)*e.value)),t instanceof l&&(r=this.iy*(a+(i-a)*t.value)),this.get(`arc`)>=360&&a==0&&(n=0,r=0),{x:n,y:r}}_beforeChanged(){super._beforeChanged(),(this.isDirty(`radius`)||this.isDirty(`arc`)||this.isDirty(`innerRadius`)||this.isDirty(`startAngle`)||this.isDirty(`dRadius`)||this.isDirty(`dInnerRadius`)||this.isDirty(`cornerRadius`)||this.isDirty(`shiftRadius`))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){let e=this.get(`startAngle`,0),t=this.get(`arc`,0),n=this._generator;t<0&&(e+=t,t*=-1),t>.1&&n.cornerRadius(this.get(`cornerRadius`,0)),n.context(this._display);let i=this.get(`radius`,0),o=this.get(`innerRadius`,0),s=this.get(`dRadius`,0),c=this.get(`dInnerRadius`,0);i+=s,o+=c,o<0&&(o=i+o),n({innerRadius:o,outerRadius:i,startAngle:(e+90)*S,endAngle:(e+t+90)*S});let l=e+t/2;this.ix=r(l),this.iy=a(l);let u=this.get(`shiftRadius`,0);this.setRaw(`dx`,this.ix*u),this.setRaw(`dy`,this.iy*u),this.markDirtyPosition()}}};Object.defineProperty(J,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`Slice`}),Object.defineProperty(J,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:d.classNames.concat([J.className])});var Y=class extends x{setupDefaultRules(){super.setupDefaultRules();let e=this._root.interfaceColors,n=this.rule.bind(this);n(`PercentSeries`).setAll({legendLabelText:`{category}`,legendValueText:`{valuePercentTotal.formatNumber('0.00p')}`,colors:k.new(this._root,{}),width:u,height:u}),n(`PieChart`).setAll({radius:t(80),startAngle:-90,endAngle:270}),n(`PieSeries`).setAll({alignLabels:!0,startAngle:-90,endAngle:270}),n(`PieSeries`).states.create(`hidden`,{endAngle:-90,opacity:0}),n(`Slice`,[`pie`]).setAll({position:`absolute`,isMeasured:!1,x:0,y:0,toggleKey:`active`,tooltipText:`{category}: {valuePercentTotal.formatNumber('0.00p')}`,strokeWidth:1,strokeOpacity:1,role:`figure`,lineJoin:`round`}),n(`Slice`,[`pie`]).states.create(`active`,{shiftRadius:20,scale:1}),n(`Slice`,[`pie`]).states.create(`hoverActive`,{scale:1.04}),n(`Slice`,[`pie`]).states.create(`hover`,{scale:1.04}),n(`RadialLabel`,[`pie`]).setAll({textType:`aligned`,radius:10,text:`{category}: {valuePercentTotal.formatNumber('0.00p')}`,paddingTop:5,paddingBottom:5,populateText:!0}),n(`Tick`,[`pie`]).setAll({location:1}),n(`SlicedChart`).setAll({paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10}),n(`FunnelSeries`).setAll({startLocation:0,endLocation:1,orientation:`vertical`,alignLabels:!0,sequencedInterpolation:!0}),n(`FunnelSlice`).setAll({interactive:!0,expandDistance:0}),n(`FunnelSlice`).states.create(`hover`,{expandDistance:.15}),n(`Label`,[`funnel`]).setAll({populateText:!0,text:`{category}: {valuePercentTotal.formatNumber('0.00p')}`,centerY:s}),n(`Label`,[`funnel`,`horizontal`]).setAll({centerX:0,centerY:s,rotation:-90}),n(`Label`,[`funnel`,`vertical`]).setAll({centerY:s,centerX:0}),n(`Tick`,[`funnel`]).setAll({location:1}),n(`FunnelSlice`,[`funnel`,`link`]).setAll({fillOpacity:.5,strokeOpacity:0,expandDistance:-.1}),n(`FunnelSlice`,[`funnel`,`link`,`vertical`]).setAll({height:10}),n(`FunnelSlice`,[`funnel`,`link`,`horizontal`]).setAll({width:10}),n(`PyramidSeries`).setAll({valueIs:`area`}),n(`FunnelSlice`,[`pyramid`,`link`]).setAll({fillOpacity:.5}),n(`FunnelSlice`,[`pyramid`,`link`,`vertical`]).setAll({height:0}),n(`FunnelSlice`,[`pyramid`,`link`,`horizontal`]).setAll({width:0}),n(`FunnelSlice`,[`pyramid`]).setAll({interactive:!0,expandDistance:0}),n(`FunnelSlice`,[`pyramid`]).states.create(`hover`,{expandDistance:.15}),n(`Label`,[`pyramid`]).setAll({populateText:!0,text:`{category}: {valuePercentTotal.formatNumber('0.00p')}`,centerY:s}),n(`Label`,[`pyramid`,`horizontal`]).setAll({centerX:0,centerY:s,rotation:-90}),n(`Label`,[`pyramid`,`vertical`]).setAll({centerY:s,centerX:0}),n(`Tick`,[`pyramid`]).setAll({location:1}),n(`FunnelSlice`,[`pictorial`]).setAll({interactive:!0,tooltipText:`{category}: {valuePercentTotal.formatNumber('0.00p')}`}),n(`Label`,[`pictorial`]).setAll({populateText:!0,text:`{category}: {valuePercentTotal.formatNumber('0.00p')}`,centerY:s}),n(`Label`,[`pictorial`,`horizontal`]).setAll({centerX:0,centerY:s,rotation:-90}),n(`Label`,[`pictorial`,`vertical`]).setAll({centerY:s,centerX:0}),n(`FunnelSlice`,[`pictorial`,`link`]).setAll({fillOpacity:.5,width:0,height:0}),n(`Tick`,[`pictorial`]).setAll({location:.5});{let t=n(`Graphics`,[`pictorial`,`background`]);t.setAll({fillOpacity:.2}),C(t,`fill`,e,`alternativeBackground`)}}},X=class extends E{_afterNew(){this._defaultThemes.push(Y.new(this._root)),super._afterNew(),this.chartContainer.children.push(this.seriesContainer),this.seriesContainer.children.push(this.bulletsContainer)}_processSeries(e){super._processSeries(e),this.seriesContainer.children.moveValue(this.bulletsContainer,this.seriesContainer.children.length-1)}};Object.defineProperty(X,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`PercentChart`}),Object.defineProperty(X,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:E.classNames.concat([X.className])});var Z=class extends w{constructor(){super(...arguments),Object.defineProperty(this,`slicesContainer`,{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(m.new(this._root,{position:`absolute`,isMeasured:!1}))}),Object.defineProperty(this,`labelsContainer`,{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(m.new(this._root,{position:`absolute`,isMeasured:!1}))}),Object.defineProperty(this,`ticksContainer`,{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(m.new(this._root,{position:`absolute`,isMeasured:!1}))}),Object.defineProperty(this,`_lLabels`,{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,`_rLabels`,{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,`_hLabels`,{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,`slices`,{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(this._makeSlices())}),Object.defineProperty(this,`labels`,{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(this._makeLabels())}),Object.defineProperty(this,`ticks`,{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(this._makeTicks())})}makeSlice(e){let t=this.slicesContainer.children.push(this.slices.make());return t.on(`fill`,()=>{this.updateLegendMarker(e)}),t.on(`fillPattern`,()=>{this.updateLegendMarker(e)}),t.on(`stroke`,()=>{this.updateLegendMarker(e)}),t._setDataItem(e),e.set(`slice`,t),this.slices.push(t),t}makeLabel(e){let t=this.labelsContainer.children.push(this.labels.make());return t._setDataItem(e),e.set(`label`,t),this.labels.push(t),t}_shouldMakeBullet(e){return e.get(`value`)!=null}makeTick(e){let t=this.ticksContainer.children.push(this.ticks.make());return t._setDataItem(e),e.set(`tick`,t),this.ticks.push(t),t}_afterNew(){this.fields.push(`category`,`fill`),super._afterNew()}_onDataClear(){let e=this.get(`colors`);e&&e.reset();let t=this.get(`patterns`);t&&t.reset()}_prepareChildren(){if(super._prepareChildren(),this._lLabels=[],this._rLabels=[],this._hLabels=[],this._valuesDirty){let e=0,t=0,n=0,r=1/0,i=0;h(this._dataItems,n=>{let r=n.get(`valueWorking`,0);e+=r,t+=Math.abs(r)}),h(this._dataItems,e=>{let a=e.get(`valueWorking`,0);a>n&&(n=a),a<r&&(r=a),i++;let o=a/t;t==0&&(o=0),e.setRaw(`valuePercentTotal`,o*100)}),this.setPrivateRaw(`valueLow`,r),this.setPrivateRaw(`valueHigh`,n),this.setPrivateRaw(`valueSum`,e),this.setPrivateRaw(`valueAverage`,e/i),this.setPrivateRaw(`valueAbsoluteSum`,t)}}show(t){let n=Object.create(null,{show:{get:()=>super.show}});return e(this,void 0,void 0,function*(){let e=[];e.push(n.show.call(this,t)),e.push(this._sequencedShowHide(!0,t)),yield Promise.all(e)})}hide(t){let n=Object.create(null,{hide:{get:()=>super.hide}});return e(this,void 0,void 0,function*(){let e=[];e.push(n.hide.call(this,t)),e.push(this._sequencedShowHide(!1,t)),yield Promise.all(e)})}_updateChildren(){super._updateChildren(),this._valuesDirty&&h(this._dataItems,e=>{e.get(`label`).text.markDirtyText()}),(this.isDirty(`legendLabelText`)||this.isDirty(`legendValueText`))&&h(this._dataItems,e=>{this.updateLegendValue(e)}),this._arrange()}_arrange(){this._arrangeDown(this._lLabels),this._arrangeUp(this._lLabels),this._arrangeDown(this._rLabels),this._arrangeUp(this._rLabels),this._arrangeLeft(this._hLabels),this._arrangeRight(this._hLabels),h(this.dataItems,e=>{this._updateTick(e)})}_afterChanged(){super._afterChanged(),this._arrange()}processDataItem(e){if(super.processDataItem(e),e.get(`fill`)==null){let t=this.get(`colors`);t&&e.setRaw(`fill`,t.next())}if(e.get(`fillPattern`)==null){let t=this.get(`patterns`);t&&e.setRaw(`fillPattern`,t.next())}}showDataItem(t,n){let r=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return e(this,void 0,void 0,function*(){let e=[r.showDataItem.call(this,t,n)];c(n)||(n=this.get(`stateAnimationDuration`,0));let i=this.get(`stateAnimationEasing`),a=t.get(`value`),o=t.animate({key:`valueWorking`,to:a,duration:n,easing:i});o&&e.push(o.waitForStop());let s=t.get(`tick`);s&&e.push(s.show(n));let l=t.get(`label`);l&&e.push(l.show(n));let u=t.get(`slice`);u&&e.push(u.show(n)),u.get(`active`)&&u.states.applyAnimate(`active`),yield Promise.all(e)})}hideDataItem(t,n){let r=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return e(this,void 0,void 0,function*(){let e=[r.hideDataItem.call(this,t,n)],i=this.states.create(`hidden`,{});c(n)||(n=i.get(`stateAnimationDuration`,this.get(`stateAnimationDuration`,0)));let a=i.get(`stateAnimationEasing`,this.get(`stateAnimationEasing`)),o=t.animate({key:`valueWorking`,to:0,duration:n,easing:a});o&&e.push(o.waitForStop());let s=t.get(`tick`);s&&e.push(s.hide(n));let l=t.get(`label`);l&&e.push(l.hide(n));let u=t.get(`slice`);u.hideTooltip(),u&&e.push(u.hide(n)),yield Promise.all(e)})}disposeDataItem(e){super.disposeDataItem(e);let t=e.get(`label`);t&&(this.labels.removeValue(t),t.dispose());let n=e.get(`tick`);n&&(this.ticks.removeValue(n),n.dispose());let r=e.get(`slice`);r&&(this.slices.removeValue(r),r.dispose())}hoverDataItem(e){let t=e.get(`slice`);t&&!t.isHidden()&&t.hover()}unhoverDataItem(e){let t=e.get(`slice`);t&&t.unhover()}updateLegendMarker(e){if(e){let t=e.get(`slice`);if(t){let n=e.get(`legendDataItem`);if(n){let e=n.get(`markerRectangle`);h(f,n=>{t.get(n)!=null&&e.set(n,t.get(n))})}}}}_arrangeDown(e){if(e){let t=this._getNextDown();e.sort((e,t)=>e.y>t.y?1:e.y<t.y?-1:0),h(e,e=>{let n=e.label.adjustedLocalBounds(),r=n.top;e.y+r<t&&(e.y=t-r),e.label.set(`y`,e.y),t=e.y+n.bottom})}}_getNextUp(){return this.labelsContainer.maxHeight()}_getNextDown(){return 0}_arrangeUp(e){if(e){let t=this._getNextUp();e.sort((e,t)=>e.y<t.y?1:e.y>t.y?-1:0),h(e,e=>{let n=e.label.adjustedLocalBounds(),r=n.bottom;e.y+r>t&&(e.y=t-r),e.label.set(`y`,e.y),t=e.y+n.top})}}_arrangeRight(e){if(e){let t=0;e.sort((e,t)=>e.y>t.y?1:e.y<t.y?-1:0),h(e,e=>{let n=e.label.adjustedLocalBounds(),r=n.left;e.y+r<t&&(e.y=t-r),e.label.set(`x`,e.y),t=e.y+n.right})}}_arrangeLeft(e){if(e){let t=this.labelsContainer.maxWidth();e.sort((e,t)=>e.y<t.y?1:e.y>t.y?-1:0),h(e,e=>{let n=e.label.adjustedLocalBounds(),r=n.right;e.y+r>t&&(e.y=t-r),e.label.set(`x`,e.y),t=e.y+n.left})}}_updateSize(){super._updateSize(),this.markDirty()}_updateTick(e){}_dispose(){super._dispose();let e=this.chart;e&&e.series.removeValue(this)}};Object.defineProperty(Z,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`PercentSeries`}),Object.defineProperty(Z,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:w.classNames.concat([Z.className])});var Q=class extends X{constructor(){super(...arguments),Object.defineProperty(this,`_maxRadius`,{enumerable:!0,configurable:!0,writable:!0,value:1})}_afterNew(){super._afterNew(),this.seriesContainer.setAll({x:s,y:s})}_prepareChildren(){super._prepareChildren();let e=this.chartContainer,t=e.innerWidth(),n=e.innerHeight(),r=this.get(`startAngle`,0),i=this.get(`endAngle`,0),a=this.get(`innerRadius`),s=o(0,0,r,i,1),c=t/(s.right-s.left),u=n/(s.bottom-s.top),d={left:0,right:0,top:0,bottom:0};if(a instanceof l){let e=a.value,s=Math.min(c,u);e=Math.max(s*e,s-Math.min(n,t))/s,d=o(0,0,r,i,e),this.setPrivateRaw(`irModifyer`,e/a.value)}s=g([s,d]);let f=this._maxRadius;this._maxRadius=Math.min(c,u);let m=p(this.get(`radius`,0),this._maxRadius);this.seriesContainer.setAll({dy:-m*(s.bottom+s.top)/2,dx:-m*(s.right+s.left)/2}),(this.isDirty(`startAngle`)||this.isDirty(`endAngle`)||f!=this._maxRadius)&&this.series.each(e=>{e._markDirtyKey(`startAngle`)}),(this.isDirty(`innerRadius`)||this.isDirty(`radius`))&&this.series.each(e=>{e._markDirtyKey(`innerRadius`)})}radius(e){let t=p(this.get(`radius`,0),this._maxRadius),n=p(this.get(`innerRadius`,0),t);if(e){let r=this.series.indexOf(e),i=this.series.length,a=e.get(`radius`);return a==null?n+(t-n)/i*(r+1):n+p(a,t-n)}return t}innerRadius(e){let t=this.radius(),n=p(this.get(`innerRadius`,0),t);if(n<0&&(n=t+n),e){let r=this.series.indexOf(e),i=this.series.length,a=e.get(`innerRadius`);return a==null?n+(t-n)/i*r:n+p(a,t-n)}return n}_updateSize(){super._updateSize(),this.markDirtyKey(`radius`)}};Object.defineProperty(Q,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`PieChart`}),Object.defineProperty(Q,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:X.classNames.concat([Q.className])});var $=class extends Z{_makeSlices(){return new i(v.new({}),()=>J._new(this._root,{themeTags:_(this.slices.template.get(`themeTags`,[]),[`pie`,`series`])},[this.slices.template]))}_makeLabels(){return new i(v.new({}),()=>j._new(this._root,{themeTags:_(this.labels.template.get(`themeTags`,[]),[`pie`,`series`])},[this.labels.template]))}_makeTicks(){return new i(v.new({}),()=>O._new(this._root,{themeTags:_(this.ticks.template.get(`themeTags`,[]),[`pie`,`series`])},[this.ticks.template]))}processDataItem(e){super.processDataItem(e);let t=this.makeSlice(e);t.on(`scale`,()=>{this._updateTick(e)}),t.on(`shiftRadius`,()=>{this._updateTick(e)}),t.events.on(`positionchanged`,()=>{this._updateTick(e)});let n=this.makeLabel(e);n.events.on(`positionchanged`,()=>{this._updateTick(e)}),this.makeTick(e),t.events.on(`positionchanged`,()=>{n.markDirty()})}_getNextUp(){let e=this.chart;return e?e._maxRadius:this.labelsContainer.maxHeight()/2}_getNextDown(){let e=this.chart;return e?-e._maxRadius:-this.labelsContainer.maxHeight()/2}_prepareChildren(){super._prepareChildren();let e=this.chart;if(e){if(this.isDirty(`alignLabels`)){let e=this.labels.template;if(this.get(`alignLabels`))e.set(`textType`,`aligned`);else{let t=e.get(`textType`);(t==null||t==`aligned`)&&e.set(`textType`,`adjusted`)}}if(this._valuesDirty||this.isDirty(`radius`)||this.isDirty(`innerRadius`)||this.isDirty(`startAngle`)||this.isDirty(`endAngle`)||this.isDirty(`alignLabels`)){this.markDirtyBounds();let t=this.get(`startAngle`,e.get(`startAngle`,-90)),r=this.get(`endAngle`,e.get(`endAngle`,270))-t,i=t,o=e.radius(this);this.setPrivateRaw(`radius`,o);let s=e.innerRadius(this)*e.getPrivate(`irModifyer`,1);s<0&&(s=o+s),h(this._dataItems,e=>{this.updateLegendValue(e);let t=r*e.get(`valuePercentTotal`)/100,c=e.get(`slice`);if(c){c.set(`radius`,o),c.set(`innerRadius`,s),c.set(`startAngle`,i),c.set(`arc`,t);let n=e.get(`fill`);c._setDefault(`fill`,n),c._setDefault(`stroke`,n);let r=e.get(`fillPattern`);c._setDefault(`fillPattern`,r)}let l=n(i+t/2),d=e.get(`label`);if(d&&(d.setPrivate(`radius`,o),d.setPrivate(`innerRadius`,s),d.set(`labelAngle`,l),d.get(`textType`)==`aligned`)){let e=o+d.get(`radius`,0),t=o*a(l);l>90&&l<=270?(!d.isHidden()&&!d.isHiding()&&this._lLabels.push({label:d,y:t}),e*=-1,e-=this.labelsContainer.get(`paddingLeft`,0),d.set(`centerX`,u),d.setPrivateRaw(`left`,!0)):(!d.isHidden()&&!d.isHiding()&&this._rLabels.push({label:d,y:t}),e+=this.labelsContainer.get(`paddingRight`,0),d.set(`centerX`,0),d.setPrivateRaw(`left`,!1)),d.set(`x`,e),d.set(`y`,o*a(l))}i+=t,this._updateTick(e)})}}}_updateTick(e){let t=e.get(`tick`),n=e.get(`label`),i=e.get(`slice`),o=t.get(`location`,1);if(t&&n&&i){let e=(i.get(`shiftRadius`,0)+i.get(`radius`,0))*i.get(`scale`,1)*o,s=n.get(`labelAngle`,0),c=r(s),l=a(s),u=this.labelsContainer,d=u.get(`paddingLeft`,0),f=u.get(`paddingRight`,0),p=0,m=0;p=n.x(),m=n.y();let h=[];if(p!=0||m!=0){if(n.get(`textType`)==`circular`){let e=n.radius()-n.get(`paddingBottom`,0),t=n.get(`labelAngle`,0);p=e*r(t),m=e*a(t)}let t=-f;n.getPrivate(`left`)&&(t=d),h=[{x:i.x()+e*c,y:i.y()+e*l},{x:p+t,y:m},{x:p,y:m}]}t.set(`points`,h)}}_positionBullet(e){let t=e.get(`sprite`);if(t){let n=t.dataItem.get(`slice`);if(n){let i=n.get(`innerRadius`,0),o=n.get(`radius`,0),s=n.get(`startAngle`,0),c=n.get(`arc`,0),l=e.get(`locationX`,.5),u=e.get(`locationY`,.5),d=s+c*l,f=i+(o-i)*u;t.setAll({x:r(d)*f,y:a(d)*f})}}}};Object.defineProperty($,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`PieSeries`}),Object.defineProperty($,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:Z.classNames.concat([$.className])});export{Q as PieChartAm5,$ as PieSeriesAm5};