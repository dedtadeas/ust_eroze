import{$m as e,AE as t,Ad as n,Ax as r,Bi as i,Bx as a,CD as o,Fm as s,Fu as c,Gd as l,Hx as u,Hy as d,Id as f,Jd as p,Jm as m,Jr as ee,Kd as te,Li as ne,MC as h,Nb as re,Pi as ie,Qh as ae,Ri as oe,Si as se,Sx as ce,Ti as le,Um as ue,Vg as de,Vx as fe,Wy as g,Xn as pe,Yd as me,Yn as _,_E as v,aC as y,e_ as he,ei as ge,iC as _e,jC as ve,kC as b,ki as ye,oC as x,ti as be,vC as S,xi as xe,zC as C,zi as Se}from"./index-BqmCqmfp.js";import{p as Ce}from"./multidimensionalUtils-yEWHc_se.js";import{B as we,C as Te,H as Ee,Q as De,S as Oe,U as ke,V as w,b as Ae,et as je,w as Me,x as Ne,y as Pe}from"./RasterSymbolizer-CkbjgVe_.js";import{t as T}from"./PixelBlock-CjVaas_l.js";import{a as Fe,c as Ie,i as Le,l as E}from"./vectorFieldUtils-yzcuu25U.js";import{r as Re}from"./datasetUtils-DSaKkE9z.js";import{i as ze,r as Be}from"./utils-5jlQHYup.js";import{t as Ve}from"./dataUtils-lUZ4DUuE.js";var D=class extends S{constructor(){super(...arguments),this.pixelType=`unknown`}};o([h({type:String,json:{write:{isRequired:!0}}})],D.prototype,`name`,void 0),o([h({type:String,json:{write:!0}})],D.prototype,`description`,void 0),o([h({type:C,json:{type:C,write:!0,name:`_object_id`}})],D.prototype,`id`,void 0),o([h({type:String,json:{type:je.jsonValues,read:je.read,write:{writer:je.write,isRequired:!0}}})],D.prototype,`pixelType`,void 0),o([h({type:String,json:{write:{isRequired:!0}}})],D.prototype,`type`,void 0),D=o([b(`esri.layers.support.RasterFunctionInfo`)],D);var He=D,O=class extends S{constructor(){super(...arguments),this.isDataset=!1,this.isPublic=!1,this.type=`RasterFunctionVariable`}};o([h({type:String,json:{write:!0}})],O.prototype,`name`,void 0),o([h({type:Number,json:{type:C,write:!0,name:`_object_id`}})],O.prototype,`id`,void 0),o([h({type:Boolean,json:{write:!0}})],O.prototype,`isDataset`,void 0),o([h({type:Boolean,json:{write:!0}})],O.prototype,`isPublic`,void 0),o([h({json:{write:!0}})],O.prototype,`value`,void 0),o([h({type:String,json:{write:!0}})],O.prototype,`type`,void 0),O=o([b(`esri.layers.support.RasterFunctionVariable`)],O);var k={key:`type`,base:null,typeMap:{RasterFunctionVariable:O}},A=class extends S{};o([h({types:k,json:{types:k,name:`MatchVariable`}})],A.prototype,`matchVariable`,void 0),o([h({types:k,json:{types:k,name:`UnionDimension`}})],A.prototype,`unionDimension`,void 0),o([h({type:Number,json:{type:C,write:!0,name:`_object_id`}})],A.prototype,`id`,void 0),o([h({type:String,json:{write:!0}})],A.prototype,`type`,void 0),A=o([b(`esri.layers.support.RasterFunctionProperties`)],A);var Ue=A,We=new y({0:`mosaic`,1:`item`,2:`item-group`},{useNumericKeys:!0}),j=class extends S{constructor(){super(...arguments),this.description=``,this.functionType=`mosaic`,this.type=`RasterFunctionTemplate`}};o([h({type:[String],json:{write:!0}})],j.prototype,`aliases`,void 0),o([h({type:Object,json:{write:{isRequired:!0}}})],j.prototype,`arguments`,void 0),o([h({type:String,json:{write:{isRequired:!0}}})],j.prototype,`description`,void 0),o([h({type:He,json:{write:{isRequired:!0},name:`function`}})],j.prototype,`functionInfo`,void 0),o([h({type:We.apiValues,json:{type:[0,1,2],read:We.read,write:{writer:We.write,isRequired:!0}}})],j.prototype,`functionType`,void 0),o([h({type:String,json:{write:!0}})],j.prototype,`group`,void 0),o([h({type:String,json:{write:!0}})],j.prototype,`help`,void 0),o([h({type:Number,json:{type:C,write:!0,name:`_object_id`}})],j.prototype,`id`,void 0),o([h({type:String,json:{write:{isRequired:!0}}})],j.prototype,`name`,void 0),o([h({type:String,json:{write:!0,name:`definition`}})],j.prototype,`queryDefinition`,void 0),o([h({type:String,json:{write:!0}})],j.prototype,`tag`,void 0),o([h({type:Ue,json:{write:!0}})],j.prototype,`properties`,void 0),o([h({type:String,json:{write:!0}})],j.prototype,`thumbnail`,void 0),o([h({type:String,json:{write:!0}})],j.prototype,`thumbnailEx`,void 0),o([h({json:{type:[`RasterFunctionTemplate`],write:!0}})],j.prototype,`type`,void 0),j=o([b(`esri.layers.support.RasterFunctionTemplate`)],j);var Ge,M=new Set([`raster`,`raster2`,`dem`,`fillraster`]),N=new Set([`rasters`]),Ke=e=>e?.rasterFunction?P.fromJSON(e):e,qe=e=>e&&e instanceof P?e.toJSON():e,Je=e=>e?.functionName&&!e.declaredClass,Ye=e=>Je(e)?new P(e):e,Xe=e=>{if(e==null)return null;e=t(e);let n={};for(let t of Object.keys(e))M.has(t.toLowerCase())?n[t]=Ke(e[t]):N.has(t.toLowerCase())&&Array.isArray(e[t])?n[t]=e[t].map(Ke):n[t]=e[t];return n},Ze=e=>e?j.fromJSON({type:`RasterFunctionTemplate`,...e}):void 0,Qe={types:{key:`type`,base:null,typeMap:{RasterFunctionTemplate:j}},json:{write:!0,name:`rasterFunctionDefinition`,read:Ze}},P=Ge=class extends S{constructor(e){super(e),this.functionName=null,this.outputPixelType=`unknown`,this.variableName=null,this.functionDefinition=null}set functionArguments(e){if(e){let n=Object.keys(e);if(n.some(t=>M.has(t.toLowerCase())&&Je(e[t]))||n.some(t=>N.has(t.toLowerCase())&&Array.isArray(e[t])&&e[t].some(e=>Je(e)))){e=t(e);for(let t of n)M.has(t.toLowerCase())?e[t]=Ye(e[t]):N.has(t.toLowerCase())&&Array.isArray(e[t])&&(e[t]=e[t].map(e=>Ye(e)))}}this._set(`functionArguments`,e)}readFunctionArguments(e){return Xe(e)}writeFunctionArguments(e,t,n){let r={};for(let t of Object.keys(e))M.has(t.toLowerCase())?r[t]=qe(e[t]):N.has(t.toLowerCase())&&Array.isArray(e[t])?r[t]=e[t].map(qe):r[t]=qe(e[t]);t[n]=r}readFunctionName(e,t){let n=t.rasterFunctionInfos;return t.name||(n?.length&&n[0].name!==`None`?n[0].name:t.rasterFunction||t.rasterFunctionDefinition?.name)}get rasterFunctionDefinition(){return this.functionDefinition?.toJSON()}set rasterFunctionDefinition(e){this.functionDefinition=Ze(e)}get hasClipFunction(){return this.rasterFunctionDefinition?JSON.stringify(this.rasterFunctionDefinition).includes(`"type":"ClipFunction"`):JSON.stringify(this).includes(`"rasterFunction":"Clip"`)}clone(){return new Ge({functionName:this.functionName,functionArguments:t(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:t(this.rasterFunctionDefinition)})}};o([h({json:{type:Object,name:`rasterFunctionArguments`}})],P.prototype,`functionArguments`,null),o([u(`functionArguments`)],P.prototype,`readFunctionArguments`,null),o([x(`functionArguments`)],P.prototype,`writeFunctionArguments`,null),o([h({json:{type:String,write:{target:`rasterFunction`}}})],P.prototype,`functionName`,void 0),o([u(`functionName`,[`rasterFunction`,`rasterFunctionInfos`,`rasterFunctionDefinition`])],P.prototype,`readFunctionName`,null),o([d({C128:`c128`,C64:`c64`,F32:`f32`,F64:`f64`,S16:`s16`,S32:`s32`,S8:`s8`,U1:`u1`,U16:`u16`,U2:`u2`,U32:`u32`,U4:`u4`,U8:`u8`,UNKNOWN:`unknown`},{ignoreUnknown:!1,default:`unknown`})],P.prototype,`outputPixelType`,void 0),o([h({type:String,json:{read:!0,write:!0}})],P.prototype,`variableName`,void 0),o([h()],P.prototype,`rasterFunctionDefinition`,null),o([h(Qe)],P.prototype,`functionDefinition`,void 0),o([h()],P.prototype,`hasClipFunction`,null),P=Ge=o([b(`esri.layers.support.RasterFunction`)],P);var $e,F=_e()({MT_FIRST:`first`,MT_LAST:`last`,MT_MIN:`min`,MT_MAX:`max`,MT_MEAN:`mean`,MT_BLEND:`blend`,MT_SUM:`sum`}),I=_e()({esriMosaicNone:`none`,esriMosaicCenter:`center`,esriMosaicNadir:`nadir`,esriMosaicViewpoint:`viewpoint`,esriMosaicAttribute:`attribute`,esriMosaicLockRaster:`lock-raster`,esriMosaicNorthwest:`northwest`,esriMosaicSeamline:`seamline`});function et(e){let t;switch(e?e.toLowerCase().replace(`esrimosaic`,``):``){case`byattribute`:case`attribute`:t=`esriMosaicAttribute`;break;case`lockraster`:t=`esriMosaicLockRaster`;break;case`center`:t=`esriMosaicCenter`;break;case`northwest`:t=`esriMosaicNorthwest`;break;case`nadir`:t=`esriMosaicNadir`;break;case`viewpoint`:t=`esriMosaicViewpoint`;break;case`seamline`:t=`esriMosaicSeamline`;break;default:t=`esriMosaicNone`}return I.fromJSON(t)}var L=$e=class extends S{constructor(e){super(e),this.ascending=!0,this.itemRasterFunction=null,this.lockRasterIds=null,this.method=`none`,this.multidimensionalDefinition=null,this.objectIds=null,this.operation=`first`,this.sortField=null,this.sortValue=null,this.viewpoint=null,this.where=null}readAscending(e,t){return t.ascending==null?t.sortAscending==null||t.sortAscending:t.ascending}readMethod(e,t){return et(t.mosaicMethod||t.defaultMosaicMethod)}writeMultidimensionalDefinition(e,t,n){e!=null&&(e=e.filter(({variableName:e,dimensionName:t})=>e&&e!==`*`||t)).length&&(t[n]=e.map(e=>e.toJSON()))}readOperation(e,t){let n=t.mosaicOperation,r=t.mosaicOperator?.toLowerCase(),i=n||(r?F.toJSON(r):null);return F.fromJSON(i)||`first`}castSortValue(e){return e==null||typeof e==`string`||typeof e==`number`?e:`${e}`}clone(){return new $e({ascending:this.ascending,itemRasterFunction:t(this.itemRasterFunction),lockRasterIds:t(this.lockRasterIds),method:this.method,multidimensionalDefinition:t(this.multidimensionalDefinition),objectIds:t(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:t(this.viewpoint),where:this.where})}};o([h({type:Boolean,json:{write:!0}})],L.prototype,`ascending`,void 0),o([u(`ascending`,[`ascending`,`sortAscending`])],L.prototype,`readAscending`,null),o([h({type:P,json:{name:`itemRenderingRule`,write:!0}})],L.prototype,`itemRasterFunction`,void 0),o([h({type:[C],json:{write:{overridePolicy(){return{enabled:this.method===`lock-raster`}}}}})],L.prototype,`lockRasterIds`,void 0),o([h({type:I.apiValues,json:{type:I.jsonValues,write:{target:`mosaicMethod`,writer:I.write,isRequired:!0}}})],L.prototype,`method`,void 0),o([u(`method`,[`mosaicMethod`,`defaultMosaicMethod`])],L.prototype,`readMethod`,null),o([h({type:[Ce],json:{write:!0}})],L.prototype,`multidimensionalDefinition`,void 0),o([x(`multidimensionalDefinition`)],L.prototype,`writeMultidimensionalDefinition`,null),o([h({type:[C],json:{name:`fids`,write:!0}})],L.prototype,`objectIds`,void 0),o([h({type:F.apiValues,json:{type:F.jsonValues,read:{reader:F.read},write:{target:`mosaicOperation`,writer:F.write}}})],L.prototype,`operation`,void 0),o([u(`operation`,[`mosaicOperation`,`mosaicOperator`])],L.prototype,`readOperation`,null),o([h({type:String,json:{write:{overridePolicy(){return{enabled:this.method===`attribute`}}}}})],L.prototype,`sortField`,void 0),o([h({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:this.method===`attribute`,allowNull:!0}}}}})],L.prototype,`sortValue`,void 0),o([a(`sortValue`)],L.prototype,`castSortValue`,null),o([h({type:r,json:{write:!0}})],L.prototype,`viewpoint`,void 0),o([h({type:String,json:{write:!0}})],L.prototype,`where`,void 0),L=$e=o([b(`esri.layers.support.MosaicRule`)],L);var tt,nt={base:fe,key:`type`,typeMap:{extent:ce,polygon:he}},R=tt=class extends S{constructor(e){super(e),this.areaOfInterest=null,this.subsetDefinitions=null}get dimensions(){let{subsetDefinitions:e}=this;if(e==null||e.length===0)return[];let t=new Map;e.forEach(e=>{if(!e.dimensionName)return;let n,r;if(Array.isArray(e.values[0])){let t=e.values;n=t[0][0],r=t[e.values.length-1][1]}else{let t=e.values;n=t[0],r=t[e.values.length-1]}if(t.has(e.dimensionName)){let i=t.get(e.dimensionName);i[0]=Math.min(n,i[0]),i[1]=Math.max(r,i[1])}else t.set(e.dimensionName,[n,r])});let n=[];for(let e of t)n.push({name:e[0],extent:e[1]});return n}get variables(){let{subsetDefinitions:e}=this;if(e==null||e.length===0)return[];let t=new Set;return e.forEach(e=>{e.variableName&&t.add(e.variableName)}),[...t]}clone(){let e=this.subsetDefinitions?.map(e=>e.clone()),t=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new tt({areaOfInterest:t,subsetDefinitions:e})}};o([h({types:nt,json:{read:m,write:!0}})],R.prototype,`areaOfInterest`,void 0),o([h({readOnly:!0})],R.prototype,`dimensions`,null),o([h({readOnly:!0})],R.prototype,`variables`,null),o([h({type:[Ce],json:{write:!0}})],R.prototype,`subsetDefinitions`,void 0),R=tt=o([b(`esri.layers.support.MultidimensionalSubset`)],R);var rt,z=new y({flow_from:`flow-from`,flow_to:`flow-to`}),B=rt=class extends xe(S){constructor(e){super(e),this.density=.8,this.color=new g([255,255,255,1]),this.maxPathLength=200,this.trailWidth=1.5,this.flowSpeed=10,this.trailLength=100,this.smoothing=0,this.flowRepresentation=`flow-from`,this.type=`flow`,this.authoringInfo=null,this.legendOptions=null,this.trailCap=`butt`,this.background=`none`}set visualVariables(e){super.visualVariables=e}clone(){let{density:e,maxPathLength:t,trailWidth:n,flowSpeed:r,trailLength:i,smoothing:a,flowRepresentation:o,trailCap:s,background:c}=this,l=this.color.clone(),u=(this.visualVariables||[]).map(e=>e.clone()),d=this.authoringInfo?.clone(),f=this.legendOptions?.clone();return new rt({density:e,color:l,maxPathLength:t,trailWidth:n,flowSpeed:r,trailLength:i,trailCap:s,background:c,smoothing:a,flowRepresentation:o,visualVariables:u,authoringInfo:d,legendOptions:f})}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}};o([h({type:Number,json:{write:!0}})],B.prototype,`density`,void 0),o([h({type:g,json:{type:[C],write:{allowNull:!0}}})],B.prototype,`color`,void 0),o([h({type:Number,cast:ae,json:{write:!0}})],B.prototype,`maxPathLength`,void 0),o([h({type:Number,cast:ae,json:{write:!0}})],B.prototype,`trailWidth`,void 0),o([h({type:Number,json:{write:!0}})],B.prototype,`flowSpeed`,void 0),o([h({type:Number,json:{write:!0}})],B.prototype,`trailLength`,void 0),o([h({type:Number,cast:ae,json:{write:!1}})],B.prototype,`smoothing`,void 0),o([h({type:z.apiValues,json:{type:z.jsonValues,read:{reader:z.read},write:{writer:z.write}}})],B.prototype,`flowRepresentation`,void 0),o([d({flowRenderer:`flow`}),h({json:{write:{isRequired:!0}}})],B.prototype,`type`,void 0),o([h({type:ne,json:{write:!0}})],B.prototype,`authoringInfo`,void 0),o([h({type:be,json:{write:!0}})],B.prototype,`legendOptions`,void 0),o([h({type:[`butt`,`round`],json:{write:!0}})],B.prototype,`trailCap`,void 0),o([h({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],B.prototype,`background`,void 0),B=rt=o([b(`esri.renderers.FlowRenderer`)],B);var V=class extends S{constructor(e){super(e),this.value=null,this.label=null,this.color=null}};o([h({type:Number,json:{write:{isRequired:!0}}})],V.prototype,`value`,void 0),o([h({type:String,json:{write:!0}})],V.prototype,`label`,void 0),o([h({type:g,json:{type:[C],write:{isRequired:!0}}})],V.prototype,`color`,void 0),V=o([b(`esri.renderers.support.ColormapInfo`)],V);var H,U=H=class extends S{constructor(e){super(e),this.colormapInfos=null,this.type=`raster-colormap`}static createFromColormap(e,t){if(!e)return null;let n=e[0].length===5,r=[...e].sort((e,t)=>e[0]-t[0]).map(e=>V.fromJSON({value:e[0],color:n?e.slice(1,5):e.slice(1,4).concat([255]),label:t?t[e[0]]??``:e[0]}));return new H({colormapInfos:r})}static createFromColorramp(e){let t=Ee(e);return H.createFromColormap(t)}clone(){return new H({colormapInfos:this.colormapInfos.map(e=>e.toJSON())})}extractColormap(){return this.colormapInfos.map(({value:e,color:t})=>[e,t.r,t.g,t.b,t.a>1?t.a:255*t.a&255]).sort((e,t)=>e[0]-t[0])}};o([h({type:[V],json:{write:{isRequired:!0}}})],U.prototype,`colormapInfos`,void 0),o([d({rasterColormap:`raster-colormap`}),h({json:{write:{isRequired:!0}}})],U.prototype,`type`,void 0),U=H=o([b(`esri.renderers.RasterColormapRenderer`)],U);var it,W=it=class extends S{constructor(e){super(e),this.altitude=45,this.azimuth=315,this.colorRamp=null,this.hillshadeType=`traditional`,this.pixelSizePower=.664,this.pixelSizeFactor=.024,this.scalingType=`none`,this.type=`raster-shaded-relief`,this.zFactor=1}readColorRamp(e){return Se(e)}clone(){return new it({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:t(this.colorRamp)})}};o([h({type:Number,json:{write:{isRequired:!0}}})],W.prototype,`altitude`,void 0),o([h({type:Number,json:{write:{isRequired:!0}}})],W.prototype,`azimuth`,void 0),o([h({types:oe,json:{write:!0}})],W.prototype,`colorRamp`,void 0),o([u(`colorRamp`)],W.prototype,`readColorRamp`,null),o([h({type:[`traditional`,`multi-directional`],json:{write:{isRequired:!0}}})],W.prototype,`hillshadeType`,void 0),o([h({type:Number,json:{write:!0}})],W.prototype,`pixelSizePower`,void 0),o([h({type:Number,json:{write:!0}})],W.prototype,`pixelSizeFactor`,void 0),o([h({type:[`none`,`adjusted`],json:{write:{isRequired:!0}}})],W.prototype,`scalingType`,void 0),o([d({rasterShadedRelief:`raster-shaded-relief`}),h({json:{write:{isRequired:!0}}})],W.prototype,`type`,void 0),o([h({type:Number,json:{write:{isRequired:!0}}})],W.prototype,`zFactor`,void 0),W=it=o([b(`esri.renderers.RasterShadedReliefRenderer`)],W);var at,G=at=class extends S{constructor(e){super(e),this.colorRamp=null,this.computeGamma=!1,this.dynamicRangeAdjustment=!1,this.gamma=[],this.maxPercent=null,this.minPercent=null,this.numberOfStandardDeviations=null,this.outputMax=null,this.outputMin=null,this.sigmoidStrengthLevel=null,this.histograms=null,this.customStatistics=null,this.useGamma=!1,this.stretchType=`none`,this.type=`raster-stretch`}readColorRamp(e){if(e)return Se(e)}readCustomStatistics(e){return e?.map(e=>({min:e[0],max:e[1],avg:e[2],stddev:e[3]}))}writeCustomStatistics(e,t,n){e?.length&&(t[n]=e.map(e=>[e.min,e.max,e.avg??0,e.stddev??1]))}readStretchType(e,t){let n=t.stretchType;return typeof n==`number`&&(n=we[n]),w.read(n)}clone(){return new at({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,customStatistics:t(this.customStatistics),gamma:t(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:t(this.colorRamp),histograms:t(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}};o([h({types:oe,json:{write:!0}})],G.prototype,`colorRamp`,void 0),o([u(`colorRamp`)],G.prototype,`readColorRamp`,null),o([h({type:Boolean,json:{write:!0}})],G.prototype,`computeGamma`,void 0),o([h({type:Boolean,json:{write:{target:`dra`},read:{source:`dra`}}})],G.prototype,`dynamicRangeAdjustment`,void 0),o([h({type:[Number],json:{write:!0}})],G.prototype,`gamma`,void 0),o([h({type:Number,json:{write:!0}})],G.prototype,`maxPercent`,void 0),o([h({type:Number,json:{write:!0}})],G.prototype,`minPercent`,void 0),o([h({type:Number,json:{write:!0}})],G.prototype,`numberOfStandardDeviations`,void 0),o([h({type:Number,json:{read:{source:`max`},write:{target:`max`}}})],G.prototype,`outputMax`,void 0),o([h({type:Number,json:{read:{source:`min`},write:{target:`min`}}})],G.prototype,`outputMin`,void 0),o([h({type:Number,json:{write:!0}})],G.prototype,`sigmoidStrengthLevel`,void 0),o([h()],G.prototype,`histograms`,void 0),o([h({json:{type:[[Number]],name:`statistics`,write:!0}})],G.prototype,`customStatistics`,void 0),o([u(`customStatistics`)],G.prototype,`readCustomStatistics`,null),o([x(`customStatistics`)],G.prototype,`writeCustomStatistics`,null),o([h({type:Boolean,json:{write:!0}})],G.prototype,`useGamma`,void 0),o([h({type:w.apiValues,json:{type:w.jsonValues,write:w.write}})],G.prototype,`stretchType`,void 0),o([u(`stretchType`,[`stretchType`])],G.prototype,`readStretchType`,null),o([d({rasterStretch:`raster-stretch`})],G.prototype,`type`,void 0),G=at=o([b(`esri.renderers.RasterStretchRenderer`)],G);var ot,st=new Set([`esriMetersPerSecond`,`esriKilometersPerHour`,`esriKnots`,`esriFeetPerSecond`,`esriMilesPerHour`]),K=new y({beaufort_ft:`beaufort-ft`,beaufort_km:`beaufort-km`,beaufort_kn:`beaufort-kn`,beaufort_m:`beaufort-m`,beaufort_mi:`beaufort-mi`,classified_arrow:`classified-arrow`,ocean_current_kn:`ocean-current-kn`,ocean_current_m:`ocean-current-m`,simple_scalar:`simple-scalar`,single_arrow:`single-arrow`,wind_speed:`wind-barb`}),q=new y({flow_from:`flow-from`,flow_to:`flow-to`}),J=ot=class extends xe(S){constructor(e){super(e),this.attributeField=`Magnitude`,this.flowRepresentation=`flow-from`,this.rotationType=`arithmetic`,this.style=`single-arrow`,this.symbolTileSize=50,this.type=`vector-field`}readInputUnit(e,t){return st.has(e)?E.fromJSON(e):null}readOutputUnit(e,t){return st.has(e)?E.fromJSON(e):null}get styleRenderer(){let e=this.style,t=this.attributeField,n=this._createStyleRenderer(e);return n.field=t,n}set visualVariables(e){super.visualVariables=e}get sizeVariables(){let e=[];if(this.visualVariables)for(let t of this.visualVariables)t.type===`size`&&e.push(t);if(e.length===0){let t=new se({field:`Magnitude`,minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize});this.visualVariables?this.visualVariables.push(t):this._set(`visualVariables`,[t]),e.push(t)}return e}get rotationVariables(){let e=[];if(this.visualVariables)for(let t of this.visualVariables)t.type===`rotation`&&e.push(t);if(e.length===0){let t=new ie({field:`Direction`,rotationType:this.rotationType});this.visualVariables?this.visualVariables.push(t):this._set(`visualVariables`,[t]),e.push(t)}return e}clone(){return new ot({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:t(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}async getGraphicsFromPixelData(e,t=!1,n=[]){let i=[],a=Le(this.inputUnit,this.outputUnit),o=this.rotationVariables[0]?.rotationType||this.rotationType,s=t?Fe(e.pixelBlock,`vector-uv`,o,a):Ie(e.pixelBlock,`vector-magdir`,a);if(s==null)return i;let l=e.extent,u=s.mask!=null&&s.mask.length>0,d=0,p=(l.xmax-l.xmin)/s.width,m=(l.ymax-l.ymin)/s.height;for(let e=0;e<s.height;e++)for(let t=0;t<s.width;t++,d++){let a=new r({x:l.xmin+t*p+p/2,y:l.ymax-e*m-m/2,spatialReference:l.spatialReference});a=(await c(a))[0];let o=n.some(e=>e.intersects(a));if((!u||s.mask[d])&&!o){let e={Magnitude:s.pixels[0][d],Direction:s.pixels[1][d]},t=new f({geometry:new r({x:a.x,y:a.y,spatialReference:l.spatialReference}),attributes:e});t.symbol=this._getVisualVariablesAppliedSymbol(t),i.push(t)}}return i}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getClassBreakInfos(){return this.styleRenderer?.classBreakInfos}getDefaultSymbol(){return this.styleRenderer?.defaultSymbol}_getDefaultSymbol(e){return new l({path:`M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z`,outline:new me({width:0}),size:20,color:e||new g([0,92,230])})}_getVisualVariablesAppliedSymbol(e){if(!e)return;let t=this.styleRenderer?.getSymbol(e)?.clone(),n=this.sizeVariables,r=this.rotationVariables;if(n&&n.length&&this.sizeVariables.forEach(n=>Be(t,le([n],e))),r&&r.length){let n=this.flowRepresentation===`flow-to`==(this.style===`ocean-current-kn`||this.style===`ocean-current-m`)?0:180;e.attributes.Direction=e.attributes.Direction+n,this.rotationVariables.forEach(n=>ze(t,ye(n,e),n.axis))}return t}_createStyleRenderer(e){let t={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(e){case`single-arrow`:t=this._createSingleArrowRenderer();break;case`beaufort-kn`:t=this._createBeaufortKnotsRenderer();break;case`beaufort-m`:t=this._createBeaufortMeterRenderer();break;case`beaufort-ft`:t=this._createBeaufortFeetRenderer();break;case`beaufort-mi`:t=this._createBeaufortMilesRenderer();break;case`beaufort-km`:t=this._createBeaufortKilometersRenderer();break;case`ocean-current-m`:t=this._createCurrentMeterRenderer();break;case`ocean-current-kn`:t=this._createCurrentKnotsRenderer();break;case`simple-scalar`:t=this._createSimpleScalarRenderer();break;case`wind-barb`:t=this._createWindBarbsRenderer();break;case`classified-arrow`:t=this._createClassifiedArrowRenderer()}return new _(t)}_createSingleArrowRenderer(){return{defaultSymbol:this._getDefaultSymbol()}}_createBeaufortKnotsRenderer(){return{defaultSymbol:this._getDefaultSymbol(new g([214,47,39])),classBreakInfos:this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])}}_createBeaufortMeterRenderer(){return{defaultSymbol:this._getDefaultSymbol(new g([214,47,39])),classBreakInfos:this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}_createBeaufortFeetRenderer(){let e=this._getDefaultSymbol(new g([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map(e=>e*3.28084),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}_createBeaufortMilesRenderer(){let e=this._getDefaultSymbol(new g([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map(e=>e*2.23694),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}_createBeaufortKilometersRenderer(){let e=this._getDefaultSymbol(new g([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map(e=>e*3.6),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}_createCurrentMeterRenderer(){return{defaultSymbol:this._getDefaultSymbol(new g([177,177,177])),classBreakInfos:this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])}}_createCurrentKnotsRenderer(){return{defaultSymbol:this._getDefaultSymbol(new g([177,177,177])),classBreakInfos:this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])}}_createClassifiedArrowRenderer(){let e=this._getDefaultSymbol(new g([56,168,0])),t=[0,1e-6,3.5,7,10.5,14];if(this.sizeVariables?.length){let e=this.sizeVariables[0].minDataValue,n=this.sizeVariables[0].maxDataValue;if(e&&n){let r=(n-e)/5;t=Array.from([,,,,,,].keys()).map(t=>e+r*t)}}return{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])}}_createSimpleScalarRenderer(){return{defaultSymbol:p.fromJSON({imageData:`iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII=`,height:20,width:20,type:`esriPMS`,angle:0})}}_createWindBarbsRenderer(){let e=Array.from(Array(31).keys()).map(e=>5*e),t=[{range:`0-5`,path:`M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`5-10`,path:`M25 0 L25 40 M25 35 L17.5 37.5`,imageData:`PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`10-15`,path:`M25 0 L25 40 L10 45 L25 40`,imageData:`PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`15-20`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5`,imageData:`PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`20-25`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40`,imageData:`PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+`},{range:`25-30`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5`,imageData:`PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`30-35`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`35-40`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`40-45`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`45-50`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`50-55`,path:`M25 0 L25 40 L10 40 L25 35`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`55-60`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`60-65`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`65-70`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`70-75`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`75-80`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`80-85`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`85-90`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`90-95`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`95-100`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`100-105`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`105-110`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`110-115`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+`},{range:`115-120`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`120-125`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+`},{range:`125-130`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`130-135`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+`},{range:`135-140`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`140-145`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+`},{range:`145-150`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`}],n=p.fromJSON({imageData:`iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC`,height:20,width:20,type:`esriPMS`,angle:0}),r=e.map((r,i)=>{let a;if(i!==e.length-1)if(i===0)a={minValue:r,maxValue:e[i+1],symbol:n};else{let n=p.fromJSON({type:`esriPMS`,imageData:t[i].imageData,contentType:`image/svg+xml`,height:32,width:32,angle:0});a={minValue:r,maxValue:e[i+1],symbol:n}}return new pe(a)});return{defaultSymbol:n,classBreakInfos:r}}_getClassBreaks(e,t){return t.map((t,n)=>new pe({minValue:e[n],maxValue:e[n+1],symbol:this._getDefaultSymbol(new g(t))}))}};o([h({type:[`Magnitude`],json:{write:!0}})],J.prototype,`attributeField`,void 0),o([h({type:q.apiValues,json:{type:q.jsonValues,read:{reader:q.read},write:{writer:q.write}}})],J.prototype,`flowRepresentation`,void 0),o([h({type:[`geographic`,`arithmetic`],json:{write:!0}})],J.prototype,`rotationType`,void 0),o([h({type:K.apiValues,json:{type:K.jsonValues,read:{reader:K.read},write:{writer:K.write}}})],J.prototype,`style`,void 0),o([h({json:{write:!0}})],J.prototype,`symbolTileSize`,void 0),o([h({type:E.apiValues,json:{type:E.jsonValues,write:{writer:E.write}}})],J.prototype,`inputUnit`,void 0),o([u(`inputUnit`)],J.prototype,`readInputUnit`,null),o([h({type:E.apiValues,json:{type:E.jsonValues,read:{reader:E.read},write:{writer:E.write}}})],J.prototype,`outputUnit`,void 0),o([u(`outputUnit`)],J.prototype,`readOutputUnit`,null),o([d({vectorField:`vector-field`})],J.prototype,`type`,void 0),o([h({type:_})],J.prototype,`styleRenderer`,null),o([h({type:se})],J.prototype,`sizeVariables`,null),o([h({type:ie})],J.prototype,`rotationVariables`,null),J=ot=o([b(`esri.renderers.VectorFieldRenderer`)],J);var ct=.25,lt=i.fromJSON({type:`multipart`,colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),ut=i.fromJSON(ke[0]),dt=new Set([`scientific`,`standard-time`,`vector-uv`,`vector-magdir`,`vector-u`,`vector-v`,`vector-magnitude`,`vector-direction`]);function ft(e){return e.presetRenderers?.find(({method:t,value:n})=>t===`raster-function-template`?n===e.rasterFunctionName:t===`variable`&&n===e.variableName)}function pt(e,t){let{attributeTable:n,colormap:r}=e;if(Ne(e)){let t=Ot(e);if(t!=null)return t}if(t?.rasterFunctionColorRamp){let n=_t(e,t);return n.colorRamp=t.rasterFunctionColorRamp,n}if(r!=null){let t=Et(e);if(t!=null)return t}if(n!=null){let t=Ct(e);if(t!=null)return t}return _t(e,t)}function mt(e,t=!1){let n=[`raster-stretch`];return Me(e,t)&&n.push(`raster-colormap`),Te(e)&&n.push(`unique-value`),Oe(e,t)&&n.push(`class-breaks`),Pe(e)&&n.push(`raster-shaded-relief`),Ne(e)&&n.push(`vector-field`),Ae(e)&&n.push(`flow`),n}function ht(e){return Re(e)&&e.rasterFunction.functionName===`Colormap`?e.rasterFunction.colorRamp:void 0}function gt(e,t,n){let r=[`nearest`,`bilinear`,`cubic`,`majority`],i=n?.toLowerCase().replace(`bicubic`,`cubic`),a=r.find(e=>e===i);return t===`Map`?a??`bilinear`:e.dataType===`standard-time`?a??`nearest`:e.dataType===`thematic`||e.attributeTable||e.colormap?a===`nearest`||a===`majority`?a:`nearest`:a??`bilinear`}function _t(e,t){e=vt(e,t?.variableName);let{bandCount:n}=e,{bandIds:r,stretchType:i}=t||{};r?.some(e=>e>=n)&&(r=null);let a=e.statistics,o=e.histograms;n>1?(r=r?.length?r:yt(e),a=a==null?null:r?.map(e=>a[e]),o=o==null?null:r?.map(e=>o[e])):r=[0],i??=St(e),t?.includeStatisticsInStretch&&(i===`percent-clip`||i===`histogram-equalization`)&&e.statistics?.length&&(i=`min-max`);let s=!1;switch(i){case`none`:s=!1;break;case`percent-clip`:s=!o?.length;break;default:s=!a?.length}let{dataType:c}=e,l=r?.length===1&&dt.has(c)?lt:null,u=new G({stretchType:i,dynamicRangeAdjustment:s,colorRamp:l,outputMin:0,outputMax:255,gamma:r?.length===1?[1]:[1,1,1],useGamma:!1});return i===`percent-clip`?u.maxPercent=u.minPercent=ct:i===`standard-deviation`&&(u.numberOfStandardDeviations=2),s||e.multidimensionalInfo==null&&!t?.includeStatisticsInStretch||(i===`percent-clip`?u.histograms=o:i!==`min-max`&&i!==`standard-deviation`||(u.customStatistics=a?.map(e=>({...e})))),u}function vt(e,t){let{multidimensionalInfo:n}=e;if(!t||!n)return e;let r=n.variables.find(e=>e.name===t);if(!r)return e;if(e=e.clone(),r){let{statistics:t,histograms:n}=r;t?.length&&(e.statistics=t.map(e=>({min:e.min,max:e.max,avg:e.avg,stddev:e.stddev}))),n?.length&&(e.histograms=n)}return e}function yt(e){let t=e.bandCount;if(t===1)return null;if(t===2)return[0];let{bandInfos:n}=e,r;if(n.length===t){let{red:e,green:t,blue:i,nir:a}=bt(n);e!=null&&t!=null&&i!=null?r=[e,t,i]:a!=null&&e!=null&&t!=null&&(r=[a,e,t])}return!r&&t>=3&&(r=[0,1,2]),r}function bt(e){let t={};for(let n=0;n<e.length;n++){let r=e[n].name.toLowerCase();r===`red`?t.red=n:r===`green`?t.green=n:r===`blue`?t.blue=n:r!==`nearinfrared`&&r!==`nearinfrared_1`&&r!==`nir`||(t.nir=n)}if(t.blue==null||t.green==null||t.red==null||t.nir==null){let n=xt(e);if(t.blue??=Y(n,480),t.green??=Y(n,550),t.red??=Y(n,660),t.nir==null){let r=xt(e,800);t.nir=Y(r,810)??Y(n,810)}}return t}function Y(e,t,n=60){let r,i=n;for(let n of e){let e=Math.abs(n.wavelength-t);e<=i&&(i=e,r=n.index)}return r}function xt(e,t){return e.map(({name:e,minWavelength:n,maxWavelength:r},i)=>/thermal/i.test(e)||/pan/i.test(e)||t!=null&&r!=null&&r<t?null:{wavelength:n!=null&&r!=null?(n+r)/2:n??r??0,index:i}).filter(e=>e!=null)}function St(e){let t=`percent-clip`,{pixelType:n,dataType:r,histograms:i,statistics:a,multidimensionalInfo:o}=e,s=dt.has(r)||r===`generic`&&o!=null;return n!==`u8`||r!==`processed`&&i!=null&&a!=null?n===`u8`||r===`elevation`||s?t=`min-max`:i==null?a!=null&&(t=`min-max`):t=`percent-clip`:t=`none`,t}function Ct(e,t,n,r){if(!Te(e,t))return null;let{attributeTable:i,statistics:a}=e,o=wt(i,t),s=X(i,`red`),c=X(i,`green`),l=X(i,`blue`),u=new ne,d=[],f=new Set,p=!!(s&&c&&l);if(i!=null)i.features.forEach(e=>{let t=e.attributes[o.name];if(!f.has(e.attributes[o.name])&&t!=null){f.add(t);let n=p&&(s.type===`single`||s.type===`double`)&&(c.type===`single`||c.type===`double`)&&(l.type===`single`||l.type===`double`)&&!i.features.some(e=>e.attributes[s.name]>1||e.attributes[c.name]>1||e.attributes[l.name]>1)?255:1;d.push(new ge({value:e.attributes[o.name],label:e.attributes[o.name]+``,symbol:new te({style:`solid`,outline:null,color:new g(p?[e.attributes[s.name]*n,e.attributes[c.name]*n,e.attributes[l.name]*n,1]:[0,0,0,0])})}))}});else if(a?.[0])for(let e=a[0].min;e<=a[0].max;e++)d.push(new ge({value:e,label:e.toString(),symbol:new te({style:`solid`,outline:null,color:new g([0,0,0,0])})}));if(d.sort((e,t)=>e.value&&typeof e.value.valueOf()==`string`?0:e.value>t.value?1:-1),!p){let e=Ee(ut,{numColors:d.length});d.forEach((t,n)=>t.symbol.color=new g(e[n].slice(1,4))),u.colorRamp=ut}if(n||r){let e=n||Ee(r,{numColors:d.length}).map(e=>e.slice(1));d.forEach((t,n)=>t.symbol.color=new g(e[n])),u.colorRamp=r}return new ee({field:o.name,uniqueValueInfos:d,authoringInfo:u})}function wt(e,t,r){let i;return e==null?i=new n({name:`value`}):(i=t?e.fields.find(e=>t.toLowerCase()===e.name.toLowerCase()):Tt(e.fields),i||(r||(i=e.fields.find(e=>e.type===`string`)),i||=X(e,`value`))),i}function Tt(e){let t;for(let n=0;n<e.length;n++){let r=e[n].name.toLowerCase();if(e[n].type===`string`){if(r.startsWith(`class`)){t=e[n];break}t==null&&(r.endsWith(`name`)||r.endsWith(`type`))&&(t=e[n])}}return t}function X(e,t){return e==null?null:e.fields.find(e=>e.name.toLowerCase()===t)}function Et(e){if(!Me(e))return null;let t,{attributeTable:n,colormap:r}=e;if(n!=null){let e=X(n,`value`),r=wt(n,null,!0);r.type===`string`&&(t={},n.features.forEach(n=>{let i=n.attributes;t[i[e.name]]=r?i[r.name]:i[e.name]}))}return U.createFromColormap(r,t)}var Dt=new Map([[`m/s`,`meter-per-second`],[`km/h`,`kilometer-per-hour`],[`knots`,`knots`],[`ft/s`,`feet-per-second`],[`mph`,`mile-per-hour`]]);function Ot(e){if(!Ne(e))return null;let t;if(e.statistics!=null&&e.statistics.length&&(e.dataType===`vector-magdir`||e.dataType===`vector-uv`)){let{minMagnitude:n,maxMagnitude:r}=jt(e.dataType,e.statistics);t=[new se({field:`Magnitude`,minSize:10,maxSize:40,minDataValue:n,maxDataValue:r})]}let n=e.multidimensionalInfo==null?void 0:Dt.get(e.multidimensionalInfo.variables[0].unit),r=new J({visualVariables:t,inputUnit:n,rotationType:`geographic`});return r.visualVariables=[...r.sizeVariables,...r.rotationVariables],r}function kt(e){return{color:e.symbolLayers[0].material?.color,type:`esriSFS`,style:`esriSFSSolid`}}function At(e){if(e.type===`uniqueValue`){let t=e.uniqueValueInfos;return(t?.[0].symbol)?.symbolLayers?.length&&(e.uniqueValueInfos=t?.map(e=>({value:e.value,label:e.label,symbol:e.symbol?kt(e.symbol):null}))),e}if(e.type===`classBreaks`){let t=e.classBreakInfos;return t[0].symbol?.symbolLayers?.length&&(e.classBreakInfos=t.map(e=>({classMinValue:e.classMinValue,classMaxValue:e.classMaxValue,label:e.label,symbol:e.symbol?kt(e.symbol):null}))),e}return e}function jt(e,t){let n,r;if(e===`vector-magdir`)n=t[0].min,r=t[0].max;else{let e=t[0].min,i=t[0].max,a=t[1].min,o=t[1].max;n=0,r=Math.max(Math.abs(e),Math.abs(a),Math.abs(i),Math.abs(o))}return{minMagnitude:n,maxMagnitude:r}}var Mt={key:`type`,base:null,typeMap:{"class-breaks":_,flow:B,"raster-colormap":U,"raster-shaded-relief":W,"raster-stretch":G,"unique-value":ee,"vector-field":J}},Nt={...Mt,typeMap:{...Mt.typeMap}};delete Nt.typeMap[`vector-field`];var Pt={classBreaks:_,flowRenderer:B,rasterColormap:U,rasterShadedRelief:W,rasterStretch:G,uniqueValue:ee,vectorField:J};function Ft(e){return e&&Pt[e.type]||null}function It(e,t){if(!e)return null;if(e.type===`classBreaks`&&e.classificationMethod){let t=e.authoringInfo||{classificationMethod:``};t.classificationMethod=e.classificationMethod,e.authoringInfo=t}e.type===`vectorField`&&e.visualVariables&&!Array.isArray(e.visualVariables)&&(e.visualVariables=[e.visualVariables]);let n=Ft(e);if(n){let r=new n;return r.read(e,t),r}return t?.messages&&e&&t.messages.push(new ve(`renderer:unsupported`,`Renderers of type '`+(e.type||`unknown`)+`' are not supported`,{definition:e,context:t})),null}var Lt,Z=Lt=class extends S{constructor(e){super(e),this.geometry=null,this.mosaicRule=null,this.rasterFunction=null,this.pixelSize=null,this.raster=void 0,this.timeExtent=null}writeGeometry(t,n,r){t!=null&&(n.geometryType=e(t),n[r]=t.toJSON())}clone(){return new Lt(t({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,pixelSize:this.pixelSize,raster:this.raster,timeExtent:this.timeExtent}))}};o([h({types:ue,json:{read:m}})],Z.prototype,`geometry`,void 0),o([x(`geometry`)],Z.prototype,`writeGeometry`,null),o([h({type:L,json:{write:!0}})],Z.prototype,`mosaicRule`,void 0),o([h({type:P,json:{write:!0,name:`renderingRule`}})],Z.prototype,`rasterFunction`,void 0),o([h({type:r,json:{write:!0}})],Z.prototype,`pixelSize`,void 0),o([h({json:{write:!0}})],Z.prototype,`raster`,void 0),o([h({type:re,json:{read:{source:`time`},write:{target:`time`}}})],Z.prototype,`timeExtent`,void 0),Z=Lt=o([b(`esri.rest.support.ImageHistogramParameters`)],Z);var Rt,Q=Rt=class extends S{constructor(){super(...arguments),this.geometry=null,this.interpolation=`nearest`,this.mosaicRule=null,this.outFields=null,this.pixelSize=null,this.raster=void 0,this.returnFirstValueOnly=!0,this.sampleDistance=null,this.sampleCount=null,this.sliceId=null,this.timeExtent=null}writeGeometry(t,n,r){t!=null&&(n.geometryType=e(t),n[r]=t.toJSON())}set locations(e){if(e?.length){let t=new de({spatialReference:e[0].spatialReference,points:e.map(({x:e,y:t})=>[e,t])});this._set(`locations`,e),this.geometry=t}}clone(){return new Rt(t({geometry:this.geometry,locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))}};o([h({types:ue,json:{read:m}})],Q.prototype,`geometry`,void 0),o([x(`geometry`)],Q.prototype,`writeGeometry`,null),o([h({type:[r]})],Q.prototype,`locations`,null),o([h({type:String,json:{type:De.jsonValues,read:De.read,write:De.write}})],Q.prototype,`interpolation`,void 0),o([h({type:L,json:{write:!0}})],Q.prototype,`mosaicRule`,void 0),o([h({type:[String],json:{write:!0}})],Q.prototype,`outFields`,void 0),o([h({type:r,json:{write:!0}})],Q.prototype,`pixelSize`,void 0),o([h({type:String,json:{write:!0}})],Q.prototype,`raster`,void 0),o([h({type:Boolean,json:{write:!0}})],Q.prototype,`returnFirstValueOnly`,void 0),o([h({type:Number,json:{write:!0}})],Q.prototype,`sampleDistance`,void 0),o([h({type:Number,json:{write:!0}})],Q.prototype,`sampleCount`,void 0),o([h({type:Number,json:{write:!0}})],Q.prototype,`sliceId`,void 0),o([h({type:re,json:{read:{source:`time`},write:{target:`time`}}})],Q.prototype,`timeExtent`,void 0),Q=Rt=o([b(`esri.rest.support.ImageSampleParameters`)],Q);var $=class extends S{constructor(){super(...arguments),this.attributes=null,this.location=null,this.locationId=null,this.rasterId=null,this.resolution=null,this.pixelValue=null}};o([h({json:{write:!0}})],$.prototype,`attributes`,void 0),o([h({type:r,json:{write:!0}})],$.prototype,`location`,void 0),o([h({json:{write:!0}})],$.prototype,`locationId`,void 0),o([h({json:{write:!0}})],$.prototype,`rasterId`,void 0),o([h({json:{write:!0}})],$.prototype,`resolution`,void 0),o([h({json:{write:!0}})],$.prototype,`pixelValue`,void 0),$=o([b(`esri.rest.support.ImageSample`)],$);var zt=class extends S{constructor(){super(...arguments),this.samples=[]}};o([h({type:[$],json:{write:!0}})],zt.prototype,`samples`,void 0),zt=o([b(`esri.rest.support.ImageSampleResult`)],zt);var Bt=class{constructor(){this._workerThread=null,this._destroyed=!1}async initialize(){let e=await s(`RasterWorker`);this._destroyed?e.close():this._workerThread=e}destroy(){this._destroyed=!0,this._workerThread&&=(this._workerThread.close(),null)}async convertVectorFieldData(e,t){if(!this._workerThread)throw new v(`raster-jobhandler:no-connection`,`no available worker connection`);let n=e.pixelBlock.getTransferableObject().pixelBlock,r=await this._workerThread.invoke(`convertVectorFieldData`,{pixelBlock:n,type:e.dataType},t);return r?new T(r):null}async convertPixelBlockToFeatures(e,t){if(!this._workerThread)throw new v(`raster-jobhandler:no-connection`,`no available worker connection`);let n=await this._workerThread.invoke(`convertPixelBlockToFeatures`,{pixelBlock:e.pixelBlock.toJSON(),extent:e.extent.toJSON(),fieldNames:e.fieldNames,skipFactor:e.skipFactor,pixelIdOffset:e.pixelIdOffset,imageRowSize:e.imageRowSize},t),r=e.extent.spatialReference?.toJSON();return n.forEach(e=>e.geometry.spatialReference=r),n}computeStatisticsHistograms(e,t){if(!this._workerThread)throw new v(`raster-jobhandler:no-connection`,`no available worker connection`);let{transferList:n,pixelBlock:r}=e.pixelBlock.getTransferableObject();return t?.transferPixelsToWorker&&(t={...t,transferList:n}),this._workerThread.invoke(`computeStatisticsHistograms`,{...e,pixelBlock:r},t)}async decode(e,t){if(!this._workerThread)throw new v(`raster-jobhandler:no-connection`,`no available worker connection`);let n=await this._workerThread.invoke(`decode`,e,{...t,transferList:[e.data]});return n?new T(n):null}async symbolize(e,t){if(!this._workerThread)throw new v(`raster-jobhandler:no-connection`,`no available worker connection`);let n=e.pixelBlock?.getTransferableObject().pixelBlock,r={extent:e.extent?.toJSON(),pixelBlock:n,simpleStretchParams:e.simpleStretchParams,bandIds:e.bandIds},i=await this._workerThread.invoke(`symbolize`,r,t);return i?new T(i):null}async highlightPixels(e,t){if(!this._workerThread)throw new v(`raster-jobhandler:no-connection`,`no available worker connection`);let n={pixelBlock:e.pixelBlock?.toJSON(),renderedPixelBlock:e.renderedPixelBlock?.toJSON(),highlightOptions:e.highlightOptions},r=await this._workerThread.invoke(`highlightPixels`,n,t);e.renderedPixelBlock.pixels=r.pixels,e.renderedPixelBlock.mask=r.mask,e.renderedPixelBlock.maskIsAlpha=r.maskIsAlpha}async updateSymbolizer(e,t){if(!this._workerThread)throw new v(`raster-jobhandler:no-connection`,`no available worker connection`);let n=e?.rendererJSON?.histograms;await Promise.all(this._workerThread.broadcast(`updateSymbolizer`,{symbolizerJSON:e.toJSON(),histograms:n},t))}async updateRasterFunction(e,t){if(!this._workerThread)throw new v(`raster-jobhandler:no-connection`,`no available worker connection`);await Promise.all(this._workerThread.broadcast(`updateRasterFunction`,{rasterFunctionJSON:e.toJSON()},t))}async process(e,t){if(!this._workerThread)throw new v(`raster-jobhandler:no-connection`,`no available worker connection`);let n=await this._workerThread.invoke(`process`,{extent:e.extent?.toJSON(),primaryPixelSizes:e.primaryPixelSizes?.map(e=>e==null?null:e.toJSON()),primaryPixelBlocks:e.primaryPixelBlocks.map(e=>e?.getTransferableObject().pixelBlock),primaryRasterIds:e.primaryRasterIds},t);return n?new T(n):null}async stretch(e,t){if(!this._workerThread)throw new v(`raster-jobhandler:no-connection`,`no available worker connection`);if(!e?.pixelBlock)return null;let n={srcPixelBlock:e.pixelBlock.getTransferableObject().pixelBlock,stretchParams:e.stretchParams},r=await this._workerThread.invoke(`stretch`,n,t);return r?new T(r):null}async split(e,t){if(!this._workerThread)throw new v(`raster-jobhandler:no-connection`,`no available worker connection`);if(!e?.pixelBlock)return null;let n={srcPixelBlock:e.pixelBlock.getTransferableObject().pixelBlock,tileSize:e.tileSize,maximumPyramidLevel:e.maximumPyramidLevel,useBilinear:e.useBilinear},r=await this._workerThread.invoke(`split`,n,t);return r&&r.forEach((e,t)=>{r.set(t,e?T.fromJSON(e):null)}),r}async clipTile(e,t){if(!this._workerThread)throw new v(`raster-jobhandler:no-connection`,`no available worker connection`);if(!e?.pixelBlock)return null;let n=e.pixelBlock.getTransferableObject().pixelBlock,r={...e,pixelBlock:n},i=await this._workerThread.invoke(`clipTile`,r,t);return i?T.fromJSON(i):null}async estimateStatisticsHistograms(e,t){if(!this._workerThread)throw new v(`raster-jobhandler:no-connection`,`no available worker connection`);if(!e?.pixelBlock)return null;let n={srcPixelBlock:e.pixelBlock.getTransferableObject().pixelBlock};return await this._workerThread.invoke(`estimateStatisticsHistograms`,n,t)}async mosaicAndTransform(e,t){if(!this._workerThread)throw new v(`raster-jobhandler:no-connection`,`no available worker connection`);if(!e?.srcPixelBlocks?.length)return{pixelBlock:null};let n=e.srcPixelBlocks.map(e=>e?.getTransferableObject()),r={...e,srcPixelBlocks:n.map(e=>e?.pixelBlock)};if(t?.transferPixelsToWorker){let e=n.flatMap(e=>e?.transferList).filter(e=>e!=null);t={...t,transferList:e}}let i=await this._workerThread.invoke(`mosaicAndTransform`,r,t);return{pixelBlock:i.pixelBlock?new T(i.pixelBlock):null,localNorthDirections:i.localNorthDirections}}async createFlowMesh(e,t){if(!this._workerThread)throw new v(`raster-jobhandler:no-connection`,`no available worker connection`);let n={buffer:e.flowData.data.buffer,maskBuffer:e.flowData.mask.buffer,width:e.flowData.width,height:e.flowData.height},{meshType:r,simulationSettings:i}=e,a=await this._workerThread.invoke(`createFlowMesh`,{meshType:r,flowData:n,simulationSettings:i},{...t,transferList:[n.buffer,n.maskBuffer]});return{vertexData:new Float32Array(a.vertexBuffer),indexData:new Uint32Array(a.indexBuffer)}}getProjectionOffsetGrid(e,t){if(!this._workerThread)throw new v(`raster-jobhandler:no-connection`,`no available worker connection`);let n=e.datumTransformation==null?null:e.datumTransformation.steps.map(e=>({wkid:e.wkid,wkt:e.wkt,isInverse:e.isInverse})),r=e.rasterTransform==null?null:e.rasterTransform.toJSON(),i={projectedExtent:e.projectedExtent.toJSON(),srcBufferExtent:e.srcBufferExtent.toJSON(),pixelSize:e.pixelSize,hasWrapAround:e.hasWrapAround,spacing:e.spacing,datumTransformationSteps:n,rasterTransform:r,isAdaptive:e.isAdaptive,includeGCSGrid:e.includeGCSGrid};return this._workerThread.invoke(`getProjectionOffsetGrid`,i,t)}},Vt=e=>{let t=e,n=class extends t{constructor(){super(...arguments),this._rasterJobHandlerConfig={instance:null,refCount:0,connectionPromise:null}}get _rasterJobHandler(){return this._rasterJobHandlerConfig.instance}increaseRasterJobHandlerUsage(){this._rasterJobHandlerConfig.refCount++}decreaseRasterJobHandlerUsage(){this._rasterJobHandlerConfig.refCount--,this._rasterJobHandlerConfig.refCount<=0&&this._shutdownJobHandler()}async convertVectorFieldData(e,t,n){if(e==null)return null;let r=this._rasterJobHandler;return r?r.convertVectorFieldData({pixelBlock:e,dataType:t},n):Fe(e,t)}async createFlowMesh(e,t){let n=this._rasterJobHandler;return n?n.createFlowMesh(e,t):Ve(e.meshType,e.simulationSettings,e.flowData,t.signal==null?new AbortController().signal:t.signal)}_initJobHandler(){let{_rasterJobHandlerConfig:e}=this;if(e.connectionPromise)return e.connectionPromise;let t=new Bt;return e.connectionPromise=t.initialize().then(()=>{e.instance=t,this.notifyChange(`_rasterJobHandler`)},()=>{}),e.connectionPromise}_shutdownJobHandler(){let{_rasterJobHandlerConfig:e}=this;e.instance?.destroy(),e.instance=null,e.connectionPromise=null,e.refCount=0,this.notifyChange(`_rasterJobHandler`),this._cachedRendererJson=void 0}async _updateSymbolizer(e,t,n,r){let i=this._rasterJobHandlerConfig.instance;if(!i)return;let a=At({...t.toJSON(),variableName:n});JSON.stringify(this._cachedRendererJson)!==JSON.stringify(a)&&(r&&(e.rasterInfo=r),e.rendererJSON=a,e.bind(),await i.updateSymbolizer(e),this._cachedRendererJson=t.toJSON())}async _symbolize(e,t){let{pixelData:n,bandIds:r,simpleStretchParams:i}=e,a=this._rasterJobHandler;if(a){let e=await a.symbolize({...n,simpleStretchParams:i,bandIds:r},t);return{extent:n.extent,pixelBlock:e}}let o=e.symbolizer.symbolize({...n,simpleStretchParams:i,bandIds:r});return{extent:n.extent,pixelBlock:o}}};return o([h({clonable:!1})],n.prototype,`_rasterJobHandler`,null),o([h({clonable:!1})],n.prototype,`_cachedRendererJson`,void 0),o([h({clonable:!1})],n.prototype,`_rasterJobHandlerConfig`,void 0),n=o([b(`esri.layers.mixins.RasterJobHandlerMixin`)],n),n};export{R as _,Z as a,Nt as c,mt as d,gt as f,ht as g,ft as h,Q as i,pt as l,At as m,zt as n,It as o,yt as p,$ as r,Mt as s,Vt as t,vt as u,L as v,P as y};