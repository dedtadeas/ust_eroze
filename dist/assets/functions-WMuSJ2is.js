import{$_ as e,Ax as t,Bg as n,D_ as r,Gy as i,In as a,O_ as o,Q_ as s,S_ as c,T_ as l,Vn as u,Vx as d,Y_ as f,Z_ as p,_E as m,__ as h,aS as g,av as _,b_ as v,d_ as y,e_ as b,ev as x,h_ as S,hm as C,l_ as w,m_ as T,mm as E,p_ as D,tv as ee,u_ as O,w_ as k,y_ as A}from"./index-BqmCqmfp.js";import{W as j,Y as M,at as N,ct as P,g as F,t as I,tt as L,v as R}from"./Dictionary-B3Q9BFVY.js";function z(e,t,n){return Math.sqrt((e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]!==void 0&&t[2]!==void 0?(e[2]*n-t[2]*n)**2:0))}function te(e,t,n){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]!==void 0&&t[2]!==void 0?(e[2]*n-t[2]*n)**2:0)}var B=[];for(let e of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){let t=e[0];for(let n=1;n<e.length;n++)B[e[n]]=t}var V=[];function H(e){return e.vcsWkid&&B[e.vcsWkid]!==void 0?V[B[e.vcsWkid]]:e.latestVcsWkid&&B[e.latestVcsWkid]!==void 0?V[B[e.latestVcsWkid]]:1}function U(e,t,n){let r=t[0]-e[0],i=t[1]-e[1];if(n){let e=t[2]-t[2];return Math.sqrt(r*r+i*i+e*e)}return Math.sqrt(r*r+i*i)}function ne(e,t,n){let r=t[0]-e[0],i=t[1]-e[1];if(n){let e=t[2]-t[2];return r*r+i*i+e*e}return r*r+i*i}function re(e,t){return e.x*t.x+e.y*t.y}function ie(e,t){return e.x*t.y-t.x*e.y}function W(e,t,n=0){for(;e<n;)e+=t;let r=n+t;for(;e>=r;)e-=t;return e}function G(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}function ae(e,t){return W(G(e,t),2*Math.PI)*(180/Math.PI)}function oe(e,t){return W(Math.PI/2-G(e,t),2*Math.PI)*(180/Math.PI)}function K(e,t,n){let r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return Math.atan2(ie(r,i),re(r,i))}function q(e,t,n){return i(W(K(e,t,n),2*Math.PI))}function se(e,t,n){return i(W(-1*K(e,t,n),2*Math.PI))}function ce(e,t,n){return Math.max(t,Math.min(n,e))}function le(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ue(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function de(e,t,n){let r=[n[0]-t[0],n[1]-t[1],n[2]-t[2]],i=ce(le(r,[e[0]-t[0],e[1]-t[1],e[2]-t[2]])/ue(r),0,1);return[t[0]+(n[0]-t[0])*i,t[1]+(n[1]-t[1])*i,t[2]+(n[2]-t[2])*i]}function fe(e,t,n){let r=0,i=n[0]-t[0],a=n[1]-t[1],o=i*i+a*a;return o===0?r=.5:(r=((e[0]-t[0])*i+(e[1]-t[1])*a)/o,r<0?r=0:r>1&&(r=1)),r<=.5?[t[0]+(n[0]-t[0])*r,t[1]+(n[1]-t[1])*r]:[n[0]-(n[0]-t[0])*(1-r),n[1]-(n[1]-t[1])*(1-r)]}V[9002]=.3048,V[9003]=.3048006096012192,V[9095]=.3048007491;function pe(e,t,n){if(v(t))return s(e,t,n);if(k(t)){let r=x(e,t,n)[0];if(r==null)throw new m(`closestPointOnCurve:unexpected-error`,`Failed to find close point on bezier curve`);return r}if(l(t)){let i=r(e,t);return p(i,n)}if(h(t)){let r=T(e,t);return p(r,n)}let i=O(e,t);return y(i,n)}function me(e,t,n=1){if(k(t))return ee(e,t,n);if(l(t)){let n=r(e,t);return n.isInvalid?Math.sqrt(_(e,t.c[0])):f(n)}if(h(t)){let n=T(e,t);return n.isInvalid?Math.sqrt(_(e,t.a[0])):f(n)}return w(e,t,n)}var J=1e-6;function he(t,n,r,i){let a=x(t,n,r).filter(({distance:e})=>e<=i),o=[],s=0,c=n;for(let{t:n}of a){let r=(n-s)/(1-s);if(r<J||1-r<J)continue;let[i,a]=e(t,c,n);o.push(i),c=a,s=n}return o.push(c),o}function ge(e,t,n,i){let a=r(e,t);if(a.isInvalid)return[c(t)];let{t:s,distance:l}=p(a,n);return l<=i?o(a,t,s):[c(t)]}function _e(e,t,n,r){let i=T(e,t);if(i.isInvalid)return[c(t)];let{t:a,distance:o}=p(i,n);return o<=r?S(i,t,a):[c(t)]}function ve(e,t,n,r){let i=O(e,t);if(i.isInvalid)return[c(t)];let{t:a,distance:o}=y(i,n);return o<=r?D(i,t,a):[c(t)]}function ye(e,t,n,r){return v(t)?[c(t)]:k(t)?he(e,t,n,r):l(t)?ge(e,t,n,r):h(t)?_e(e,t,n,r):ve(e,t,n,r)}function be(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function xe(e){let t=be(e);return[e[0]/t,e[1]/t,e[2]/t]}function Y(e,t,n,r){let i=xe([t[0]-e[0],t[1]-e[1],t[2]*r-e[2]*r]);return[e[0]+i[0]*n,e[1]+i[1]*n,e[2]+i[2]*n]}function X(e,t,n,r){return e+(t-e)/n*r}function Z(e,t,n){let r=t[0]-e[0],i=t[1]-e[1],a=Math.sqrt(r*r+i*i);return r/=a,i/=a,r*=n,i*=n,[e[0]+r,e[1]+i]}function Se(e,n){if(!e)return null;switch(e.type){case`extent`:case`multipoint`:case`mesh`:case`point`:return null}let r=e.type===`polygon`?e.rings:e.paths,i=1;if((e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid)&&(i=H(e.spatialReference)/g(e.spatialReference)),r.length===0||r[0].length===0||!1===e.hasM)return null;let a=-1,o=0,{hasM:s,hasZ:c}=e,l=c?3:2;for(let u of r){if(a++,u.length>0&&u[0][l]===n)return{partId:a,distanceAlong:o,coordinate:new t({hasZ:c,hasM:s,spatialReference:e.spatialReference,x:u[0][0],y:u[0][1],...c?{z:u[0][2]}:{},...s?{m:u[0][l]}:{}}),segmentId:0};let r=-1;for(let d=1;d<u.length;d++){let f=Q(u[d-1],u[d],c,i);r++;let p=u[d][l]-u[d-1][l],m=u[d][l];if(m===n)return{partId:a,distanceAlong:f+o,coordinate:new t({hasZ:c,hasM:s,spatialReference:e.spatialReference,x:u[d][0],y:u[d][1],...c?{z:u[d][2]}:{},...s?{m:u[d][l]}:{}}),segmentId:r};if(m>n&&n>u[d-1][l]){let m=(n-u[d-1][l])/p*f,h=c?Y(u[d-1],u[d],m,i):Z(u[d-1],u[d],m);h=[...h,n];let g=new t({hasZ:c,hasM:s,spatialReference:e.spatialReference,x:h[0],y:h[1],...c?{z:h[2]}:{},...s?{m:h[l]}:{}});return{partId:a,distanceAlong:o+Q(u[d-1],[g.x,g.y,...c?[g.z]:[],...s?[g.m]:[]],c,i),coordinate:g,segmentId:r}}o+=f}}return null}function Ce(e,n){if(!e)return null;switch(e.type){case`extent`:case`multipoint`:case`mesh`:case`point`:return null}let r=e.type===`polygon`?e.rings:e.paths;if(n<0)return null;let i=1;(e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid)&&(i=H(e.spatialReference)/g(e.spatialReference));let a=0,{hasZ:o,hasM:s}=e,c=o?3:2,l=-1;if(n===0)return r.length===0||r[0].length===0?null:{partId:0,coordinate:new t({hasZ:o,hasM:s,spatialReference:e.spatialReference,x:r[0][0][0],y:r[0][0][1],...o?{z:r[0][0][2]}:{},...s?{m:r[0][0][c]}:{}}),segmentId:0};for(let u of r){l++;let r=-1;for(let d=1;d<u.length;d++){r++;let f=Q(u[d-1],u[d],o,i),p=a+f;if(p===n)return{partId:l,coordinate:new t({hasZ:o,hasM:s,spatialReference:e.spatialReference,x:u[d][0],y:u[d][1],...o?{z:u[d][2]}:{},...s?{m:u[d][c]}:{}}),segmentId:r};if(p>n){let p=o?Y(u[d-1],u[d],n-a,i):Z(u[d-1],u[d],n-a);return p=[...p,X(u[d-1][c],u[d][c],f,n-a)],{partId:l,coordinate:new t({hasZ:o,hasM:s,spatialReference:e.spatialReference,x:p[0],y:p[1],...o?{z:p[2]}:{},...s?{m:p[c]}:{}}),segmentId:r}}a=p}}return null}function we(e,t){if(!e||!t)return null;let n=1;(t.spatialReference.vcsWkid||t.spatialReference.latestVcsWkid)&&(n=H(t.spatialReference)/g(t.spatialReference));let r=null,i=0;return r=e,i=e.hasZ&&t.hasZ?z([t.x,t.y,t.z],[e.x,e.y,e.z],n):U([t.x,t.y],[e.x,e.y],!1),{coordinate:r,distance:i}}function Te(e,t){if(!e||!t)return null;let n=1;(t.spatialReference.vcsWkid||t.spatialReference.latestVcsWkid)&&(n=H(t.spatialReference)/g(t.spatialReference));let r=null,i=0,a=Number.MAX_VALUE,o=-1,s=-1;for(let r of e.points||[]){s++;let i=e.hasZ&&t.hasZ?te([r[0],r[1],r[2]],[t.x,t.y,t.z],n):ne([r[0],r[1]],[t.x,t.y],!1);i<a&&(a=i,o=s)}return o<0?null:(i=a,r=e.getPoint(o),{coordinate:r,distance:Math.sqrt(i)})}function Ee(e,n){if(!e||!n)return null;let r=e.type===`polygon`?e.curveRings??e.rings:e.curvePaths??e.paths,i=1;(n.spatialReference.vcsWkid||n.spatialReference.latestVcsWkid)&&(i=H(n.spatialReference)/g(n.spatialReference));let a=Number.MAX_VALUE,o=-1,s=-1,c=-1,l=e.hasZ&&n.hasZ,u=null,d=l?[n.x,n.y,n.z]:[n.x,n.y];for(let e of r){s++;for(let t=1;t<e.length;t++){let n=De(d,e[t-1],e[t],l,i);n.distance<a&&(a=n.distance,u=n.closestPoint,c=s,o=t-1)}}if(o<0||!u)return null;let f=e.hasM&&e.hasZ?3:2,p=r[c][o],m=A(p),h=r[c][o+1],_=A(h),y=null,b=null,x=l?u[2]:null,S=v(h)?u:ye(m,h,u,.001)[0],C=Q(m,S,l,i),w=Q(m,h,l,i);e.hasM&&(b=X(m[f],_[f],w,C)),!e.hasZ||!1!==n.hasZ&&v(S)||(x=X(m[2],_[2],w,C),A(S)[2]=x,C=Q(m,S,!0,i)),y=new t({hasZ:l,hasM:e.hasM,spatialReference:n.spatialReference,x:u[0],y:u[1],...e.hasZ?{z:x}:{},...e.hasM?{m:b}:{}});let T=0;for(let t=0;t<=c;t++){let n=r[t],a=t===c?o:n.length-1;for(let t=1;t<=a;t++)T+=Q(A(n[t-1]),n[t],e.hasZ,i)}return T+=C,{partId:c,segmentId:o,coordinate:y,distance:a,distanceAlong:T}}function De(e,t,n,r,i){let a=A(t);if(v(n)){let t=r?de(e,a,n):fe(e,a,n);return{closestPoint:t,distance:r?z(t,e,i):U(t,e,!1)}}let o=pe(a,n,e);if(!o)throw new m(`arcade:closestPointOnSegment`,`The given point is not on the curve`);return{closestPoint:o.curvePoint,distance:o.distance}}function Q(e,t,n,r){return v(t)?n?z(e,t,r):U(e,t,!1):me(e,t,.001)}function $(e,t){if(!e||!t)return null;if(e.type===`extent`){let t=e;e=new b({spatialReference:e.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]})}switch(e.type){case`point`:return we(e,t)??null;case`multipoint`:return Te(e,t)??null;case`polygon`:case`polyline`:return Ee(e,t)??null;default:return null}}function Oe(e,t,n){if(M(e,2,2,t,n),!(e[0]instanceof d&&e[1]instanceof d)&&!(e[0]instanceof d&&e[1]===null)&&!(e[1]instanceof d&&e[0]===null)&&(e[0]!==null||e[1]!==null))throw new u(t,`InvalidParameter`,n)}function ke(e){if(e.type!==`polygon`&&e.type!==`polyline`&&e.type!==`extent`)return 0;let t=1;(e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid)&&(t=H(e.spatialReference)/g(e.spatialReference));let n=0;if(e.type===`polyline`)for(let r of e.paths)for(let e=1;e<r.length;e++)n+=z(r[e],r[e-1],t);else if(e.type===`polygon`)for(let r of e.rings){for(let e=1;e<r.length;e++)n+=z(r[e],r[e-1],t);(r[0][0]!==r[r.length-1][0]||r[0][1]!==r[r.length-1][1]||r[0][2]!==void 0&&r[0][2]!==r[r.length-1][2])&&(n+=z(r[0],r[r.length-1],t))}else e.type===`extent`&&(n+=2*z([e.xmin,e.ymin,0],[e.xmax,e.ymin,0],t),n+=2*z([e.xmin,e.ymin,0],[e.xmin,e.ymax,0],t),n*=2,n+=4*Math.abs(P(e.zmax,0)*t-P(e.zmin,0)*t));return n}var Ae=(e,t,r)=>{if(r=F(r),M(r,2,2,e,t),r[0]===null)return null;let i=r[0];if((C(r[0])||L(r[0]))&&(i=N(r[0],e.spatialReference)),i===null)return null;if(!(i instanceof d)||!(i instanceof n)||!E(r[1]))throw new u(e,`InvalidParameter`,t);let a=Se(i,r[1]);return a?I.convertObjectToArcadeDictionary(a,R(e),!1,!0):null},je=(e,r,i)=>{if(i=F(i),M(i,2,2,e,r),i[0]===null)return null;let a=i[0];if((C(i[0])||L(i[0]))&&(a=N(i[0],e.spatialReference)),a===null)return null;if(!(a instanceof d)||!(a instanceof n))throw new u(e,`InvalidParameter`,r);let o=i[1];if(o===null)return null;if(!(o instanceof t))throw new u(e,`InvalidParameter`,r);let s=$(a,o);return s?I.convertObjectToArcadeDictionary(s,R(e),!1,!0):null},Me=(e,t,r)=>{if(r=F(r),M(r,2,2,e,t),r[0]===null)return null;let i=r[0];if((C(r[0])||L(r[0]))&&(i=N(r[0],e.spatialReference)),i===null)return null;if(!(i instanceof d)||!(i instanceof n)||!E(r[1]))throw new u(e,`InvalidParameter`,t);let a=Ce(i,r[1]);return a?I.convertObjectToArcadeDictionary(a,R(e),!1,!0):null},Ne=new a([`geodesic`,`great-elliptic`,`loxodrome`,`normal-section`,`shape-preserving`]);function Pe(e){return e==null?`geodesic`:Ne.get(j(e))}var Fe=new a([`geometric`,`labelPoint`]);function Ie(e){return e==null?`geometric`:Fe.get(j(e))}var Le=new a([`round`,`bevel`,`miter`,`square`]);function Re(e){return e==null?`round`:Le.lookup(j(e))??`round`}export{je as a,Re as c,oe as d,ae as f,Oe as i,q as l,Ae as n,Me as o,Ie as r,ke as s,Pe as t,se as u};