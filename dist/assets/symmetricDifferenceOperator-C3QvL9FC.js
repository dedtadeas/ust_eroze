import{nD as e}from"./index-BqmCqmfp.js";import{n as t,t as n}from"./SimpleGeometryCursor-CI9GIWKa.js";import{cn as r,kt as i,ln as a,mn as o,st as s}from"./Point2D-UYEfE6HP.js";import{t as c}from"./Envelope2D-BNwQDrOT.js";import{$t as l,j as u,pn as d,vn as f}from"./UnitFactory-J9WMNXdY.js";import{l as p,p as m,s as h,t as g}from"./apiConverter-DVPFZqjR.js";var _=class{getOperatorType(){return 10003}supportsCurves(){return!0}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}executeMany(e,t,n,r){return new x(e,t,n,r)}execute(e,t,r,i){let o=new n([e]),s=new n([t]),c=this.executeMany(o,s,r,i).next();return c||a(`null output`),c}};function v(e,t,n,i){let a=e.getDimension(),o=t.getDimension();if(a!==o)return a>o?e:t;if(e.isEmpty())return t;if(t.isEmpty())return e;let s=new c,l=new c,f=new c;e.queryEnvelope(s),t.queryEnvelope(l),f.setCoords({env2D:s}),f.mergeEnvelope2D(l);let p=d(n,f,!0),m=e.getGeometryType(),h=t.getGeometryType();return m===r.enumPoint&&h===r.enumPoint?y(e,t,p):m===r.enumPoint&&h===r.enumMultiPoint?b(t,e,p):m===r.enumMultiPoint&&h===r.enumPoint?b(e,t,p):u(e,t,n,i)}function y(e,t,n,r){let a=f(n),o=a*a,s=e.getXY(),c=t.getXY(),u=new l({vd:e.getDescription()});return i.sqrDistance(s,c)>o&&(u.add(e),u.add(t)),u}function b(e,t,n,r){let i=e.getImpl().getAttributeStreamRef(0),a=e.getPointCount(),o=t.getXY(),l=e.createInstance(),u=f(n),d=new c;if(e.queryEnvelope(d),d.inflateCoords(u,u),d.contains(o)){let n=u*u,r=!1,c=s(a,!1);for(let e=0;e<a;e++){let t=i.read(2*e),a=i.read(2*e+1),s=t-o.x,l=a-o.y;s*s+l*l<=n&&(r=!0,c[e]=!0)}if(r)for(let t=0;t<a;t++)c[t]||l.addPoints(e,t,t+1);else l.addPoints(e,0,a),l.add(t)}else l.addPoints(e,0,a),l.add(t);return l}var x=class extends t{constructor(e,t,n,r){super(),this.m_progressTracker=r,this.m_index=-1,this.m_inputGeoms=e,this.m_spatialReference=n,this.m_rightGeom=t.next(),this.m_bEmpty=!this.m_rightGeom,o(this.m_rightGeom)}tock(){return!0}getRank(){return 1}next(){if(this.m_bEmpty)return null;let e=this.m_inputGeoms.next();return e?(o(e),this.m_index=this.m_inputGeoms.getGeometryID(),v(e,this.m_rightGeom,this.m_spatialReference,this.m_progressTracker)):null}getGeometryID(){return this.m_index}},S=new _;function C(e,t,n){return S.execute(e,t,n,null)}function w(e,t,r){let i=S.executeMany(new n(e),new n([t]),r,null);return Array.from(i)}function T(){return S.supportsCurves()}function E(e,t){let n=g(e);return p(C(m(e),m(t),h(n)),n)}function D(t,n){let r=t.map(m),i=g(t);return w(r,m(n),h(i)).map(e=>p(e,i)).filter(e)}var O=T(),k=Object.freeze(Object.defineProperty({__proto__:null,execute:E,executeMany:D,supportsCurves:O},Symbol.toStringTag,{value:`Module`}));export{E as i,k as n,O as r,D as t};