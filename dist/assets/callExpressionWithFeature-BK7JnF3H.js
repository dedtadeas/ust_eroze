import{_E as e,vE as t}from"./index-BqmCqmfp.js";import{i as n,n as r,r as i,t as a}from"./quantizationUtils-C5shine1.js";function o(e,n,r,i,a,o){if(e==null)return null;let s=e.references(`geometry`)&&o?c(n,i,o):n,l=e.repurposeFeature(s,a);try{return e.evaluate(l,r)}catch(e){return t.getLogger(`esri.views.2d.support.arcadeOnDemand`).warn(`Feature arcade evaluation failed:`,e),null}}var s=new Map;function c(e,t,n){let{transform:r,hasZ:i,hasM:a}=n;s.has(t)||s.set(t,l(t));let o=s.get(t)(e.geometry,r,i,a);return{...e,geometry:o}}function l(o){let s={};switch(o){case`esriGeometryPoint`:return(e,t,n,i)=>r(t,s,e,n,i);case`esriGeometryPolygon`:return(e,t,n,r)=>i(t,s,e,n,r);case`esriGeometryPolyline`:return(e,t,r,i)=>n(t,s,e,r,i);case`esriGeometryMultipoint`:return(e,t,n,r)=>a(t,s,e,n,r);default:return t.getLogger(`esri.views.2d.support.arcadeOnDemand`).error(new e(`mapview-arcade`,`Unable to handle geometryType: ${o}`)),e=>e}}export{o as t};