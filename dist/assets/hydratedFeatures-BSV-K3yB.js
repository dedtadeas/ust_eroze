import{AE as e,BE as t,Id as n,Jm as r,Ux as i,qE as a}from"./index-BqmCqmfp.js";import{n as o}from"./dehydratedPoint-Dwb3orme.js";function s(e){return`declaredClass`in e}function c(e){return`declaredClass`in e}function l(e){return`declaredClass`in e}function u(t,r,i){return t?l(t)?(t.origin!==i&&(t.origin=i),t):new n({layer:r,sourceLayer:r,origin:i,visible:t.visible,symbol:e(t.symbol),attributes:e(t.attributes),geometry:d(t.geometry)}):null}function d(e){return e==null?null:s(e)?e:r(f(e))}function f(e){let{wkid:t,wkt:n,wkt2:r,latestWkid:i}=e.spatialReference,a={wkid:t,wkt:n,wkt2:r,latestWkid:i};switch(e.type){case`point`:{let{x:t,y:n,z:r,m:i}=e;return{x:t,y:n,z:r,m:i,spatialReference:a}}case`polygon`:{let{rings:t,hasZ:n,hasM:r}=e;return{rings:p(t),hasZ:n,hasM:r,spatialReference:a}}case`polyline`:{let{paths:t,hasZ:n,hasM:r}=e;return{paths:p(t),hasZ:n,hasM:r,spatialReference:a}}case`extent`:{let{xmin:t,xmax:n,ymin:r,ymax:i,zmin:o,zmax:s,mmin:c,mmax:l,hasZ:u,hasM:d}=e;return{xmin:t,xmax:n,ymin:r,ymax:i,zmin:o,zmax:s,mmin:c,mmax:l,hasZ:u,hasM:d,spatialReference:a}}case`multipoint`:{let{points:t,hasZ:n,hasM:r}=e;return{points:g(t)?m(t):t,hasZ:n,hasM:r,spatialReference:a}}default:return}}function p(e){return h(e)?e.map(e=>m(e)):e}function m(e){return e.map(e=>Array.from(e))}function h(e){for(let t of e)if(t.length!==0)return g(t);return!1}function g(e){return e.length>0&&(t(e[0])||a(e[0]))}function _(e,t){if(!e)return null;let n;if(c(e)){if(t==null)return e.clone();if(c(t))return t.copy(e)}return t==null?(n=o(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)):(n=t,n.x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=void 0,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=void 0,n.hasM=!1)),n}function v(e){let{wkid:t,wkt:n,wkt2:r,latestWkid:a}=e,o={wkid:t,wkt:n,wkt2:r,latestWkid:a};return i.fromJSON(o)}export{_ as a,d as i,v as n,s as r,u as t};