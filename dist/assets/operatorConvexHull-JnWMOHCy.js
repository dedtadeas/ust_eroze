import{n as e,t}from"./SimpleGeometryCursor-CI9GIWKa.js";import{Cn as n,cn as r,dn as i,in as a,mn as o,rn as s,vn as c}from"./Point2D-UYEfE6HP.js";import{t as l}from"./Envelope2D-BNwQDrOT.js";import{En as u,Ut as d,Zt as f,cn as p,ln as m,qt as h,sn as g,un as _}from"./UnitFactory-J9WMNXdY.js";var v=class{getOperatorType(){return 10102}supportsCurves(){return!0}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}executeMany(e,t,n){return new y(t,e,n)}execute(e,t){return x(e)}isConvex(e,t){if(o(e),e.isEmpty())return!0;let n=e.getGeometryType();if(n===r.enumPoint)return!0;if(n===r.enumEnvelope){let t=e;return t.getXMin()!==t.getXMax()&&t.getYMin()!==t.getYMax()}if(i(n)){let t=e;return!t.getStartXY().equals(t.getEndXY())}if(n===r.enumMultiPoint)return e.getPointCount()===1;if(n===r.enumPolyline){let t=e;return t.getPathCount()===1&&t.getPointCount()===2&&!t.getXY(0).equals(t.getXY(1))}if(n===r.enumGeometryCollection){let n=e;return n.getGeometryCount()===1&&this.isConvex(n.getGeometry(0),t)}let a=e;return!(a.getPathCount()!==1||a.getPointCount()<3)&&p(a,0)}constructOrientedMinimumBoundingBox(e,t,n,r,i){d(e,t,n,r,i)}},y=class extends e{constructor(e,t,n){super(),t||a(``),this.m_progressTracker=n,this.m_index=-1,this.m_bMerge=e,this.m_bDone=!1,this.m_inputGeometryCursor=t}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}next(){if(this.m_bMerge){if(!this.m_bDone){let e=b(this.m_inputGeometryCursor);return this.m_bDone=!0,e}return null}if(!this.m_bDone){let e=this.m_inputGeometryCursor.next();if(e!==null)return s(e),o(e),this.m_index=this.m_inputGeometryCursor.getGeometryID(),x(e);this.m_bDone=!0}return null}};function b(e,t){let n=new m,r;for(;r=e.next();)s(r),o(r),n.addGeometry(r);return n.getBoundingGeometry()}function x(e,t){if(o(e),e.isEmpty())return e.createInstance();let a=e.getGeometryType();if(i(a)){let t=e;if(t.isDegenerate(0)){let e=new u;return t.queryStart(e),e}if(t.getGeometryType()===r.enumLine){let n=new u,r=new h({vd:e.getDescription()});return t.queryStart(n),r.startPathPoint(n),t.queryEnd(n),r.lineToPoint(n),r}{let n=new h({vd:e.getDescription()});return n.addSegment(t,!0),x(n)}}if(a===r.enumEnvelope){let t=e,n=new l;if(t.queryEnvelope(n),n.xmin===n.xmax&&n.ymin===n.ymax){let e=new u;return t.queryCornerByVal(0,e),e}if(n.xmin===n.xmax||n.ymin===n.ymax){let n=new u,r=new h({vd:e.getDescription()});return t.queryCornerByVal(0,n),r.startPathPoint(n),t.queryCornerByVal(1,n),r.lineToPoint(n),r}{let n=new g({vd:e.getDescription()});return n.addEnvelope(t,!1),n}}if(a===r.enumGeometryCollection)return b(f(e,-1));if(S(e)){if(a===r.enumMultiPoint){let t=e,n=new u;return t.getPointByVal(0,n),n}return e}return c(n(a)),_(e)}function S(e,t){if(o(e),e.isEmpty())return!0;let n=e.getGeometryType();if(n===r.enumPoint)return!0;if(n===r.enumEnvelope){let t=e;return t.getXMin()!==t.getXMax()&&t.getYMin()!==t.getYMax()}if(i(n)){let t=e;if(t.isDegenerate(0))return!1;if(n===r.enumLine)return!0;let i=new h;return i.addSegment(t,!0),S(i)}if(n===r.enumMultiPoint)return e.getPointCount()===1;if(n===r.enumPolyline){let t=e;return!t.hasNonLinearSegments()&&t.getPathCount()===1&&t.getPointCount()===2&&!t.getXY(0).equals(t.getXY(1))}if(n===r.enumGeometryCollection){let t=e;return t.getGeometryCount()===1&&S(t.getGeometry(0))}let a=e;return!(a.getPathCount()!==1||a.getPointCount()<3)&&p(a,0)}var C=new v;function w(e){return C.execute(e,null)}function T(e,n){let r=C.executeMany(new t(e),n,null);return Array.from(r)}function E(e){return C.isConvex(e,null)}function D(){return C.supportsCurves()}export{w as i,T as n,D as r,E as t};