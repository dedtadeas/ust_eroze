import{SD as e}from"./index-BqmCqmfp.js";import{$t as t,At as n,B as r,Bt as i,D as a,Dt as o,Et as s,F as c,G as l,Lt as u,N as d,P as f,Qt as p,T as m,Tt as h,U as g,Ut as _,V as v,Wt as y,X as b,Yt as x,Zt as S,a as C,ct as w,d as T,f as E,ft as D,i as O,j as k,jt as A,kt as j,lt as M,m as N,mt as ee,n as P,st as te,t as ne,u as F,v as I,yt as L,z as re,zt as R}from"./Theme-Dpr4FPaR.js";import{n as z}from"./DefaultTheme-CKCDheUT.js";import{n as ie,t as ae}from"./Button-BkuHOpqd.js";import{a as oe,c as B,i as V,n as se,o as ce,r as le,s as ue,t as de}from"./Tick-3KKt_E4N.js";import{t as fe}from"./ColorSet-BiQ4UCjk.js";Array.prototype.slice;function pe(e){return typeof e==`object`&&`length`in e?e:Array.from(e)}function me(e){this._context=e}me.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function he(e){return new me(e)}function ge(e){return e[0]}function _e(e){return e[1]}function ve(e,t){var n=V(!0),r=null,i=he,a=null,o=le(s);e=typeof e==`function`?e:e===void 0?ge:V(e),t=typeof t==`function`?t:t===void 0?_e:V(t);function s(s){var c,l=(s=pe(s)).length,u,d=!1,f;for(r??(a=i(f=o())),c=0;c<=l;++c)!(c<l&&n(u=s[c],c,s))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+e(u,c,s),+t(u,c,s));if(f)return a=null,f+``||null}return s.x=function(t){return arguments.length?(e=typeof t==`function`?t:V(+t),s):e},s.y=function(e){return arguments.length?(t=typeof e==`function`?e:V(+e),s):t},s.defined=function(e){return arguments.length?(n=typeof e==`function`?e:V(!!e),s):n},s.curve=function(e){return arguments.length?(i=e,r!=null&&(a=i(r)),s):i},s.context=function(e){return arguments.length?(e==null?r=a=null:a=i(r=e),s):r},s}function ye(e,t,n){var r=null,i=V(!0),a=null,o=he,s=null,c=le(l);e=typeof e==`function`?e:e===void 0?ge:V(+e),t=typeof t==`function`?t:V(t===void 0?0:+t),n=typeof n==`function`?n:n===void 0?_e:V(+n);function l(l){var u,d,f,p=(l=pe(l)).length,m,h=!1,g,_=Array(p),v=Array(p);for(a??(s=o(g=c())),u=0;u<=p;++u){if(!(u<p&&i(m=l[u],u,l))===h)if(h=!h)d=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=u-1;f>=d;--f)s.point(_[f],v[f]);s.lineEnd(),s.areaEnd()}h&&(_[u]=+e(m,u,l),v[u]=+t(m,u,l),s.point(r?+r(m,u,l):_[u],n?+n(m,u,l):v[u]))}if(g)return s=null,g+``||null}function u(){return ve().defined(i).curve(o).context(a)}return l.x=function(t){return arguments.length?(e=typeof t==`function`?t:V(+t),r=null,l):e},l.x0=function(t){return arguments.length?(e=typeof t==`function`?t:V(+t),l):e},l.x1=function(e){return arguments.length?(r=e==null?null:typeof e==`function`?e:V(+e),l):r},l.y=function(e){return arguments.length?(t=typeof e==`function`?e:V(+e),n=null,l):t},l.y0=function(e){return arguments.length?(t=typeof e==`function`?e:V(+e),l):t},l.y1=function(e){return arguments.length?(n=e==null?null:typeof e==`function`?e:V(+e),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(e){return arguments.length?(i=typeof e==`function`?e:V(!!e),l):i},l.curve=function(e){return arguments.length?(o=e,a!=null&&(s=o(a)),l):o},l.context=function(e){return arguments.length?(e==null?a=s=null:s=o(a=e),l):a},l}var be=class extends ne{setupDefaultRules(){super.setupDefaultRules();let e=this._root.interfaceColors,r=this._root.language,i=this.rule.bind(this);i(`XYChart`).setAll({colors:fe.new(this._root,{}),paddingLeft:20,paddingRight:20,paddingTop:16,paddingBottom:16,panX:!1,panY:!1,wheelStep:.25,arrangeTooltips:!0,pinchZoomX:!1,pinchZoomY:!1}),i(`XYSeries`).setAll({legendLabelText:`{name}`}),i(`Rectangle`,[`plotbackground`,`xy`,`background`]).setAll({fill:re.fromHex(0),fillOpacity:0}),i(`XYChart`,[`scrollbar`,`chart`]).setAll({paddingBottom:0,paddingLeft:0,paddingTop:0,paddingRight:0,colors:fe.new(this._root,{saturation:0})});{let t=i(`Graphics`,[`scrollbar`,`overlay`]);t.setAll({fillOpacity:.5}),z(t,`fill`,e,`background`)}i(`RoundedRectangle`,[`xy`,`scrollbar`,`thumb`]).setAll({cornerRadiusTR:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusBL:0,fillOpacity:0,focusable:!0}),i(`RoundedRectangle`,[`xy`,`scrollbar`,`thumb`]).states.create(`hover`,{fillOpacity:.4}),i(`RoundedRectangle`,[`xy`,`scrollbar`,`chart`,`background`]).setAll({cornerRadiusTL:0,cornerRadiusBL:0,cornerRadiusTR:0,cornerRadiusBR:0}),i(`RoundedRectangle`,[`xy`,`scrollbar`,`chart`,`background`,`resize`,`button`]).setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),i(`AxisRendererX`,[`xy`,`chart`,`scrollbar`]).setAll({strokeOpacity:0,inside:!0}),i(`AxisRendererY`,[`xy`,`chart`,`scrollbar`]).setAll({strokeOpacity:0,inside:!0,minGridDistance:5}),i(`AxisLabel`,[`xy`,`scrollbar`,`x`]).setAll({opacity:.5,centerY:S,minPosition:.01,maxPosition:.99,fontSize:`0.8em`}),i(`AxisLabel`,[`category`]).setAll({text:`{category}`,populateText:!0}),i(`AxisLabel`,[`x`]).setAll({centerY:0}),i(`AxisLabel`,[`x`,`inside`]).setAll({centerY:S}),i(`AxisLabel`,[`x`,`inside`,`opposite`]).setAll({centerY:0}),i(`AxisLabel`,[`x`,`opposite`]).setAll({centerY:S}),i(`AxisLabel`,[`y`]).setAll({centerX:S}),i(`AxisLabel`,[`y`,`inside`]).setAll({centerX:0}),i(`AxisLabel`,[`y`,`inside`,`opposite`]).setAll({centerX:S}),i(`AxisLabel`,[`y`,`opposite`]).setAll({centerX:0}),i(`AxisLabel`,[`minor`]).setAll({fontSize:`0.6em`}),i(`AxisLabel`,[`xy`,`scrollbar`,`y`]).setAll({visible:!1}),i(`Grid`,[`xy`,`scrollbar`,`y`]).setAll({visible:!1}),i(`Grid`,[`xy`,`scrollbar`,`x`]).setAll({opacity:.5}),i(`XYCursor`).setAll({behavior:`none`,layer:30,exportable:!1,snapToSeriesBy:`xy`,moveThreshold:1});{let t=i(`Grid`,[`cursor`,`x`]);t.setAll({forceInactive:!0,strokeOpacity:.8,strokeDasharray:[2,2],role:`slider`,ariaLabel:r.translate(`Use left and right arrows to move selection`)}),z(t,`stroke`,e,`alternativeBackground`)}{let t=i(`Grid`,[`cursor`,`y`]);t.setAll({forceInactive:!0,strokeOpacity:.8,strokeDasharray:[2,2],role:`slider`,ariaLabel:r.translate(`Use up and down arrows to move selection`)}),z(t,`stroke`,e,`alternativeBackground`)}{let t=i(`Graphics`,[`cursor`,`selection`]);t.setAll({fillOpacity:.15}),z(t,`fill`,e,`alternativeBackground`)}i(`Axis`).setAll({zoomOut:!0,start:0,end:1,minZoomCount:1,maxZoomCount:1/0,maxZoomFactor:1e3,maxDeviation:.1,snapTooltip:!0,tooltipLocation:.5,panX:!0,panY:!0,zoomX:!0,zoomY:!0,fixAxisSize:!0}),i(`AxisLabel`).setAll({location:.5,multiLocation:0,centerX:p,centerY:p,paddingTop:3,paddingBottom:3,paddingLeft:5,paddingRight:5}),i(`Container`,[`axis`,`header`]).setAll({layer:30}),i(`Rectangle`,[`axis`,`header`,`background`]).setAll({crisp:!0});{let t=i(`AxisRenderer`);t.setAll({crisp:!0,strokeOpacity:0}),z(t,`stroke`,e,`grid`)}i(`AxisRendererX`).setAll({minGridDistance:120,opposite:!1,inversed:!1,cellStartLocation:0,cellEndLocation:1,width:S}),i(`AxisRendererY`).setAll({minGridDistance:40,opposite:!1,inversed:!1,cellStartLocation:0,cellEndLocation:1,height:S});{let t=i(`Rectangle`,[`axis`,`thumb`,`zoomgrip`]);t.setAll({fillOpacity:0}),z(t,`fill`,e,`alternativeBackground`),t.states.create(`hover`,{fillOpacity:.1})}i(`Rectangle`,[`axis`,`thumb`,`x`,`zoomgrip`]).setAll({cursorOverStyle:`ew-resize`}),i(`Rectangle`,[`axis`,`thumb`,`y`,`zoomgrip`]).setAll({cursorOverStyle:`ns-resize`});{let t=i(`Grid`);t.setAll({location:0,strokeOpacity:.15,crisp:!0}),z(t,`stroke`,e,`grid`)}{let t=i(`Grid`,[`minor`]);t.setAll({location:0,strokeOpacity:.07,crisp:!0}),z(t,`stroke`,e,`grid`)}i(`Grid`,[`base`]).setAll({strokeOpacity:.3});{let t=i(`Graphics`,[`axis`,`fill`]);t.setAll({visible:!1,isMeasured:!1,position:`absolute`,fillOpacity:.05}),z(t,`fill`,e,`alternativeBackground`)}i(`Graphics`,[`axis`,`fill`,`range`]).setAll({isMeasured:!0}),i(`Graphics`,[`series`,`fill`,`range`]).setAll({visible:!1,isMeasured:!0}),i(`Grid`,[`series`,`range`]).setAll({visible:!1}),i(`AxisTick`,[`series`,`range`]).setAll({visible:!1}),i(`AxisLabel`,[`series`,`range`]).setAll({visible:!1});{let t=i(`AxisTick`);t.setAll({location:.5,multiLocation:0,strokeOpacity:1,isMeasured:!1,position:`absolute`,visible:!1}),z(t,`stroke`,e,`grid`)}i(`CategoryAxis`).setAll({startLocation:0,endLocation:1,fillRule:(e,t)=>{let n=e.get(`axisFill`);n&&(!y(t)||t%2==0?n.setPrivate(`visible`,!0):n.setPrivate(`visible`,!1))}});let a=[{timeUnit:`millisecond`,count:1},{timeUnit:`millisecond`,count:5},{timeUnit:`millisecond`,count:10},{timeUnit:`millisecond`,count:50},{timeUnit:`millisecond`,count:100},{timeUnit:`millisecond`,count:500},{timeUnit:`second`,count:1},{timeUnit:`second`,count:5},{timeUnit:`second`,count:10},{timeUnit:`second`,count:30},{timeUnit:`minute`,count:1},{timeUnit:`minute`,count:5},{timeUnit:`minute`,count:10},{timeUnit:`minute`,count:15},{timeUnit:`minute`,count:30},{timeUnit:`hour`,count:1},{timeUnit:`hour`,count:3},{timeUnit:`hour`,count:6},{timeUnit:`hour`,count:12},{timeUnit:`day`,count:1},{timeUnit:`day`,count:2},{timeUnit:`day`,count:3},{timeUnit:`day`,count:4},{timeUnit:`day`,count:5},{timeUnit:`week`,count:1},{timeUnit:`month`,count:1},{timeUnit:`month`,count:2},{timeUnit:`month`,count:3},{timeUnit:`month`,count:6},{timeUnit:`year`,count:1},{timeUnit:`year`,count:2},{timeUnit:`year`,count:5},{timeUnit:`year`,count:10},{timeUnit:`year`,count:50},{timeUnit:`year`,count:100},{timeUnit:`year`,count:200},{timeUnit:`year`,count:500},{timeUnit:`year`,count:1e3},{timeUnit:`year`,count:2e3},{timeUnit:`year`,count:5e3},{timeUnit:`year`,count:1e4},{timeUnit:`year`,count:1e5}],o={millisecond:r.translate(`_date_millisecond`),second:r.translate(`_date_second`),minute:r.translate(`_date_minute`),hour:r.translate(`_date_hour`),day:r.translate(`_date_day`),week:r.translate(`_date_day`),month:r.translate(`_date_month`),year:r.translate(`_date_year`)},c={millisecond:r.translate(`_date_millisecond`),second:r.translate(`_date_second`),minute:r.translate(`_date_minute`),hour:r.translate(`_date_day`),day:r.translate(`_date_day`),week:r.translate(`_date_day`),month:r.translate(`_date_month`)+` `+r.translate(`_date_year`),year:r.translate(`_date_year`)},l={millisecond:r.translate(`_date_millisecond_full`),second:r.translate(`_date_second_full`),minute:r.translate(`_date_minute_full`),hour:r.translate(`_date_hour_full`),day:r.translate(`_date_day_full`),week:r.translate(`_date_week_full`),month:r.translate(`_date_month_full`),year:r.translate(`_date_year`)};i(`CategoryDateAxis`).setAll({markUnitChange:!0,gridIntervals:n(a),dateFormats:s(o),periodChangeDateFormats:s(c)}),i(`DateAxis`).setAll({maxZoomFactor:null,strictMinMax:!0,startLocation:0,endLocation:1,markUnitChange:!0,groupData:!1,groupCount:500,skipFirstMinor:!0,weekLabelLocation:0,gridIntervals:n(a),dateFormats:s(o),periodChangeDateFormats:s(c),tooltipDateFormats:l,groupIntervals:[{timeUnit:`millisecond`,count:1},{timeUnit:`millisecond`,count:10},{timeUnit:`millisecond`,count:100},{timeUnit:`second`,count:1},{timeUnit:`second`,count:10},{timeUnit:`minute`,count:1},{timeUnit:`minute`,count:10},{timeUnit:`hour`,count:1},{timeUnit:`day`,count:1},{timeUnit:`week`,count:1},{timeUnit:`month`,count:1},{timeUnit:`year`,count:1}],fillRule:e=>{let t=e.get(`axisFill`);if(t){let n=e.component,r=e.get(`value`),i=e.get(`endValue`),a=n.intervalDuration(),o=n.getPrivate(`baseInterval`),s=n.getPrivate(`gridInterval`,o),c=n.getPrivate(`min`,0);if(c=ce(new Date(c),s.timeUnit,s.count,this._root.locale.firstDayOfWeek,this._root.utc,void 0,this._root.timezone).getTime(),r!=null&&i!=null){let e=Math.round(Math.round((r-c)/a))/2;e==Math.round(e)?t.setPrivate(`visible`,!0):t.setPrivate(`visible`,!1)}}}}),i(`GaplessDateAxis`).setAll({fillRule:e=>{let t=e.get(`axisFill`);if(t){let n=e.get(`index`),r=!1;(!y(n)||n%2==0)&&(r=!0),t.setPrivate(`visible`,r)}}}),i(`ValueAxis`).setAll({baseValue:0,logarithmic:!1,strictMinMax:!1,autoZoom:!0,fillRule:e=>{let t=e.get(`axisFill`);if(t){let n=e.component,r=e.get(`value`),i=n.getPrivate(`step`);y(r)&&y(i)&&(k(r/i/2,5)==Math.round(r/i/2)?t.setPrivate(`visible`,!1):t.setPrivate(`visible`,!0))}}}),i(`DurationAxis`).setAll({baseUnit:`second`}),i(`XYSeries`).setAll({maskBullets:!0,stackToNegative:!0,locationX:.5,locationY:.5,snapTooltip:!1,openValueXGrouped:`open`,openValueYGrouped:`open`,valueXGrouped:`close`,valueYGrouped:`close`,seriesTooltipTarget:`series`}),i(`BaseColumnSeries`).setAll({adjustBulletPosition:!0}),i(`ColumnSeries`).setAll({clustered:!0}),i(`RoundedRectangle`,[`series`,`column`]).setAll({position:`absolute`,isMeasured:!1,width:t(70),height:t(70),strokeWidth:1,strokeOpacity:1,cornerRadiusBL:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusTR:0,fillOpacity:1,role:`figure`}),i(`LineSeries`).setAll({connect:!0,autoGapCount:1.1,stackToNegative:!1}),i(`Graphics`,[`series`,`stroke`]).setAll({position:`absolute`,strokeWidth:1,strokeOpacity:1,isMeasured:!1}),i(`Graphics`,[`series`,`fill`]).setAll({visible:!1,fillOpacity:0,position:`absolute`,strokeWidth:0,strokeOpacity:0,isMeasured:!1}),i(`Graphics`,[`line`,`series`,`legend`,`marker`,`stroke`]).setAll({draw:(e,t)=>{let n=t.parent;if(n){let t=n.height(),r=n.width();e.moveTo(0,t/2),e.lineTo(r,t/2)}}});{let t=i(`Graphics`,[`line`,`series`,`legend`,`marker`,`stroke`]).states.create(`disabled`,{});z(t,`stroke`,e,`disabled`)}i(`Graphics`,[`line`,`series`,`legend`,`marker`,`fill`]).setAll({draw:(e,t)=>{let n=t.parent;if(n){let t=n.height(),r=n.width();e.moveTo(0,0),e.lineTo(r,0),e.lineTo(r,t),e.lineTo(0,t),e.lineTo(0,0)}}});{let t=i(`Graphics`,[`line`,`series`,`legend`,`marker`,`fill`]).states.create(`disabled`,{});z(t,`stroke`,e,`disabled`)}i(`SmoothedXYLineSeries`).setAll({tension:.5}),i(`SmoothedXLineSeries`).setAll({tension:.5}),i(`SmoothedYLineSeries`).setAll({tension:.5}),i(`Candlestick`).setAll({position:`absolute`,isMeasured:!1,width:t(50),height:t(50),strokeWidth:1,strokeOpacity:1,cornerRadiusBL:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusTR:0,fillOpacity:1,role:`figure`}),i(`OHLC`).setAll({width:t(80),height:t(80)}),i(`CandlestickSeries`).setAll({lowValueXGrouped:`low`,lowValueYGrouped:`low`,highValueXGrouped:`high`,highValueYGrouped:`high`,openValueXGrouped:`open`,openValueYGrouped:`open`,valueXGrouped:`close`,valueYGrouped:`close`});{let t=i(`Rectangle`,[`column`,`autocolor`]).states.create(`riseFromOpen`,{});z(t,`fill`,e,`positive`),z(t,`stroke`,e,`positive`)}{let t=i(`Rectangle`,[`column`,`autocolor`]).states.create(`dropFromOpen`,{});z(t,`fill`,e,`negative`),z(t,`stroke`,e,`negative`)}i(`Rectangle`,[`column`,`autocolor`,`pro`]).states.create(`riseFromOpen`,{fillOpacity:0}),i(`Rectangle`,[`column`,`autocolor`,`pro`]).states.create(`dropFromOpen`,{fillOpacity:1});{let t=i(`Rectangle`,[`column`,`autocolor`,`pro`]).states.create(`riseFromPrevious`,{});z(t,`fill`,e,`positive`),z(t,`stroke`,e,`positive`)}{let t=i(`Rectangle`,[`column`,`autocolor`,`pro`]).states.create(`dropFromPrevious`,{});z(t,`fill`,e,`negative`),z(t,`stroke`,e,`negative`)}i(`RoundedRectangle`,[`rangegrip`]).setAll({strokeOpacity:0,fillOpacity:0,strokeWidth:1,width:12,height:12});{let t=i(`Graphics`,[`rangegrip`,`button`,`icon`]);t.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:e=>{e.moveTo(0,.5),e.lineTo(0,12.5),e.moveTo(2,.5),e.lineTo(2,12.5),e.moveTo(4,.5),e.lineTo(4,12.5)}}),z(t,`stroke`,e,`secondaryButtonText`)}i(`Button`,[`rangegrip`]).setAll({draggable:!0,paddingTop:0,paddingBottom:0}),i(`Button`,[`rangegrip`,`vertical`]).setAll({rotation:90,cursorOverStyle:`ns-resize`,centerX:p}),i(`Button`,[`rangegrip`,`horizontal`]).setAll({cursorOverStyle:`ew-resize`,centerX:p}),i(`Button`,[`rangegrip`,`vertical`,`left`]).setAll({centerY:S}),i(`Button`,[`rangegrip`,`vertical`,`right`]).setAll({centerY:0}),i(`Button`,[`rangegrip`,`horizontal`,`top`]).setAll({centerY:0}),i(`Button`,[`rangegrip`,`horizontal`,`bottom`]).setAll({centerY:S})}},H=class extends se{constructor(){super(...arguments),Object.defineProperty(this,`xAxes`,{enumerable:!0,configurable:!0,writable:!0,value:new f}),Object.defineProperty(this,`yAxes`,{enumerable:!0,configurable:!0,writable:!0,value:new f}),Object.defineProperty(this,`topAxesContainer`,{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(O.new(this._root,{width:S,layout:this._root.verticalLayout}))}),Object.defineProperty(this,`yAxesAndPlotContainer`,{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(O.new(this._root,{width:S,height:S,layout:this._root.horizontalLayout}))}),Object.defineProperty(this,`bottomAxesContainer`,{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(O.new(this._root,{width:S,layout:this._root.verticalLayout}))}),Object.defineProperty(this,`leftAxesContainer`,{enumerable:!0,configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(O.new(this._root,{height:S,layout:this._root.horizontalLayout}))}),Object.defineProperty(this,`plotsContainer`,{enumerable:!0,configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(O.new(this._root,{width:S,height:S,maskContent:!1}))}),Object.defineProperty(this,`plotContainer`,{enumerable:!0,configurable:!0,writable:!0,value:this.plotsContainer.children.push(O.new(this._root,{width:S,height:S}))}),Object.defineProperty(this,`topPlotContainer`,{enumerable:!0,configurable:!0,writable:!0,value:this.plotsContainer.children.push(O.new(this._root,{width:S,height:S}))}),Object.defineProperty(this,`gridContainer`,{enumerable:!0,configurable:!0,writable:!0,value:this.plotContainer.children.push(O.new(this._root,{width:S,height:S,isMeasured:!1}))}),Object.defineProperty(this,`topGridContainer`,{enumerable:!0,configurable:!0,writable:!0,value:O.new(this._root,{width:S,height:S,isMeasured:!1})}),Object.defineProperty(this,`rightAxesContainer`,{enumerable:!0,configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(O.new(this._root,{height:S,layout:this._root.horizontalLayout}))}),Object.defineProperty(this,`axisHeadersContainer`,{enumerable:!0,configurable:!0,writable:!0,value:this.plotContainer.children.push(O.new(this._root,{}))}),Object.defineProperty(this,`zoomOutButton`,{enumerable:!0,configurable:!0,writable:!0,value:this.topPlotContainer.children.push(ae.new(this._root,{themeTags:[`zoom`],icon:T.new(this._root,{themeTags:[`button`,`icon`]})}))}),Object.defineProperty(this,`_movePoint`,{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(this,`_wheelDp`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_otherCharts`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_movePoints`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_downStartX`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_downEndX`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_downStartY`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_downEndY`,{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._defaultThemes.push(be.new(this._root)),super._afterNew(),this._disposers.push(this.xAxes),this._disposers.push(this.yAxes);let e=this._root,t=this._root.verticalLayout,n=this.zoomOutButton;n.events.on(`click`,()=>{this.zoomOut()}),n.hide(0),n.states.lookup(`default`).set(`opacity`,1),this.chartContainer.set(`layout`,t);let r=this.plotContainer;r.children.push(this.seriesContainer),this._disposers.push(this._processAxis(this.xAxes,this.bottomAxesContainer)),this._disposers.push(this._processAxis(this.yAxes,this.leftAxesContainer)),r.children.push(this.topGridContainer),r.children.push(this.bulletsContainer),r.set(`interactive`,!0),r.set(`interactiveChildren`,!1),r.set(`background`,F.new(e,{themeTags:[`plotbackground`,`xy`,`background`]})),this._disposers.push(r.events.on(`pointerdown`,e=>{this._handlePlotDown(e)})),this._disposers.push(r.events.on(`globalpointerup`,e=>{this._handlePlotUp(e)})),this._disposers.push(r.events.on(`globalpointermove`,e=>{this._handlePlotMove(e)})),this._maskGrid(),this._setUpTouch()}_beforeChanged(){super._beforeChanged(),(this.isDirty(`pinchZoomX`)||this.isDirty(`pinchZoomY`)||this.get(`panX`)||this.get(`panY`))&&this._setUpTouch()}_setUpTouch(){this.plotContainer._display.cancelTouch||(this.plotContainer._display.cancelTouch=!!(this.get(`pinchZoomX`)||this.get(`pinchZoomY`)||this.get(`panX`)||this.get(`panY`)))}_maskGrid(){this.gridContainer.set(`maskContent`,!0),this.topGridContainer.set(`maskContent`,!0)}_removeSeries(e){e._unstack(),e._posXDp&&e._posXDp.dispose(),e._posYDp&&e._posYDp.dispose(),e.set(`baseAxis`,void 0);let t=e.get(`xAxis`);t&&(R(t.series,e),t.markDirtyExtremes());let n=e.get(`yAxis`);n&&(R(n.series,e),n.markDirtyExtremes());let r=this.get(`cursor`);if(r){let t=r.get(`snapToSeries`);t&&R(t,e)}super._removeSeries(e)}handleWheel(e){let t=this.get(`wheelX`),n=this.get(`wheelY`),r=this.plotContainer,i=e.originalEvent,a=!1;if(te(i,this))a=!0;else return;let o=r.toLocal(e.point),s=this.get(`wheelStep`,.2),c=i.deltaY/100,l=i.deltaX/100,u=this.get(`wheelZoomPositionX`),d=this.get(`wheelZoomPositionY`);(t===`zoomX`||t===`zoomXY`)&&l!=0&&this.xAxes.each(e=>{if(e.get(`zoomX`)){let t=e.get(`start`),n=e.get(`end`),i=e.fixPosition(o.x/r.width());u!=null&&(i=u);let c=e.get(`maxDeviation`,0),d=Math.min(1+c,Math.max(-c,t-s*(n-t)*l*i)),f=Math.max(-c,Math.min(1+c,n+s*(n-t)*l*(1-i)));d==t&&f==n&&(a=!1),1/(f-d)<e.getPrivate(`maxZoomFactor`,1/0)/e.get(`minZoomCount`,1)?this._handleWheelAnimation(e.zoom(d,f)):a=!1}}),(n===`zoomX`||n===`zoomXY`)&&c!=0&&this.xAxes.each(e=>{if(e.get(`zoomX`)){let t=e.get(`start`),n=e.get(`end`),i=e.fixPosition(o.x/r.width());u!=null&&(i=u);let l=e.get(`maxDeviation`,0),d=Math.min(1+l,Math.max(-l,t-s*(n-t)*c*i)),f=Math.max(-l,Math.min(1+l,n+s*(n-t)*c*(1-i)));d==t&&f==n&&(a=!1),1/(f-d)<e.getPrivate(`maxZoomFactor`,1/0)/e.get(`minZoomCount`,1)?this._handleWheelAnimation(e.zoom(d,f)):a=!1}}),(t===`zoomY`||t===`zoomXY`)&&l!=0&&this.yAxes.each(e=>{if(e.get(`zoomY`)){let t=e.get(`start`),n=e.get(`end`),i=e.fixPosition(o.y/r.height());d!=null&&(i=d);let c=e.get(`maxDeviation`,0),u=Math.min(1+c,Math.max(-c,t-s*(n-t)*l*i)),f=Math.max(-c,Math.min(1+c,n+s*(n-t)*l*(1-i)));u==t&&f==n&&(a=!1),1/(f-u)<e.getPrivate(`maxZoomFactor`,1/0)/e.get(`minZoomCount`,1)?this._handleWheelAnimation(e.zoom(u,f)):a=!1}}),(n===`zoomY`||n===`zoomXY`)&&c!=0&&this.yAxes.each(e=>{if(e.get(`zoomY`)){let t=e.get(`start`),n=e.get(`end`),i=e.fixPosition(o.y/r.height());d!=null&&(i=d);let l=e.get(`maxDeviation`,0),u=Math.min(1+l,Math.max(-l,t-s*(n-t)*c*i)),f=Math.max(-l,Math.min(1+l,n+s*(n-t)*c*(1-i)));u==t&&f==n&&(a=!1),1/(f-u)<e.getPrivate(`maxZoomFactor`,1/0)/e.get(`minZoomCount`,1)?this._handleWheelAnimation(e.zoom(u,f)):a=!1}}),(t===`panX`||t===`panXY`)&&l!=0&&this.xAxes.each(e=>{if(e.get(`panX`)){let t=e.get(`start`),n=e.get(`end`),r=this._getWheelSign(e)*s*(n-t)*l,i=t+r,o=n+r,c=this._fixWheel(i,o);i=c[0],o=c[1],i==t&&o==n&&(a=!1),this._handleWheelAnimation(e.zoom(i,o))}}),(n===`panX`||n===`panXY`)&&c!=0&&this.xAxes.each(e=>{if(e.get(`panX`)){let t=e.get(`start`),n=e.get(`end`),r=this._getWheelSign(e)*s*(n-t)*c,i=t+r,o=n+r,l=this._fixWheel(i,o);i=l[0],o=l[1],i==t&&o==n&&(a=!1),this._handleWheelAnimation(e.zoom(i,o))}}),(t===`panY`||t===`panXY`)&&l!=0&&this.yAxes.each(e=>{if(e.get(`panY`)){let t=e.get(`start`),n=e.get(`end`),r=this._getWheelSign(e)*s*(n-t)*l,i=t+r,o=n+r,c=this._fixWheel(i,o);i=c[0],o=c[1],i==t&&o==n&&(a=!1),this._handleWheelAnimation(e.zoom(i,o))}}),(n===`panY`||n===`panXY`)&&c!=0&&this.yAxes.each(e=>{if(e.get(`panY`)){let t=e.get(`start`),n=e.get(`end`),r=this._getWheelSign(e)*s*(n-t)*c,i=t-r,o=n-r,l=this._fixWheel(i,o);i=l[0],o=l[1],i==t&&o==n&&(a=!1),this._handleWheelAnimation(e.zoom(i,o))}}),a&&i.preventDefault()}_handleSetWheel(){let e=this.get(`wheelX`),t=this.get(`wheelY`),n=this.plotContainer;e!==`none`||t!==`none`?(this._wheelDp=n.events.on(`wheel`,n=>{let r=n.originalEvent;(e!==`none`&&Math.abs(r.deltaX)!=0||t!==`none`&&Math.abs(r.deltaY)!=0)&&this.handleWheel(n)}),this._disposers.push(this._wheelDp)):this._wheelDp&&this._wheelDp.dispose()}_getWheelSign(e){let t=1;return e.get(`renderer`).get(`inversed`)&&(t=-1),t}_fixWheel(e,t){let n=t-e;return e<0&&(e=0,t=e+n),t>1&&(t=1,e=t-n),[e,t]}_handlePlotDown(e){let t=e.originalEvent;if(t.button==2)return;let n=this.plotContainer,r=n.toLocal(e.point);if((this.get(`pinchZoomX`)||this.get(`pinchZoomY`))&&t.pointerId&&j(n._downPoints).length>0){let e=this.xAxes.getIndex(0),t=this.yAxes.getIndex(0);e&&(this._downStartX=e.get(`start`,0),this._downEndX=e.get(`end`,1)),t&&(this._downStartY=t.get(`start`,0),this._downEndY=t.get(`end`,1))}if((this.get(`panX`)||this.get(`panY`))&&r.x>=0&&r.y>=0&&r.x<=n.width()&&r.y<=this.height()){this._downPoint={x:t.clientX,y:t.clientY};let n=this.get(`panX`),r=this.get(`panY`);n&&this.xAxes.each(e=>{e._panStart=e.get(`start`),e._panEnd=e.get(`end`)}),r&&this.yAxes.each(e=>{e._panStart=e.get(`start`),e._panEnd=e.get(`end`)});let i=`panstarted`;this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this,originalEvent:e.originalEvent})}}_handleWheelAnimation(e){e?e.events.on(`stopped`,()=>{this._dispatchWheelAnimation()}):this._dispatchWheelAnimation()}_dispatchWheelAnimation(){let e=`wheelended`;this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}_handlePlotUp(e){let t=this._downPoint;if(t&&(this.get(`panX`)||this.get(`panY`))){if(e.originalEvent.clientX==t.x&&e.originalEvent.clientY==t.y){let t=`pancancelled`;this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent})}let n=`panended`;this.events.isEnabled(n)&&this.events.dispatch(n,{type:n,target:this,originalEvent:e.originalEvent})}this._downPoint=void 0,this.xAxes.each(e=>{e._isPanning=!1}),this.yAxes.each(e=>{e._isPanning=!1})}_handlePlotMove(e){let t=this.plotContainer;if(this.get(`pinchZoomX`)||this.get(`pinchZoomY`)){let n=e.originalEvent.pointerId;if(n&&(this._movePoints[n]=e.point,j(t._downPoints).length>1)){this._handlePinch();return}}let n=this._downPoint;if(n){n=t.toLocal(this._root.documentPointToRoot(n));let r=t.toLocal(e.point),i=this.get(`panX`),a=this.get(`panY`);if(i){let e=this.get(`scrollbarX`);e&&e.events.disableType(`rangechanged`),this.xAxes.each(e=>{if(e.get(`panX`)){e._isPanning=!0;let i=e._panStart,a=e._panEnd,o=(a-i)*(n.x-r.x)/t.width();e.get(`renderer`).get(`inversed`)&&(o*=-1);let s=i+o,c=a+o;c-s<1+e.get(`maxDeviation`,1)*2&&(e.set(`start`,s),e.set(`end`,c))}}),e&&e.events.enableType(`rangechanged`)}if(a){let e=this.get(`scrollbarY`);e&&e.events.disableType(`rangechanged`),this.yAxes.each(e=>{if(e.get(`panY`)){e._isPanning=!0;let i=e._panStart,a=e._panEnd,o=(a-i)*(n.y-r.y)/t.height();e.get(`renderer`).get(`inversed`)&&(o*=-1);let s=i-o,c=a-o;c-s<1+e.get(`maxDeviation`,1)*2&&(e.set(`start`,s),e.set(`end`,c))}}),e&&e.events.enableType(`rangechanged`)}}}_handlePinch(){let e=this.plotContainer,t=0,n=[],r=[];if(o(e._downPoints,(e,i)=>{n[t]=i;let a=this._movePoints[e];a&&(r[t]=a),t++}),n.length>1&&r.length>1){let t=e.width(),i=e.height(),a=n[0],o=n[1],s=r[0],c=r[1];if(a&&o&&s&&c){if(s=e.toLocal(s),c=e.toLocal(c),a=e.toLocal(a),o=e.toLocal(o),this.get(`pinchZoomX`)){let e=this._downStartX,n=this._downEndX;if(e!=null&&n!=null){a.x>o.x&&([a,o]=[o,a],[s,c]=[c,s]);let r=e+a.x/t*(n-e),i=e+o.x/t*(n-e),l=e+s.x/t*(n-e),u=e+c.x/t*(n-e),d=Math.max(.001,i-r),f=Math.max(.001,u-l),p=d/f,m=e*p+r-l*p,h=n*p+i-u*p;this.xAxes.each(e=>{let t=e.fixPosition(m),n=e.fixPosition(h);e.zoom(t,n,0)})}}if(this.get(`pinchZoomY`)){let e=this._downStartY,t=this._downEndY;if(e!=null&&t!=null){a.y<o.y&&([a,o]=[o,a],[s,c]=[c,s]);let n=e+(1-a.y/i)*(t-e),r=e+(1-o.y/i)*(t-e),l=e+(1-s.y/i)*(t-e),u=e+(1-c.y/i)*(t-e),d=Math.max(.001,r-n),f=Math.max(.001,u-l),p=d/f,m=e*p+n-l*p,h=t*p+r-u*p;this.yAxes.each(e=>{let t=e.fixPosition(m),n=e.fixPosition(h);e.zoom(t,n,0)})}}}}}_handleCursorPosition(){let e=this.get(`cursor`);if(e){let t=e.getPrivate(`point`),n=e.get(`snapToSeries`);if(e._downPoint&&(n=void 0),n&&t){let r=e.get(`snapToSeriesBy`),i=[];A(n,e=>{if(!e.isHidden()&&!e.isHiding())if(r!=`x!`&&r!=`y!`){let t=e.startIndex(),n=e.endIndex();for(let r=t;r<n;r++){let t=e.dataItems[r];t&&!t.isHidden()&&i.push(t)}}else{let t=e.get(`tooltipDataItem`);t&&i.push(t)}});let a=1/0,o;if(A(i,e=>{let n=e.get(`point`);if(n){let i=0;i=r==`x`||r==`x!`?Math.abs(t.x-n.x):r==`y`||r==`y!`?Math.abs(t.y-n.y):Math.hypot(t.x-n.x,t.y-n.y),i<a&&(a=i,o=e)}}),A(n,e=>{let t=e.get(`tooltip`);t&&t._setDataItem(void 0)}),o){let t=o.component;t.showDataItemTooltip(o),t.setRaw(`tooltipDataItem`,o);let n=o.get(`point`);n&&e.handleMove(t.toGlobal({x:n.x-t.x(),y:n.y-t.y()}),!0)}}}}_updateCursor(){let e=this.get(`cursor`);e&&e.updateCursor()}_addCursor(e){this.plotContainer.children.push(e)}_prepareChildren(){if(super._prepareChildren(),this.series.each(e=>{this._colorize(e)}),(this.isDirty(`wheelX`)||this.isDirty(`wheelY`))&&this._handleSetWheel(),this.isDirty(`cursor`)){let e=this._prevSettings.cursor,t=this.get(`cursor`);t!==e&&(this._disposeProperty(`cursor`),e&&e.dispose(),t&&(t._setChart(this),this._addCursor(t),this._pushPropertyDisposer(`cursor`,t.events.on(`selectended`,()=>{this._handleCursorSelectEnd()}))),this._prevSettings.cursor=t)}if(this.isDirty(`scrollbarX`)){let e=this._prevSettings.scrollbarX,t=this.get(`scrollbarX`);t!==e&&(this._disposeProperty(`scrollbarX`),e&&e.dispose(),t&&(t.parent||this.topAxesContainer.children.push(t),this._pushPropertyDisposer(`scrollbarX`,t.events.on(`rangechanged`,e=>{this._handleScrollbar(this.xAxes,e.start,e.end,e.grip)})),this._pushPropertyDisposer(`scrollbarX`,t.events.on(`released`,()=>{this.xAxes.each(e=>{e.get(`zoomable`)&&this._handleAxisSelection(e)})})),t.setPrivate(`positionTextFunction`,e=>{let t=this.xAxes.getIndex(0);return t&&t.getTooltipText(e,!1)||``})),this._prevSettings.scrollbarX=t)}if(this.isDirty(`scrollbarY`)){let e=this._prevSettings.scrollbarY,t=this.get(`scrollbarY`);t!==e&&(this._disposeProperty(`scrollbarY`),e&&e.dispose(),t&&(t.parent||this.rightAxesContainer.children.push(t),this._pushPropertyDisposer(`scrollbarY`,t.events.on(`rangechanged`,e=>{this._handleScrollbar(this.yAxes,e.start,e.end,e.grip)})),this._pushPropertyDisposer(`scrollbarY`,t.events.on(`released`,()=>{this.yAxes.each(e=>{e.get(`zoomable`)&&this._handleAxisSelection(e)})})),t.setPrivate(`positionTextFunction`,e=>{let t=this.yAxes.getIndex(0);return t&&t.getTooltipText(e,!1)||``})),this._prevSettings.scrollbarY=t)}this._handleZoomOut()}_processSeries(e){super._processSeries(e);let t=e.get(`xAxis`),n=e.get(`yAxis`);u(t.series,e),u(n.series,e),e._posXDp=e.addDisposer(t.events.on(`positionchanged`,()=>{e._fixPosition()})),e._posXDp=e.addDisposer(n.events.on(`positionchanged`,()=>{e._fixPosition()})),e.get(`baseAxis`)||(n.isType(`CategoryAxis`)||n.isType(`DateAxis`)?e.set(`baseAxis`,n):e.set(`baseAxis`,t)),e.get(`stacked`)&&(e._markDirtyKey(`stacked`),A(e.dataItems,e=>{e.set(`stackToItemY`,void 0),e.set(`stackToItemX`,void 0)})),e._markDirtyAxes(),n.markDirtyExtremes(),t.markDirtyExtremes(),t._seriesAdded=!0,n._seriesAdded=!0,this._colorize(e)}_colorize(e){let t=this.get(`colors`);if(t&&e.get(`fill`)==null){let n=t.next();e._setSoft(`stroke`,n),e._setSoft(`fill`,n)}let n=this.get(`patterns`);if(n&&e.get(`fillPattern`)==null){let t=n.next();e._setSoft(`fillPattern`,t)}}_handleCursorSelectEnd(){let e=this.get(`cursor`),t=e.get(`behavior`),n=e.getPrivate(`downPositionX`,0),r=e.getPrivate(`downPositionY`,0),i=Math.min(1,Math.max(0,e.getPrivate(`positionX`,.5))),a=Math.min(1,Math.max(0,e.getPrivate(`positionY`,.5)));this.xAxes.each(e=>{if(t===`zoomX`||t===`zoomXY`){let t=e.toAxisPosition(n),r=e.toAxisPosition(i);e.zoom(t,r)}e.setPrivate(`updateScrollbar`,!0)}),this.yAxes.each(e=>{if(t===`zoomY`||t===`zoomXY`){let t=e.toAxisPosition(r),n=e.toAxisPosition(a);e.zoom(t,n)}e.setPrivate(`updateScrollbar`,!0)})}_handleScrollbar(e,t,n,r){e.each(e=>{let i=e.fixPosition(t),a=e.fixPosition(n),o=e.zoom(i,a,void 0,r),s=`updateScrollbar`;e.setPrivateRaw(s,!1),o?o.events.on(`stopped`,()=>{e.setPrivateRaw(s,!0)}):e.setPrivateRaw(s,!0)})}_processAxis(e,t){return e.events.onAll(e=>{if(e.type===`clear`)A(e.oldValues,e=>{this._removeAxis(e)});else if(e.type===`push`)t.children.push(e.newValue),e.newValue.processChart(this);else if(e.type===`setIndex`)t.children.setIndex(e.index,e.newValue),e.newValue.processChart(this);else if(e.type===`insertIndex`)t.children.insertIndex(e.index,e.newValue),e.newValue.processChart(this);else if(e.type===`removeIndex`)this._removeAxis(e.oldValue);else if(e.type===`moveIndex`)t.children.moveValue(e.value,e.newIndex),e.value.processChart(this);else throw Error(`Unknown IListEvent type`)})}_removeAxis(e){if(!e.isDisposed()){let t=e.parent;t&&t.children.removeValue(e);let n=e.gridContainer,r=n.parent;r&&r.children.removeValue(n);let i=e.topGridContainer,a=i.parent;a&&a.children.removeValue(i)}}_updateChartLayout(){let e=this.leftAxesContainer.width(),t=this.rightAxesContainer.width(),n=this.bottomAxesContainer;n.set(`paddingLeft`,e),n.set(`paddingRight`,t);let r=this.topAxesContainer;r.set(`paddingLeft`,e),r.set(`paddingRight`,t)}processAxis(e){this.get(`cursor`)&&(this.addDisposer(e.on(`start`,()=>{this._updateCursor()})),this.addDisposer(e.on(`end`,()=>{this._updateCursor()})))}_handleAxisSelection(e,t){let n=e.fixPosition(e.get(`start`,0)),r=e.fixPosition(e.get(`end`,1));if(n>r&&([n,r]=[r,n]),this.xAxes.indexOf(e)!=-1){if(t||e.getPrivate(`updateScrollbar`)){let e=this.get(`scrollbarX`);e&&(!e.getPrivate(`isBusy`)||t)&&(e.setRaw(`start`,n),e.setRaw(`end`,r),e.updateGrips())}}else if(this.yAxes.indexOf(e)!=-1&&(t||e.getPrivate(`updateScrollbar`))){let e=this.get(`scrollbarY`);e&&(!e.getPrivate(`isBusy`)||t)&&(e.setRaw(`start`,n),e.setRaw(`end`,r),e.updateGrips())}this._handleZoomOut()}_handleZoomOut(){let e=this.zoomOutButton;if(e&&e.parent){let t=!1;this.xAxes.each(e=>{e.get(`zoomOut`,!0)&&(k(e.get(`start`,0),5)!=0||k(e.get(`end`,1),5)!=1)&&(t=!0)}),this.yAxes.each(e=>{e.get(`zoomOut`,!0)&&(k(e.get(`start`,0),5)!=0||k(e.get(`end`,1),5)!=1)&&(t=!0)}),t?e.isHidden()&&e.show():e.hide()}}inPlot(e){let t=this.plotContainer,n=this.getPrivate(`otherCharts`,this._otherCharts),r=t.toGlobal(e);if(e.x>=-.5&&e.y>=-.5&&e.x<=t.width()+.5&&e.y<=t.height()+.5)return!0;if(n)for(let e=n.length-1;e>=0;e--){let t=n[e];if(t!=this){let e=t.plotContainer,n=this._root.rootPointToDocument(r),i=t._root.documentPointToRoot(n),a=e.toLocal(i);if(a.x>=-.1&&a.y>=-.1&&a.x<=e.width()+.1&&a.y<=e.height()+.1)return!0}}return!1}arrangeTooltips(){let e=this.plotContainer,t=e.width(),n=e.height(),r=this.height(),i=this._root.tooltipContainer.get(`layerMargin`);i&&i.bottom>r&&(r=i.bottom);let a=e._display.toGlobal({x:0,y:0}),o=e._display.toGlobal({x:t,y:n}),s=[],c=0,l=1/0,u=this._movePoint,d=this.get(`maxTooltipDistance`),f=this.get(`maxTooltipDistanceBy`,`xy`),p,m;y(d)&&this.series.each(e=>{if(!e.isHidden()){let t=e.get(`tooltip`);if(t){let n=t.get(`pointTo`);if(n){let t=Math.hypot(u.x-n.x,u.y-n.y);f==`x`?t=Math.abs(u.x-n.x):f==`y`&&(t=Math.abs(u.y-n.y)),t<l&&(l=t,p=e,m=n)}}}});let h=[];if(this.series.each(e=>{let t=e.get(`tooltip`);if(t&&!t.get(`forceHidden`)){let n=!1,r=t.get(`pointTo`);if(r){if(d>=0){let r=t.get(`pointTo`);if(r&&m&&e!=p){let e=Math.hypot(m.x-r.x,m.y-r.y);f==`x`?e=Math.abs(m.x-r.x):f==`y`&&(e=Math.abs(m.y-r.y)),e>d&&(n=!0)}}else d==-1&&e!=p&&(n=!0);!this.inPlot(this._tooltipToLocal(r))||!t.dataItem?n=!0:n||(c+=r.y),n||e.isHidden()||e.isHiding()?t.hide(0):(t.show(),s.push(t),h.push(e))}}}),this.setPrivate(`tooltipSeries`,h),this.get(`arrangeTooltips`)){let e=0,t=0,i=this._root.tooltipContainer,l=s.length;if(c/l>n/2+a.y){s.sort((e,t)=>I(t.get(`pointTo`).y,e.get(`pointTo`).y));let n=o.y;if(A(s,r=>{let s=r.height();t++,e+=s;let c=r.get(`centerY`);c instanceof x&&(s*=c.value),s+=r.get(`marginBottom`,0),r.set(`bounds`,{left:a.x,top:a.y,right:o.x,bottom:n}),r.setPrivate(`customData`,{left:a.x,top:a.y,right:o.x,bottom:n}),n=Math.min(n-s,r._fy-s),r.parent==i&&i.children.moveValue(r,0)}),n<0){s.reverse();let e=n;A(s,r=>{t++;let i=r.get(`bounds`);if(i){let t=i.top-n,a=i.bottom-n;t<e&&(t=e,a=t+r.height()),r.set(`bounds`,{left:i.left,top:t,right:i.right,bottom:a}),e=i.bottom-n+r.get(`marginBottom`,0)}})}}else{s.reverse(),s.sort((e,t)=>I(e.get(`pointTo`).y,t.get(`pointTo`).y));let n=0;if(A(s,s=>{t++;let c=s.height();e+=c;let l=s.get(`centerY`);l instanceof x&&(c*=l.value),c+=s.get(`marginBottom`,0),s.set(`bounds`,{left:a.x,top:n,right:o.x,bottom:Math.max(a.y+r,n+c)}),s.parent==i&&i.children.moveValue(s,0),n=Math.max(n+c,s._fy+c)}),n>r){s.reverse();let e=r;A(s,i=>{t++;let a=i.get(`bounds`);if(a){let t=a.top-(r-n),o=a.bottom-(r-n);o>e&&(o=e,t=o-i.height()),i.set(`bounds`,{left:a.left,top:t,right:a.right,bottom:o}),e=o-i.height()-i.get(`marginBottom`,0)}})}}e==0&&t>0&&this._disposers.push(this.root.events.once(`frameended`,()=>{this.arrangeTooltips()}))}}_tooltipToLocal(e){return this.plotContainer.toLocal(e)}zoomOut(){this.xAxes.each(e=>{e.get(`zoomOut`,!0)&&(e.setPrivate(`updateScrollbar`,!0),e.zoom(0,1))}),this.yAxes.each(e=>{e.get(`zoomOut`,!0)&&(e.setPrivate(`updateScrollbar`,!0),e.zoom(0,1))})}_dispose(){super._dispose();let e=this.get(`cursor`);e&&e.dispose()}};Object.defineProperty(H,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`XYChart`}),Object.defineProperty(H,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:se.classNames.concat([H.className])});var U=class extends T{_beforeChanged(){super._beforeChanged(),(this.isPrivateDirty(`width`)||this.isPrivateDirty(`height`))&&(this._clear=!0)}};Object.defineProperty(U,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`Grid`}),Object.defineProperty(U,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:T.classNames.concat([U.className])});var W=class extends O{constructor(){super(...arguments),Object.defineProperty(this,`_alwaysShow`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`lineX`,{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(U.new(this._root,{themeTags:[`x`]}))}),Object.defineProperty(this,`lineY`,{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(U.new(this._root,{themeTags:[`y`]}))}),Object.defineProperty(this,`selection`,{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(T.new(this._root,{themeTags:[`selection`,`cursor`],layer:30}))}),Object.defineProperty(this,`_movePoint`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_lastPoint`,{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(this,`_lastPoint2`,{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(this,`_tooltipX`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_tooltipY`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`chart`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_toX`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_toY`,{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._settings.themeTags=M(this._settings.themeTags,[`xy`,`cursor`]),super._afterNew(),this.setAll({width:S,height:S,isMeasured:!0,position:`absolute`}),this.states.create(`hidden`,{visible:!0,opacity:0}),this._drawLines(),this.setPrivateRaw(`visible`,!1),this._disposers.push(this.setTimeout(()=>{this.setPrivate(`visible`,!0)},500)),this._disposers.push(this.lineX.events.on(`positionchanged`,()=>{this._handleXLine()})),this._disposers.push(this.lineY.events.on(`positionchanged`,()=>{this._handleYLine()})),this._disposers.push(this.lineX.events.on(`focus`,()=>this._handleLineFocus())),this._disposers.push(this.lineX.events.on(`blur`,()=>this._handleLineBlur())),this._disposers.push(this.lineY.events.on(`focus`,()=>this._handleLineFocus())),this._disposers.push(this.lineY.events.on(`blur`,()=>this._handleLineBlur())),L(`keyboardevents`)&&this._disposers.push(v(document,`keydown`,e=>{this._handleLineMove(b(e),e.ctrlKey)}))}_setUpTouch(){let e=this.chart;e&&(e.plotContainer._display.cancelTouch=this.get(`behavior`)!=`none`)}_handleXLine(){let e=this.lineX.x(),t=!0;(e<0||e>this.width())&&(t=!1),this.lineX.setPrivate(`visible`,t)}_handleYLine(){let e=this.lineY.y(),t=!0;(e<0||e>this.height())&&(t=!1),this.lineY.setPrivate(`visible`,t)}_handleLineMove(e,t){let n=``,r=this.chart,i;if(r&&r.xAxes.length){this._root.focused(this.lineX)?(n=`positionX`,i=r.xAxes.getIndex(0)):this._root.focused(this.lineY)&&(i=r.yAxes.getIndex(0),n=`positionY`);let a=1;if(t&&(a=5),i){let t=i.get(`renderer`).get(`inversed`,!1),r;e==`ArrowRight`||e==`ArrowDown`?r=1:e==`ArrowLeft`||e==`ArrowUp`?r=-1:e==`Tab`&&(r=0),r!=null&&(t&&(r*=-1),this.set(n,i.nextPosition(r*a)))}}}_handleLineFocus(){this._alwaysShow=this.get(`alwaysShow`,!1),this.setAll({positionX:this.getPrivate(`positionX`,0),positionY:this.getPrivate(`positionY`,0),alwaysShow:!0}),this._handleLineMove(`Tab`)}_handleLineBlur(){(this.lineX.isFocus()||this.lineY.isFocus())&&this.setAll({positionX:void 0,positionY:void 0,alwaysShow:this._alwaysShow})}_prepareChildren(){if(super._prepareChildren(),this.isDirty(`xAxis`)){this._tooltipX=!1;let e=this.get(`xAxis`);if(e){let t=e.get(`tooltip`);t&&(this._tooltipX=!0,this._disposers.push(t.on(`pointTo`,()=>{this._updateXLine(t)})))}}if(this.isDirty(`yAxis`)){this._tooltipY=!1;let e=this.get(`yAxis`);if(e){let t=e.get(`tooltip`);t&&(this._tooltipY=!0,this._disposers.push(t.on(`pointTo`,()=>{this._updateYLine(t)})))}}}_handleSyncWith(){let e=this.chart;if(e){let t=this.get(`syncWith`),n=[];t&&A(t,e=>{let t=e.chart;t&&n.push(t)}),e._otherCharts=n}}_updateChildren(){if(super._updateChildren(),this._handleSyncWith(),this.isDirty(`positionX`)||this.isDirty(`positionY`)){let e=this.get(`positionX`),t=this.get(`positionY`);e==null&&t==null?this.hide(0):(this._movePoint=this.toGlobal(this._getPoint(this.get(`positionX`,0),this.get(`positionY`,0))),this.handleMove())}}_updateXLine(e){let t=k(this._display.toLocal(e.get(`pointTo`,{x:0,y:0})).x,3);this._toX!=t&&(this.lineX.animate({key:`x`,to:t,duration:e.get(`animationDuration`,0),easing:e.get(`animationEasing`)}),this._toX=t)}_updateYLine(e){let t=k(this._display.toLocal(e.get(`pointTo`,{x:0,y:0})).y,3);this._toY!=t&&(this.lineY.animate({key:`y`,to:t,duration:e.get(`animationDuration`,0),easing:e.get(`animationEasing`)}),this._toY=t)}_drawLines(){this.lineX.set(`draw`,e=>{e.moveTo(0,0),e.lineTo(0,this.height())}),this.lineY.set(`draw`,e=>{e.moveTo(0,0),e.lineTo(this.width(),0)})}updateCursor(){this.get(`alwaysShow`)&&(this._movePoint=this.toGlobal(this._getPoint(this.get(`positionX`,0),this.get(`positionY`,0)))),this.handleMove()}_setChart(e){this.chart=e,this._handleSyncWith();let t=e.plotContainer;this.events.on(`boundschanged`,()=>{this._disposers.push(this.setTimeout(()=>{this.updateCursor()},50))}),L(`touchevents`)&&(this._disposers.push(t.events.on(`click`,e=>{w(e.originalEvent)&&this._handleMove(e)})),this._setUpTouch()),this._disposers.push(t.events.on(`pointerdown`,e=>{this._handleCursorDown(e)})),this._disposers.push(t.events.on(`globalpointerup`,e=>{this._handleCursorUp(e),!e.native&&!this.isHidden()&&this._handleMove(e)})),this._disposers.push(t.events.on(`globalpointermove`,e=>{!this.get(`syncWith`)&&j(t._downPoints).length==0&&!e.native&&this.isHidden()||(this._handleMove(e),Math.hypot(this._lastPoint2.x-e.point.x,this._lastPoint2.y-e.point.y)>1&&(this._handleLineBlur(),this._lastPoint2=e.point))}));let n=this.parent;n&&n.children.moveValue(this.selection)}_inPlot(e){let t=this.chart;return t?t.inPlot(e):!1}_handleCursorDown(e){if(e.originalEvent.button==2)return;let t=e.point,n=this._display.toLocal(t),r=this.chart;if(this.selection.set(`draw`,()=>{}),r&&this._inPlot(n)){if(this._downPoint=n,this.get(`behavior`)!=`none`){this.selection.show();let t=`selectstarted`;this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent})}let t=this._getPosition(n).x,r=this._getPosition(n).y;this.setPrivate(`downPositionX`,t),this.setPrivate(`downPositionY`,r)}}_handleCursorUp(e){if(this._downPoint){let t=this.get(`behavior`,`none`);if(t!=`none`){t.charAt(0)===`z`&&this.selection.hide();let n=e.point,r=this._display.toLocal(n),i=this._downPoint,a=this.get(`moveThreshold`,1);if(r&&i){let n=!1;if((t===`zoomX`||t===`zoomXY`||t===`selectX`||t===`selectXY`)&&Math.abs(r.x-i.x)>a&&(n=!0),(t===`zoomY`||t===`zoomXY`||t===`selectY`||t===`selectXY`)&&Math.abs(r.y-i.y)>a&&(n=!0),n){let t=`selectended`;this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent})}else{let t=`selectcancelled`;this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent})}}}}this._downPoint=void 0}_handleMove(e){if(this.getPrivate(`visible`)){let t=this.chart;if(t&&j(t.plotContainer._downPoints).length>1){this.set(`forceHidden`,!0);return}else this.set(`forceHidden`,!1);let n=e.point,r=this._lastPoint;if(Math.round(r.x)===Math.round(n.x)&&Math.round(r.y)===Math.round(n.y))return;this._lastPoint=n,this.setPrivate(`lastPoint`,n),this.handleMove({x:n.x,y:n.y},!1,e.originalEvent)}}_getPosition(e){return{x:e.x/this.width(),y:e.y/this.height()}}handleMove(e,t,n){e||=this._movePoint;let r=this.get(`alwaysShow`);if(!e){this.hide(0);return}this._movePoint=e;let i=this._display.toLocal(e),a=this.chart;if(a&&(this._inPlot(i)||this._downPoint)){a._movePoint=e,this.isHidden()&&(this.show(),this.get(`behavior`,``).charAt(0)==`z`&&this.selection.set(`draw`,()=>{}));let o=i.x,s=i.y,c=this._getPosition(i);this.setPrivate(`point`,i);let l=this.get(`snapToSeries`);this._downPoint&&(l=void 0);let u=this.get(`positionX`),d=c.x;y(u)&&(d=u);let f=this.get(`positionY`),p=c.y;y(f)&&(p=f),this.setPrivate(`positionX`,d),this.setPrivate(`positionY`,p);let m=this._getPoint(d,p);if(o=m.x,s=m.y,a.xAxes.each(e=>{e._handleCursorPosition(d,l),r&&e.handleCursorShow()}),a.yAxes.each(e=>{e._handleCursorPosition(p,l),r&&e.handleCursorShow()}),!t){a._handleCursorPosition();let t=`cursormoved`;this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,point:e,originalEvent:n})}this._updateLines(o,s),a.arrangeTooltips()}else if(!this._downPoint&&!r){this.hide(0);let e=`cursorhidden`;this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}this._downPoint&&this.get(`behavior`)!=`none`&&this._updateSelection(i)}_getPoint(e,t){return{x:this.width()*e,y:this.height()*t}}_updateLines(e,t){this._tooltipX||this.lineX.set(`x`,e),this._tooltipY||this.lineY.set(`y`,t),this._drawLines()}_updateSelection(e){let t=this.selection,n=this.get(`behavior`),r=this.width(),i=this.height();e.x<0&&(e.x=0),e.x>r&&(e.x=r),e.y<0&&(e.y=0),e.y>i&&(e.y=i),t.set(`draw`,t=>{let a=this._downPoint;a&&(n===`zoomXY`||n===`selectXY`?(t.moveTo(a.x,a.y),t.lineTo(a.x,e.y),t.lineTo(e.x,e.y),t.lineTo(e.x,a.y),t.lineTo(a.x,a.y)):n===`zoomX`||n===`selectX`?(t.moveTo(a.x,0),t.lineTo(a.x,i),t.lineTo(e.x,i),t.lineTo(e.x,0),t.lineTo(a.x,0)):(n===`zoomY`||n===`selectY`)&&(t.moveTo(0,a.y),t.lineTo(r,a.y),t.lineTo(r,e.y),t.lineTo(0,e.y),t.lineTo(0,a.y)))})}_onHide(){if(this.isHidden()){let e=this.chart;e&&(e.xAxes.each(e=>{e.handleCursorHide()}),e.yAxes.each(e=>{e.handleCursorHide()}),e.series.each(e=>{e.handleCursorHide()}))}super._onHide()}_onShow(){if(!this.isHidden()){let e=this.chart;e&&(e.xAxes.each(e=>{e.handleCursorShow()}),e.yAxes.each(e=>{e.handleCursorShow()}))}super._onShow()}_dispose(){super._dispose(),this.selection.dispose()}};Object.defineProperty(W,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`XYCursor`}),Object.defineProperty(W,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:O.classNames.concat([W.className])});function xe(e,t){return e==null?t:t==null?e:t<e?t:e}function Se(e,t){return e==null?t:t==null?e:t>e?t:e}var G=class extends oe{constructor(){super(...arguments),Object.defineProperty(this,`_xField`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_yField`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_xOpenField`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_yOpenField`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_xLowField`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_xHighField`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_yLowField`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_yHighField`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_axesDirty`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_stackDirty`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_selectionProcessed`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_dataSets`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_mainContainerMask`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_x`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`_y`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`_bullets`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`mainContainer`,{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(O.new(this._root,{}))}),Object.defineProperty(this,`axisRanges`,{enumerable:!0,configurable:!0,writable:!0,value:new d}),Object.defineProperty(this,`_skipped`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_couldStackTo`,{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,`_reallyStackedTo`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_stackedSeries`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_aLocationX0`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`_aLocationX1`,{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,`_aLocationY0`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`_aLocationY1`,{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,`_showBullets`,{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,`valueXFields`,{enumerable:!0,configurable:!0,writable:!0,value:[`valueX`,`openValueX`,`lowValueX`,`highValueX`]}),Object.defineProperty(this,`valueYFields`,{enumerable:!0,configurable:!0,writable:!0,value:[`valueY`,`openValueY`,`lowValueY`,`highValueY`]}),Object.defineProperty(this,`_valueXFields`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_valueYFields`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_valueXShowFields`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_valueYShowFields`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`__valueXShowFields`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`__valueYShowFields`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_emptyDataItem`,{enumerable:!0,configurable:!0,writable:!0,value:new B(this,void 0,{})}),Object.defineProperty(this,`_dataSetId`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_tooltipFieldX`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_tooltipFieldY`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_posXDp`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_posYDp`,{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this.fields.push(`categoryX`,`categoryY`,`openCategoryX`,`openCategoryY`),this.valueFields.push(`valueX`,`valueY`,`openValueX`,`openValueY`,`lowValueX`,`lowValueY`,`highValueX`,`highValueY`),this._setRawDefault(`vcx`,1),this._setRawDefault(`vcy`,1),this._setRawDefault(`valueXShow`,`valueXWorking`),this._setRawDefault(`valueYShow`,`valueYWorking`),this._setRawDefault(`openValueXShow`,`openValueXWorking`),this._setRawDefault(`openValueYShow`,`openValueYWorking`),this._setRawDefault(`lowValueXShow`,`lowValueXWorking`),this._setRawDefault(`lowValueYShow`,`lowValueYWorking`),this._setRawDefault(`highValueXShow`,`highValueXWorking`),this._setRawDefault(`highValueYShow`,`highValueYWorking`),this._setRawDefault(`lowValueXGrouped`,`low`),this._setRawDefault(`lowValueYGrouped`,`low`),this._setRawDefault(`highValueXGrouped`,`high`),this._setRawDefault(`highValueYGrouped`,`high`),super._afterNew(),this.set(`maskContent`,!0),this._disposers.push(this.axisRanges.events.onAll(e=>{if(e.type===`clear`)A(e.oldValues,e=>{this._removeAxisRange(e)});else if(e.type===`push`)this._processAxisRange(e.newValue);else if(e.type===`setIndex`)this._processAxisRange(e.newValue);else if(e.type===`insertIndex`)this._processAxisRange(e.newValue);else if(e.type===`removeIndex`)this._removeAxisRange(e.oldValue);else if(e.type===`moveIndex`)this._processAxisRange(e.value);else throw Error(`Unknown IStreamEvent type`)})),this.states.create(`hidden`,{opacity:1,visible:!1}),this.onPrivate(`startIndex`,()=>{this.root.events.once(`frameended`,()=>{this.updateLegendValue()})}),this.onPrivate(`endIndex`,()=>{this.root.events.once(`frameended`,()=>{this.updateLegendValue()})}),this._makeFieldNames()}_processAxisRange(e){let t=O.new(this._root,{});e.container=t,this.children.push(t),e.series=this;let n=e.axisDataItem;n.setRaw(`isRange`,!0);let r=n.component;if(r){r._processAxisRange(n,[`range`,`series`]);let e=n.get(`bullet`);if(e){let t=e.get(`sprite`);t&&t.setPrivate(`visible`,!1)}let i=n.get(`axisFill`);i&&t.set(`mask`,i),r._seriesAxisRanges.push(n)}}_onDataClear(){super._onDataClear(),o(this._dataSets,(e,t)=>{A(t,e=>{e.dispose()}),t.length=0})}_removeAxisRange(e){let t=e.axisDataItem,n=t.component;t.dispose(),R(n._seriesAxisRanges,t);let r=e.container;r&&r.dispose()}_updateFields(){super._updateFields(),this._valueXFields=[],this._valueYFields=[],this._valueXShowFields=[],this._valueYShowFields=[],this.__valueXShowFields=[],this.__valueYShowFields=[],this.valueXFields&&A(this.valueXFields,e=>{if(this.get(e+`Field`)){this._valueXFields.push(e);let t=this.get(e+`Show`);this.__valueXShowFields.push(t),t.indexOf(`Working`)==-1?this._valueXShowFields.push(t):this._valueXShowFields.push(t.split(`Working`)[0])}}),this.valueYFields&&A(this.valueYFields,e=>{if(this.get(e+`Field`)){this._valueYFields.push(e);let t=this.get(e+`Show`);this.__valueYShowFields.push(t),t.indexOf(`Working`)==-1?this._valueYShowFields.push(t):this._valueYShowFields.push(t.split(`Working`)[0])}})}_dispose(){super._dispose(),this._bullets={};let e=this.chart;e&&e.series.removeValue(this),i(this.get(`xAxis`).series,this),i(this.get(`yAxis`).series,this)}_min(e,t){let n=xe(this.getPrivate(e),t);this.setPrivate(e,n)}_max(e,t){let n=Se(this.getPrivate(e),t);this.setPrivate(e,n)}_shouldMakeBullet(e){let t=this.get(`xAxis`),n=this.get(`yAxis`),r=this.get(`baseAxis`);if(!t.inited||!n.inited)return!1;let i=this.get(`minBulletDistance`,0);if(i>0){let e=this.startIndex(),a=this.endIndex()-e;if(t==r){if(t.get(`renderer`).axisLength()/a<i/5)return!1}else if(n==r&&n.get(`renderer`).axisLength()/a<i/5)return!1}return e.get(this._xField)!=null&&e.get(this._yField)!=null}_makeFieldNames(){let e=this.get(`xAxis`),t=this.get(`yAxis`),n=e.getPrivate(`name`),r=g(n),i=t.getPrivate(`name`),a=g(i),o=e.get(`renderer`).getPrivate(`letter`),s=t.get(`renderer`).getPrivate(`letter`),c=`open`,l=`high`,u=`Show`;e.className===`ValueAxis`?(this._xField=this.get(n+o+u),this._xOpenField=this.get(c+r+o+u),this._xLowField=this.get(`low`+r+o+u),this._xHighField=this.get(l+r+o+u)):(this._xField=n+o,this._xOpenField=c+r+o,this._xLowField=`low`+r+o,this._xHighField=l+r+o),t.className===`ValueAxis`?(this._yField=this.get(i+s+u),this._yOpenField=this.get(c+a+s+u),this._yLowField=this.get(`low`+a+s+u),this._yHighField=this.get(l+a+s+u)):(this._yField=i+s,this._yOpenField=c+a+s,this._yLowField=`low`+a+s,this._yHighField=l+a+s)}_fixVC(){let e=this.get(`xAxis`),t=this.get(`yAxis`),n=this.get(`baseAxis`),r=this.states.lookup(`hidden`),i=this.get(`sequencedInterpolation`);if(r){let a=0;i&&(a=.999999999999),e===n?r.set(`vcy`,a):(t===n||r.set(`vcy`,a),r.set(`vcx`,a))}}_handleMaskBullets(){this.isDirty(`maskBullets`)&&this.bulletsContainer.set(`maskContent`,this.get(`maskBullets`))}_fixPosition(){let e=this.get(`xAxis`),t=this.get(`yAxis`);this.set(`x`,e.x()-D(e.get(`centerX`,0),e.width())-e.parent.get(`paddingLeft`,0)),this.set(`y`,t.y()-D(t.get(`centerY`,0),t.height())-t.parent.get(`paddingTop`,0)),this.bulletsContainer.set(`y`,this.y()),this.bulletsContainer.set(`x`,this.x())}_prepareChildren(){super._prepareChildren(),this._bullets={},(this.isDirty(`valueYShow`)||this.isDirty(`valueXShow`)||this.isDirty(`openValueYShow`)||this.isDirty(`openValueXShow`)||this.isDirty(`lowValueYShow`)||this.isDirty(`lowValueXShow`)||this.isDirty(`highValueYShow`)||this.isDirty(`highValueXShow`))&&(this._updateFields(),this._makeFieldNames(),this._valuesDirty=!0),(this.isDirty(`xAxis`)||this.isDirty(`yAxis`))&&(this._valuesDirty=!0),this.set(`width`,this.get(`xAxis`).width()),this.set(`height`,this.get(`yAxis`).height()),this._handleMaskBullets();let e=this.get(`xAxis`),t=this.get(`yAxis`),n=this.get(`baseAxis`),r=this.get(`tooltipPositionX`),i;switch(r){case`open`:i=this._xOpenField;break;case`low`:i=this._xLowField;break;case`high`:i=this._xHighField;break;default:i=this._xField}this._tooltipFieldX=i;let a=this.get(`tooltipPositionY`),o;switch(a){case`open`:o=this._yOpenField;break;case`low`:o=this._yLowField;break;case`high`:o=this._yHighField;break;default:o=this._yField}this._tooltipFieldY=o,this.isDirty(`baseAxis`)&&this._fixVC(),this._fixPosition();let s=this.get(`stacked`);if(this.isDirty(`stacked`)&&(s?this._valuesDirty&&!this._dataProcessed||this._stack():this._unstack()),this._valuesDirty&&!this._dataProcessed&&(this._dataProcessed=!0,s&&this._stack(),A(this.dataItems,n=>{A(this._valueXShowFields,e=>{let t=n.get(e);t!=null&&(s&&(t+=this.getStackedXValue(n,e)),this._min(`minX`,t),this._max(`maxX`,t))}),A(this._valueYShowFields,e=>{let t=n.get(e);t!=null&&(s&&(t+=this.getStackedYValue(n,e)),this._min(`minY`,t),this._max(`maxY`,t))}),e.processSeriesDataItem(n,this._valueXFields),t.processSeriesDataItem(n,this._valueYFields)}),e._seriesValuesDirty=!0,t._seriesValuesDirty=!0,this.get(`ignoreMinMax`)||((this.isPrivateDirty(`minX`)||this.isPrivateDirty(`maxX`))&&e.markDirtyExtremes(),(this.isPrivateDirty(`minY`)||this.isPrivateDirty(`maxY`))&&t.markDirtyExtremes()),this._markStakedDirtyStack(),this.get(`tooltipDataItem`)||this.updateLegendValue(void 0)),(this.isDirty(`vcx`)||this.isDirty(`vcy`))&&this._markStakedDirtyStack(),this._dataGrouped||=(e._groupSeriesData(this),t._groupSeriesData(this),!0),this._valuesDirty||this.isPrivateDirty(`startIndex`)||this.isPrivateDirty(`adjustedStartIndex`)||this.isPrivateDirty(`endIndex`)||this.isDirty(`vcx`)||this.isDirty(`vcy`)||this._stackDirty||this._sizeDirty){let r=this.startIndex(),i=this.endIndex(),a=this.get(`minBulletDistance`,0);if(a>0&&n&&(n.get(`renderer`).axisLength()/(i-r)>a?this._showBullets=!0:this._showBullets=!1),(this._psi!=r||this._pei!=i||this.isDirty(`vcx`)||this.isDirty(`vcy`)||this.isPrivateDirty(`adjustedStartIndex`)||this._stackDirty||this._valuesDirty)&&!this._selectionProcessed){this._selectionProcessed=!0;let a=this.get(`vcx`,1),o=this.get(`vcy`,1),s=this.get(`stacked`,!1),c=this.getPrivate(`outOfSelection`);if(n===e||!n)if(t._calculateTotals(),this.setPrivateRaw(`selectionMinY`,void 0),this.setPrivateRaw(`selectionMaxY`,void 0),c)t.markDirtySelectionExtremes();else for(let e=r;e<i;e++)this.processYSelectionDataItem(this.dataItems[e],o,s);if(n===t||!n)if(e._calculateTotals(),this.setPrivateRaw(`selectionMinX`,void 0),this.setPrivateRaw(`selectionMaxX`,void 0),c)t.markDirtySelectionExtremes();else for(let e=r;e<i;e++)this.processXSelectionDataItem(this.dataItems[e],a,s);if((n===e||!n)&&(this.get(`valueYShow`)!==`valueYWorking`||this.get(`useSelectionExtremes`))){let e=this.getPrivate(`selectionMinY`);e!=null&&(this.setPrivateRaw(`minY`,e),t.markDirtyExtremes());let n=this.getPrivate(`selectionMaxY`);n!=null&&(this.setPrivateRaw(`maxY`,n),t.markDirtyExtremes())}if((n===t||!n)&&(this.get(`valueXShow`)!==`valueXWorking`||this.get(`useSelectionExtremes`))){let n=this.getPrivate(`selectionMinX`);n!=null&&(this.setPrivateRaw(`minX`,n),t.markDirtyExtremes());let r=this.getPrivate(`selectionMaxX`);r!=null&&(this.setPrivateRaw(`maxX`,r),e.markDirtyExtremes())}(this.isPrivateDirty(`selectionMinX`)||this.isPrivateDirty(`selectionMaxX`))&&e.markDirtySelectionExtremes(),(this.isPrivateDirty(`selectionMinY`)||this.isPrivateDirty(`selectionMaxY`))&&t.markDirtySelectionExtremes()}}}_makeRangeMask(){if(this.axisRanges.length>0){let e=this._mainContainerMask;e??(e=this.children.push(T.new(this._root,{})),this._mainContainerMask=e,e.set(`draw`,(t,n)=>{let r=this.parent;if(r){let e=this._root.container.width(),i=this._root.container.height();t.moveTo(-e,-i),t.lineTo(-e,i*2),t.lineTo(e*2,i*2),t.lineTo(e*2,-i),t.lineTo(-e,-i),this.axisRanges.each(e=>{let i=e.axisDataItem.get(`axisFill`);if(r&&i){let e=i.get(`draw`);e&&e(t,n)}})}this.mainContainer._display.mask=e._display})),e.markDirty(),e._markDirtyKey(`fill`)}else this.mainContainer._display.mask=null}_updateChildren(){super._updateChildren(),this._x=this.x(),this._y=this.y(),this._makeRangeMask()}_stack(){let e=this.chart;if(e){let t=e.series.indexOf(this);if(this._couldStackTo=[],t>0){let n;for(let r=t-1;r>=0&&(n=e.series.getIndex(r),!(n.get(`xAxis`)===this.get(`xAxis`)&&n.get(`yAxis`)===this.get(`yAxis`)&&n.className===this.className&&(this._couldStackTo.push(n),!n.get(`stacked`))));r--);}this._stackDataItems()}}_unstack(){o(this._reallyStackedTo,(e,t)=>{delete t._stackedSeries[this.uid]}),this._reallyStackedTo={},A(this.dataItems,e=>{e.setRaw(`stackToItemY`,void 0),e.setRaw(`stackToItemX`,void 0)})}_handleRemoved(){let e=this.get(`xAxis`);e&&e._handleSeriesRemoved();let t=this.get(`yAxis`);t&&t._handleSeriesRemoved()}_stackDataItems(){let e=this.get(`baseAxis`),t=this.get(`xAxis`),n=this.get(`yAxis`),r,i;e===t?(r=`valueY`,i=`stackToItemY`):e===n&&(r=`valueX`,i=`stackToItemX`);let a=this._couldStackTo.length,o=0,s=this.get(`stackToNegative`);this._reallyStackedTo={},A(this.dataItems,e=>{for(let t=0;t<a;t++){let n=this._couldStackTo[t],c=n.dataItems[o],l=e.get(r);if(c){let o=c.get(r);if(s)if(y(l)){if(y(o)){if(t==a-1&&e.setRaw(i,void 0),l>=0&&o>=0){e.setRaw(i,c),this._reallyStackedTo[n.uid]=n,n._stackedSeries[this.uid]=this;break}if(l<0&&o<0){e.setRaw(i,c),this._reallyStackedTo[n.uid]=n,n._stackedSeries[this.uid]=this;break}}}else break;else if(y(l)&&y(o)){e.setRaw(i,c),this._reallyStackedTo[n.uid]=n,n._stackedSeries[this.uid]=this;break}}}o++})}processXSelectionDataItem(e,t,n){A(this.__valueXShowFields,r=>{let i=e.get(r);i!=null&&(n&&(i+=this.getStackedXValueWorking(e,r)),this._min(`selectionMinX`,i),this._max(`selectionMaxX`,i*t))})}processYSelectionDataItem(e,t,n){A(this.__valueYShowFields,r=>{let i=e.get(r);i!=null&&(n&&(i+=this.getStackedYValueWorking(e,r)),this._min(`selectionMinY`,i),this._max(`selectionMaxY`,i*t))})}getStackedYValueWorking(e,t){let n=e.get(`stackToItemY`);if(n){let e=n.component;return n.get(t,0)*e.get(`vcy`,1)+this.getStackedYValueWorking(n,t)}return 0}getStackedXValueWorking(e,t){let n=e.get(`stackToItemX`);if(n){let e=n.component;return n.get(t,0)*e.get(`vcx`,1)+this.getStackedXValueWorking(n,t)}return 0}getStackedYValue(e,t){let n=e.get(`stackToItemY`);return n?n.get(t,0)+this.getStackedYValue(n,t):0}getStackedXValue(e,t){let n=e.get(`stackToItemX`);return n?n.get(t,0)+this.getStackedXValue(n,t):0}createLegendMarker(e){this.updateLegendMarker()}_markDirtyAxes(){this._axesDirty=!0,this.markDirty()}_markDataSetDirty(){this._afterDataChange(),this._valuesDirty=!0,this._dataProcessed=!1,this._aggregatesCalculated=!1,this.markDirty()}_clearDirty(){super._clearDirty(),this._axesDirty=!1,this._selectionProcessed=!1,this._stackDirty=!1,this._dataProcessed=!1}_positionBullet(e){let t=e.get(`sprite`);if(t){let n=t.dataItem,r=e.get(`locationX`,n.get(`locationX`,.5)),i=e.get(`locationY`,n.get(`locationY`,.5)),a=this.get(`xAxis`),o=this.get(`yAxis`),s=this.get(`exactLocationX`,!1),c=this.get(`exactLocationY`,!1),l=a.getDataItemPositionX(n,this._xField,r,this.get(`vcx`,1),s),u=o.getDataItemPositionY(n,this._yField,i,this.get(`vcy`,1),c),d=this.getPoint(l,u),f=n.get(`left`,d.x),p=n.get(`right`,d.x),m=n.get(`top`,d.y),h=n.get(`bottom`,d.y),g=0,_=0,v=p-f,y=h-m;if(this._shouldShowBullet(l,u)){t.setPrivate(`visible`,!e.getPrivate(`hidden`));let a=e.get(`field`),o=this.get(`baseAxis`),p=this.get(`xAxis`),m=this.get(`yAxis`);if(a!=null){let e;o==p?(a==`value`?e=this._yField:a==`open`?e=this._yOpenField:a==`high`?e=this._yHighField:a==`low`&&(e=this._yLowField),e&&(u=m.getDataItemPositionY(n,e,0,this.get(`vcy`,1),c),d=m.get(`renderer`).positionToPoint(u),_=d.y,g=f+v*r)):(a==`value`?e=this._xField:a==`open`?e=this._xOpenField:a==`high`?e=this._xHighField:a==`low`&&(e=this._xLowField),e&&(l=p.getDataItemPositionX(n,e,0,this.get(`vcx`,1),s),d=p.get(`renderer`).positionToPoint(l),g=d.x,_=h-y*i))}else g=f+v*r,_=h-y*i;let b=e.get(`stacked`);if(b){let e=this.chart;if(o==p){let n=this._bullets[l+`_`+u];if(n){let r=n.bounds(),i=t.localBounds(),a=_;_=r.top,b==`down`?_=r.bottom-i.top:b==`auto`?e&&(a<e.plotContainer.height()/2?_=r.bottom-i.top:_+=i.bottom):_+=i.bottom}this._bullets[l+`_`+u]=t}else{let n=this._bullets[l+`_`+u];if(n){let r=n.bounds(),i=t.localBounds(),a=g;g=r.right,b==`down`?g=r.left-i.right:b==`auto`?e&&(a<e.plotContainer.width()/2?g=r.left-i.right:g-=i.left):g-=i.left}this._bullets[l+`_`+u]=t}}t.isType(`Label`)&&(t.setPrivate(`maxWidth`,Math.abs(v)),t.setPrivate(`maxHeight`,Math.abs(y))),t.setAll({x:g,y:_})}else t.setPrivate(`visible`,!1)}}_shouldShowBullet(e,t){return this._showBullets}setDataSet(e){if(this._dataSets[e]){this._handleDataSetChange(),this._dataItems=this._dataSets[e],this._markDataSetDirty(),this._dataSetId=e;let t=`datasetchanged`;this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,id:e})}}resetGrouping(){o(this._dataSets,(e,t)=>{t!=this._mainDataItems&&A(t,e=>{e.dispose()})}),this._dataSets={},this._dataItems=this.mainDataItems}_handleDataSetChange(){A(this._dataItems,e=>{let t=e.bullets;t&&A(t,e=>{if(e){let t=e.get(`sprite`);t&&t.setPrivate(`visible`,!1)}})}),this._selectionProcessed=!1}show(t){let n=Object.create(null,{show:{get:()=>super.show}});return e(this,void 0,void 0,function*(){this._fixVC();let e=[];e.push(n.show.call(this,t).then(()=>{this._isShowing=!1;let e=this.get(`xAxis`),t=this.get(`yAxis`),n=this.get(`baseAxis`);t!==n&&t.markDirtySelectionExtremes(),e!==n&&e.markDirtySelectionExtremes()})),e.push(this.bulletsContainer.show(t)),e.push(this._sequencedShowHide(!0,t)),yield Promise.all(e)})}hide(t){let n=Object.create(null,{hide:{get:()=>super.hide}});return e(this,void 0,void 0,function*(){this._fixVC();let e=[];e.push(n.hide.call(this,t).then(()=>{this._isHiding=!1})),e.push(this.bulletsContainer.hide(t)),e.push(this._sequencedShowHide(!1,t)),yield Promise.all(e)})}showDataItem(t,n){let r=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return e(this,void 0,void 0,function*(){let e=[r.showDataItem.call(this,t,n)];y(n)||(n=this.get(`stateAnimationDuration`,0));let i=this.get(`stateAnimationEasing`);A(this._valueFields,r=>{e.push(t.animate({key:r+`Working`,to:t.get(r),duration:n,easing:i}).waitForStop())}),yield Promise.all(e)})}hideDataItem(t,n){let r=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return e(this,void 0,void 0,function*(){let e=[r.hideDataItem.call(this,t,n)],i=this.states.lookup(`hidden`);i||=this.states.create(`hidden`,{}),y(n)||(n=i.get(`stateAnimationDuration`,this.get(`stateAnimationDuration`,0)));let a=i.get(`stateAnimationEasing`,this.get(`stateAnimationEasing`)),o=this.get(`xAxis`),s=this.get(`yAxis`),c=this.get(`baseAxis`),l=this.get(`stacked`);if((c===o||!c)&&A(this._valueYFields,r=>{let i=s.getPrivate(`min`),o=s.baseValue();y(i)&&i>o&&(o=i),l&&(o=0),t.get(r)!=null&&e.push(t.animate({key:r+`Working`,to:o,duration:n,easing:a}).waitForStop())}),c===s||!c){let r=o.getPrivate(`min`),i=o.baseValue();y(r)&&r>i&&(i=r),l&&(i=0),A(this._valueXFields,r=>{t.get(r)!=null&&e.push(t.animate({key:r+`Working`,to:i,duration:n,easing:a}).waitForStop())})}yield Promise.all(e)})}_markDirtyStack(){this._stackDirty=!0,this.markDirty(),this._markStakedDirtyStack()}_markStakedDirtyStack(){let e=this._stackedSeries;e&&o(e,(e,t)=>{t._stackDirty||t._markDirtyStack()})}_afterChanged(){super._afterChanged(),this._skipped&&=(this._markDirtyAxes(),!1)}showDataItemTooltip(e){this.getPrivate(`doNotUpdateLegend`)||(this.updateLegendMarker(e),this.updateLegendValue(e));let t=this.get(`tooltip`),n=this.get(`exactLocationX`,!1),r=this.get(`exactLocationY`,!1);if(t)if(!this.isHidden()&&this.get(`visible`)){if(t._setDataItem(e),e){let i=this.get(`locationX`,0),a=this.get(`locationY`,1),o=e.get(`locationX`,i),s=e.get(`locationY`,a),c=this.get(`xAxis`),l=this.get(`yAxis`),u=this.get(`vcx`,1),d=this.get(`vcy`,1),f=c.getDataItemPositionX(e,this._tooltipFieldX,this._aLocationX0+(this._aLocationX1-this._aLocationX0)*o,u,n),p=l.getDataItemPositionY(e,this._tooltipFieldY,this._aLocationY0+(this._aLocationY1-this._aLocationY0)*s,d,r),m=this.getPoint(f,p),h=!0;if(A(this._valueFields,t=>{e.get(t)??(h=!1)}),h){let n=this.chart;n&&n.inPlot(m)?(t.label.text.markDirtyText(),t.set(`tooltipTarget`,this._getTooltipTarget(e)),t.set(`pointTo`,this._display.toGlobal({x:m.x,y:m.y}))):t._setDataItem(void 0)}else t._setDataItem(void 0)}}else this.hideTooltip()}hideTooltip(){let e=this.get(`tooltip`);return e&&e.set(`tooltipTarget`,this),super.hideTooltip()}_getTooltipTarget(e){if(this.get(`seriesTooltipTarget`)==`bullet`){let t=e.bullets;if(t&&t.length>0){let e=t[0].get(`sprite`);if(e)return e}}return this}updateLegendValue(e){let t=this.get(`legendDataItem`);if(t){let n=t.get(`label`);if(n){let t=``;e?(n._setDataItem(e),t=this.get(`legendLabelText`,n.get(`text`,this.get(`name`,``)))):(n._setDataItem(this._emptyDataItem),t=this.get(`legendRangeLabelText`,this.get(`legendLabelText`,n.get(`text`,this.get(`name`,``))))),n.set(`text`,t)}let r=t.get(`valueLabel`);if(r){let t=``;e?(r._setDataItem(e),t=this.get(`legendValueText`,r.get(`text`,``))):(r._setDataItem(this._emptyDataItem),t=this.get(`legendRangeValueText`,r.get(`text`,``))),r.set(`text`,t)}}}_getItemReaderLabel(){let e=`X: {`+this._xField;return this.get(`xAxis`).isType(`DateAxis`)&&(e+=`.formatDate()`),e+=`}; Y: {`+this._yField,this.get(`yAxis`).isType(`DateAxis`)&&(e+=`.formatDate()`),e+=`}`,e}getPoint(e,t){let n=this.get(`xAxis`).get(`renderer`).positionToCoordinate(e),r=this.get(`yAxis`).get(`renderer`).positionToCoordinate(t),i=999999999;return r<-i&&(r=-i),r>i&&(r=i),n<-i&&(n=-i),n>i&&(n=i),{x:n,y:r}}_shouldInclude(e){return!0}handleCursorHide(){this.hideTooltip(),this.updateLegendValue(void 0),this.updateLegendMarker(void 0)}_afterDataChange(){super._afterDataChange(),this.get(`xAxis`)._markDirtyKey(`start`),this.get(`yAxis`)._markDirtyKey(`start`),this.resetExtremes()}resetExtremes(){this.setPrivate(`selectionMinX`,void 0),this.setPrivate(`selectionMaxX`,void 0),this.setPrivate(`selectionMinY`,void 0),this.setPrivate(`selectionMaxY`,void 0),this.setPrivate(`minX`,void 0),this.setPrivate(`minY`,void 0),this.setPrivate(`maxX`,void 0),this.setPrivate(`maxY`,void 0)}createAxisRange(e){return this.axisRanges.push({axisDataItem:e})}get mainDataItems(){return this._mainDataItems}_adjustStartIndex(e){let t=this.get(`xAxis`);if(this.get(`baseAxis`)==t&&t.isType(`DateAxis`)){let n=t.baseDuration(),r=t.getPrivate(`selectionMin`,t.getPrivate(`min`,0)),i=n*this.get(`locationX`,.5),a=-1/0;for(;a<r;){let t=this.dataItems[e];if(t){let n=t.open;if(a=n?n.valueX:t.get(`valueX`,0),a+=i,a<r)e++;else break}else break}}return e}};Object.defineProperty(G,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`XYSeries`}),Object.defineProperty(G,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:oe.classNames.concat([G.className])});var K=class t extends G{constructor(){super(...arguments),Object.defineProperty(this,`_ph`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`_pw`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`_columnsUpdated`,{enumerable:!0,configurable:!0,writable:!0,value:!1})}_makeGraphics(e,t){return this.makeColumn(t,e)}_makeFieldNames(){super._makeFieldNames();let e=this.get(`xAxis`),t=this.get(`yAxis`),n=`CategoryAxis`,r=`ValueAxis`;e.isType(n)&&(this.get(`openCategoryXField`)||(this._xOpenField=this._xField)),e.isType(r)&&(this.get(`openValueXField`)||(this._xOpenField=this._xField)),t.isType(n)&&(this.get(`openCategoryYField`)||(this._yOpenField=this._yField)),t.isType(r)&&(this.get(`openValueYField`)||(this._yOpenField=this._yField))}_prepareChildren(){super._prepareChildren();let e=this.get(`xAxis`),t=this.get(`yAxis`),n=this.dataItems.length,r=Math.max(0,this.startIndex()-2),i=Math.min(this.endIndex()+2,n-1);if(e.inited&&t.inited)for(let e=r;e<=i;e++){let t=this.dataItems[e];this._createGraphics(t)}}_updateChildren(){let e=this.chart;e&&(this._ph=e.plotContainer.height(),this._pw=e.plotContainer.width());let n=this.get(`xAxis`),r=this.get(`yAxis`),i=this.get(`baseAxis`),a=this.columns.template;this.isDirty(`fill`)&&(a.get(`fill`)??a.set(`fill`,this.get(`fill`))),this.isDirty(`fillPattern`)&&(a.get(`fillPattern`)??a.set(`fillPattern`,this.get(`fillPattern`))),this.isDirty(`stroke`)&&(a.get(`stroke`)??a.set(`stroke`,this.get(`stroke`)));let o=0,s=0,c=0;A(i.series,e=>{if(e instanceof t){let t=e.get(`stacked`);t&&c==0&&s++,!t&&e.get(`clustered`)&&s++}e===this&&(o=s-1),c++}),this.get(`clustered`)||(o=0,s=1),s===0&&(s=1,o=0);let l=n.get(`renderer`),u=r.get(`renderer`),d=`cellStartLocation`,f=`cellEndLocation`,p=l.get(d,0),m=l.get(f,1),h=u.get(d,0),g=u.get(f,1);if(this._aLocationX0=p+o/s*(m-p),this._aLocationX1=p+(o+1)/s*(m-p),this._aLocationY0=h+o/s*(g-h),this._aLocationY1=h+(o+1)/s*(g-h),n.inited&&r.inited){if(this._axesDirty||this._valuesDirty||this._stackDirty||this.isDirty(`vcx`)||this.isDirty(`vcy`)||this._sizeDirty){let e=this.dataItems.length,t=Math.max(0,this.startIndex()-2),a=Math.min(this.endIndex()+2,e-1);for(let e=0;e<t;e++)this._toggleColumn(this.dataItems[e],!1);let o=this.dataItems[t];for(let e=t;e<=a;e++){let n=this.dataItems[e];if(n.get(`valueX`)!=null&&n.get(`valueY`)!=null){if(o=n,e>0&&t>0)for(let t=e-1;t>=0;t--){let e=this.dataItems[t];if(e.get(`valueX`)!=null&&e.get(`valueY`)!=null){o=e;break}}break}else this._toggleColumn(n,!1)}this._beforeColumnsDraw();let s=0;r.isType(`CategoryAxis`)&&n.isType(`CategoryAxis`)?s=2:n===i?s=0:r===i&&(s=1);for(let e=t;e<=a;e++){let t=this.dataItems[e];this._updateGraphics(t,o,s),t.get(`valueX`)!=null&&t.get(`valueY`)!=null&&(o=t)}this._afterColumnsDraw();for(let t=a+1;t<e;t++)this._toggleColumn(this.dataItems[t],!1);this._columnsUpdated=!0}}else this._skipped=!0;this.getPrivate(`doNotUpdateLegend`)||this.updateLegendMarker(this.get(`tooltipDataItem`)),super._updateChildren()}_afterChanged(){super._afterChanged(),this._columnsUpdated=!1}_beforeColumnsDraw(){}_afterColumnsDraw(){}_createGraphics(e){let t=e.get(`graphics`);if(!t){t=this._makeGraphics(this.columns,e),e.set(`graphics`,t),t._setDataItem(e);let n=e.get(`legendDataItem`);if(n){let e=n.get(`markerRectangle`);if(e){let n=e.states.lookup(`default`);A(E,r=>{let i=t.get(r,this.get(r));e.set(r,i),n.set(r,i)})}}let r=e.get(`rangeGraphics`);r&&A(r,e=>{e.dispose()}),r=[],e.setRaw(`rangeGraphics`,r),this.axisRanges.each(t=>{let n=t.container,i=this._makeGraphics(t.columns,e);r&&r.push(i),i.setPrivate(`list`,t.columns),n.children.push(i)})}}createAxisRange(e){return A(this.dataItems,e=>{let t=e.get(`graphics`);t&&(t.dispose(),e.set(`graphics`,void 0))}),super.createAxisRange(e)}_updateGraphics(e,t,n){let r=e.get(`graphics`),i=this._xField,a=this._yField,o=e.get(i),s=e.get(a),c=this.get(`exactLocationX`,!1);if(o!=null&&s!=null){let o=this._xOpenField,s=this._yOpenField,l=this.get(`locationX`,e.get(`locationX`,.5)),u=this.get(`locationY`,e.get(`locationY`,.5)),d=this.get(`openLocationX`,e.get(`openLocationX`,l)),f=this.get(`openLocationY`,e.get(`openLocationY`,u)),p=r.get(`width`),m=r.get(`height`),h=this.get(`stacked`),g=this.get(`xAxis`),v=this.get(`yAxis`),y=g.get(`start`),b=g.get(`end`),S=v.get(`start`),C=v.get(`end`),w,T,E,D,O=this.get(`vcy`,1),k=this.get(`vcx`,1),j=!1,M=!1;if(n==0){let t=this._aLocationX0+d-.5,n=this._aLocationX1+l-.5;if(p instanceof x){let e=(n-t)*(1-p.value)/2;t+=e,n-=e}if(w=g.getDataItemPositionX(e,o,t,k,c),T=g.getDataItemPositionX(e,i,n,k,c),E=v.getDataItemPositionY(e,a,u,O),this._yOpenField!==this._yField)D=v.getDataItemPositionY(e,s,f,O);else if(h){let t=e.get(`stackToItemY`);D=t?v.getDataItemPositionY(t,a,f,t.component.get(`vcy`)):v.basePosition()}else D=v.basePosition();e.setRaw(`point`,{x:w+(T-w)/2,y:E}),M=!0}else if(n==1){let t=this._aLocationY0+f-.5,n=this._aLocationY1+u-.5;if(m instanceof x){let e=(n-t)*(1-m.value)/2;t+=e,n-=e}if(E=v.getDataItemPositionY(e,s,t,O),D=v.getDataItemPositionY(e,a,n,O),T=g.getDataItemPositionX(e,i,l,k,c),this._xOpenField!==this._xField)w=g.getDataItemPositionX(e,o,d,k,c);else if(h){let t=e.get(`stackToItemX`);w=t?g.getDataItemPositionX(t,i,d,t.component.get(`vcx`),c):g.basePosition()}else w=g.basePosition();j=!0,e.setRaw(`point`,{x:T,y:E+(D-E)/2})}else if(n==2){let t=this._aLocationX0+d-.5,n=this._aLocationX1+l-.5;if(p instanceof x){let e=(n-t)*(1-p.value)/2;t+=e,n-=e}if(w=g.getDataItemPositionX(e,o,t,k),T=g.getDataItemPositionX(e,i,n,k),t=this._aLocationY0+f-.5,n=this._aLocationY1+u-.5,m instanceof x){let e=(n-t)*(1-m.value)/2;t+=e,n-=e}E=v.getDataItemPositionY(e,s,t,O),D=v.getDataItemPositionY(e,a,n,O),e.setRaw(`point`,{x:w+(T-w)/2,y:E+(D-E)/2})}this._applyGraphicsStates(e,t),this._updateSeriesGraphics(e,r,w,T,E,D,j,M),w<y&&T<y||w>b&&T>b||E<S&&D<=S||E>=C&&D>C||_(w)||_(E)?this._toggleColumn(e,!1):this._toggleColumn(e,!0);let N=e.get(`rangeGraphics`);N&&A(N,t=>{this._updateSeriesGraphics(e,t,w,T,E,D,j,M)})}else this._toggleColumn(e,!1)}_updateSeriesGraphics(e,t,n,r,i,a,o,s){let c=t.get(`width`),l=t.get(`height`),u=t.get(`maxWidth`),d=t.get(`maxHeight`),f=this.getPoint(n,i),p=this.getPoint(r,a),m=e.get(`point`);if(m){let e=this.getPoint(m.x,m.y);m.x=e.x+this._x,m.y=e.y+this._y}if(n=f.x,r=p.x,i=f.y,a=p.y,y(c)){let e=(r-n-c)/2;n+=e,r-=e}if(y(u)&&u<Math.abs(r-n)){let e=(r-n-u)/2;n+=e,r-=e}if(y(l)){let e=(a-i-l)/2;i+=e,a-=e}if(y(d)&&d<Math.abs(a-i)){let e=(a-i-d)/2;i+=e,a-=e}this.get(`adjustBulletPosition`)&&(o&&(r=Math.min(Math.max(0,r),this._pw),n=Math.min(Math.max(0,n),this._pw)),s&&(i=Math.min(Math.max(0,i),this._ph),a=Math.min(Math.max(0,a),this._ph))),e.setRaw(`left`,n),e.setRaw(`right`,r),e.setRaw(`top`,i),e.setRaw(`bottom`,a),t.setPrivate(`width`,r-n),t.setPrivate(`height`,a-i),t.set(`x`,n),t.set(`y`,a-(a-i))}_handleDataSetChange(){super._handleDataSetChange(),A(this._dataItems,e=>{this._toggleColumn(e,!1)})}_applyGraphicsStates(e,t){let n=e.get(`graphics`),r=n.states.lookup(`dropFromOpen`),i=n.states.lookup(`riseFromOpen`),a=n.states.lookup(`dropFromPrevious`),o=n.states.lookup(`riseFromPrevious`);if(r||a||i||o){let n=this.get(`xAxis`),s=this.get(`yAxis`),c=this.get(`baseAxis`),l,u,d;c===n&&s.isType(`ValueAxis`)?(l=e.get(this._yOpenField),u=e.get(this._yField),d=t.get(this._yField)):c===s&&n.isType(`ValueAxis`)&&(l=e.get(this._xOpenField),u=e.get(this._xField),d=t.get(this._xField)),y(l)&&y(u)&&(u<l?r&&r.apply():i&&i.apply(),y(d)&&(u<d?a&&a.apply():o&&o.apply()))}}disposeDataItem(e){super.disposeDataItem(e);let t=e.get(`graphics`);t&&(this.columns.removeValue(t),t.dispose());let n=e.get(`rangeGraphics`);n&&A(n,e=>{let t=e.getPrivate(`list`);t&&t.removeValue(e),e.dispose()})}hideDataItem(t,n){let r=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return e(this,void 0,void 0,function*(){let e=[r.hideDataItem.call(this,t,n)],i=t.get(`graphics`);i&&e.push(i.hide(n));let a=t.get(`rangeGraphics`);a&&A(a,t=>{e.push(t.hide(n))}),yield Promise.all(e)})}_toggleColumn(e,t){let n=e.get(`graphics`);n&&n.setPrivate(`visible`,t);let r=e.get(`rangeGraphics`);r&&A(r,e=>{e.setPrivate(`visible`,t)});let i=e.bullets;i&&A(i,e=>{e.setPrivate(`hidden`,!t)})}showDataItem(t,n){let r=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return e(this,void 0,void 0,function*(){let e=[r.showDataItem.call(this,t,n)],i=t.get(`graphics`);i&&e.push(i.show(n));let a=t.get(`rangeGraphics`);a&&A(a,t=>{e.push(t.show(n))}),yield Promise.all(e)})}updateLegendMarker(e){let t=this.get(`legendDataItem`);if(this.get(`useLastColorForLegendMarker`)&&!e){let t=this.dataItems[this.endIndex()-1];t&&(e=t)}if(t){let n=this.columns.template;if(e){let t=e.get(`graphics`);t&&(n=t)}let r=t.get(`markerRectangle`);if(r&&!t.get(`itemContainer`).get(`disabled`)){let e=r.states.lookup(`default`);A(E,t=>{let i=n.get(t,this.get(t));r.set(t,i),e.set(t,i)})}}}_getTooltipTarget(e){return this.get(`seriesTooltipTarget`)==`bullet`?super._getTooltipTarget(e):e.get(`graphics`)||this}};Object.defineProperty(K,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`BaseColumnSeries`}),Object.defineProperty(K,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:G.classNames.concat([K.className])});var q=class extends ue{constructor(){super(...arguments),Object.defineProperty(this,`_series`,{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,`_isPanning`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`minorDataItems`,{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,`labelsContainer`,{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(O.new(this._root,{}))}),Object.defineProperty(this,`gridContainer`,{enumerable:!0,configurable:!0,writable:!0,value:O.new(this._root,{width:S,height:S})}),Object.defineProperty(this,`topGridContainer`,{enumerable:!0,configurable:!0,writable:!0,value:O.new(this._root,{width:S,height:S})}),Object.defineProperty(this,`bulletsContainer`,{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(O.new(this._root,{isMeasured:!1,width:S,height:S,position:`absolute`}))}),Object.defineProperty(this,`chart`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_rangesDirty`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_panStart`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`_panEnd`,{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,`_sAnimation`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_eAnimation`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_skipSync`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`axisRanges`,{enumerable:!0,configurable:!0,writable:!0,value:new d}),Object.defineProperty(this,`_seriesAxisRanges`,{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,`ghostLabel`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_cursorPosition`,{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,`_snapToSeries`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_seriesValuesDirty`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_seriesAdded`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`axisHeader`,{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(O.new(this._root,{themeTags:[`axis`,`header`],position:`absolute`,background:F.new(this._root,{themeTags:[`header`,`background`],fill:this._root.interfaceColors.get(`background`)})}))}),Object.defineProperty(this,`_bullets`,{enumerable:!0,configurable:!0,writable:!0,value:{}})}_dispose(){this.gridContainer.dispose(),this.topGridContainer.dispose(),this.bulletsContainer.dispose(),this.labelsContainer.dispose(),this.axisHeader.dispose(),super._dispose()}_afterNew(){super._afterNew(),this.setPrivate(`updateScrollbar`,!0),this._disposers.push(this.axisRanges.events.onAll(e=>{if(e.type===`clear`)A(e.oldValues,e=>{e.dispose()});else if(e.type===`push`)this._processAxisRange(e.newValue,[`range`]);else if(e.type===`setIndex`)this._processAxisRange(e.newValue,[`range`]);else if(e.type===`insertIndex`)this._processAxisRange(e.newValue,[`range`]);else if(e.type===`removeIndex`)this.disposeDataItem(e.oldValue);else if(e.type===`moveIndex`)this._processAxisRange(e.value,[`range`]);else throw Error(`Unknown IStreamEvent type`)}));let e=this.get(`renderer`);e&&(e.axis=this,e.processAxis()),this.children.push(e),this._createGhostLabel()}_createGhostLabel(){let e=this.get(`renderer`).makeLabel(new B(this,void 0,{}),[]);e.adapters.disable(`text`),e.setAll({opacity:0,tooltipText:void 0,tooltipHTML:void 0,interactive:!1}),e.events.disable(),this.ghostLabel=e}_updateFinals(e,t){}zoom(e,t,n,r){if(this.get(`zoomable`,!0))if(this._updateFinals(e,t),this.get(`start`)!==e||this.get(`end`)!=t){let i=this._sAnimation,a=this._eAnimation;e>t&&([e,t]=[t,e]);let o=this.get(`maxDeviation`,.5)*Math.min(1,t-e);e<-o&&(e=-o),t>1+o&&(t=1+o);let s=this.getPrivate(`maxZoomFactor`,this.get(`maxZoomFactor`,100)),c=s;y(n)||(n=this.get(`interpolationDuration`,0)),r||=`end`,t===1&&e!==0&&(r=e<this.get(`start`,0)?`start`:`end`),e===0&&t!==1&&(r=t>this.get(`end`,1)?`end`:`start`);let l=this.get(`minZoomCount`,0),u=this.dataItems;u&&u.length<l&&(l=u.length);let d=this.get(`maxZoomCount`,1/0);y(l)&&(s=c/l);let f=1;if(y(d)&&(f=c/d),e>t&&([e,t]=[t,e]),r===`start`?(d>0&&1/(t-e)<f&&(t=e+1/f),1/(t-e)>s&&(t=e+1/s),t>1&&t-e<1/s&&(e=t-1/s)):(d>0&&1/(t-e)<f&&(e=t-1/f),1/(t-e)>s&&(e=t-1/s),e<0&&t-e<1/s&&(t=e+1/s)),1/(t-e)>s&&(t=e+1/s),1/(t-e)>s&&(e=t-1/s),d!=null&&l!=null&&e==this.get(`start`)&&t==this.get(`end`)){let e=this.chart;e&&e._handleAxisSelection(this,!0)}if((i&&i.playing&&i.to==e||this.get(`start`)==e)&&(a&&a.playing&&a.to==t||this.get(`end`)==t))return;if(n>0){let r=this.get(`interpolationEasing`),i,a;if(this.get(`start`)!=e&&(i=this.animate({key:`start`,to:e,duration:n,easing:r})),this.get(`end`)!=t&&(a=this.animate({key:`end`,to:t,duration:n,easing:r})),this._sAnimation=i,this._eAnimation=a,i)return i;if(a)return a}else this.set(`start`,e),this.set(`end`,t),this.root.events.once(`frameended`,()=>{this.markDirtyKey(`start`)})}else this._sAnimation&&this._sAnimation.stop(),this._eAnimation&&this._eAnimation.stop()}get series(){return this._series}_processAxisRange(e,t){e.setRaw(`isRange`,!0),this._createAssets(e,t),this._rangesDirty=!0,this._prepareDataItem(e);let n=e.get(`above`),r=this.topGridContainer,i=e.get(`grid`);n&&i&&r.children.moveValue(i);let a=e.get(`axisFill`);n&&a&&r.children.moveValue(a)}_prepareDataItem(e,t){}markDirtyExtremes(){}markDirtySelectionExtremes(){}_calculateTotals(){}_updateAxisRanges(){this._bullets={},this.axisRanges.each(e=>{this._prepareDataItem(e)}),A(this._seriesAxisRanges,e=>{this._prepareDataItem(e)})}_prepareChildren(){super._prepareChildren();let e=this.ghostLabel;if(e&&(this.get(`fixAxisSize`)?e.set(`visible`,!0):e.set(`visible`,!1)),this.isDirty(`start`)||this.isDirty(`end`)){let e=this.chart;e&&e._updateCursor();let t=this.get(`start`,0),n=this.get(`end`,1),r=this.get(`maxDeviation`,.5)*Math.min(1,n-t);if(t<-r){let e=t+r;t=-r,this.setRaw(`start`,t),this.isDirty(`end`)&&this.setRaw(`end`,n-e)}if(n>1+r){let e=n-1-r;n=1+r,this.setRaw(`end`,n),this.isDirty(`start`)&&this.setRaw(`start`,t-e)}}let t=this.get(`renderer`);if(t._start=this.get(`start`),t._end=this.get(`end`),t._inversed=t.get(`inversed`,!1),t._axisLength=t.axisLength()/(t._end-t._start),t._updateLC(),this.isDirty(`tooltip`)){let e=this.get(`tooltip`);if(e){let n=t.get(`themeTags`);e.addTag(`axis`),e.addTag(this.className.toLowerCase()),e._applyThemes(),n&&(e.set(`themeTags`,M(e.get(`themeTags`),n)),e.label._applyThemes())}}}_updateTooltipBounds(){let e=this.get(`tooltip`);e&&this.get(`renderer`).updateTooltipBounds(e)}_updateBounds(){super._updateBounds(),this._updateTooltipBounds()}processChart(e){this.chart=e;let t=this.get(`renderer`);t.chart=e,e.gridContainer.children.push(this.gridContainer),e.topGridContainer.children.push(this.topGridContainer),e.axisHeadersContainer.children.push(this.axisHeader),this.on(`start`,()=>{e._handleAxisSelection(this)}),this.on(`end`,()=>{e._handleAxisSelection(this)}),e.plotContainer.onPrivate(`width`,()=>{this.markDirtySize()}),e.plotContainer.onPrivate(`height`,()=>{this.markDirtySize()}),e.processAxis(this)}hideDataItem(e){return this._toggleFHDataItem(e,!0),super.hideDataItem(e)}showDataItem(e){return this._toggleFHDataItem(e,!1),super.showDataItem(e)}_toggleFHDataItem(e,t){let n=`forceHidden`,r=e.get(`label`);r&&r.set(n,t);let i=e.get(`grid`);i&&i.set(n,t);let a=e.get(`tick`);a&&a.set(n,t);let o=e.get(`axisFill`);o&&o.set(n,t);let s=e.get(`bullet`);if(s){let e=s.get(`sprite`);e&&e.set(n,t)}}_toggleDataItem(e,t){let n=e.get(`label`),r=`visible`;n&&n.setPrivate(r,t);let i=e.get(`grid`);i&&i.setPrivate(r,t);let a=e.get(`tick`);a&&a.setPrivate(r,t);let o=e.get(`axisFill`);o&&o.setPrivate(r,t);let s=e.get(`bullet`);if(s){let e=s.get(`sprite`);e&&e.setPrivate(r,t)}}_createAssets(e,t,n){var r,i,a;let o=this.get(`renderer`),s=`minor`,c=e.get(`label`);if(!c)o.makeLabel(e,t);else{let i=c.get(`themeTags`),a=!1;n?i?.indexOf(s)==-1&&(a=!0):i?.indexOf(s)!=-1&&(a=!0),a&&((r=c.parent)==null||r.children.removeValue(c),o.makeLabel(e,t),c.dispose(),o.labels.removeValue(c))}let l=e.get(`grid`);if(!l)o.makeGrid(e,t);else{let r=l.get(`themeTags`),a=!1;n?r?.indexOf(s)==-1&&(a=!0):r?.indexOf(s)!=-1&&(a=!0),a&&((i=l.parent)==null||i.children.removeValue(l),o.makeGrid(e,t),l.dispose(),o.grid.removeValue(l))}let u=e.get(`tick`);if(!u)o.makeTick(e,t);else{let r=!1,i=u.get(`themeTags`);n?i?.indexOf(s)==-1&&(r=!0):i?.indexOf(s)!=-1&&(r=!0),r&&((a=u.parent)==null||a.children.removeValue(u),o.makeTick(e,t),u.dispose(),o.ticks.removeValue(u))}(!n&&!e.get(`axisFill`)||n&&!e.get(`axisFill`)&&this.get(`minorAxisFillsEnabled`))&&o.makeAxisFill(e,t),this._processBullet(e)}_processBullet(e){let t=e.get(`bullet`),n=this.get(`bullet`);if(!t&&n&&!e.get(`isRange`)&&(t=n(this._root,this,e)),t){t.axis=this;let n=t.get(`sprite`);n&&(n._setDataItem(e),e.setRaw(`bullet`,t),n.parent||this.bulletsContainer.children.push(n))}}_afterChanged(){super._afterChanged();let e=this.chart;e&&(e._updateChartLayout(),e.axisHeadersContainer.markDirtySize()),this.get(`renderer`)._updatePositions(),this._seriesAdded=!1}disposeDataItem(e){super.disposeDataItem(e);let t=this.get(`renderer`),n=e.get(`label`);n&&(t.labels.removeValue(n),n.dispose());let r=e.get(`tick`);r&&(t.ticks.removeValue(r),r.dispose());let i=e.get(`grid`);i&&(t.grid.removeValue(i),i.dispose());let a=e.get(`axisFill`);a&&(t.axisFills.removeValue(a),a.dispose());let o=e.get(`bullet`);o&&o.dispose()}_updateGhost(){this.setPrivate(`cellWidth`,this.getCellWidthPosition()*this.get(`renderer`).axisLength());let e=this.ghostLabel;if(e){if(!e.isHidden()){let t=e.localBounds(),n=Math.ceil(t.right-t.left),r=e.get(`text`);A(this.dataItems,e=>{let t=e.get(`label`);if(t&&!t.isHidden()){let e=t.localBounds();Math.ceil(e.right-e.left)>n&&(r=t.text._getText())}}),e.set(`text`,r)}let t=this.get(`start`,0),n=this.get(`end`,1);this.get(`renderer`).updateLabel(e,t+(n-t)*.5)}}_handleCursorPosition(e,t){e=this.get(`renderer`).toAxisPosition(e),this._cursorPosition=e,this._snapToSeries=t,this.updateTooltip()}updateTooltip(){let e=this._snapToSeries,t=this._cursorPosition,n=this.get(`tooltip`),r=this.get(`renderer`);y(t)&&(A(this.series,n=>{if(n.get(`baseAxis`)===this){let r=this.getSeriesItem(n,t,this.get(`tooltipLocation`));e&&e.indexOf(n)!=-1?(n.updateLegendMarker(r),n.updateLegendValue(r),n._settings.tooltipDataItem=r):(n.showDataItemTooltip(r),n.setRaw(`tooltipDataItem`,r))}}),this.get(`snapTooltip`)&&(t=this.roundAxisPosition(t,this.get(`tooltipLocation`,.5))),this.setPrivateRaw(`tooltipPosition`,t),n&&(r.updateTooltipBounds(n),_(t)?n.hide(0):(this._updateTooltipText(n,t),r.positionTooltip(n,t),t<this.get(`start`,0)||t>this.get(`end`,1)?n.hide(0):n.show(0))))}_updateTooltipText(e,t){e.label.set(`text`,this.getTooltipText(t))}roundAxisPosition(e,t){return e}_handleSeriesRemoved(){}handleCursorShow(){let e=this.get(`tooltip`);e&&e.show()}handleCursorHide(){let e=this.get(`tooltip`);e&&e.hide()}processSeriesDataItem(e,t){}_clearDirty(){super._clearDirty(),this._sizeDirty=!1,this._rangesDirty=!1}coordinateToPosition(e){let t=this.get(`renderer`);return t.toAxisPosition(e/t.axisLength())}toAxisPosition(e){return this.get(`renderer`).toAxisPosition(e)}toGlobalPosition(e){return this.get(`renderer`).toGlobalPosition(e)}fixPosition(e){return this.get(`renderer`).fixPosition(e)}shouldGap(e,t,n,r){return!1}createAxisRange(e){return this.axisRanges.push(e)}_groupSeriesData(e){}getCellWidthPosition(){return .05}};Object.defineProperty(q,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`Axis`}),Object.defineProperty(q,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:ue.classNames.concat([q.className])});var J=class extends q{constructor(){super(...arguments),Object.defineProperty(this,`_dirtyExtremes`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_dirtySelectionExtremes`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_dseHandled`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_deltaMinMax`,{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,`_minReal`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_maxReal`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_minRealLog`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_baseValue`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`_syncDp`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_minLogAdjusted`,{enumerable:!0,configurable:!0,writable:!0,value:1})}markDirtyExtremes(){this._dirtyExtremes=!0,this.markDirty()}markDirtySelectionExtremes(){this._dirtySelectionExtremes=!0,this.markDirty()}_afterNew(){this._settings.themeTags=M(this._settings.themeTags,[`axis`]),this.setPrivateRaw(`name`,`value`),this.addTag(`value`),super._afterNew()}_prepareChildren(){var e;if(super._prepareChildren(),this.isDirty(`syncWithAxis`)){this._prevSettings.syncWithAxis&&this._syncDp&&this._syncDp.dispose();let e=this.get(`syncWithAxis`);e&&(this._syncDp=new h([e.onPrivate(`selectionMinFinal`,()=>{this._dirtySelectionExtremes=!0}),e.onPrivate(`selectionMaxFinal`,()=>{this._dirtySelectionExtremes=!0})]))}let t=!1;if((this.isDirty(`min`)||this.isDirty(`max`)||this.isDirty(`maxPrecision`)||this.isDirty(`numberFormat`))&&(t=!0,(e=this.ghostLabel)==null||e.set(`text`,``)),(this._sizeDirty||this._dirtyExtremes||this._valuesDirty||t||this.isPrivateDirty(`width`)||this.isPrivateDirty(`height`)||this.isDirty(`extraMin`)||this.isDirty(`extraMax`)||this.isDirty(`logarithmic`)||this.isDirty(`treatZeroAs`)||this.isDirty(`baseValue`)||this.isDirty(`strictMinMax`)||this.isDirty(`strictMinMaxSelection`))&&(this._getMinMax(),this._dirtyExtremes=!1),this._handleSizeDirty(),this._dirtySelectionExtremes&&!this._isPanning&&this.get(`autoZoom`,!0)){let e=this.chart,t=!1;if(e){let n=this.get(`renderer`).getPrivate(`letter`);n==`Y`?e.xAxes.each(e=>{e.className!=`ValueAxis`&&(t=!0)}):n==`X`&&e.yAxes.each(e=>{e.className!=`ValueAxis`&&(t=!0)})}t&&this._getSelectionMinMax(),this._dirtySelectionExtremes=!1}this._groupData(),(this._sizeDirty||this._valuesDirty||this.isDirty(`start`)||this.isDirty(`end`)||this.isPrivateDirty(`min`)||this.isPrivateDirty(`selectionMax`)||this.isPrivateDirty(`selectionMin`)||this.isPrivateDirty(`max`)||this.isPrivateDirty(`step`)||this.isPrivateDirty(`width`)||this.isPrivateDirty(`height`)||this.isDirty(`logarithmic`))&&(this._handleRangeChange(),this._prepareAxisItems(),this._updateAxisRanges()),this._baseValue=this.baseValue()}_handleSizeDirty(){this._sizeDirty&&!this._dseHandled&&(this._dirtySelectionExtremes=!0,this._dseHandled=!0,(this.getPrivate(`selectionMinFinal`)!=this.getPrivate(`selectionMin`)||this.getPrivate(`selectionMaxFinal`)!=this.getPrivate(`selectionMax`))&&(this._dirtySelectionExtremes=!1))}_clearDirty(){super._clearDirty(),this._dseHandled=!1}_groupData(){}_formatText(e){let t=this.get(`numberFormat`),n=this.getNumberFormatter(),r=``;return r=t?n.format(e,t):n.format(e,void 0,this.getPrivate(`stepDecimalPlaces`)),r}_prepareAxisItems(){let e=this.getPrivate(`min`),t=this.getPrivate(`max`);if(y(e)&&y(t)){let t=this.get(`logarithmic`),n=this.getPrivate(`step`),r=this.getPrivate(`selectionMin`),i=this.getPrivate(`selectionMax`)+n,a=r-n,o=1,s=e;if(t){if(a=this._minLogAdjusted,a<r)for(;a<r;)a+=n;if(s=a,s<=0){let e=this._minRealLog;y(e)||(e=1),s=10**(Math.log(e)*Math.LOG10E),n<1&&(s=y(this._minRealLog)?this._minRealLog:10**-50)}o=Math.log(i-n)*Math.LOG10E-Math.log(s)*Math.LOG10E,o>2&&(a=10**(Math.log(s)*Math.LOG10E-50))}let c=this.get(`renderer`),l=c.get(`minorLabelsEnabled`),u=c.get(`minorGridEnabled`,l),d=10**Math.floor(Math.log(Math.abs(n))*Math.LOG10E),f=Math.round(n/d),p=2;k(f/5,10)%1==0&&(p=5),k(f/10,10)%1==0&&(p=10);let m=n/p,h=0,g=0,_=-1/0;for(;a<i;){let e;this.dataItems.length<h+1?(e=new B(this,void 0,{}),this._dataItems.push(e),this.processDataItem(e)):e=this.dataItems[h],this._createAssets(e,[]),this._toggleDataItem(e,!0),e.setRaw(`value`,a);let r=e.get(`label`);r&&r.set(`text`,this._formatText(a)),this._prepareDataItem(e);let i=a;if(t&&o>2?i=10**(Math.log(s)*Math.LOG10E+h-50):i+=n,u){let e=a+m;for(t&&(o>2&&(m=this._adjustMinMax(a,i,10).step),e=a+m);e<i-n*1e-11;){let t;this.minorDataItems.length<g+1?(t=new B(this,void 0,{}),this.minorDataItems.push(t),this.processDataItem(t)):t=this.minorDataItems[g],this._createAssets(t,[`minor`],!0),this._toggleDataItem(t,!0),t.setRaw(`value`,e);let n=t.get(`label`);n&&(l?n.set(`text`,this._formatText(e)):n.setPrivate(`visible`,!1)),this._prepareDataItem(t),e+=m,g++}}if(a=i,_==a)break;let c=10**Math.floor(Math.log(Math.abs(n))*Math.LOG10E);if(c<1&&!t){let e=Math.round(Math.abs(Math.log(Math.abs(c))*Math.LOG10E))+2;a=k(a,e)}h++,t&&o<=2&&a-n<n&&(a=n),_=a}for(let e=h;e<this.dataItems.length;e++)this._toggleDataItem(this.dataItems[e],!1);for(let e=g;e<this.minorDataItems.length;e++)this._toggleDataItem(this.minorDataItems[e],!1);A(this.series,e=>{e.inited&&e._markDirtyAxes()}),this._updateGhost()}}_prepareDataItem(e,t){let n=this.get(`renderer`),r=e.get(`value`),i=e.get(`endValue`),a=this.valueToPosition(r),o=a,s=this.valueToPosition(r+this.getPrivate(`step`));y(i)&&(o=this.valueToPosition(i),s=o),e.get(`isRange`)&&(i??(s=a));let c=o,l=e.get(`labelEndValue`);l!=null&&(c=this.valueToPosition(l)),n.updateLabel(e.get(`label`),a,c,t);let u=e.get(`grid`);if(n.updateGrid(u,a,o),u&&(r==this.get(`baseValue`,0)?(u.addTag(`base`),u._applyThemes()):u.hasTag(`base`)&&(u.removeTag(`base`),u._applyThemes())),n.updateTick(e.get(`tick`),a,c,t),n.updateFill(e.get(`axisFill`),a,s),this._processBullet(e),n.updateBullet(e.get(`bullet`),a,o),!e.get(`isRange`)){let t=this.get(`fillRule`);t&&t(e)}}_handleRangeChange(){let e=this.positionToValue(this.get(`start`,0)),t=this.positionToValue(this.get(`end`,1)),n=this.get(`renderer`).gridCount(),r=this._adjustMinMax(e,t,n,!0),i=l(r.step);this.setPrivateRaw(`stepDecimalPlaces`,i),e=k(e,i),t=k(t,i),r=this._adjustMinMax(e,t,n,!0);let a=r.step;e=r.min,t=r.max,(this.getPrivate(`selectionMin`)!==e||this.getPrivate(`selectionMax`)!==t||this.getPrivate(`step`)!==a)&&(this.setPrivateRaw(`selectionMin`,e),this.setPrivateRaw(`selectionMax`,t),this.setPrivateRaw(`step`,a))}positionToValue(e){let t=this.getPrivate(`min`),n=this.getPrivate(`max`);return this.get(`logarithmic`)?Math.E**+((e*(Math.log(n)*Math.LOG10E-Math.log(t)*Math.LOG10E)+Math.log(t)*Math.LOG10E)/Math.LOG10E):e*(n-t)+t}valueToPosition(e){let t=this.getPrivate(`min`),n=this.getPrivate(`max`);if(this.get(`logarithmic`)){if(e<=0){let t=this.get(`treatZeroAs`);y(t)&&(e=t)}return(Math.log(e)*Math.LOG10E-Math.log(t)*Math.LOG10E)/(Math.log(n)*Math.LOG10E-Math.log(t)*Math.LOG10E)}else return(e-t)/(n-t)}valueToFinalPosition(e){let t=this.getPrivate(`minFinal`),n=this.getPrivate(`maxFinal`);if(this.get(`logarithmic`)){if(e<=0){let t=this.get(`treatZeroAs`);y(t)&&(e=t)}return(Math.log(e)*Math.LOG10E-Math.log(t)*Math.LOG10E)/(Math.log(n)*Math.LOG10E-Math.log(t)*Math.LOG10E)}else return(e-t)/(n-t)}getX(e,t,n){e=n+(e-n)*t;let r=this.valueToPosition(e);return this._settings.renderer.positionToCoordinate(r)}getY(e,t,n){e=n+(e-n)*t;let r=this.valueToPosition(e);return this._settings.renderer.positionToCoordinate(r)}getDataItemCoordinateX(e,t,n,r){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(e,t,n,r))}getDataItemPositionX(e,t,n,r){let i=e.get(t);if(e.get(`stackToItemX`)){let n=e.component;i=i*r+n.getStackedXValueWorking(e,t)}else i=this._baseValue+(i-this._baseValue)*r;return this.valueToPosition(i)}getDataItemCoordinateY(e,t,n,r){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(e,t,n,r))}getDataItemPositionY(e,t,n,r){let i=e.get(t);if(e.get(`stackToItemY`)){let n=e.component;i=i*r+n.getStackedYValueWorking(e,t)}else i=this._baseValue+(i-this._baseValue)*r;return this.valueToPosition(i)}basePosition(){return this.valueToPosition(this.baseValue())}baseValue(){let e=Math.min(this.getPrivate(`minFinal`,-1/0),this.getPrivate(`selectionMin`,-1/0)),t=Math.max(this.getPrivate(`maxFinal`,1/0),this.getPrivate(`selectionMax`,1/0)),n=this.get(`baseValue`,0);return n<e&&(n=e),n>t&&(n=t),n}cellEndValue(e){return e}fixSmallStep(e){return 1+e===1?(e*=2,this.fixSmallStep(e)):e}_fixMin(e){return e}_fixMax(e){return e}_calculateTotals(){if(this.get(`calculateTotals`)){let e=this.series[0];if(e){let t=e.startIndex();if(e.dataItems.length>0){t>0&&t--;let n=e.endIndex();n<e.dataItems.length&&n++;let r,i;e.get(`yAxis`)==this?(r=`valueY`,i=`vcy`):e.get(`xAxis`)==this&&(r=`valueX`,i=`vcx`);let a=r+`Working`;if(r)for(let e=t;e<n;e++){let t=0,n=0;A(this.series,r=>{if(!r.get(`excludeFromTotal`)){let o=r.dataItems[e];if(o){let e=o.get(a)*r.get(i);_(e)||(t+=e,n+=Math.abs(e))}}}),A(this.series,o=>{if(!o.get(`excludeFromTotal`)){let s=o.dataItems[e];if(s){let e=s.get(a)*o.get(i);if(!_(e)){s.set(r+`Total`,n),s.set(r+`Sum`,t);let i=e/n*100;n==0&&(i=0),s.set(r+`TotalPercent`,i)}}}})}}}}}_getSelectionMinMax(){let e=this.getPrivate(`minFinal`),t=this.getPrivate(`maxFinal`),n=this.get(`min`),r=this.get(`max`),i=this.get(`extraMin`,0),o=this.get(`extraMax`,0);this.get(`logarithmic`)&&(this.get(`extraMin`)??(i=.1),this.get(`extraMax`)??(o=.2));let s=this.get(`renderer`).gridCount(),c=this.get(`strictMinMaxSelection`),l=this.get(`strictMinMax`);if(y(e)&&y(t)){let u=t,d=e;if(A(this.series,e=>{if(!e.get(`ignoreMinMax`)){let t,n,r=e.getPrivate(`outOfSelection`);if(e.get(`xAxis`)===this){if(!r){let r=e.getPrivate(`minX`),i=e.getPrivate(`maxX`);(e.startIndex()!=0||e.endIndex()!=e.dataItems.length)&&(r=void 0,i=void 0),t=e.getPrivate(`selectionMinX`,r),n=e.getPrivate(`selectionMaxX`,i)}}else if(e.get(`yAxis`)===this&&!r){let r=e.getPrivate(`minY`),i=e.getPrivate(`maxY`);(e.startIndex()!=0||e.endIndex()!=e.dataItems.length)&&(r=void 0,i=void 0),t=e.getPrivate(`selectionMinY`,r),n=e.getPrivate(`selectionMaxY`,i)}!e.isHidden()&&!e.isShowing()&&(y(t)&&(u=Math.min(u,t)),y(n)&&(d=Math.max(d,n)))}}),this.axisRanges.each(e=>{if(e.get(`affectsMinMax`)){let t=e.get(`value`);t!=null&&(u=Math.min(u,t),d=Math.max(d,t)),t=e.get(`endValue`),t!=null&&(u=Math.min(u,t),d=Math.max(d,t))}}),u>d&&([u,d]=[d,u]),y(n)?u=l?n:e:l&&y(this._minReal)&&(u=this._minReal),y(r)?d=l?r:t:l&&y(this._maxReal)&&(d=this._maxReal),u===d){let t=u;if(u-=this._deltaMinMax,d+=this._deltaMinMax,u<e){let n=t-e;n==0&&(n=this._deltaMinMax),u=t-n,d=t+n,l=!0}let n=this._adjustMinMax(u,d,s,l);u=n.min,d=n.max}let f=u,p=d,m=d-u;u-=m*i,d+=m*o;let h=this._adjustMinMax(u,d,s);u=h.min,d=h.max,u=a(u,e,t),d=a(d,e,t),h=this._adjustMinMax(u,d,s,!0),l||(u=h.min,d=h.max);let g=this.get(`syncWithAxis`);if(g&&(h=this._syncAxes(u,d,h.step,g.getPrivate(`selectionMinFinal`,g.getPrivate(`minFinal`,0)),g.getPrivate(`selectionMaxFinal`,g.getPrivate(`maxFinal`,1)),g.getPrivate(`selectionStepFinal`,g.getPrivate(`step`,1))),h.min<e&&(h.min=e),h.max>t&&(h.max=t),u=h.min,d=h.max),l&&(y(n)&&(u=Math.max(u,n)),y(r)&&(d=Math.min(d,r))),c&&(u=f-(p-f)*i,d=p+(p-f)*o),l){u=y(n)?n:f,d=y(r)?r:p,d-u<=1e-8&&(u-=this._deltaMinMax,d+=this._deltaMinMax);let e=d-u;u-=e*i,d+=e*o}this.get(`logarithmic`)&&(u<=0&&(u=f*(1-Math.min(i,.99))),u<e&&(u=e),d>t&&(d=t));let _=Math.min(20,Math.ceil(Math.log(this.getPrivate(`maxZoomFactor`,100)+1)/Math.LN10)+2),v=k(this.valueToFinalPosition(u),_),b=k(this.valueToFinalPosition(d),_);this.setPrivateRaw(`selectionMinFinal`,u),this.setPrivateRaw(`selectionMaxFinal`,d),this.setPrivateRaw(`selectionStepFinal`,h.step),this.zoom(v,b)}}_getMinMax(){let e=this.get(`min`),t=this.get(`max`),n=1/0,r=-1/0,i=this.get(`extraMin`,0),a=this.get(`extraMax`,0);this.get(`logarithmic`)&&(this.get(`strictMinMax`)||(this.get(`extraMin`)??(i=.1),this.get(`extraMax`)??(a=.2)));let o=1/0;if(A(this.series,e=>{if(!e.get(`ignoreMinMax`)){let t,i;if(e.get(`xAxis`)===this?(t=e.getPrivate(`minX`),i=e.getPrivate(`maxX`)):e.get(`yAxis`)===this&&(t=e.getPrivate(`minY`),i=e.getPrivate(`maxY`)),y(t)&&y(i)){n=Math.min(n,t),r=Math.max(r,i);let e=i-t;e<=0&&(e=Math.abs(i/100)),e<o&&(o=e)}}}),this.axisRanges.each(e=>{if(e.get(`affectsMinMax`)){let t=e.get(`value`);t!=null&&(n=Math.min(n,t),r=Math.max(r,t)),t=e.get(`endValue`),t!=null&&(n=Math.min(n,t),r=Math.max(r,t))}}),this.get(`logarithmic`)){let e=this.get(`treatZeroAs`);y(e)&&n<=0&&(n=e)}if(n===0&&r===0&&(r=.9,n=-.9),y(e)&&(n=e),y(t)&&(r=t),n===1/0||r===-1/0){this.setPrivate(`minFinal`,void 0),this.setPrivate(`maxFinal`,void 0);return}n>r&&([n,r]=[r,n]);let s=n,c=r,l=this.adapters.fold(`min`,n),u=this.adapters.fold(`max`,r);this._minRealLog=n,y(l)&&(n=l),y(u)&&(r=u),n=this._fixMin(n),r=this._fixMax(r),r-n<=1/10**15&&(r-n===0?this._getDelta(r):this._deltaMinMax=(r-n)/2,n-=this._deltaMinMax,r+=this._deltaMinMax),n-=(r-n)*i,r+=(r-n)*a,this.get(`logarithmic`)&&(n<0&&s>=0&&(n=0),r>0&&c<=0&&(r=0)),this._minReal=n,this._maxReal=r;let d=this.get(`strictMinMax`),f=this.get(`strictMinMaxSelection`,!1);f&&(d=f);let p=d;y(t)&&(p=!0);let m=this.get(`renderer`).gridCount(),h=this._adjustMinMax(n,r,m,p);if(n=h.min,r=h.max,h=this._adjustMinMax(n,r,m,!0),n=h.min,r=h.max,d){n=y(e)?e:this._minReal,r=y(t)?t:this._maxReal,r-n<=1e-8&&(n-=this._deltaMinMax,r+=this._deltaMinMax);let o=r-n;n-=o*i,r+=o*a}l=this.adapters.fold(`min`,n),u=this.adapters.fold(`max`,r),y(l)&&(n=l),y(u)&&(r=u),o==1/0&&(o=r-n);let g=Math.round(Math.abs(Math.log(Math.abs(r-n))*Math.LOG10E))+5;n=k(n,g),r=k(r,g);let _=this.get(`syncWithAxis`);if(_&&(h=this._syncAxes(n,r,h.step,_.getPrivate(`minFinal`,_.getPrivate(`min`,0)),_.getPrivate(`maxFinal`,_.getPrivate(`max`,1)),_.getPrivate(`step`,1)),n=h.min,r=h.max),this.setPrivateRaw(`maxZoomFactor`,Math.max(1,Math.ceil((r-n)/o*this.get(`maxZoomFactor`,100)))),this._fixZoomFactor(),this.get(`logarithmic`)&&(this._minLogAdjusted=n,n=this._minReal,r=this._maxReal,n<=0&&(n=s*(1-Math.min(i,.99)))),y(n)&&y(r)&&(this.getPrivate(`minFinal`)!==n||this.getPrivate(`maxFinal`)!==r)){this.setPrivate(`minFinal`,n),this.setPrivate(`maxFinal`,r),this._saveMinMax(n,r);let e=this.get(`interpolationDuration`,0),t=this.get(`interpolationEasing`);this.animatePrivate({key:`min`,to:n,duration:e,easing:t}),this.animatePrivate({key:`max`,to:r,duration:e,easing:t})}}_fixZoomFactor(){}_getDelta(e){let t=Math.log(Math.abs(e))*Math.LOG10E,n=10**Math.floor(t);n/=10,this._deltaMinMax=n}_saveMinMax(e,t){}_adjustMinMax(e,t,n,r){n<=1&&(n=1),n=Math.round(n);let i=e,a=t,o=t-e;o===0&&(o=Math.abs(t));let s=Math.log(Math.abs(o))*Math.LOG10E,c=10**Math.floor(s);c/=10;let l=c;r&&(l=0),r?(e=Math.floor(e/c)*c,t=Math.ceil(t/c)*c):(e=Math.ceil(e/c)*c-l,t=Math.floor(t/c)*c+l),e<0&&i>=0&&(e=0),t>0&&a<=0&&(t=0),s=Math.log(Math.abs(o))*Math.LOG10E,c=10**Math.floor(s),c/=100;let u=Math.ceil(o/n/c)*c,d=10**Math.floor(Math.log(Math.abs(u))*Math.LOG10E),f=Math.ceil(u/d);f>5?f=10:f<=5&&f>2&&(f=5),u=Math.ceil(u/(d*f))*d*f;let p=this.get(`maxPrecision`);if(y(p)){let e=m(u,p);p<Number.MAX_VALUE&&u!==e&&(u=e,u==0&&(u=1))}let h=0;d<1&&(h=Math.round(Math.abs(Math.log(Math.abs(d))*Math.LOG10E))+1,u=k(u,h));let g=Math.floor(e/u);e=k(u*g,h);let _;return _=r?Math.floor(t/u):Math.ceil(t/u),_===g&&_++,t=k(u*_,h),t<a&&(t+=u),e>i&&(e-=u),u=this.fixSmallStep(u),{min:e,max:t,step:u}}getTooltipText(e,t){let n=this.get(`tooltipNumberFormat`,this.get(`numberFormat`)),r=this.getNumberFormatter(),i=this.get(`extraTooltipPrecision`,0),a=this.getPrivate(`stepDecimalPlaces`,0)+i,o=k(this.positionToValue(e),a);return n?r.format(o,n):r.format(o,void 0,a)}getSeriesItem(e,t){let n=this.getPrivate(`name`)+this.get(`renderer`).getPrivate(`letter`),r=this.positionToValue(t),i,a;if(A(e.dataItems,(e,t)=>{let o=Math.abs(e.get(n)-r);(i===void 0||o<a)&&(i=t,a=o)}),i!=null)return e.dataItems[i]}zoomToValues(e,t,n){let r=this.getPrivate(`minFinal`,this.getPrivate(`min`,0)),i=this.getPrivate(`maxFinal`,this.getPrivate(`max`,1));this.getPrivate(`min`)!=null&&this.getPrivate(`max`)!=null&&this.zoom((e-r)/(i-r),(t-r)/(i-r),n)}_syncAxes(e,t,n,r,i,a){if(this.get(`syncWithAxis`)){let o=Math.round(i-r)/a,s=Math.round((t-e)/n),c=this.get(`renderer`).gridCount();if(y(o)&&y(s)){let r=!1,i=0,a=(t-e)*.01,s=e,l=t,u=n;for(;r!=1;)if(r=this._checkSync(s,l,u,o),i++,i>500&&(r=!0),r)e=s,t=l,n=u;else{i/3==Math.round(i/3)?(s=e-a*i,e>=0&&s<0&&(s=0)):(l=t+a*i,l<=0&&l>0&&(l=0));let n=this._adjustMinMax(s,l,c,!0);s=n.min,l=n.max,u=n.step}}}return{min:e,max:t,step:n}}_checkSync(e,t,n,r){let i=(t-e)/n;for(let e=1;e<r;e++)if(k(i/e,1)==r||i*e==r)return!0;return!1}getCellWidthPosition(){let e=this.getPrivate(`selectionMax`,this.getPrivate(`max`)),t=this.getPrivate(`selectionMin`,this.getPrivate(`min`));return y(e)&&y(t)?this.getPrivate(`step`,1)/(e-t):.05}nextPosition(e){e??=1,this.get(`renderer`).getPrivate(`letter`)==`Y`&&(e*=-1);let t=this.positionToValue(this.getPrivate(`tooltipPosition`,0));return t+=this.getPrivate(`step`,1)*e,t=a(t,this.getPrivate(`selectionMin`,0),this.getPrivate(`selectionMax`,1)),this.toGlobalPosition(this.valueToPosition(t))}};Object.defineProperty(J,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`ValueAxis`}),Object.defineProperty(J,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:q.classNames.concat([J.className])});var Y=class e extends q{constructor(){super(...arguments),Object.defineProperty(this,`_frequency`,{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,`_itemMap`,{enumerable:!0,configurable:!0,writable:!0,value:{}})}_afterNew(){this._settings.themeTags=M(this._settings.themeTags,[`axis`]),this.fields.push(`category`,`id`,`cellSize`),this.setPrivateRaw(`name`,`category`),this.addTag(`category`),super._afterNew()}_afterDataChange(){super._afterDataChange();let e=this.dataItems.length;e>0&&this.setPrivateRaw(`maxZoomFactor`,e),this.setPrivateRaw(`startIndex`,Math.min(this.getPrivate(`startIndex`,0),e)),this.setPrivateRaw(`endIndex`,Math.min(this.getPrivate(`endIndex`,e),1))}_prepareChildren(){super._prepareChildren();let e=this.dataItems.length,t=0;this._valuesDirty&&(this._itemMap={},A(this.dataItems,e=>{e.setRaw(`index`,t),this._itemMap[e.get(`category`)]=e,t++}),this.setPrivateRaw(`maxZoomFactor`,e));let n=this.get(`start`,0),r=this.get(`end`,1),i=this._getIndices(n,r);this.setPrivateRaw(`startIndex`,i.startIndex),this.setPrivateRaw(`endIndex`,i.endIndex),(this._sizeDirty||this._valuesDirty||this.isDirty(`start`)||this.isDirty(`end`)||this.isPrivateDirty(`endIndex`)||this.isPrivateDirty(`startIndex`)||this.isPrivateDirty(`width`)||this.isPrivateDirty(`height`))&&this.dataItems.length>0&&(this._handleRangeChange(),this._prepareAxisItems(),this._updateAxisRanges())}adjustZoom(){let e=this.dataItems.length;if(e>1){let t=this.get(`maxZoomCount`,this.dataItems.length),n=this.get(`minZoomCount`,1),r=0,i=this.getPrivate(`startIndex`,0),a=this.getPrivate(`endIndex`,0),o=this._sAnimation,s=this._eAnimation,c=this.get(`start`,0),l=!1;o&&!o.stopped&&(c=Number(o.to),l=!0);let u=this.get(`end`,1);if(s&&!s.stopped&&(u=Number(s.to),l=!0),l){let e=this._getIndices(c,u);i=e.startIndex,a=e.endIndex}for(let e=i;e<a;e++){let t=this.dataItems[e];r+=t.get(`finalCellSize`,1)}if(r<=n){let t=0;for(let r=i;r<e;r++){let e=this.dataItems[r];if(t+=e.get(`finalCellSize`,1),a=r+1,t>=n)break}if(t<n)for(let e=i-1;e>=0;e--){let r=this.dataItems[e];if(t+=r.get(`finalCellSize`,1),i=e,t>=n)break}this.zoomToIndexes(i,a)}else if(r>=t){let e=r;for(let n=a-1;n>=i;n--){let r=this.dataItems[n];if(e-=r.get(`finalCellSize`,1),e<=t){a=n+1;break}}this.zoomToIndexes(i,a)}}}_handleRangeChange(){A(this.series,t=>{let n=this.dataItems[this.startIndex()].get(`category`),r=this.dataItems[this.endIndex()-1].get(`category`),i=t.get(`baseAxis`),a=t.get(`xAxis`),o=t.get(`yAxis`);if(a instanceof e&&o instanceof e)t._markDirtyAxes();else if(i===this){let e,s,c=o;if(a===i?(t.get(`categoryXField`)&&(e=`categoryX`),t.get(`openCategoryXField`)&&(s=`openCategoryX`)):o===i&&(t.get(`categoryYField`)&&(e=`categoryY`),t.get(`openCategoryYField`)&&(s=`openCategoryY`),c=a),c instanceof J&&(e||s)){let i,a;function o(e,t,n,r,i,a){let o,s=t.categoryToIndex(i);for(;!o&&s>=0&&s<t.dataItems.length;){let i=t.dataItems[s].get(`category`);if(a==`previous`)for(let t=e.dataItems.length-1;t>=0;t--){let a=e.dataItems[t];if(n&&a.get(n)===i){o=a;break}if(r&&a.get(r)===i){o=a;break}}else for(let t=0,a=e.dataItems.length;t<a;t++){let a=e.dataItems[t];if(n&&a.get(n)===i){o=a;break}if(r&&a.get(r)===i){o=a;break}}o||(s+=a===`previous`?-1:1)}return o}i=o(t,this,e,s,n,`next`),a=o(t,this,e,s,r,`previous`);let c=0,l=t.dataItems.length;i&&(c=t.dataItems.indexOf(i)),a&&(l=t.dataItems.indexOf(a)+1),t.setPrivate(`startIndex`,c),t.setPrivate(`endIndex`,l);let u=!1;for(let e=c;e<l;e++){let n=t.dataItems[e];if(A(t.__valueXShowFields,e=>{n.get(e)!=null&&(u=!0)}),A(t.__valueYShowFields,e=>{n.get(e)!=null&&(u=!0)}),u)break}t.setPrivate(`outOfSelection`,!u)}t._markDirtyAxes()}})}_prepareAxisItems(){var e;let t=this.get(`renderer`),n=this.dataItems.length,r=this.startIndex();r>0&&r--;let i=this.endIndex();i<n&&i++;let a=t.get(`minorLabelsEnabled`),o=t.get(`minorGridEnabled`,a),s=t.axisLength()/Math.max(t.get(`minGridDistance`),1),c=Math.max(1,Math.min(n,Math.ceil((i-r)/s)));r=Math.floor(r/c)*c,this._frequency=c;for(let e=0;e<n;e++)this._toggleDataItem(this.dataItems[e],!1);let l=this.dataItems[r].get(`index`,0);for(let e=r;e<i;e+=c){let t=this.dataItems[e];this._createAssets(t,[]),this._toggleDataItem(t,!0);let n=c;o&&(n=1),this._prepareDataItem(t,l,n),l++}if(t.get(`minorGridEnabled`))for(let t=r;t<i;t++){let n=this.dataItems[t];t%c!=0&&(this._createAssets(n,[`minor`],!0),this._toggleDataItem(n,!0),this._prepareDataItem(n,0,1),a||(e=n.get(`label`))==null||e.setPrivate(`visible`,!1))}this._updateGhost()}_prepareDataItem(e,t,n){let r=this.get(`renderer`),i=e.get(`categoryLocation`,0),a=e.get(`endCategoryLocation`,1),o=e.get(`index`);y(o)||(o=this.categoryToIndex(e.get(`category`)));let s=this.indexToPosition(o,i),c=e.get(`endCategory`),l;c?(l=this.categoryToIndex(c),y(l)||(l=o)):l=o;let u=this.indexToPosition(l,a),d,f;if(e.get(`isRange`)){if(d=l,!y(o)){this._toggleDataItem(e,!1);return}}else d=o+this._frequency-1;f=this.indexToPosition(d,a),r.updateLabel(e.get(`label`),s,u,n),r.updateGrid(e.get(`grid`),s,u),r.updateTick(e.get(`tick`),s,u,n),r.updateFill(e.get(`axisFill`),s,f),this._processBullet(e),r.updateBullet(e.get(`bullet`),s,u);let p=this.get(`fillRule`);p&&p(e,t)}startIndex(){let e=this.dataItems.length;return Math.min(Math.max(this.getPrivate(`startIndex`,0),0),e-1)}endIndex(){let e=this.dataItems.length;return Math.max(1,Math.min(this.getPrivate(`endIndex`,e),e))}baseValue(){}basePosition(){return 0}getX(e){let t=this._itemMap[e];return t?this._settings.renderer.positionToCoordinate(this.indexToPosition(t.get(`index`,0))):NaN}getY(e){let t=this._itemMap[e];return t?this._settings.renderer.positionToCoordinate(this.indexToPosition(t.get(`index`,0))):NaN}getDataItemPositionX(e,t,n,r){let i=e.get(t),a=this._itemMap[i];return a?this.indexToPosition(a.get(`index`,0),n):NaN}getDataItemCoordinateX(e,t,n,r){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(e,t,n,r))}getDataItemPositionY(e,t,n,r){let i=e.get(t),a=this._itemMap[i];return a?this.indexToPosition(a.get(`index`,0),n):NaN}getDataItemCoordinateY(e,t,n,r){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(e,t,n,r))}indexToPosition(e,t,n){let r=this.dataItems.length,i=0;if(r==0||(e>=r&&(e=r-1,t=1),y(t)||(t=.5),!y(e)))return 0;let a=this.get(`startLocation`,0),o=this.get(`endLocation`,1);if(!this.get(`cellSizeField`))r-=a,r-=1-o,i=(e+t-a)/r;else{let r=n?`finalCellSize`:`cellSize`,s=this.dataItems,c=0;A(this.dataItems,e=>{c+=e.get(r,1)}),c-=a*s[0].get(r,1),c-=(1-o)*s[s.length-1].get(r,1);let l=0;for(let t=0;t<e;t++)l+=s[t].get(r,1);let u=s[e].get(r,1);i=(l+t*u-a*s[0].get(r,1))/c}if(!n){let t=this.dataItems[e];t&&(i+=t.get(`deltaPosition`,0))}return i}categoryToPosition(e){let t=this._itemMap[e];return t?this.indexToPosition(t.get(`index`)):NaN}categoryToIndex(e){let t=this._itemMap[e];return t?t.get(`index`):NaN}dataItemToPosition(e){return this.indexToPosition(e.get(`index`))}roundAxisPosition(e,t){return e+=(.5-t)/this.dataItems.length,this.indexToPosition(this.axisPositionToIndex(e),t)}axisPositionToIndex(e){let t=this.dataItems.length;if(t===0)return 0;if(this.get(`cellSizeField`)){let n=0,r=[];A(this.dataItems,e=>{let t=e.get(`cellSize`,1);r.push(t),n+=t});let i=this.get(`startLocation`,0),a=this.get(`endLocation`,1);n-=i,n-=1-a;let o=e*n+i,s=0;for(let e=0;e<t;e++){let t=r[e];if(o<s+t)return e;s+=t}return t-1}else return a(Math.floor(e*t),0,t-1)}getTooltipText(e,t){let n=this.dataItems[this.axisPositionToIndex(e)];if(n){let e=n.get(`label`);if(e)return C(e,this.get(`tooltipText`,``))}}_updateTooltipText(e,t){e._setDataItem(this.dataItems[this.axisPositionToIndex(t)]),e.label.text.markDirtyText()}getSeriesItem(e,t){if(this.dataItems.length>0){let n=this.getPrivate(`name`)+this.get(`renderer`).getPrivate(`letter`),r=this.axisPositionToIndex(t),i=e.dataItems[r],a=this.dataItems[r],o=a.get(`category`);if(i&&a&&i.get(n)===o)return i;for(let t=0,r=e.dataItems.length;t<r;t++){let r=e.dataItems[t];if(r.get(n)===o)return r}}}_getIndices(e,t){let n=this.dataItems.length,r=0,i=n,a=`cellSize`;if(this.get(`cellSizeField`)){let o=0,s=this.dataItems;if(s.length==0)return{startIndex:0,endIndex:0};A(s,e=>{o+=e.get(a,1)}),o-=this.get(`startLocation`,0)*s[0].get(a,1),o-=(1-this.get(`endLocation`,1))*s[s.length-1].get(a,1);let c=0;for(let t=0;t<n;t++)if(c+=this.dataItems[t].get(a,1),Math.round(c)>Math.round(e*o)){r=t;break}for(let e=r+1;e<n;e++)if(c+=this.dataItems[e].get(a,1),Math.round(c)>=Math.round(t*o)){i=e+1;break}r=Math.max(r,0),i=Math.min(i,n)}else r=Math.max(Math.round(this.get(`start`,0)*n),0),i=Math.min(Math.round(this.get(`end`,1)*n),n);return{startIndex:r,endIndex:i}}zoomToIndexes(e,t,n){let r=this.dataItems.length;this.get(`cellSizeField`)?(e=Math.min(Math.max(e,0),r),t=Math.max(Math.min(t,r),1),this.setPrivateRaw(`startIndex`,e),this.setPrivateRaw(`endIndex`,t),this.zoom(this.indexToPosition(e,0,!0),this.indexToPosition(t,0,!0),n)):this.zoom(e/r,t/r,n)}zoomToCategories(e,t,n){this.zoomToIndexes(this.categoryToIndex(e),this.categoryToIndex(t)+1,n)}getCellWidthPosition(){return this._frequency/this.dataItems.length/(this.get(`end`,1)-this.get(`start`,0))}nextPosition(e){e??=1,this.get(`renderer`).getPrivate(`letter`)==`Y`&&(e*=-1);let t=this.getPrivate(`tooltipPosition`,0),n=a(this.axisPositionToIndex(t)+e,0,this.dataItems.length-1);return this.toGlobalPosition(this.indexToPosition(n))}};Object.defineProperty(Y,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`CategoryAxis`}),Object.defineProperty(Y,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:q.classNames.concat([Y.className])});var X=class extends P{constructor(){super(...arguments),Object.defineProperty(this,`_tickPoints`,{enumerable:!0,configurable:!0,writable:!0,value:[]})}};Object.defineProperty(X,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`AxisLabel`}),Object.defineProperty(X,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:P.classNames.concat([X.className])});var Z=class extends de{constructor(){super(...arguments),Object.defineProperty(this,`_tickPoints`,{enumerable:!0,configurable:!0,writable:!0,value:[]})}};Object.defineProperty(Z,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`AxisTick`}),Object.defineProperty(Z,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:de.classNames.concat([Z.className])});var Q=class extends T{constructor(){super(...arguments),Object.defineProperty(this,`_axisLength`,{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,`_start`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`_end`,{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,`_inversed`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_minSize`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`chart`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_lc`,{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,`_ls`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`_thumbDownPoint`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_downStart`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_downEnd`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`ticks`,{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new c(N.new({}),()=>Z._new(this._root,{themeTags:M(this.ticks.template.get(`themeTags`,[]),this.get(`themeTags`,[]))},[this.ticks.template])))}),Object.defineProperty(this,`grid`,{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new c(N.new({}),()=>U._new(this._root,{themeTags:M(this.grid.template.get(`themeTags`,[]),this.get(`themeTags`,[]))},[this.grid.template])))}),Object.defineProperty(this,`axisFills`,{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new c(N.new({}),()=>T._new(this._root,{themeTags:M(this.axisFills.template.get(`themeTags`,[`axis`,`fill`]),this.get(`themeTags`,[]))},[this.axisFills.template])))}),Object.defineProperty(this,`labels`,{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new c(N.new({}),()=>X._new(this._root,{themeTags:M(this.labels.template.get(`themeTags`,[]),this.get(`themeTags`,[]))},[this.labels.template])))}),Object.defineProperty(this,`axis`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`thumb`,{enumerable:!0,configurable:!0,writable:!0,value:void 0})}makeTick(e,t){let n=this.ticks.make();return n._setDataItem(e),e.setRaw(`tick`,n),n.set(`themeTags`,M(n.get(`themeTags`),t)),this.axis.labelsContainer.children.push(n),this.ticks.push(n),n}makeGrid(e,t){let n=this.grid.make();return n._setDataItem(e),e.setRaw(`grid`,n),n.set(`themeTags`,M(n.get(`themeTags`),t)),this.axis.gridContainer.children.push(n),this.grid.push(n),n}makeAxisFill(e,t){let n=this.axisFills.make();return n._setDataItem(e),n.set(`themeTags`,M(n.get(`themeTags`),t)),this.axis.gridContainer.children.push(n),e.setRaw(`axisFill`,n),this.axisFills.push(n),n}makeLabel(e,t){let n=this.labels.make();return n.set(`themeTags`,M(n.get(`themeTags`),t)),this.axis.labelsContainer.children.moveValue(n,0),n._setDataItem(e),e.setRaw(`label`,n),this.labels.push(n),n}axisLength(){return 0}gridCount(){return this.axisLength()/this.get(`minGridDistance`,50)}_updatePositions(){}_afterNew(){super._afterNew(),this.set(`isMeasured`,!1);let e=this.thumb;e&&(this._disposers.push(e.events.on(`pointerdown`,e=>{this._handleThumbDown(e)})),this._disposers.push(e.events.on(`globalpointerup`,e=>{this._handleThumbUp(e)})),this._disposers.push(e.events.on(`globalpointermove`,e=>{this._handleThumbMove(e)})))}_beforeChanged(){super._beforeChanged(),this.isDirty(`minGridDistance`)&&this.root.events.once(`frameended`,()=>{this.axis.markDirtySize()})}_changed(){if(super._changed(),this.isDirty(`pan`)){let e=this.thumb;if(e){let t=this.axis.labelsContainer,n=this.get(`pan`);n==`zoom`?t.children.push(e):n==`none`&&t.children.removeValue(e)}}}_handleThumbDown(e){this._thumbDownPoint=this.toLocal(e.point);let t=this.axis;this._downStart=t.get(`start`),this._downEnd=t.get(`end`)}_handleThumbUp(e){this._thumbDownPoint=void 0}_handleThumbMove(e){let t=this._thumbDownPoint;if(t){let n=this.toLocal(e.point),r=this._downStart,i=this._downEnd,a=this._getPan(n,t)*Math.min(1,i-r)/2*this.get(`panSensitivity`,1);this.axis.zoom(r-a,i+a,0)}}_getPan(e,t){return 0}positionToCoordinate(e){return this._inversed?(this._end-e)*this._axisLength:(e-this._start)*this._axisLength}updateTooltipBounds(e){}_updateSize(){this.markDirty(),this._clear=!0}toAxisPosition(e){let t=this._start||0,n=this._end||1;return e*=n-t,e=this.get(`inversed`)?n-e:t+e,e}toGlobalPosition(e){let t=this._start||0,n=this._end||1;return this.get(`inversed`)?e=n-e:e-=t,e/=n-t,e}fixPosition(e){return this.get(`inversed`)?1-e:e}_updateLC(){}toggleVisibility(e,t,n,r){let i=this.axis,a=i.get(`start`,0),o=i.get(`end`,1),s=a+(o-a)*(n-1e-4),c=a+(o-a)*(r+1e-4);t<s||t>c?e.setPrivate(`visible`,!1):e.setPrivate(`visible`,!0)}_positionTooltip(e,t){let n=this.chart;n&&(e.set(`pointTo`,this._display.toGlobal(t)),n.inPlot(t)||e.hide())}processAxis(){}};Object.defineProperty(Q,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`AxisRenderer`}),Object.defineProperty(Q,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:T.classNames.concat([Q.className])});var Ce=class extends Q{constructor(){super(...arguments),Object.defineProperty(this,`thumb`,{enumerable:!0,configurable:!0,writable:!0,value:F.new(this._root,{width:S,isMeasured:!1,themeTags:[`axis`,`x`,`thumb`,`zoomgrip`]})})}_afterNew(){this._settings.themeTags=M(this._settings.themeTags,[`renderer`,`x`]),super._afterNew(),this.setPrivateRaw(`letter`,`X`);let e=this.grid.template;e.set(`height`,S),e.set(`width`,0),e.set(`draw`,(e,t)=>{e.moveTo(0,0),e.lineTo(0,t.height())}),this.set(`draw`,(e,t)=>{e.moveTo(0,0),e.lineTo(t.width(),0)})}_changed(){var e;super._changed();let t=this.axis,n=t.ghostLabel;n&&(n.setPrivate(`visible`,!this.get(`inside`)),n.set(`x`,-1e3));let r=`opposite`,i=`inside`;if(this.isDirty(r)||this.isDirty(i)){let n=this.chart,a=t.children;if(this.get(i)?t.addTag(i):t.removeTag(i),n){if(this.get(r)){let e=n.topAxesContainer.children;e.indexOf(t)==-1&&e.insertIndex(0,t),t.addTag(r),a.moveValue(this)}else{let e=n.bottomAxesContainer.children;e.indexOf(t)==-1&&e.moveValue(t),t.removeTag(r),a.moveValue(this,0)}(e=t.ghostLabel)==null||e._applyThemes(),this.labels.each(e=>{e._applyThemes()}),this.root._markDirtyRedraw()}t.markDirtySize()}this.thumb.setPrivate(`height`,t.labelsContainer.height())}_getPan(e,t){return(t.x-e.x)/this.width()}toAxisPosition(e){let t=this._start||0,n=this._end||1;return e-=this._ls,e=e*(n-t)/this._lc,e=this.get(`inversed`)?n-e:t+e,e}toGlobalPosition(e){let t=this._start||0,n=this._end||1;return this.get(`inversed`)?e=n-e:e-=t,e=e/(n-t)*this._lc,e+=this._ls,e}_updateLC(){let e=this.axis,t=e.parent;if(t){let n=t.innerWidth();this._lc=this.axisLength()/n,this._ls=(e.x()-t.get(`paddingLeft`,0))/n}}_updatePositions(){let e=this.axis,t=e.x()-D(e.get(`centerX`,0),e.width())-e.parent.get(`paddingLeft`,0);e.gridContainer.set(`x`,t),e.topGridContainer.set(`x`,t),e.bulletsContainer.set(`y`,this.y());let n=e.chart;if(n){let t=n.plotContainer,r=e.axisHeader,i=e.get(`marginLeft`,0),a=e.x()-i,o=e.parent;o&&(a-=o.get(`paddingLeft`,0)),r.children.length>0?(i=e.axisHeader.width(),e.set(`marginLeft`,i+1)):r.set(`width`,i),r.setAll({x:a,y:-1,height:t.height()+2})}}processAxis(){super.processAxis();let e=this.axis;e.get(`width`)??e.set(`width`,S);let t=this._root.verticalLayout;e.set(`layout`,t),e.labelsContainer.set(`width`,S),e.axisHeader.setAll({layout:t})}axisLength(){return this.axis.width()}positionToPoint(e){return{x:this.positionToCoordinate(e),y:0}}updateTick(e,t,n,r){if(e){y(t)||(t=0);let i=.5;i=y(r)&&r>1?e.get(`multiLocation`,i):e.get(`location`,i),y(n)&&n!=t&&(t+=(n-t)*i),e.set(`x`,this.positionToCoordinate(t));let a=e.get(`length`,0),o=e.get(`inside`,this.get(`inside`,!1));this.get(`opposite`)?(e.set(`y`,S),o||(a*=-1)):(e.set(`y`,0),o&&(a*=-1)),e.set(`draw`,e=>{e.moveTo(0,0),e.lineTo(0,a)}),this.toggleVisibility(e,t,e.get(`minPosition`,0),e.get(`maxPosition`,1))}}updateLabel(e,t,n,r){if(e){let i=.5;i=y(r)&&r>1?e.get(`multiLocation`,i):e.get(`location`,i),y(t)||(t=0);let a=e.get(`inside`,this.get(`inside`,!1));this.get(`opposite`)?a?(e.set(`position`,`absolute`),e.set(`y`,0)):(e.set(`position`,`relative`),e.set(`y`,S)):a?(e.set(`y`,0),e.set(`position`,`absolute`)):(e.set(`y`,void 0),e.set(`position`,`relative`)),y(n)&&n!=t&&(t+=(n-t)*i),e.set(`x`,this.positionToCoordinate(t)),this.toggleVisibility(e,t,e.get(`minPosition`,0),e.get(`maxPosition`,1))}}updateGrid(e,t,n){if(e){y(t)||(t=0);let r=e.get(`location`,.5);y(n)&&n!=t&&(t+=(n-t)*r),e.set(`x`,this.positionToCoordinate(t)),this.toggleVisibility(e,t,0,1)}}updateBullet(e,t,n){if(e){let r=e.get(`sprite`);if(r){y(t)||(t=0);let i=e.get(`location`,.5);y(n)&&n!=t&&(t+=(n-t)*i);let a=this.axis.roundAxisPosition(t,i),o=this.axis._bullets[a],s=-1;if(this.get(`opposite`)&&(s=1),e.get(`stacked`))if(o){let e=o.get(`sprite`);e&&r.set(`y`,e.y()+e.height()*s)}else r.set(`y`,0);this.axis._bullets[a]=e,r.set(`x`,this.positionToCoordinate(t)),this.toggleVisibility(r,t,0,1)}}}updateFill(e,t,n){if(e){y(t)||(t=0),y(n)||(n=1);let r=this.positionToCoordinate(t),i=this.positionToCoordinate(n);this.fillDrawMethod(e,r,i)}}fillDrawMethod(e,t,n){e.set(`draw`,e=>{let r=this.axis.gridContainer.height(),i=this.width();n<t&&([n,t]=[t,n]),!(t>i||n<0)&&(e.moveTo(t,0),e.lineTo(n,0),e.lineTo(n,r),e.lineTo(t,r),e.lineTo(t,0))})}positionTooltip(e,t){this._positionTooltip(e,{x:this.positionToCoordinate(t),y:0})}updateTooltipBounds(e){let t=this.get(`inside`),n=1e5,r=this._display.toGlobal({x:0,y:0}),i=r.x,a=0,o=this.axisLength(),s=n,c=`up`;this.get(`opposite`)?t?(c=`up`,a=r.y,s=n):(c=`down`,a=r.y-n,s=n):t?(c=`down`,a=r.y-n,s=n):(c=`up`,a=r.y,s=n);let l={left:i,right:i+o,top:a,bottom:a+s},u=e.get(`bounds`);ee(l,u)||(e.set(`bounds`,l),e.set(`pointerOrientation`,c))}};Object.defineProperty(Ce,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`AxisRendererX`}),Object.defineProperty(Ce,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:Q.classNames.concat([Ce.className])});var we=class extends Q{constructor(){super(...arguments),Object.defineProperty(this,`_downY`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`thumb`,{enumerable:!0,configurable:!0,writable:!0,value:F.new(this._root,{height:S,isMeasured:!1,themeTags:[`axis`,`y`,`thumb`,`zoomgrip`]})})}_afterNew(){this._settings.themeTags=M(this._settings.themeTags,[`renderer`,`y`]),this._settings.opposite&&this._settings.themeTags.push(`opposite`),super._afterNew(),this.setPrivateRaw(`letter`,`Y`);let e=this.grid.template;e.set(`width`,S),e.set(`height`,0),e.set(`draw`,(e,t)=>{e.moveTo(0,0),e.lineTo(t.width(),0)}),this.set(`draw`,(e,t)=>{e.moveTo(0,0),e.lineTo(0,t.height())})}_getPan(e,t){return(e.y-t.y)/this.height()}_changed(){var e;super._changed();let t=this.axis,n=t.ghostLabel;n&&(n.setPrivate(`visible`,!this.get(`inside`)),n.set(`y`,-1e3));let r=this.thumb,i=`opposite`,a=`inside`,o=this.chart;if(this.isDirty(i)||this.isDirty(a)){let n=t.children;if(this.get(a)?t.addTag(a):t.removeTag(a),o){if(this.get(i)){let e=o.rightAxesContainer.children;e.indexOf(t)==-1&&e.moveValue(t,0),t.addTag(i),n.moveValue(this,0)}else{let e=o.leftAxesContainer.children;e.indexOf(t)==-1&&e.moveValue(t),t.removeTag(i),n.moveValue(this)}(e=t.ghostLabel)==null||e._applyThemes(),this.labels.each(e=>{e._applyThemes()}),this.root._markDirtyRedraw()}t.markDirtySize()}let s=t.labelsContainer.width();o&&(this.get(i)?r.set(`centerX`,0):r.set(`centerX`,s)),r.setPrivate(`width`,s)}processAxis(){super.processAxis();let e=this.axis;e.get(`height`)??e.set(`height`,S);let t=this._root.horizontalLayout;e.set(`layout`,t),e.labelsContainer.set(`height`,S),e.axisHeader.set(`layout`,t)}_updatePositions(){let e=this.axis,t=e.y()-D(e.get(`centerY`,0),e.height());e.gridContainer.set(`y`,t),e.topGridContainer.set(`y`,t),e.bulletsContainer.set(`x`,this.x());let n=e.chart;if(n){let t=n.plotContainer,r=e.axisHeader,i=e.get(`marginTop`,0);r.children.length>0?(i=e.axisHeader.height(),e.set(`marginTop`,i+1)):r.set(`height`,i),r.setAll({y:e.y()-i,x:-1,width:t.width()+2})}}axisLength(){return this.axis.innerHeight()}positionToPoint(e){return{x:0,y:this.positionToCoordinate(e)}}updateLabel(e,t,n,r){if(e){y(t)||(t=0);let i=.5;i=y(r)&&r>1?e.get(`multiLocation`,i):e.get(`location`,i);let a=this.get(`opposite`),o=e.get(`inside`,this.get(`inside`,!1));a?(e.set(`x`,0),o?e.set(`position`,`absolute`):e.set(`position`,`relative`)):o?(e.set(`x`,0),e.set(`position`,`absolute`)):(e.set(`x`,void 0),e.set(`position`,`relative`)),y(n)&&n!=t&&(t+=(n-t)*i),e.set(`y`,this.positionToCoordinate(t)),this.toggleVisibility(e,t,e.get(`minPosition`,0),e.get(`maxPosition`,1))}}updateGrid(e,t,n){if(e){y(t)||(t=0);let r=e.get(`location`,.5);y(n)&&n!=t&&(t+=(n-t)*r),e.set(`y`,this.positionToCoordinate(t)),this.toggleVisibility(e,t,0,1)}}updateTick(e,t,n,r){if(e){y(t)||(t=0);let i=.5;i=y(r)&&r>1?e.get(`multiLocation`,i):e.get(`location`,i),y(n)&&n!=t&&(t+=(n-t)*i),e.set(`y`,this.positionToCoordinate(t));let a=e.get(`length`,0),o=e.get(`inside`,this.get(`inside`,!1));this.get(`opposite`)?(e.set(`x`,0),o&&(a*=-1)):o||(a*=-1),e.set(`draw`,e=>{e.moveTo(0,0),e.lineTo(a,0)}),this.toggleVisibility(e,t,e.get(`minPosition`,0),e.get(`maxPosition`,1))}}updateBullet(e,t,n){if(e){let r=e.get(`sprite`);if(r){y(t)||(t=0);let i=e.get(`location`,.5);y(n)&&n!=t&&(t+=(n-t)*i);let a=this.axis.roundAxisPosition(t,i),o=this.axis._bullets[a],s=1;if(this.get(`opposite`)&&(s=-1),e.get(`stacked`))if(o){let e=o.get(`sprite`);e&&r.set(`x`,e.x()+e.width()*s)}else r.set(`x`,0);this.axis._bullets[a]=e,r.set(`y`,this.positionToCoordinate(t)),this.toggleVisibility(r,t,0,1)}}}updateFill(e,t,n){if(e){y(t)||(t=0),y(n)||(n=1);let r=this.positionToCoordinate(t),i=this.positionToCoordinate(n);this.fillDrawMethod(e,r,i)}}fillDrawMethod(e,t,n){e.set(`draw`,e=>{let r=this.axis.gridContainer.width(),i=this.height();n<t&&([n,t]=[t,n]),!(t>i||n<0)&&(e.moveTo(0,t),e.lineTo(r,t),e.lineTo(r,n),e.lineTo(0,n),e.lineTo(0,t))})}positionToCoordinate(e){return this._inversed?(e-this._start)*this._axisLength:(this._end-e)*this._axisLength}positionTooltip(e,t){this._positionTooltip(e,{x:0,y:this.positionToCoordinate(t)})}updateTooltipBounds(e){let t=this.get(`inside`),n=1e5,r=this._display.toGlobal({x:0,y:0}),i=r.y,a=0,o=this.axisLength(),s=n,c=`right`;this.get(`opposite`)?t?(c=`right`,a=r.x-n,s=n):(c=`left`,a=r.x,s=n):t?(c=`left`,a=r.x,s=n):(c=`right`,a=r.x-n,s=n);let l={left:a,right:a+s,top:i,bottom:i+o},u=e.get(`bounds`);ee(l,u)||(e.set(`bounds`,l),e.set(`pointerOrientation`,c))}_updateLC(){let e=this.axis,t=e.parent;if(t){let n=t.innerHeight();this._lc=this.axisLength()/n,this._ls=e.y()/n}}toAxisPosition(e){let t=this._start||0,n=this._end||1;return e-=this._ls,e=e*(n-t)/this._lc,e=this.get(`inversed`)?t+e:n-e,e}toGlobalPosition(e){let t=this._start||0,n=this._end||1;return this.get(`inversed`)?e-=t:e=n-e,e=e/(n-t)*this._lc,e+=this._ls,e}fixPosition(e){return this.get(`inversed`)?e:1-e}};Object.defineProperty(we,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`AxisRendererY`}),Object.defineProperty(we,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:Q.classNames.concat([we.className])});var Te=class extends K{constructor(){super(...arguments),Object.defineProperty(this,`allColumns`,{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(T.new(this._root,{}))}),Object.defineProperty(this,`allColumnsData`,{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,`columns`,{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new c(N.new({}),()=>ie._new(this._root,{position:`absolute`,themeTags:M(this.columns.template.get(`themeTags`,[]),[`series`,`column`])},[this.columns.template])))})}makeColumn(e,t){let n=t.make();return this.get(`turboMode`)?n.virtualParent=this.chart:this.mainContainer.children.push(n),n._setDataItem(e),t.push(n),n}_processAxisRange(e){super._processAxisRange(e),e.columns=new c(N.new({}),()=>ie._new(this._root,{position:`absolute`,themeTags:M(e.columns.template.get(`themeTags`,[]),[`series`,`column`])},[this.columns.template,e.columns.template]))}_beforeColumnsDraw(){this.allColumnsData=[]}_afterColumnsDraw(){this.get(`turboMode`)&&this.allColumns.set(`draw`,e=>{e.clear(),A(this.allColumnsData,t=>{let n=t.width,r=t.height,i=t.x,a=t.y,o=t.stroke,s=t.fill,c=t.strokeWidth,l=t.strokeOpacity,u=t.fillOpacity;e.beginFill(s,u),e.beginPath(),e.lineStyle(c,o,l),e.drawRect(i,a,n,r),e.endStroke(),e.endFill()})})}_updateSeriesGraphics(e,t,n,r,i,a,o,s){if(this.get(`turboMode`)){let o=t.get(`stroke`),s=t.get(`fillOpacity`,1),c=t.get(`strokeOpacity`,1),l=t.get(`strokeWidth`,1),u=t.get(`fill`),d=this.getPoint(n,i),f=this.getPoint(r,a),p=e.get(`point`);if(p){let e=this.getPoint(p.x,p.y);p.x=e.x+this._x,p.y=e.y+this._y}n=d.x,r=f.x,i=d.y,a=f.y,e.setRaw(`left`,n),e.setRaw(`right`,r),e.setRaw(`top`,i),e.setRaw(`bottom`,a),this.allColumnsData.push({width:r-n,height:a-i,x:n,y:i,stroke:o,fill:u,strokeWidth:l,strokeOpacity:c,fillOpacity:s})}else super._updateSeriesGraphics(e,t,n,r,i,a,o,s)}};Object.defineProperty(Te,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`ColumnSeries`}),Object.defineProperty(Te,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:K.classNames.concat([Te.className])});var $=class extends G{constructor(){super(...arguments),Object.defineProperty(this,`_endIndex`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_strokeGenerator`,{enumerable:!0,configurable:!0,writable:!0,value:ve()}),Object.defineProperty(this,`_fillGenerator`,{enumerable:!0,configurable:!0,writable:!0,value:ye()}),Object.defineProperty(this,`_legendStroke`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_legendFill`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`strokes`,{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new c(N.new({}),()=>T._new(this._root,{themeTags:M(this.strokes.template.get(`themeTags`,[]),[`line`,`series`,`stroke`])},[this.strokes.template])))}),Object.defineProperty(this,`fills`,{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new c(N.new({}),()=>T._new(this._root,{themeTags:M(this.strokes.template.get(`themeTags`,[]),[`line`,`series`,`fill`])},[this.fills.template])))}),Object.defineProperty(this,`_fillTemplate`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_strokeTemplate`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_previousPoint`,{enumerable:!0,configurable:!0,writable:!0,value:[0,0,0,0]}),Object.defineProperty(this,`_dindex`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`_sindex`,{enumerable:!0,configurable:!0,writable:!0,value:0})}_afterNew(){this._fillGenerator.y0(function(e){return e[3]}),this._fillGenerator.x0(function(e){return e[2]}),this._fillGenerator.y1(function(e){return e[1]}),this._fillGenerator.x1(function(e){return e[0]}),super._afterNew()}makeStroke(e){let t=this.mainContainer.children.push(e.make());return e.push(t),t}makeFill(e){let t=this.mainContainer.children.push(e.make());return e.push(t),t}_updateChildren(){this._strokeTemplate=void 0,this._fillTemplate=void 0;let e=this.get(`xAxis`),t=this.get(`yAxis`);if(this.isDirty(`stroke`)){let e=this.get(`stroke`);this.strokes.template.set(`stroke`,e);let t=this._legendStroke;t&&t.states.lookup(`default`).set(`stroke`,e)}if(this.isDirty(`fill`)){let e=this.get(`fill`);this.fills.template.set(`fill`,e);let t=this._legendFill;t&&t.states.lookup(`default`).set(`fill`,e)}if(this.isDirty(`fillPattern`)){let e=this.get(`fillPattern`);this.fills.template.set(`fillPattern`,e);let t=this._legendFill;t&&t.states.lookup(`default`).set(`fillPattern`,e)}if(this.isDirty(`curveFactory`)){let e=this.get(`curveFactory`);e&&(this._strokeGenerator.curve(e),this._fillGenerator.curve(e))}if(e.inited&&t.inited){if(this._axesDirty||this._valuesDirty||this._stackDirty||this.isDirty(`vcx`)||this.isDirty(`vcy`)||this._sizeDirty||this.isDirty(`connect`)||this.isDirty(`curveFactory`)){this.fills.each(e=>{e.setPrivate(`visible`,!1)}),this.strokes.each(e=>{e.setPrivate(`visible`,!1)}),this.axisRanges.each(e=>{let t=e.fills;t&&t.each(e=>{e.setPrivate(`visible`,!1)});let n=e.strokes;n&&n.each(e=>{e.setPrivate(`visible`,!1)})});let e=this.startIndex(),t=this.strokes.template.get(`templateField`),n=this.fills.template.get(`templateField`),r=!0,i=!0;t&&(r=!1),n&&(i=!1);for(let a=e-1;a>=0;a--){let o=this.dataItems[a],s=!0,c=o.dataContext;if(t&&c[t]&&(r=!0),n&&c[n]&&(i=!0),A(this._valueFields,e=>{y(o.get(e))||(s=!1)}),s&&r&&i){e=a;break}}let a=this.dataItems.length,o=this.endIndex();if(o<a){o++;for(let e=o;e<a;e++){let t=this.dataItems[e],n=!0;if(A(this._valueFields,e=>{y(t.get(e))||(n=!1)}),n){o=e+1;break}}}if(e>0&&e--,this._endIndex=o,this._clearGraphics(),this._sindex=0,this._dindex=e,this.dataItems.length==1)this._startSegment(0);else for(;this._dindex<o-1;)this._startSegment(this._dindex),this._sindex++}}else this._skipped=!0;super._updateChildren()}_clearGraphics(){this.strokes.clear(),this.fills.clear(),this.axisRanges.each(e=>{e.fills.clear(),e.strokes.clear()})}_startSegment(e){let t=this._endIndex,n=t,r=this.get(`autoGapCount`),i=this.get(`connect`),a=this.makeFill(this.fills),o=this._fillTemplate,s=this.fills.template;o&&o!=s&&(a.template=o),a.setPrivate(`visible`,!0);let c=this.makeStroke(this.strokes),l=this._strokeTemplate;l&&l!=this.strokes.template&&(c.template=l),c.setPrivate(`visible`,!0);let u=this.get(`xAxis`),d=this.get(`yAxis`),f=this.get(`baseAxis`),p=this.get(`vcx`,1),m=this.get(`vcy`,1),h=this._xField,g=this._yField,_=this._xOpenField,v=this._yOpenField,y=this.get(`openValueXField`),b=this.get(`openValueYField`);y||(_=this._xField),b||(v=this._yField);let x=this.get(`stacked`),S=u.basePosition(),C=d.basePosition(),w;w=f===d?this._yField:this._xField;let T=[],E=[];T.push(E);let D=this.strokes.template.get(`templateField`),O=this.fills.template.get(`templateField`),k=this.get(`locationX`,.5),A=this.get(`locationY`,.5),j=this.get(`openLocationX`,k),M=this.get(`openLocationY`,A),ee=this.get(`minDistance`,0),P,te=this.fills.template.get(`visible`);this.axisRanges.length>0&&(te=!0);let ne=!1;(x||y||b)&&(ne=!0);let F={points:E,segments:T,stacked:x,getOpen:ne,basePosX:S,basePosY:C,fillVisible:te,xField:h,yField:g,xOpenField:_,yOpenField:v,vcx:p,vcy:m,baseAxis:f,xAxis:u,yAxis:d,locationX:k,locationY:A,openLocationX:j,openLocationY:M,minDistance:ee},I=this._strokeTemplate,L=this._fillTemplate;for(P=e;P<n;P++){this._dindex=P;let t=this._dataItems[P],o=t.get(h),s=t.get(g);if(o==null||s==null?i||(E=[],T.push(E),F.points=E):this._getPoints(t,F),D){let r=t.dataContext[D];if(r)if(r instanceof N||(r=N.new(r)),this._strokeTemplate=r,P>e){n=P;break}else I=r,c.template=r}if(O){let r=t.dataContext[O];if(r)if(r instanceof N||(r=N.new(r)),this._fillTemplate=r,P>e){n=P;break}else L=r,a.template=r}if(!i){let e=this.dataItems[P+1];e&&f.shouldGap(t,e,r,w)&&(E=[],T.push(E),F.points=E)}}a.setRaw(`userData`,[e,P]),c.setRaw(`userData`,[e,P]),P===t&&this._endLine(E,T[0][0]),c&&this._drawStroke(c,T),a&&this._drawFill(a,T),this.axisRanges.each(t=>{let n=t.container,r=t.fills,i=this.makeFill(r);n&&n.children.push(i),i.setPrivate(`visible`,!0),this._drawFill(i,T);let a=t.strokes,o=this.makeStroke(a);n&&n.children.push(o),I&&I!=this.strokes.template&&(o.template=I),L&&L!=this.fills.template&&(i.template=L),o.setPrivate(`visible`,!0),this._drawStroke(o,T),i.setRaw(`userData`,[e,P]),o.setRaw(`userData`,[e,P])})}_getPoints(e,t){let n=t.points,r=e.get(`locationX`,t.locationX),i=e.get(`locationY`,t.locationY),a=this.get(`exactLocationX`,!1),o=this.get(`exactLocationY`,!1),s=t.xAxis.getDataItemPositionX(e,t.xField,r,t.vcx,a),c=t.yAxis.getDataItemPositionY(e,t.yField,i,t.vcy,o);if(this._shouldInclude(s)){let r=this.getPoint(s,c),i=[r.x,r.y];if(r.x+=this._x,r.y+=this._y,e.set(`point`,r),t.fillVisible){let n=s,r=c;if(t.baseAxis===t.xAxis?r=t.basePosY:t.baseAxis===t.yAxis&&(n=t.basePosX),t.getOpen){let i=e.get(t.xOpenField),s=e.get(t.yOpenField);if(i!=null&&s!=null){let i=e.get(`openLocationX`,t.openLocationX),s=e.get(`openLocationY`,t.openLocationY);if(t.stacked){let c=e.get(`stackToItemX`),l=e.get(`stackToItemY`);c?(n=t.xAxis.getDataItemPositionX(c,t.xField,i,c.component.get(`vcx`),a),_(n)&&(n=t.basePosX)):n=t.yAxis===t.baseAxis?t.basePosX:t.xAxis.getDataItemPositionX(e,t.xOpenField,i,t.vcx,a),l?(r=t.yAxis.getDataItemPositionY(l,t.yField,s,l.component.get(`vcy`),o),_(r)&&(r=t.basePosY)):r=t.xAxis===t.baseAxis?t.basePosY:t.yAxis.getDataItemPositionY(e,t.yOpenField,s,t.vcy,o)}else n=t.xAxis.getDataItemPositionX(e,t.xOpenField,i,t.vcx,a),r=t.yAxis.getDataItemPositionY(e,t.yOpenField,s,t.vcy,o)}}let l=this.getPoint(n,r);i[2]=l.x,i[3]=l.y}if(t.minDistance>0){let e=i[0],r=i[1],a=i[2],o=i[3],s=this._previousPoint,c=s[0],l=s[1],u=s[2],d=s[3];(Math.hypot(e-c,r-l)>t.minDistance||a&&o&&Math.hypot(a-u,o-d)>t.minDistance)&&(n.push(i),this._previousPoint=i)}else n.push(i)}}_endLine(e,t){}_drawStroke(e,t){e.get(`visible`)&&!e.get(`forceHidden`)&&e.set(`draw`,e=>{A(t,t=>{this._strokeGenerator.context(e),this._strokeGenerator(t)})})}_drawFill(e,t){e.get(`visible`)&&!e.get(`forceHidden`)&&e.set(`draw`,e=>{A(t,t=>{this._fillGenerator.context(e),this._fillGenerator(t)})})}_processAxisRange(e){super._processAxisRange(e),e.fills=new c(N.new({}),()=>T._new(this._root,{themeTags:M(e.fills.template.get(`themeTags`,[]),[`line`,`series`,`fill`])},[this.fills.template,e.fills.template])),e.strokes=new c(N.new({}),()=>T._new(this._root,{themeTags:M(e.strokes.template.get(`themeTags`,[]),[`line`,`series`,`stroke`])},[this.strokes.template,e.strokes.template]))}createLegendMarker(e){let t=this.get(`legendDataItem`);if(t){let e=t.get(`marker`),n=t.get(`markerRectangle`);n&&n.setPrivate(`visible`,!1),e.set(`background`,F.new(e._root,{fillOpacity:0,fill:r(0)}));let i=e.children.push(T._new(e._root,{themeTags:[`line`,`series`,`legend`,`marker`,`stroke`],interactive:!1},[this.strokes.template]));this._legendStroke=i;let a=e.children.push(T._new(e._root,{themeTags:[`line`,`series`,`legend`,`marker`,`fill`]},[this.fills.template]));this._legendFill=a;let o=this._root.interfaceColors.get(`disabled`);if(i.states.create(`disabled`,{fill:o,stroke:o}),a.states.create(`disabled`,{fill:o,stroke:o}),this.bullets.length>0){let t=this.bullets.getIndex(0);if(t){let n=t(e._root,this,new B(this,{legend:!0},{}));if(n){let t=n.get(`sprite`);t instanceof T&&t.states.create(`disabled`,{fill:o,stroke:o}),t&&(t.setAll({tooltipText:void 0,tooltipHTML:void 0,focusable:void 0,focusableGroup:void 0,ariaLabel:void 0}),e.children.push(t),t.setAll({x:e.width()/2,y:e.height()/2}),e.events.on(`boundschanged`,()=>{t.setAll({x:e.width()/2,y:e.height()/2})}))}}}}}};Object.defineProperty($,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`LineSeries`}),Object.defineProperty($,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:G.classNames.concat([$.className])});export{Ce as AxisRendererXAm5,we as AxisRendererYAm5,Y as CategoryAxisAm5,Te as ColumnSeriesAm5,$ as LineSeriesAm5,J as ValueAxisAm5,H as XYChartAm5,W as XYCursorAm5};