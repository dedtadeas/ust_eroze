import{SD as e}from"./index-BqmCqmfp.js";var t=class e{constructor(e){Object.defineProperty(this,`_value`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._value=e}get value(){return this._value/100}get percent(){return this._value}toString(){return``+this._value+`%`}interpolate(e,t){return e+this.value*(t-e)}static normalize(t,n,r){return t instanceof e?t:n===r?new e(0):new e(Math.min(Math.max((t-n)*(1/(r-n)),0),1)*100)}};function n(e){return new t(e)}n(0);const r=n(100),i=n(50);function a(e){return e instanceof t}function o(e){return Number(e)!==e}function s(e){return{}.toString.call(e)}function c(e){if(e!=null&&!m(e)){let t=Number(e);if(o(t)&&p(e)&&e!=``&&e.match(/[0-9]+/)){let n=e.replace(/[^0-9.\-]+/g,``);return e===n?t:c(n)}return t}return e}function l(e){if(f(e)||m(e))return new Date(e);{let t=Number(e);return m(t)?new Date(t):new Date(e)}}function u(e){if(o(e))return`NaN`;if(e===1/0)return`Infinity`;if(e===-1/0)return`-Infinity`;if(e===0&&1/e==-1/0)return`-0`;let t=e<0;e=Math.abs(e);let n=/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(``+e),r=n[1],i=n[2]||``,a;if(n[3]===void 0)a=i===``?r:r+`.`+i;else{let t=+n[3];if(e<1){let e=t-1;a=`0.`+d(`0`,e)+r+i}else{let e=t-i.length;a=e===0?r+i:e<0?r+i.slice(0,e)+`.`+i.slice(e):r+i+d(`0`,e)}}return t?`-`+a:a}function d(e,t){return Array(t+1).join(e)}function f(e){return s(e)===`[object Date]`}function p(e){return typeof e==`string`}function m(e){return typeof e==`number`&&Number(e)==e}function ee(e){return typeof e==`object`&&!!e}const te=`__§§§__`,ne=`__§§§§__`;function h(e,t){let n=e.length;for(let r=0;r<n;++r)if(e[r]===t)return r;return-1}function re(e,t){let n=e.length;for(let r=0;r<n;++r)if(t(e[r]))return!0;return!1}function ie(e,t){let n=e.length,r=Array(n);for(let i=0;i<n;++i)r[i]=t(e[i],i);return r}function g(e,t){let n=e.length;for(let r=0;r<n;++r)t(e[r],r)}function _(e,t){let n=e.length;for(;n>0;)--n,t(e[n],n)}function ae(e,t){let n=e.length;for(let r=0;r<n&&t(e[r],r);++r);}function oe(e,t){let n=!1,r=0;for(;;){if(r=e.indexOf(t,r),r===-1)return n;n=!0,e.splice(r,1)}}function v(e,t){let n=e.indexOf(t);return n===-1?!1:(e.splice(n,1),!0)}function se(e,t,n){let r=h(e,t);r!==-1&&de(e,r),n==null?e.push(t):ue(e,n,t)}function ce(e,t){e.indexOf(t)===-1&&e.push(t)}function le(e){let t=e.length,n=Array(t);for(let r=0;r<t;++r)n[r]=e[r];return n}function ue(e,t,n){e.splice(t,0,n)}function de(e,t){e.splice(t,1)}function fe(e,t){let n=e.length;for(let r=0;r<n;++r)if(t(e[r],r))return r;return-1}function pe(e,t){let n=e.length;for(;n>0;)if(--n,t(e[n],n))return n;return-1}function me(e,t){let n=fe(e,t);if(n!==-1)return e[n]}function he(e,t){let n=pe(e,t);if(n!==-1)return e[n]}function ge(e,t){let n=0,r=e.length,i=!1;for(;n<r;){let a=n+r>>1,o=t(e[a]);o<0?n=a+1:o===0?(i=!0,n=a+1):r=a}return{found:i,index:i?n-1:n}}function _e(e,t){let n=0,r=e.length,i=!1;for(;n<r;){let a=n+r>>1,o=t(e[a]);o<0?n=a+1:(o===0&&(i=!0),r=a)}return{found:i,index:n}}function ve(e,t){let n=e.length;for(;n>0;)--n,t(e[n])||e.splice(n,1)}function y(e){return Object.keys(e)}function ye(e,t){return y(e).sort(t)}function be(e){return Object.assign({},e)}function b(e,t){y(e).forEach(n=>{t(n,e[n])})}function xe(e,t){for(let n in e)if(Se(e,n)&&!t(n,e[n]))break}function Se(e,t){return{}.hasOwnProperty.call(e,t)}var Ce=class{constructor(){Object.defineProperty(this,`_disposed`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}},x=class{constructor(e){Object.defineProperty(this,`_disposed`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_dispose`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1,this._dispose=e}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}},we=class extends Ce{constructor(){super(...arguments),Object.defineProperty(this,`_disposers`,{enumerable:!0,configurable:!0,writable:!0,value:[]})}_dispose(){g(this._disposers,e=>{e.dispose()})}},S=class extends Ce{constructor(e){super(),Object.defineProperty(this,`_disposers`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposers=e}_dispose(){g(this._disposers,e=>{e.dispose()})}get disposers(){return this._disposers}},Te=class extends x{constructor(){super(...arguments),Object.defineProperty(this,`_counter`,{enumerable:!0,configurable:!0,writable:!0,value:0})}increment(){return++this._counter,new x(()=>{--this._counter,this._counter===0&&this.dispose()})}};function Ee(e){e.parentNode&&e.parentNode.removeChild(e)}function De(e,t,n,r){return e.addEventListener(t,n,r||!1),new x(()=>{e.removeEventListener(t,n,r||!1)})}function Oe(e){return De(window,`resize`,t=>{e()})}function C(e){switch(e){case`touchevents`:return window.hasOwnProperty(`TouchEvent`);case`pointerevents`:return window.hasOwnProperty(`PointerEvent`);case`mouseevents`:return window.hasOwnProperty(`MouseEvent`);case`wheelevents`:return window.hasOwnProperty(`WheelEvent`);case`keyboardevents`:return window.hasOwnProperty(`KeyboardEvent`)}return!1}function ke(e){return e.pointerId||0}function Ae(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{let e=document.createElement(`button`);e.style.position=`fixed`,e.style.top=`0px`,e.style.left=`-10000px`,document.body.appendChild(e),e.focus(),e.blur(),document.body.removeChild(e)}}function je(e){e&&e.focus()}function Me(e){if(C(`pointerevents`))return e;if(C(`touchevents`))switch(e){case`pointerover`:return`touchstart`;case`pointerout`:return`touchend`;case`pointerleave`:return`touchend`;case`pointerdown`:return`touchstart`;case`pointermove`:return`touchmove`;case`pointerup`:return`touchend`;case`click`:return`click`;case`dblclick`:return`dblclick`}else if(C(`mouseevents`))switch(e){case`pointerover`:return`mouseover`;case`pointerout`:return`mouseout`;case`pointerleave`:return`mouseleave`;case`pointerdown`:return`mousedown`;case`pointermove`:return`mousemove`;case`pointerup`:return`mouseup`;case`click`:return`click`;case`dblclick`:return`dblclick`}return e}function Ne(e){if(typeof Touch<`u`&&e instanceof Touch)return!0;if(typeof PointerEvent<`u`&&e instanceof PointerEvent&&e.pointerType!=null)switch(e.pointerType){case`touch`:case`pen`:case 2:return!0;case`mouse`:case 4:return!1;default:return!(e instanceof MouseEvent)}else if(e.type!=null&&e.type.match(/^mouse/))return!1;return!0}function Pe(e,t,n){e.style[t]=n}function Fe(e,t){return e.style[t]}function Ie(e){if(e.composedPath){let t=e.composedPath();return t.length===0?null:t[0]}else return e.target}function Le(e,t){let n=t;for(;;)if(e===n)return!0;else if(n.parentNode===null){if(n.host==null)return!1;n=n.host}else n=n.parentNode}function Re(e,t){return e.target&&Le(t.root.dom,e.target)}function ze(e,t){t?e.style.pointerEvents=`auto`:e.style.pointerEvents=`none`}function Be(e){if(e.key!==void 0)return e.key;switch(e.keyCode){case 9:return`Tab`;case 13:return`Enter`;case 16:return`Shift`;case 17:return`Control`;case 27:return`Escape`;case 32:return` `;case 37:return`ArrowLeft`;case 38:return`ArrowUp`;case 39:return`ArrowRight`;case 40:return`ArrowDown`;case 46:return`Delete`}return``+e.keyCode}function Ve(){return/apple/i.test(navigator.vendor)&&`ontouchend`in document}function He(){return Ve()?1:void 0}function w(e,t){return m(e)?e:e!=null&&m(e.value)&&m(t)?t*e.value:0}function Ue(e){let t=(``+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function We(e,t=0,n=`0`){return typeof e!=`string`&&(e=e.toString()),t>e.length?Array(t-e.length+1).join(n)+e:e}function Ge(e){return e.replace(/^[\s]*/,``)}function Ke(e){return e.replace(/[\s]*$/,``)}function T(e){return Ge(Ke(e))}function qe(e,t,n=!1,r=`...`){if(e.length>t){let i=t-1;for(;i>=0&&e.charAt(i).match(/\w/);)i--;return i>=0&&n==0?e.substring(0,i+1)+`...`:e.substring(0,t)+r}else return e}function Je(e){if(e===void 0)return`string`;e=e.toLowerCase().replace(/^\[[^\]]*\]/,``),e=e.replace(/\[[^\]]+\]/,``),e=e.trim();let t=e.match(/\/(date|number|duration)$/);return t?t[1]:e===`number`?`number`:e===`date`?`date`:e===`duration`?`duration`:e.match(/[#0]/)?`number`:e.match(/[ymwdhnsqaxkzgtei]/)?`date`:`string`}function Ye(e){return e.replace(/\/(date|number|duration)$/i,``)}function Xe(e){return e&&e.replace(/<[^>]*>/g,``)}function Ze(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,`\\$&`)}function Qe(e){let t=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/,n=/([^اأدذرزو]*[اأدذرزو])/gi,r=e.split(/(\s+)/),i=[];return r.forEach(e=>{if(e.match(/^\s+$/))(e=` `)&&(e=`  `),i.push(e);else if(t.test(e)){let t=e.split(n).filter(e=>e!==``);i=i.concat(t)}else i=i.concat([...e])}),i}function $e(e,t=!1){let n=new Date(e.getFullYear(),0,0),r=e.getTime()-n.getTime()+(n.getTimezoneOffset()-e.getTimezoneOffset())*60*1e3;return Math.floor(r/(1e3*60*60*24))}function et(e,t=!1){let n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=n.getUTCDay()||7;n.setUTCDate(n.getUTCDate()+4-r);let i=new Date(Date.UTC(n.getUTCFullYear(),0,1));return Math.ceil(((n.getTime()-i.getTime())/864e5+1)/7)}function tt(e,t=!1){let n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=n.getUTCDay()||7;return n.setUTCDate(n.getUTCDate()+4-r),new Date(Date.UTC(n.getUTCFullYear(),0,1)).getFullYear()}function nt(e,t=!1){let n=et(new Date(e.getFullYear(),e.getMonth(),1),t),r=et(e,t);return r==1&&(r=53),r-n+1}function rt(e,t,n=1,r=!1){let i=new Date(t,0,4,0,0,0,0);return r&&i.setUTCFullYear(t),e*7+n-((i.getDay()||7)+3)}function it(e,t){return e>12?e-=12:e===0&&(e=12),t==null?e:e+(t-1)}function at(e,t=!1,n=!1,r=!1,i){if(r)return t?`Coordinated Universal Time`:`UTC`;if(i){let n=e.toLocaleString(`en-US`,{timeZone:i}),r=e.toLocaleString(`en-US`,{timeZone:i,timeZoneName:t?`long`:`short`});return T(r.substr(n.length))}let a=e.toLocaleString(`UTC`),o=e.toLocaleString(`UTC`,{timeZoneName:t?`long`:`short`}).substr(a.length);return n===!1&&(o=o.replace(/ (standard|daylight|summer|winter) /i,` `)),T(o)}function ot(e,t){let n=t||new Date(Date.UTC(2012,0,1,0,0,0,0)),r=new Date(n.toLocaleString(`en-US`,{timeZone:`UTC`}));return(new Date(n.toLocaleString(`en-US`,{timeZone:e})).getTime()-r.getTime())/6e4*-1}function st(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ct(e){let t,n,r,i=e.h,a=e.s,o=e.l;if(a==0)t=n=r=o;else{let e=function(e,t,n){return n<0&&(n+=1),n>1&&--n,n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e},s=o<.5?o*(1+a):o+a-o*a,c=2*o-s;t=e(c,s,i+1/3),n=e(c,s,i),r=e(c,s,i-1/3)}return{r:Math.round(t*255),g:Math.round(n*255),b:Math.round(r*255)}}function lt(e){let t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),a=Math.min(t,n,r),o=0,s=0,c=(i+a)/2;if(i===a)o=s=0;else{let e=i-a;switch(s=c>.5?e/(2-i-a):e/(i+a),i){case t:o=(n-r)/e+(n<r?6:0);break;case n:o=(r-t)/e+2;break;case r:o=(t-n)/e+4;break}o/=6}return{h:o,s,l:c}}function ut(e,t){return e&&{r:Math.max(0,Math.min(255,e.r+E(e.r,t))),g:Math.max(0,Math.min(255,e.g+E(e.g,t))),b:Math.max(0,Math.min(255,e.b+E(e.b,t))),a:e.a}}function E(e,t){let n=t>0?255-e:e;return Math.round(n*t)}function dt(e,t){if(e){let n=Math.min(Math.max(e.r,e.g,e.b),230),r=E(n,t);return{r:Math.max(0,Math.min(255,Math.round(e.r+r))),g:Math.max(0,Math.min(255,Math.round(e.g+r))),b:Math.max(0,Math.min(255,Math.round(e.b+r))),a:e.a}}else return e}function ft(e){return(e.r*299+e.g*587+e.b*114)/1e3>=128}function pt(e,t){if(e===void 0||t==1)return e;let n=lt(e);return n.s=t,ct(n)}function mt(e,t={r:255,g:255,b:255},n={r:255,g:255,b:255}){let r=t,i=n;return ft(n)&&(r=n,i=t),ft(e)?i:r}function ht(e,t){return e||=[],[...e,...t].filter((e,t,n)=>n.indexOf(e)===t)}function gt(e,t){return!(!t||e.left!=t.left||e.right!=t.right||e.top!=t.top||e.bottom!=t.bottom)}function _t(e){return e[0]===`#`&&(e=e.substr(1)),e.length==3&&(e=e[0].repeat(2)+e[1].repeat(2)+e[2].repeat(2)),parseInt(e,16)}function vt(e){e=e.replace(/[ ]/g,``);let t=e.match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(t)t.push(`1`);else if(t=e.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i),!t)return 0;let n=``;for(let e=1;e<=3;e++){let r=parseInt(t[e]).toString(16);r.length==1&&(r=`0`+r),n+=r}return _t(n)}function yt(e){return D.fromAny(e)}var D=class e{constructor(e){Object.defineProperty(this,`_hex`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._hex=e|0}get hex(){return this._hex}get r(){return this._hex>>>16}get g(){return this._hex>>8&255}get b(){return this._hex&255}toCSS(e=1){return`rgba(`+this.r+`, `+this.g+`, `+this.b+`, `+e+`)`}toCSSHex(){return`#`+We(this.r.toString(16),2)+We(this.g.toString(16),2)+We(this.b.toString(16),2)}toHSL(e=1){return lt({r:this.r,g:this.g,b:this.b,a:e})}static fromHSL(e,t,n){let r=ct({h:e,s:t,l:n});return this.fromRGB(r.r,r.g,r.b)}toString(){return this.toCSSHex()}static fromHex(t){return new e(t)}static fromRGB(t,n,r){return new e((r|0)+(n<<8)+(t<<16))}static fromString(t){return new e(_t(t))}static fromCSS(t){return new e(vt(t))}static fromAny(t){if(p(t)){if(t[0]==`#`)return e.fromString(t);if(t.substr(0,3)==`rgb`)return e.fromCSS(t)}else if(m(t))return e.fromHex(t);else if(t instanceof e)return e.fromHex(t.hex);throw Error(`Unknown color syntax: `+t)}static alternative(e,t,n){let r=mt({r:e.r,g:e.g,b:e.b},t?{r:t.r,g:t.g,b:t.b}:void 0,n?{r:n.r,g:n.g,b:n.b}:void 0);return this.fromRGB(r.r,r.g,r.b)}static interpolate(t,n,r,i=`rgb`){if(i==`hsl`){let i=n.toHSL(),a=r.toHSL();return e.fromHSL(k(t,i.h,a.h),k(t,i.s,a.s),k(t,i.l,a.l))}else return e.fromRGB(k(t,n.r,r.r),k(t,n.g,r.g),k(t,n.b,r.b))}static lighten(t,n){let r=ut({r:t.r,g:t.g,b:t.b},n);return e.fromRGB(r.r,r.g,r.b)}static brighten(t,n){let r=dt({r:t.r,g:t.g,b:t.b},n);return e.fromRGB(r.r,r.g,r.b)}static saturate(t,n){let r=pt({r:t.r,g:t.g,b:t.b},n);return e.fromRGB(r.r,r.g,r.b)}},O=class{constructor(){Object.defineProperty(this,`_listeners`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_killed`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_disabled`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_iterating`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_enabled`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_disposed`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}isDisposed(){return this._disposed}dispose(){if(!this._disposed){this._disposed=!0;let e=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{g(e,e=>{e.disposer.dispose()})}finally{this._killed=null,this._iterating=null}}}hasListeners(){return this._listeners.length!==0}hasListenersByType(e){return re(this._listeners,t=>(t.type===null||t.type===e)&&!t.killed)}enable(){this._enabled=!0}disable(){this._enabled=!1}enableType(e){delete this._disabled[e]}disableType(e,t=1/0){this._disabled[e]=t}_removeListener(e){if(this._iterating===0){let t=this._listeners.indexOf(e);if(t===-1)throw Error(`Invalid state: could not remove listener`);this._listeners.splice(t,1)}else this._killed.push(e)}_removeExistingListener(e,t,n,r){if(this._disposed)throw Error(`EventDispatcher is disposed`);this._eachListener(i=>{i.once===e&&i.type===t&&(n===void 0||i.callback===n)&&i.context===r&&i.disposer.dispose()})}isEnabled(e){if(this._disposed)throw Error(`EventDispatcher is disposed`);return this._enabled&&this._listeners.length>0&&this.hasListenersByType(e)&&this._disabled[e]===void 0}removeType(e){if(this._disposed)throw Error(`EventDispatcher is disposed`);this._eachListener(t=>{t.type===e&&t.disposer.dispose()})}has(e,t,n){return fe(this._listeners,r=>r.once!==!0&&r.type===e&&(t===void 0||r.callback===t)&&r.context===n)!==-1}_shouldDispatch(e){if(this._disposed)throw Error(`EventDispatcher is disposed`);let t=this._disabled[e];return m(t)?(t<=1?delete this._disabled[e]:--this._disabled[e],!1):this._enabled}_eachListener(e){++this._iterating;try{g(this._listeners,e)}finally{--this._iterating,this._iterating===0&&this._killed.length!==0&&(g(this._killed,e=>{this._removeListener(e)}),this._killed.length=0)}}dispatch(e,t){this._shouldDispatch(e)&&this._eachListener(n=>{!n.killed&&(n.type===null||n.type===e)&&(n._debounceDelay?(n._debounceTimeout&&window.clearTimeout(n._debounceTimeout),n._debounceTimeout=window.setTimeout(()=>{n._debounceTimeout=void 0,n.killed||n.dispatch(e,t)},n._debounceDelay)):n.dispatch(e,t))})}_on(e,t,n,r,i,a,o){if(this._disposed)throw Error(`EventDispatcher is disposed`);this._removeExistingListener(e,t,n,r);let s={type:t,callback:n,context:r,shouldClone:i,dispatch:a,killed:!1,once:e,disposer:new x(()=>{s.killed=!0,s._debounceTimeout&&window.clearTimeout(s._debounceTimeout),this._removeListener(s)}),_debounceDelay:o};return this._listeners.push(s),s}onAll(e,t,n=!0){return this._on(!1,null,e,t,n,(n,r)=>e.call(t,r)).disposer}on(e,t,n,r=!0){return this._on(!1,e,t,n,r,(e,r)=>t.call(n,r)).disposer}onDebounced(e,t,n,r,i=!0){return this._on(!1,e,t,r,i,(e,n)=>t.call(r,n),n).disposer}once(e,t,n,r=!0){let i=this._on(!0,e,t,n,r,(e,r)=>{i.disposer.dispose(),t.call(n,r)});return i.disposer}off(e,t,n){this._removeExistingListener(!1,e,t,n)}copyFrom(e){if(this._disposed)throw Error(`EventDispatcher is disposed`);if(e===this)throw Error(`Cannot copyFrom the same TargetedEventDispatcher`);let t=[];return g(e._listeners,e=>{!e.killed&&e.shouldClone&&(e.type===null?t.push(this.onAll(e.callback,e.context)):e.once?t.push(this.once(e.type,e.callback,e.context)):t.push(this.on(e.type,e.callback,e.context)))}),new S(t)}};function bt(t){return e(this,void 0,void 0,function*(){if(t!==void 0){let e=[];b(t,(t,n)=>{e.push(n.waitForStop())}),yield Promise.all(e)}})}function k(e,t,n){return t+e*(n-t)}function xt(e,t,n){return e>=1?n:t}function St(e,n,r){return new t(k(e,n.percent,r.percent))}function Ct(e,t,n){return D.interpolate(e,t,n)}function wt(e,n){return typeof e==`number`&&typeof n==`number`?k:e instanceof t&&n instanceof t?St:e instanceof D&&n instanceof D?Ct:xt}var A;(function(e){e[e.Stopped=0]=`Stopped`,e[e.Playing=1]=`Playing`,e[e.Paused=2]=`Paused`})(A||={});function j(e,t){if(!(e>=0&&e<t))throw Error(`Index out of bounds: `+e)}var Tt=class{constructor(e=[]){Object.defineProperty(this,`_values`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`events`,{enumerable:!0,configurable:!0,writable:!0,value:new O}),this._values=e}get values(){return this._values}contains(e){return this._values.indexOf(e)!==-1}removeValue(e){let t=0,n=this._values.length;for(;t<n;)this._values[t]===e?(this.removeIndex(t),--n):++t}indexOf(e){return h(this._values,e)}get length(){return this._values.length}hasIndex(e){return e>=0&&e<this._values.length}getIndex(e){return this._values[e]}_onPush(e){this.events.isEnabled(`push`)&&this.events.dispatch(`push`,{type:`push`,target:this,newValue:e})}_onInsertIndex(e,t){this.events.isEnabled(`insertIndex`)&&this.events.dispatch(`insertIndex`,{type:`insertIndex`,target:this,index:e,newValue:t})}_onSetIndex(e,t,n){this.events.isEnabled(`setIndex`)&&this.events.dispatch(`setIndex`,{type:`setIndex`,target:this,index:e,oldValue:t,newValue:n})}_onSwap(e,t){this.events.isEnabled(`swap`)&&this.events.dispatch(`swap`,{type:`swap`,target:this,a:e,b:t})}_onRemoveIndex(e,t){this.events.isEnabled(`removeIndex`)&&this.events.dispatch(`removeIndex`,{type:`removeIndex`,target:this,index:e,oldValue:t})}_onMoveIndex(e,t,n){this.events.isEnabled(`moveIndex`)&&this.events.dispatch(`moveIndex`,{type:`moveIndex`,target:this,oldIndex:e,newIndex:t,value:n})}_onClear(e){this.events.isEnabled(`clear`)&&this.events.dispatch(`clear`,{type:`clear`,target:this,oldValues:e})}setIndex(e,t){j(e,this._values.length);let n=this._values[e];return n!==t&&(this._values[e]=t,this._onSetIndex(e,n,t)),n}insertIndex(e,t){return j(e,this._values.length+1),ue(this._values,e,t),this._onInsertIndex(e,t),t}swap(e,t){let n=this._values.length;if(j(e,n),j(t,n),e!==t){let n=this._values[e],r=this._values[t];this._values[e]=r,this._values[t]=n,this._onSwap(n,r)}}removeIndex(e){j(e,this._values.length);let t=this._values[e];return de(this._values,e),this._onRemoveIndex(e,t),t}moveValue(e,t){let n=this.indexOf(e);if(n!==-1)if(de(this._values,n),t==null){let t=this._values.length;this._values.push(e),this._onMoveIndex(n,t,e)}else ue(this._values,t,e),this._onMoveIndex(n,t,e);else t==null?(this._values.push(e),this._onPush(e)):(ue(this._values,t,e),this._onInsertIndex(t,e));return e}push(e){return this._values.push(e),this._onPush(e),e}unshift(e){return this.insertIndex(0,e),e}pushAll(e){g(e,e=>{this.push(e)})}copyFrom(e){this.pushAll(e._values)}pop(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)}shift(){return this._values.length?this.removeIndex(0):void 0}setAll(e){let t=this._values;this._values=[],this._onClear(t),g(e,e=>{this._values.push(e),this._onPush(e)})}clear(){this.setAll([])}*[Symbol.iterator](){let e=this._values.length;for(let t=0;t<e;++t)yield this._values[t]}each(e){g(this._values,e)}eachReverse(e){_(this._values,e)}},Et=class extends Tt{constructor(){super(...arguments),Object.defineProperty(this,`autoDispose`,{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,`_disposed`,{enumerable:!0,configurable:!0,writable:!0,value:!1})}swap(e,t){let n=this.autoDispose;this.autoDispose=!1,super.swap(e,t),this.autoDispose=n}_onSetIndex(e,t,n){this.autoDispose&&t.dispose(),super._onSetIndex(e,t,n)}_onRemoveIndex(e,t){this.autoDispose&&t.dispose(),super._onRemoveIndex(e,t)}_onClear(e){this.autoDispose&&g(e,e=>{e.dispose()}),super._onClear(e)}_dispose(){this.autoDispose&&g(this._values,e=>{e.dispose()})}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}},Dt=class extends Et{constructor(e,t){super(),Object.defineProperty(this,`template`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`make`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e,this.make=t}_dispose(){super._dispose(),this.autoDispose&&this.template.dispose()}},Ot=class extends Tt{constructor(e){super(),Object.defineProperty(this,`_disposed`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_container`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_events`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._container=e,this._events=this.events.onAll(e=>{if(e.type===`clear`)g(e.oldValues,e=>{this._onRemoved(e)});else if(e.type===`push`)this._onInserted(e.newValue);else if(e.type===`setIndex`)this._onRemoved(e.oldValue),this._onInserted(e.newValue,e.index);else if(e.type===`insertIndex`)this._onInserted(e.newValue,e.index);else if(e.type===`removeIndex`)this._onRemoved(e.oldValue);else if(e.type===`moveIndex`)this._onRemoved(e.value),this._onInserted(e.value,e.newIndex);else throw Error(`Unknown IListEvent type`)})}_onInserted(e,t){e._setParent(this._container,!0);let n=this._container._childrenDisplay;t===void 0?n.addChild(e._display):n.addChildAt(e._display,t)}_onRemoved(e){this._container._childrenDisplay.removeChild(e._display),this._container.markDirtyBounds(),this._container.markDirty()}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._events.dispose(),g(this.values,e=>{e.dispose()}))}};const kt=Math.PI;kt/2;const At=kt/180,jt=180/kt;function Mt(e,t,n){if(!m(t)||t<=0){let t=Math.round(e);return n&&t-e==.5&&t--,t}else{let n=10**t;return Math.round(e*n)/n}}function Nt(e,t){if(!m(t)||t<=0)return Math.ceil(e);{let n=10**t;return Math.ceil(e*n)/n}}function Pt(e,t,n){return Math.min(Math.max(e,t),n)}function M(e){return Math.sin(At*e)}function N(e){return Math.cos(At*e)}function Ft(e){return e%=360,e<0&&(e+=360),e}function It(e,t,n,r,i){let a=Number.MAX_VALUE,o=Number.MAX_VALUE,s=-Number.MAX_VALUE,c=-Number.MAX_VALUE,l=[];l.push(Lt(i,n)),l.push(Lt(i,r));let u=Math.min(Math.floor(n/90)*90,Math.floor(r/90)*90),d=Math.max(Math.ceil(n/90)*90,Math.ceil(r/90)*90);for(let e=u;e<=d;e+=90)e>=n&&e<=r&&l.push(Lt(i,e));for(let e=0;e<l.length;e++){let t=l[e];t.x<a&&(a=t.x),t.y<o&&(o=t.y),t.x>s&&(s=t.x),t.y>c&&(c=t.y)}return{left:e+a,top:t+o,right:e+s,bottom:t+c}}function Lt(e,t){return{x:e*N(t),y:e*M(t)}}function Rt(e){let t=e.length;if(t>0){let n=e[0],r=n.left,i=n.top,a=n.right,o=n.bottom;if(t>1)for(let s=1;s<t;s++)n=e[s],r=Math.min(n.left,r),a=Math.max(n.right,a),i=Math.min(n.top,i),o=Math.max(n.bottom,o);return{left:r,right:a,top:i,bottom:o}}return{left:0,right:0,top:0,bottom:0}}function zt(e,t){return e.x>=t.left&&e.y>=t.top&&e.x<=t.right&&e.y<=t.bottom}function Bt(e){return e}function Vt(e){return e*e*e}function Ht(e){return function(t){return 1-e(1-t)}}var Ut=4/11;1/Ut/Ut;var Wt=2*Math.PI,Gt=1,Kt=.3/Wt;Math.asin(1/Gt)*Kt;var qt=class{constructor(e,t){Object.defineProperty(this,`_entity`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_settings`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_userSettings`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e,this._settings=t,b(t,e=>{this._userSettings[e]=!0})}get(e,t){let n=this._settings[e];return n===void 0?t:n}setRaw(e,t){this._settings[e]=t}set(e,t){this._userSettings[e]=!0,this.setRaw(e,t)}remove(e){delete this._userSettings[e],delete this._settings[e]}setAll(e){y(e).forEach(t=>{this.set(t,e[t])})}_eachSetting(e){b(this._settings,e)}apply(){let e={};e.stateAnimationEasing=!0,e.stateAnimationDuration=!0;let t=this._entity.states.lookup(`default`);this._eachSetting((n,r)=>{e[n]||(e[n]=!0,this!==t&&(n in t._settings||(t._settings[n]=this._entity.get(n))),this._entity.set(n,r))})}applyAnimate(e){e??=this._settings.stateAnimationDuration,e??=this.get(`stateAnimationDuration`,this._entity.get(`stateAnimationDuration`,0));let t=this._settings.stateAnimationEasing;t??=this.get(`stateAnimationEasing`,this._entity.get(`stateAnimationEasing`,Vt));let n=this._entity.states.lookup(`default`),r={};r.stateAnimationEasing=!0,r.stateAnimationDuration=!0;let i={};return this._eachSetting((a,o)=>{if(!r[a]){r[a]=!0,this!=n&&(a in n._settings||(n._settings[a]=this._entity.get(a)));let s=this._entity.animate({key:a,to:o,duration:e,easing:t});s&&(i[a]=s)}}),i}},Jt=class{constructor(e){Object.defineProperty(this,`_states`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_entity`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._entity=e}lookup(e){return this._states[e]}create(e,t){let n=this._states[e];if(n)return n.setAll(t),n;{let n=new qt(this._entity,t);return this._states[e]=n,n}}remove(e){delete this._states[e]}apply(e){let t=this._states[e];t&&t.apply(),this._entity._applyState(e)}applyAnimate(e,t){let n,r=this._states[e];return r&&(n=r.applyAnimate(t)),this._entity._applyStateAnimated(e,t),n}};const P=new class{constructor(){Object.defineProperty(this,`version`,{enumerable:!0,configurable:!0,writable:!0,value:`5.14.3`}),Object.defineProperty(this,`licenses`,{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,`entitiesById`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`rootElements`,{enumerable:!0,configurable:!0,writable:!0,value:[]})}};function Yt(e){P.licenses.push(e)}function F(e,t){return e===t?0:e<t?-1:1}function Xt(e,t,n){let r=e.length,i=t.length,a=Math.min(r,i);for(let r=0;r<a;++r){let i=n(e[r],t[r]);if(i!==0)return i}return F(r,i)}function Zt(e,t){return e===t?0:e<t?-1:1}var Qt=class{constructor(e){Object.defineProperty(this,`_entity`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_callbacks`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_disabled`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e}add(e,t){let n=this._callbacks[e];return n===void 0&&(n=this._callbacks[e]=[]),n.push(t),this._entity._markDirtyKey(e),new x(()=>{v(n,t)&&this._entity._markDirtyKey(e)})}remove(e){let t=this._callbacks[e];t!==void 0&&(delete this._callbacks[e],t.length!==0&&this._entity._markDirtyKey(e))}enable(e){this._disabled[e]&&(delete this._disabled[e],this._entity._markDirtyKey(e))}disable(e){this._disabled[e]||(this._disabled[e]=!0,this._entity._markDirtyKey(e))}fold(e,t){if(!this._disabled[e]){let n=this._callbacks[e];if(n!==void 0)for(let r=0,i=n.length;r<i;++r)t=n[r](t,this._entity,e)}return t}},I=class{constructor(e,t,n,r,i,a,o){Object.defineProperty(this,`_animation`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_from`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_to`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_duration`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_easing`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_loops`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_interpolate`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_oldTime`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_time`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`_stopped`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_playing`,{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,`events`,{enumerable:!0,configurable:!0,writable:!0,value:new O}),this._animation=e,this._from=t,this._to=n,this._duration=r,this._easing=i,this._loops=a,this._interpolate=wt(t,n),this._oldTime=o}get to(){return this._to}get from(){return this._from}get playing(){return this._playing}get stopped(){return this._stopped}stop(){this._stopped||(this._stopped=!0,this._playing=!1,this.events.isEnabled(`stopped`)&&this.events.dispatch(`stopped`,{type:`stopped`,target:this}))}pause(){this._playing=!1,this._oldTime=null}play(){!this._stopped&&!this._playing&&(this._playing=!0,this._animation._startAnimation())}get percentage(){return this._time/this._duration}waitForStop(){return new Promise((e,t)=>{if(this._stopped)e();else{let t=this.events.on(`stopped`,()=>{t.dispose(),e()})}})}_checkEnded(){return this._loops>1?(--this._loops,!1):!0}_run(e){this._oldTime!==null&&(this._time+=e-this._oldTime,this._time>this._duration&&(this._time=this._duration)),this._oldTime=e}_reset(e){this._oldTime=e,this._time=0}_value(e){return this._interpolate(this._easing(e),this._from,this._to)}},$t=0,en=class{constructor(e){Object.defineProperty(this,`uid`,{enumerable:!0,configurable:!0,writable:!0,value:++$t}),Object.defineProperty(this,`_settings`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_privateSettings`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_settingEvents`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_privateSettingEvents`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_prevSettings`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_prevPrivateSettings`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_animatingSettings`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_animatingPrivateSettings`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_disposed`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_userProperties`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`enableDispose`,{enumerable:!0,configurable:!0,writable:!0,value:!0}),this._settings=e}_checkDirty(){y(this._settings).forEach(e=>{this._userProperties[e]=!0,this._markDirtyKey(e)})}resetUserSettings(){this._userProperties={}}_runAnimation(e){let t=A.Stopped;if(!this.isDisposed()){let n=!1,r=!1;b(this._animatingSettings,(t,i)=>{if(i.stopped)this._stopAnimation(t);else if(i.playing){i._run(e);let r=i.percentage;r>=1?i._checkEnded()?this.set(t,i._value(1)):(n=!0,i._reset(e),this._set(t,i._value(1))):(n=!0,this._set(t,i._value(r)))}else r=!0}),b(this._animatingPrivateSettings,(t,i)=>{if(i.stopped)this._stopAnimationPrivate(t);else if(i.playing){i._run(e);let r=i.percentage;r>=1?i._checkEnded()?this.setPrivate(t,i._value(1)):(n=!0,i._reset(e),this._setPrivate(t,i._value(1))):(n=!0,this._setPrivate(t,i._value(r)))}else r=!0}),n?t=A.Playing:r&&(t=A.Paused)}return t}_markDirtyKey(e){this.markDirty()}_markDirtyPrivateKey(e){this.markDirty()}on(e,t){let n=this._settingEvents[e];return n===void 0&&(n=this._settingEvents[e]=[]),n.push(t),new x(()=>{v(n,t),n.length===0&&delete this._settingEvents[e]})}off(e,t){let n=this._settingEvents[e];n!==void 0&&t!==void 0?v(n,t):delete this._settingEvents[e]}onPrivate(e,t){let n=this._privateSettingEvents[e];return n===void 0&&(n=this._privateSettingEvents[e]=[]),n.push(t),new x(()=>{v(n,t),n.length===0&&delete this._privateSettingEvents[e]})}offPrivate(e,t){let n=this._privateSettingEvents[e];n!==void 0&&t!==void 0?v(n,t):delete this._privateSettingEvents[e]}getRaw(e,t){let n=this._settings[e];return n===void 0?t:n}has(e){return e in this._settings}get(e,t){return this.getRaw(e,t)}_sendKeyEvent(e,t){let n=this._settingEvents[e];n!==void 0&&g(n,n=>{n(t,this,e)})}_sendPrivateKeyEvent(e,t){let n=this._privateSettingEvents[e];n!==void 0&&g(n,n=>{n(t,this,e)})}_setRaw(e,t,n){this._prevSettings[e]=t,this._sendKeyEvent(e,n)}setRaw(e,t){let n=this._settings[e];this._settings[e]=t,n!==t&&this._setRaw(e,n,t)}_set(e,t){let n=this._settings[e];this._settings[e]=t,n!==t&&(this._setRaw(e,n,t),this._markDirtyKey(e))}_stopAnimation(e){let t=this._animatingSettings[e];t&&(delete this._animatingSettings[e],t.stop())}set(e,t){return this._set(e,t),this._stopAnimation(e),t}remove(e){e in this._settings&&(this._prevSettings[e]=this._settings[e],delete this._settings[e],this._sendKeyEvent(e,void 0),this._markDirtyKey(e)),this._stopAnimation(e)}removeAll(){g(y(this._settings),e=>{this.remove(e)})}getPrivate(e,t){let n=this._privateSettings[e];return n===void 0?t:n}_setPrivateRaw(e,t,n){this._prevPrivateSettings[e]=t,this._sendPrivateKeyEvent(e,n)}setPrivateRaw(e,t){let n=this._privateSettings[e];this._privateSettings[e]=t,n!==t&&this._setPrivateRaw(e,n,t)}_setPrivate(e,t){let n=this._privateSettings[e];this._privateSettings[e]=t,n!==t&&(this._setPrivateRaw(e,n,t),this._markDirtyPrivateKey(e))}_stopAnimationPrivate(e){let t=this._animatingPrivateSettings[e];t&&(t.stop(),delete this._animatingPrivateSettings[e])}setPrivate(e,t){return this._setPrivate(e,t),this._stopAnimationPrivate(e),t}removePrivate(e){e in this._privateSettings&&(this._prevPrivateSettings[e]=this._privateSettings[e],delete this._privateSettings[e],this._markDirtyPrivateKey(e)),this._stopAnimationPrivate(e)}setAll(e){b(e,(e,t)=>{this.set(e,t)})}animate(e){let t=e.key,n=e.to,r=e.duration||0,i=e.loops||1,a=e.from===void 0?this.get(t):e.from,o=e.easing===void 0?Bt:e.easing;if(r===0)this.set(t,n);else if(a===void 0||a===n)this.set(t,n);else{this.set(t,a);let e=this._animatingSettings[t]=new I(this,a,n,r,o,i,this._animationTime());return this._startAnimation(),e}let s=new I(this,a,n,r,o,i,null);return s.stop(),s}animatePrivate(e){let t=e.key,n=e.to,r=e.duration||0,i=e.loops||1,a=e.from===void 0?this.getPrivate(t):e.from,o=e.easing===void 0?Bt:e.easing;if(r===0)this.setPrivate(t,n);else if(a===void 0||a===n)this.setPrivate(t,n);else{this.setPrivate(t,a);let e=this._animatingPrivateSettings[t]=new I(this,a,n,r,o,i,this._animationTime());return this._startAnimation(),e}let s=new I(this,a,n,r,o,i,null);return s.stop(),s}_dispose(){}isDisposed(){return this._disposed}dispose(){this.enableDispose&&!this._disposed&&(this._disposed=!0,this._dispose())}},L=class extends en{constructor(e,t,n,r=[]){if(super(t),Object.defineProperty(this,`_root`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_user_id`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`states`,{enumerable:!0,configurable:!0,writable:!0,value:new Jt(this)}),Object.defineProperty(this,`adapters`,{enumerable:!0,configurable:!0,writable:!0,value:new Qt(this)}),Object.defineProperty(this,`events`,{enumerable:!0,configurable:!0,writable:!0,value:this._createEvents()}),Object.defineProperty(this,`_userPrivateProperties`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_dirty`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_dirtyPrivate`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_template`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_templates`,{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,`_internalTemplates`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_defaultThemes`,{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,`_templateDisposers`,{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,`_disposers`,{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,`_runSetup`,{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,`_disposerProperties`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),!n)throw Error("You cannot use `new Class()`, instead use `Class.new()`");this._root=e,this._internalTemplates=r,t.id&&this._registerId(t.id)}static new(e,t,n){let r=new this(e,t,!0);return r._template=n,r._afterNew(),r}static _new(e,t,n=[]){let r=new this(e,t,!0,n);return r._afterNew(),r}_afterNew(){this._checkDirty();let e=!1,t=this._template;t&&(e=!0,t._setObjectTemplate(this)),g(this._internalTemplates,t=>{e=!0,t._setObjectTemplate(this)}),e&&this._applyTemplates(!1),this.states.create(`default`,{}),this._setDefaults()}_afterNewApplyThemes(){this._checkDirty();let e=this._template;e&&e._setObjectTemplate(this),g(this._internalTemplates,e=>{e._setObjectTemplate(this)}),this.states.create(`default`,{}),this._setDefaults(),this._applyThemes()}_createEvents(){return new O}get classNames(){return this.constructor.classNames}get className(){return this.constructor.className}_setDefaults(){}_setDefaultFn(e,t){let n=this.get(e);if(n)return n;{let n=t();return this.set(e,n),n}}_setDefault(e,t){this.has(e)||super.set(e,t)}_setRawDefault(e,t){this.has(e)||super.setRaw(e,t)}_clearDirty(){y(this._dirty).forEach(e=>{this._dirty[e]=!1}),y(this._dirtyPrivate).forEach(e=>{this._dirtyPrivate[e]=!1})}isDirty(e){return!!this._dirty[e]}isPrivateDirty(e){return!!this._dirtyPrivate[e]}_markDirtyKey(e){this._dirty[e]=!0,super._markDirtyKey(e)}_markDirtyPrivateKey(e){this._dirtyPrivate[e]=!0,super._markDirtyKey(e)}isType(e){return this.classNames.indexOf(e)!==-1}_pushPropertyDisposer(e,t){let n=this._disposerProperties[e];return n===void 0&&(n=this._disposerProperties[e]=[]),n.push(t),t}_disposeProperty(e){let t=this._disposerProperties[e];t!==void 0&&(g(t,e=>{e.dispose()}),delete this._disposerProperties[e])}set template(e){let t=this._template;t!==e&&(this._template=e,t&&t._removeObjectTemplate(this),e&&e._setObjectTemplate(this),this._applyTemplates())}get template(){return this._template}markDirty(){this._root._addDirtyEntity(this)}_startAnimation(){this._root._addAnimation(this)}_animationTime(){return this._root.animationTime}_applyState(e){}_applyStateAnimated(e,t){}get(e,t){let n=this.adapters.fold(e,this._settings[e]);return n===void 0?t:n}isUserSetting(e){return this._userProperties[e]||!1}set(e,t){return this._userProperties[e]=!0,super.set(e,t)}setRaw(e,t){this._userProperties[e]=!0,super.setRaw(e,t)}_setSoft(e,t){return this._userProperties[e]?t:super.set(e,t)}remove(e){delete this._userProperties[e],this._removeTemplateProperty(e)}setPrivate(e,t){return this._userPrivateProperties[e]=!0,super.setPrivate(e,t)}setPrivateRaw(e,t){this._userPrivateProperties[e]=!0,super.setPrivateRaw(e,t)}removePrivate(e){delete this._userPrivateProperties[e],this._removeTemplatePrivateProperty(e)}_setTemplateProperty(e,t,n){if(!this._userProperties[t]){let r=this._findTemplateByKey(t);e===r&&super.set(t,n)}}_setTemplatePrivateProperty(e,t,n){if(!this._userPrivateProperties[t]){let r=this._findTemplateByPrivateKey(t);e===r&&super.setPrivate(t,n)}}_removeTemplateProperty(e){if(!this._userProperties[e]){let t=this._findTemplateByKey(e);t?super.set(e,t._settings[e]):super.remove(e)}}_removeTemplatePrivateProperty(e){if(!this._userPrivateProperties[e]){let t=this._findTemplateByPrivateKey(e);t?super.setPrivate(e,t._privateSettings[e]):super.removePrivate(e)}}_walkParents(e){e(this._root._rootContainer),e(this)}_applyStateByKey(e){let t=this.states.create(e,{}),n={};this._eachTemplate(r=>{let i=r.states.lookup(e);i&&i._apply(t,n)}),b(t._settings,e=>{!n[e]&&!t._userSettings[e]&&t.remove(e)})}_applyTemplate(e,t){this._templateDisposers.push(e._apply(this,t)),b(e._settings,(e,n)=>{!t.settings[e]&&!this._userProperties[e]&&(t.settings[e]=!0,super.set(e,n))}),b(e._privateSettings,(e,n)=>{!t.privateSettings[e]&&!this._userPrivateProperties[e]&&(t.privateSettings[e]=!0,super.setPrivate(e,n))}),this._runSetup&&e.setup&&(this._runSetup=!1,e.setup(this))}_findStaticTemplate(e){if(this._template&&e(this._template))return this._template}_eachTemplate(e){this._findStaticTemplate(t=>(e(t),!1)),_(this._internalTemplates,e),g(this._templates,e)}_applyTemplates(e=!0){e&&this._disposeTemplates();let t={settings:{},privateSettings:{},states:{}};this._eachTemplate(e=>{this._applyTemplate(e,t)}),e&&(b(this._settings,e=>{!this._userProperties[e]&&!t.settings[e]&&super.remove(e)}),b(this._privateSettings,e=>{!this._userPrivateProperties[e]&&!t.privateSettings[e]&&super.removePrivate(e)}))}_findTemplate(e){let t=this._findStaticTemplate(e);if(t===void 0){let t=he(this._internalTemplates,e);return t===void 0?me(this._templates,e):t}else return t}_findTemplateByKey(e){return this._findTemplate(t=>e in t._settings)}_findTemplateByPrivateKey(e){return this._findTemplate(t=>e in t._privateSettings)}_disposeTemplates(){g(this._templateDisposers,e=>{e.dispose()}),this._templateDisposers.length=0}_removeTemplates(){g(this._templates,e=>{e._removeObjectTemplate(this)}),this._templates.length=0}_applyThemes(e=!1){let t=!1,n=[],r=[],i=new Set,a=this.get(`themeTagsSelf`);return a&&g(a,e=>{i.add(e)}),this._walkParents(e=>{e===this._root._rootContainer&&(t=!0),e._defaultThemes.length>0&&n.push(e._defaultThemes);let a=e.get(`themes`);a&&r.push(a);let o=e.get(`themeTags`);o&&g(o,e=>{i.add(e)})}),r=n.concat(r),this._removeTemplates(),(t||e)&&_(this.classNames,e=>{let t=[];g(r,n=>{g(n,n=>{let r=n._lookupRules(e);r&&_(r,e=>{if(e.tags.every(e=>i.has(e))){let n=_e(t,t=>{let n=F(e.tags.length,t.tags.length);return n===0?Xt(e.tags,t.tags,F):n});t.splice(n.index,0,e)}})})}),g(t,e=>{this._templates.push(e.template),e.template._setObjectTemplate(this)})}),this._applyTemplates(),(t||e)&&(this._runSetup=!1),t||e}_changed(){}_beforeChanged(){if(this.isDirty(`id`)){let e=this.get(`id`);e&&this._registerId(e);let t=this._prevSettings.id;t&&(delete this._root.entitiesById[t],delete P.entitiesById[t])}}_registerId(e){if(this._root.entitiesById[e]&&this._root.entitiesById[e]!==this)throw Error(`An entity with id "`+e+`" already exists.`);this._root.entitiesById[e]=this,P.entitiesById[e]=this}_afterChanged(){}addDisposer(e){return this._disposers.push(e),e}_dispose(){super._dispose();let e=this._template;e&&e._removeObjectTemplate(this),g(this._internalTemplates,e=>{e._removeObjectTemplate(this)}),this._removeTemplates(),this._disposeTemplates(),this.events.dispose(),this._disposers.forEach(e=>{e.dispose()}),b(this._disposerProperties,(e,t)=>{g(t,e=>{e.dispose()})});let t=this.get(`id`);t&&(delete this._root.entitiesById[t],delete P.entitiesById[t])}setTimeout(e,t){let n=setTimeout(()=>{this.removeDispose(r),e()},t),r=new x(()=>{clearTimeout(n)});return this._disposers.push(r),r}removeDispose(e){if(!this.isDisposed()){let t=h(this._disposers,e);t>-1&&this._disposers.splice(t,1)}e.dispose()}hasTag(e){return h(this.get(`themeTags`,[]),e)!==-1}addTag(e){if(!this.hasTag(e)){let t=this.get(`themeTags`,[]);t.push(e),this.set(`themeTags`,t)}}removeTag(e){if(this.hasTag(e)){let t=this.get(`themeTags`,[]);oe(t,e),this.set(`themeTags`,t)}}_t(e,t,...n){return this._root.language.translate(e,t,...n)}get root(){return this._root}};Object.defineProperty(L,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`Entity`}),Object.defineProperty(L,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:[`Entity`]});function tn(e){b(e,(e,t)=>{ee(t)&&typeof t.dispose==`function`&&(t.enableDispose=!0,t.dispose())})}var nn=class{constructor(e,t,n){Object.defineProperty(this,`_settings`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_name`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_template`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._name=e,this._template=t,this._settings=n}_dispose(){tn(this._settings)}get(e,t){let n=this._settings[e];return n===void 0?t:n}set(e,t){this._settings[e]=t,this._template._stateChanged(this._name)}remove(e){delete this._settings[e],this._template._stateChanged(this._name)}setAll(e){y(e).forEach(t=>{this._settings[t]=e[t]}),this._template._stateChanged(this._name)}_apply(e,t){b(this._settings,(n,r)=>{!t[n]&&!e._userSettings[n]&&(t[n]=!0,e.setRaw(n,r))})}},rn=class{constructor(e){Object.defineProperty(this,`_template`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_states`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._template=e}_dispose(){b(this._states,(e,t)=>{t._dispose()})}lookup(e){return this._states[e]}create(e,t){let n=this._states[e];if(n)return n.setAll(t),n;{let n=new nn(e,this._template,t);return this._states[e]=n,this._template._stateChanged(e),n}}remove(e){delete this._states[e],this._template._stateChanged(e)}_apply(e,t){b(this._states,(n,r)=>{let i=t.states[n];i??=t.states[n]={};let a=e.states.create(n,{});r._apply(a,i)})}},an=class{constructor(){Object.defineProperty(this,`_callbacks`,{enumerable:!0,configurable:!0,writable:!0,value:{}})}add(e,t){let n=this._callbacks[e];return n===void 0&&(n=this._callbacks[e]=[]),n.push(t),new x(()=>{v(n,t),n.length===0&&delete this._callbacks[e]})}remove(e){this._callbacks[e]!==void 0&&delete this._callbacks[e]}_apply(e){let t=[];return b(this._callbacks,(n,r)=>{g(r,r=>{t.push(e.adapters.add(n,r))})}),new S(t)}},R=class e{constructor(e,t){if(Object.defineProperty(this,`_disposed`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_settings`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_privateSettings`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_settingEvents`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_privateSettingEvents`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_entities`,{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,`states`,{enumerable:!0,configurable:!0,writable:!0,value:new rn(this)}),Object.defineProperty(this,`adapters`,{enumerable:!0,configurable:!0,writable:!0,value:new an}),Object.defineProperty(this,`events`,{enumerable:!0,configurable:!0,writable:!0,value:new O}),Object.defineProperty(this,`setup`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!t)throw Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=e}static new(t){return new e(t,!0)}_dispose(){tn(this._settings),tn(this._privateSettings)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}_checkDisposed(){if(this._disposed)throw Error(`Template is disposed`)}get entities(){return this._entities}get(e,t){this._checkDisposed();let n=this._settings[e];return n===void 0?t:n}setRaw(e,t){this._checkDisposed(),this._settings[e]=t}set(e,t){this._checkDisposed(),this._settings[e]!==t&&(this.setRaw(e,t),this._entities.forEach(n=>{n._setTemplateProperty(this,e,t)}))}remove(e){this._checkDisposed(),e in this._settings&&(delete this._settings[e],this._entities.forEach(t=>{t._removeTemplateProperty(e)}))}removeAll(){this._checkDisposed(),b(this._settings,(e,t)=>{this.remove(e)})}getPrivate(e,t){this._checkDisposed();let n=this._privateSettings[e];return n===void 0?t:n}setPrivateRaw(e,t){return this._checkDisposed(),this._privateSettings[e]=t,t}setPrivate(e,t){return this._checkDisposed(),this._privateSettings[e]!==t&&(this.setPrivateRaw(e,t),this._entities.forEach(n=>{n._setTemplatePrivateProperty(this,e,t)})),t}removePrivate(e){this._checkDisposed(),e in this._privateSettings&&(delete this._privateSettings[e],this._entities.forEach(t=>{t._removeTemplatePrivateProperty(e)}))}setAll(e){this._checkDisposed(),b(e,(e,t)=>{this.set(e,t)})}on(e,t){this._checkDisposed();let n=this._settingEvents[e];return n===void 0&&(n=this._settingEvents[e]=[]),n.push(t),new x(()=>{v(n,t),n.length===0&&delete this._settingEvents[e]})}onPrivate(e,t){this._checkDisposed();let n=this._privateSettingEvents[e];return n===void 0&&(n=this._privateSettingEvents[e]=[]),n.push(t),new x(()=>{v(n,t),n.length===0&&delete this._privateSettingEvents[e]})}_apply(e,t){this._checkDisposed();let n=[];return b(this._settingEvents,(t,r)=>{g(r,r=>{n.push(e.on(t,r))})}),b(this._privateSettingEvents,(t,r)=>{g(r,r=>{n.push(e.onPrivate(t,r))})}),this.states._apply(e,t),n.push(this.adapters._apply(e)),n.push(e.events.copyFrom(this.events)),new S(n)}_setObjectTemplate(e){this._checkDisposed(),this._entities.push(e)}_removeObjectTemplate(e){oe(this._entities,e)}_stateChanged(e){this._checkDisposed(),this._entities.forEach(t=>{t._applyStateByKey(e)})}},on=class e extends O{constructor(e){super(),Object.defineProperty(this,`_sprite`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_rendererDisposers`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_dispatchParents`,{enumerable:!0,configurable:!0,writable:!0,value:!0}),this._sprite=e}_makePointerEvent(e,t){return{type:e,originalEvent:t.event,point:t.point,simulated:t.simulated,native:t.native,target:this._sprite}}_onRenderer(e,t){this._sprite.set(`interactive`,!0),this._sprite._display.interactive=!0;let n=this._rendererDisposers[e];if(n===void 0){let r=this._sprite._display.on(e,e=>{t.call(this,e)});n=this._rendererDisposers[e]=new Te(()=>{delete this._rendererDisposers[e],r.dispose()})}return n.increment()}_on(t,n,r,i,a,o,s){let c=super._on(t,n,r,i,a,o,s),l=e.RENDERER_EVENTS[n];return l!==void 0&&(c.disposer=new S([c.disposer,this._onRenderer(n,l)])),c}stopParentDispatch(){this._dispatchParents=!1}dispatchParents(e,t){let n=this._dispatchParents;this._dispatchParents=!0;try{this.dispatch(e,t),this._dispatchParents&&this._sprite.parent&&this._sprite.parent.events.dispatchParents(e,t)}finally{this._dispatchParents=n}}};Object.defineProperty(on,`RENDERER_EVENTS`,{enumerable:!0,configurable:!0,writable:!0,value:{click:function(e){this.isEnabled(`click`)&&!this._sprite.isDragging()&&this._sprite._hasDown()&&!this._sprite._hasMoved(this._makePointerEvent(`click`,e))&&this.dispatch(`click`,this._makePointerEvent(`click`,e))},rightclick:function(e){this.isEnabled(`rightclick`)&&this.dispatch(`rightclick`,this._makePointerEvent(`rightclick`,e))},middleclick:function(e){this.isEnabled(`middleclick`)&&this.dispatch(`middleclick`,this._makePointerEvent(`middleclick`,e))},dblclick:function(e){this.dispatchParents(`dblclick`,this._makePointerEvent(`dblclick`,e))},pointerover:function(e){let t=this._sprite,n=!0;if(t.getPrivate(`trustBounds`)){t._getBounds();let r=t.globalBounds();if(t.isType(`Graphics`)){let e=t.get(`strokeWidth`,1)/2;e>=1&&(r.left-=e,r.right+=e,r.top-=e,r.bottom+=e)}zt(e.point,r)||(n=!1,t._root._renderer.removeHovering(t._display))}n&&this.isEnabled(`pointerover`)&&this.dispatch(`pointerover`,this._makePointerEvent(`pointerover`,e))},pointerout:function(e){this.isEnabled(`pointerout`)&&this.dispatch(`pointerout`,this._makePointerEvent(`pointerout`,e))},pointerdown:function(e){this.dispatchParents(`pointerdown`,this._makePointerEvent(`pointerdown`,e))},pointerup:function(e){this.isEnabled(`pointerup`)&&this.dispatch(`pointerup`,this._makePointerEvent(`pointerup`,e))},globalpointerup:function(e){this.isEnabled(`globalpointerup`)&&this.dispatch(`globalpointerup`,this._makePointerEvent(`globalpointerup`,e))},globalpointermove:function(e){this.isEnabled(`globalpointermove`)&&this.dispatch(`globalpointermove`,this._makePointerEvent(`globalpointermove`,e))},wheel:function(e){this.dispatchParents(`wheel`,{type:`wheel`,target:this._sprite,originalEvent:e.event,point:e.point})}}});var z=class extends L{constructor(){super(...arguments),Object.defineProperty(this,`_adjustedLocalBounds`,{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,`_localBounds`,{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,`_parent`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_dataItem`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_templateField`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_sizeDirty`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_isDragging`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_dragEvent`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_dragPoint`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_isHidden`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_isShowing`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_isHiding`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_isDown`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_downPoint`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_downPoints`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,`_toggleDp`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_dragDp`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_tooltipDp`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_hoverDp`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_focusDp`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_tooltipMoveDp`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_tooltipPointerDp`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_virtualParent`,{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this.setPrivateRaw(`visible`,!0),super._afterNew()}markDirtyKey(e){this._markDirtyKey(e)}_markDirtyKey(e){super._markDirtyKey(e),(e==`x`||e==`y`||e==`dx`||e==`dy`)&&(this.markDirtyBounds(),this._addPercentagePositionChildren(),this.markDirtyPosition())}_markDirtyPrivateKey(e){super._markDirtyPrivateKey(e),(e==`x`||e==`y`)&&this.markDirtyPosition()}_removeTemplateField(){this._templateField&&this._templateField._removeObjectTemplate(this)}_createEvents(){return new on(this)}_processTemplateField(){let e,t=this.get(`templateField`);if(t){let n=this.dataItem;if(n){let r=n.dataContext;r&&(e=r[t],!(e instanceof R)&&e&&(e=R.new(e)))}}this._templateField!==e&&(this._removeTemplateField(),this._templateField=e,e&&e._setObjectTemplate(this),this._applyTemplates())}_setDataItem(e){let t=this._dataItem;this._dataItem=e,this._processTemplateField();let n=`dataitemchanged`;e!=t&&this.events.isEnabled(n)&&this.events.dispatch(n,{type:n,target:this,oldDataItem:t,newDataItem:e})}set dataItem(e){this._setDataItem(e)}get dataItem(){if(this._dataItem)return this._dataItem;{let e=this._parent;for(;e;)if(e._dataItem)return e._dataItem;else e=e._parent}}_addPercentageSizeChildren(){let e=this.parent;e&&(this.get(`width`)instanceof t||this.get(`height`)instanceof t?ce(e._percentageSizeChildren,this):v(e._percentageSizeChildren,this))}_addPercentagePositionChildren(){let e=this.parent;e&&(this.get(`x`)instanceof t||this.get(`y`)instanceof t?ce(e._percentagePositionChildren,this):v(e._percentagePositionChildren,this))}markDirtyPosition(){this._root._addDirtyPosition(this)}updatePivotPoint(){let e=this._localBounds;if(e){let t=this.get(`centerX`);t!=null&&(this._display.pivot.x=e.left+w(t,e.right-e.left));let n=this.get(`centerY`);n!=null&&(this._display.pivot.y=e.top+w(n,e.bottom-e.top))}}_beforeChanged(){if(super._beforeChanged(),this._handleStates(),this.isDirty(`tooltip`)){let e=this._prevSettings.tooltip;e&&e.dispose()}if((this.isDirty(`layer`)||this.isDirty(`layerMargin`))&&(this._display.setLayer(this.get(`layer`),this.get(`layerMargin`)),this.markDirtyLayer()),this.isDirty(`tooltipPosition`)){let e=this._tooltipMoveDp;e&&(e.dispose(),this._tooltipMoveDp=void 0);let t=this._tooltipPointerDp;t&&(t.dispose(),this._tooltipPointerDp=void 0),this.get(`tooltipPosition`)==`pointer`&&(this.isHover()&&(this._tooltipMoveDp=this.events.on(`globalpointermove`,e=>{this.showTooltip(e.point)})),this._tooltipPointerDp=new S([this.events.on(`pointerover`,()=>{this._tooltipMoveDp=this.events.on(`globalpointermove`,e=>{this.showTooltip(e.point)})}),this.events.on(`pointerout`,()=>{let e=this._tooltipMoveDp;e&&(e.dispose(),this._tooltipMoveDp=void 0)})]))}}_handleStates(){this.isDirty(`active`)&&(this.get(`active`)?(this.states.applyAnimate(`active`),this.set(`ariaChecked`,!0)):(this.isHidden()||this.states.applyAnimate(`default`),this.set(`ariaChecked`,!1)),this.markDirtyAccessibility()),this.isDirty(`disabled`)&&(this.get(`disabled`)?(this.states.applyAnimate(`disabled`),this.set(`ariaChecked`,!1)):(this.isHidden()||this.states.applyAnimate(`default`),this.set(`ariaChecked`,!0)),this.markDirtyAccessibility())}_changed(){super._changed();let e=this._display,n=this.events;if(this.isDirty(`draggable`)){let t=this.get(`draggable`);t?(this.set(`interactive`,!0),this._dragDp=new S([n.on(`pointerdown`,e=>{this.dragStart(e)}),n.on(`globalpointermove`,e=>{this.dragMove(e)}),n.on(`globalpointerup`,e=>{this.dragStop(e)})])):this._dragDp&&=(this._dragDp.dispose(),void 0),e.cancelTouch=!!t}if(this.isDirty(`tooltipText`)||this.isDirty(`tooltipHTML`)||this.isDirty(`showTooltipOn`)){let e=this.get(`tooltipText`),t=this.get(`tooltipHTML`),r=this.get(`showTooltipOn`,`hover`);this._tooltipDp&&=(this._tooltipDp.dispose(),void 0),(e||t)&&(r==`click`?(this._tooltipDp=new S([n.on(`click`,()=>{this.setTimeout(()=>{let e=this.getTooltip();e&&!e.isHidden()&&e.get(`tooltipTarget`)===this?this.hideTooltip():this.showTooltip()},10)}),De(document,`click`,e=>{this.hideTooltip()})]),this._disposers.push(this._tooltipDp)):r==`always`||(this._tooltipDp=new S([n.on(`pointerover`,()=>{this.showTooltip()}),n.on(`pointerout`,()=>{this.hideTooltip()})]),this._disposers.push(this._tooltipDp)))}if(this.isDirty(`toggleKey`)){let e=this.get(`toggleKey`);e&&e!=`none`?this._toggleDp=n.on(`click`,()=>{this._isDragging||this.set(e,!this.get(e))}):this._toggleDp&&=(this._toggleDp.dispose(),void 0)}if(this.isDirty(`opacity`)&&(e.alpha=Math.max(0,this.get(`opacity`,1)),this.get(`focusable`)&&this.markDirtyAccessibility()),this.isDirty(`rotation`)&&(this.markDirtyBounds(),e.angle=this.get(`rotation`,0)),this.isDirty(`scale`)&&(this.markDirtyBounds(),e.scale=this.get(`scale`,0)),(this.isDirty(`centerX`)||this.isDirty(`centerY`))&&(this.markDirtyBounds(),this.updatePivotPoint()),(this.isDirty(`visible`)||this.isPrivateDirty(`visible`)||this.isDirty(`forceHidden`))&&(!this.get(`visible`)||!this.getPrivate(`visible`)||this.get(`forceHidden`)?(e.visible=!1,this.hideTooltip()):e.visible=!0,this.markDirtyBounds(),this.get(`focusable`)&&this.markDirtyAccessibility()),this.isDirty(`width`)||this.isDirty(`height`)){this.markDirtyBounds(),this._addPercentageSizeChildren();let e=this.parent;e&&(this.isDirty(`width`)&&this.get(`width`)instanceof t||this.isDirty(`height`)&&this.get(`height`)instanceof t)&&(e.markDirty(),e._prevWidth=0),this._sizeDirty=!0}if((this.isDirty(`maxWidth`)||this.isDirty(`maxHeight`)||this.isPrivateDirty(`width`)||this.isPrivateDirty(`height`)||this.isDirty(`minWidth`)||this.isDirty(`minHeight`)||this.isPrivateDirty(`maxWidth`)||this.isPrivateDirty(`maxHeight`)||this.isPrivateDirty(`minWidth`)||this.isPrivateDirty(`minHeight`)||this.isDirty(`marginLeft`)||this.isDirty(`marginTop`)||this.isDirty(`marginRight`)||this.isDirty(`marginBottom`))&&(this.markDirtyBounds(),this._sizeDirty=!0),this._sizeDirty&&this._updateSize(),this.isDirty(`wheelable`)){let t=this.get(`wheelable`);t&&this.set(`interactive`,!0),e.wheelable=!!t}(this.isDirty(`tabindexOrder`)||this.isDirty(`focusableGroup`))&&(this.get(`focusable`)?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this)),this.isDirty(`filter`)&&(e.filter=this.get(`filter`));let r=this.get(`filter`,``);if(this.isDirty(`blur`)){let e=this.get(`blur`,0);e!=0&&(r+=` blur(`+e+`px)`)}if(this.isDirty(`saturate`)){let e=this.get(`saturate`,1);e!=1&&(r+=` saturate(`+e+`)`)}if(this.isDirty(`brightness`)){let e=this.get(`brightness`,1);e!=1&&(r+=` brightness(`+e+`)`)}if(this.isDirty(`contrast`)){let e=this.get(`contrast`,1);e!=1&&(r+=` contrast(`+e+`)`)}if(this.isDirty(`sepia`)){let e=this.get(`sepia`,0);e!=0&&(r+=` sepia(`+e+`)`)}if(this.isDirty(`hue`)){let e=this.get(`hue`,0);e!=0&&(r+=` hue-rotate(`+e+`deg)`)}if(this.isDirty(`invert`)){let e=this.get(`invert`,0);e!=0&&(r+=` invert(`+e+`)`)}if(r&&(e.filter=r),this.isDirty(`cursorOverStyle`)&&(e.cursorOverStyle=this.get(`cursorOverStyle`)),this.isDirty(`hoverOnFocus`)&&(this.get(`hoverOnFocus`)?this._focusDp=new S([n.on(`focus`,()=>{this.showTooltip()}),n.on(`blur`,()=>{this.hideTooltip()})]):this._focusDp&&=(this._focusDp.dispose(),void 0)),this.isDirty(`focusable`)&&(this.get(`focusable`)?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this),this.markDirtyAccessibility(),this._disposers.push(n.on(`blur`,()=>{this.setPrivateRaw(`touchHovering`,!1)})),this._disposers.push(n.once(`boundschanged`,()=>{this.markDirtyAccessibility()}))),this.isPrivateDirty(`focusable`)&&this.markDirtyAccessibility(),(this.isDirty(`role`)||this.isDirty(`ariaLive`)||this.isDirty(`ariaChecked`)||this.isDirty(`ariaHidden`)||this.isDirty(`ariaOrientation`)||this.isDirty(`ariaValueNow`)||this.isDirty(`ariaValueMin`)||this.isDirty(`ariaValueMax`)||this.isDirty(`ariaValueText`)||this.isDirty(`ariaLabel`)||this.isDirty(`ariaControls`))&&this.markDirtyAccessibility(),this.isDirty(`exportable`)&&(e.exportable=this.get(`exportable`)),this.isDirty(`interactive`)){let e=this.events;this.get(`interactive`)&&!e.isDisposed()?this._hoverDp=new S([e.on(`click`,e=>{Ne(e.originalEvent)&&(this.getPrivate(`touchHovering`)||this.setTimeout(()=>{this._handleOver(),(this.get(`tooltipText`)||this.get(`tooltipHTML`))&&this.showTooltip(),this.setPrivateRaw(`touchHovering`,!0),this.events.dispatch(`pointerover`,{type:`pointerover`,target:e.target,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})},10))}),e.on(`globalpointerup`,e=>{Ne(e.originalEvent)&&this.getPrivate(`touchHovering`)&&(this._handleOut(),(this.get(`tooltipText`)||this.get(`tooltipHTML`))&&this.hideTooltip(),this.setPrivateRaw(`touchHovering`,!1),this.events.dispatch(`pointerout`,{type:`pointerout`,target:e.target,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})),this._isDown&&this._handleUp(e)}),e.on(`pointerover`,()=>{this._handleOver()}),e.on(`pointerout`,()=>{this._handleOut()}),e.on(`pointerdown`,e=>{this._handleDown(e)})]):(this._display.interactive=!1,this._hoverDp&&=(this._hoverDp.dispose(),void 0))}this.isDirty(`forceInactive`)&&(this._display.inactive=this.get(`forceInactive`,null)),this.get(`showTooltipOn`)==`always`&&this._display.visible&&this.showTooltip()}dragStart(e){this._dragEvent=e,this.events.stopParentDispatch()}dragStop(e){if(this._dragEvent=void 0,this._dragPoint=void 0,this.events.stopParentDispatch(),this._isDragging){this._isDragging=!1;let t=`dragstop`;this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}_handleOver(){this.isHidden()||(this.get(`active`)&&this.states.lookup(`hoverActive`)?this.states.applyAnimate(`hoverActive`):this.get(`disabled`)&&this.states.lookup(`hoverDisabled`)?this.states.applyAnimate(`hoverDisabled`):this.states.applyAnimate(`hover`),this.get(`draggable`)&&this._isDown&&this.states.lookup(`down`)&&this.states.applyAnimate(`down`))}_handleOut(){this.isHidden()||(this.get(`active`)&&this.states.lookup(`active`)?this.states.applyAnimate(`active`):this.get(`disabled`)&&this.states.lookup(`disabled`)?this.states.applyAnimate(`disabled`):(this.states.lookup(`hover`)||this.states.lookup(`hoverActive`))&&this.states.applyAnimate(`default`),this.get(`draggable`)&&this._isDown&&this.states.lookup(`down`)&&this.states.applyAnimate(`down`))}_handleUp(e){if(!this.isHidden()){this.get(`active`)&&this.states.lookup(`active`)?this.states.applyAnimate(`active`):this.get(`disabled`)&&this.states.lookup(`disabled`)?this.states.applyAnimate(`disabled`):this.states.lookup(`down`)&&(this.isHover()?this.states.applyAnimate(`hover`):this.states.applyAnimate(`default`)),this._downPoint=void 0;let t=ke(e.originalEvent);delete this._downPoints[t],y(this._downPoints).length==0&&(this._isDown=!1)}}_hasMoved(e){let t=ke(e.originalEvent),n=this._downPoints[t];if(n){let t=Math.abs(n.x-e.point.x),r=Math.abs(n.y-e.point.y);return t>5||r>5}return!1}_hasDown(){return y(this._downPoints).length>0}_handleDown(e){let t=this.parent;if(t&&!this.get(`draggable`)&&t._handleDown(e),this.get(`interactive`)&&!this.isHidden()){this.states.lookup(`down`)&&this.states.applyAnimate(`down`),this._downPoint={x:e.point.x,y:e.point.y},this._isDown=!0;let t=ke(e.originalEvent);this._downPoints[t]={x:e.point.x,y:e.point.y}}}dragMove(e){let t=this._dragEvent;if(t){if(t.simulated&&!e.simulated)return!0;let n=0,r=this.parent,i=1;for(;r!=null;)n+=r.get(`rotation`,0),r=r.parent,r&&(i*=r.get(`scale`,1));let a=(e.point.x-t.point.x)/i,o=(e.point.y-t.point.y)/i,s=this.events;if(t.simulated&&!this._isDragging){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};let t=`dragstart`;s.isEnabled(t)&&s.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}if(this._isDragging){let t=this._dragPoint;this.set(`x`,t.x+a*N(n)+o*M(n)),this.set(`y`,t.y+o*N(n)-a*M(n));let r=`dragged`;s.isEnabled(r)&&s.dispatch(r,{type:r,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}else if(Math.hypot(a,o)>5){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};let t=`dragstart`;s.isEnabled(t)&&s.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}}_updateSize(){}_getBounds(){this._localBounds=this._display.getLocalBounds()}depth(){let e=this.parent,t=0;for(;;)if(e)++t,e=e.parent;else return t}markDirtySize(){this._sizeDirty=!0,this.markDirty()}markDirtyBounds(){let e=this._display;if(this.get(`isMeasured`)){this._root._addDirtyBounds(this),e.isMeasured=!0,e.invalidateBounds();let t=this.parent;t&&this.get(`position`)!=`absolute`&&(t.get(`width`)==null||t.get(`height`)==null||t.get(`layout`))&&t.markDirtyBounds(),this.get(`focusable`)&&this.markDirtyAccessibility()}}markDirtyAccessibility(){this._root._invalidateAccessibility(this)}markDirtyLayer(){this._display.markDirtyLayer(!0)}markDirty(){super.markDirty(),this.markDirtyLayer()}_updateBounds(){let e=this._adjustedLocalBounds,t;if(!this.get(`visible`)||!this.getPrivate(`visible`)||this.get(`forceHidden`)?(t={left:0,right:0,top:0,bottom:0},this._localBounds=t,this._adjustedLocalBounds=t):(this._getBounds(),this._fixMinBounds(this._localBounds),this.updatePivotPoint(),this._adjustedLocalBounds=this._display.getAdjustedBounds(this._localBounds),t=this._adjustedLocalBounds),!e||e.left!==t.left||e.top!==t.top||e.right!==t.right||e.bottom!==t.bottom){let e=`boundschanged`;this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this}),this.parent&&(this.parent.markDirty(),this.parent.markDirtyBounds()),this.getPrivate(`showingTooltip`)&&this.showTooltip()}}_fixMinBounds(e){let t=this.get(`minWidth`,this.getPrivate(`minWidth`)),n=this.get(`minHeight`,this.getPrivate(`minHeight`));m(t)&&e.right-e.left<t&&(e.right=e.left+t),m(n)&&e.bottom-e.top<n&&(e.bottom=e.top+n);let r=this.getPrivate(`width`),i=this.getPrivate(`height`);m(r)&&(r>0?e.right=e.left+r:e.left=e.right+r),m(i)&&(i>0?e.bottom=e.top+i:e.top=e.bottom+i)}_removeParent(e){e&&(e.children.removeValue(this),v(e._percentageSizeChildren,this),v(e._percentagePositionChildren,this))}_clearDirty(){super._clearDirty(),this._sizeDirty=!1}hover(){this.isDisposed()||(this.showTooltip(),this._handleOver())}unhover(){this.isDisposed()||(this.hideTooltip(),this._handleOut())}showTooltip(e){if(!this.isDisposed()){let t=this.getTooltip(),n=this.get(`tooltipText`),r=this.get(`tooltipHTML`);if((n||r)&&t){let i=this.get(`tooltipPosition`),a=this.getPrivate(`tooltipTarget`,this);if((i==`fixed`||!e)&&(this._display._setMatrix(),e=this.toGlobal(a._getTooltipPoint())),i==`pointer`){let t=this.getPrivate(`lastTooltipCoords`);if(t&&t.x==e.x&&t.y==e.y)return;this.setPrivate(`lastTooltipCoords`,e)}t.set(`pointTo`,e),t.set(`tooltipTarget`,a),t.get(`x`)||t.set(`x`,e.x),t.get(`y`)||t.set(`y`,e.y),n&&t.label.set(`text`,n),r&&t.label.set(`html`,r);let o=this.dataItem;if(o&&t.label._setDataItem(o),this.get(`showTooltipOn`)==`always`&&(e.x<0||e.x>this._root.width()||e.y<0||e.y>this._root.height())){this.hideTooltip();return}t.label.text.markDirtyText();let s=t.show();return this.setPrivateRaw(`showingTooltip`,!0),s}}}hideTooltip(){let e=this.getTooltip();if(e&&(this.removePrivate(`lastTooltipCoords`),e.get(`tooltipTarget`)==this.getPrivate(`tooltipTarget`,this)||this.get(`tooltip`)==e)){let t=e.get(`keepTargetHover`)&&e.get(`stateAnimationDuration`,0)==0?400:void 0,n=e.hide(t);return this.setPrivateRaw(`showingTooltip`,!1),n}}_getTooltipPoint(){let e=this._localBounds;if(e){let t=0,n=0;return this.get(`isMeasured`)?(t=e.left+w(this.get(`tooltipX`,0),e.right-e.left),n=e.top+w(this.get(`tooltipY`,0),e.bottom-e.top)):(t=w(this.get(`tooltipX`,0),this.width()),n=w(this.get(`tooltipY`,0),this.height())),{x:t,y:n}}return{x:0,y:0}}getTooltip(){let e=this.get(`tooltip`);if(e)return e;{let e=this.parent;if(e)return e.getTooltip()}}_updatePosition(){let e=this.parent,n=this.get(`dx`,0),r=this.get(`dy`,0),i=this.get(`x`),a=this.getPrivate(`x`),o=0,s=0,c=this.get(`position`);i instanceof t&&(i=e?e.innerWidth()*i.value+e.get(`paddingLeft`,0):0),m(i)?o=i+n:a==null?e&&c==`relative`&&(o=e.get(`paddingLeft`,0)+n):o=a;let l=this.get(`y`),u=this.getPrivate(`y`);l instanceof t&&(l=e?e.innerHeight()*l.value+e.get(`paddingTop`,0):0),m(l)?s=l+r:u==null?e&&c==`relative`&&(s=e.get(`paddingTop`,0)+r):s=u;let d=this._display;if(d.x!=o||d.y!=s){d.invalidateBounds(),d.x=o,d.y=s;let e=`positionchanged`;this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}this.getPrivate(`showingTooltip`)&&this.showTooltip()}x(){let e=this.get(`x`),n=this.getPrivate(`x`),r=this.parent;return r?e instanceof t?w(e,r.innerWidth())+r.get(`paddingLeft`,0):m(e)?e:n??r.get(`paddingLeft`,this._display.x):this._display.x}y(){let e=this.getPrivate(`y`);if(e!=null)return e;let n=this.get(`y`),r=this.parent;return r?n instanceof t?w(n,r.innerHeight())+r.get(`paddingTop`,0):m(n)?n:e??r.get(`paddingTop`,this._display.y):this._display.y}_dispose(){super._dispose(),this._display.dispose(),this._removeTemplateField(),this._removeParent(this.parent),this._root._removeFocusElement(this);let e=this.get(`tooltip`);e&&e.dispose(),this.markDirty()}adjustedLocalBounds(){return this._fixMinBounds(this._adjustedLocalBounds),this._adjustedLocalBounds}localBounds(){return this._localBounds}bounds(){let e=this._adjustedLocalBounds,t=this.x(),n=this.y();return{left:e.left+t,right:e.right+t,top:e.top+n,bottom:e.bottom+n}}globalBounds(){let e=this.localBounds(),t=this.toGlobal({x:e.left,y:e.top}),n=this.toGlobal({x:e.right,y:e.top}),r=this.toGlobal({x:e.right,y:e.bottom}),i=this.toGlobal({x:e.left,y:e.bottom});return{left:Math.min(t.x,n.x,r.x,i.x),top:Math.min(t.y,n.y,r.y,i.y),right:Math.max(t.x,n.x,r.x,i.x),bottom:Math.max(t.y,n.y,r.y,i.y)}}_onShow(e){}_onHide(e){}appear(t,n){return e(this,void 0,void 0,function*(){return yield this.hide(0),n?new Promise((e,r)=>{this.setTimeout(()=>{e(this.show(t))},n)}):this.show(t)})}show(t){return e(this,void 0,void 0,function*(){if(!this._isShowing){this._isHidden=!1,this._isShowing=!0,this._isHiding=!1,this.states.lookup(`default`).get(`visible`)&&this.set(`visible`,!0),this._onShow(t);let e=this.states.applyAnimate(`default`,t);yield bt(e),this._isShowing=!1}})}hide(t){return e(this,void 0,void 0,function*(){if(!this._isHiding&&!this._isHidden){this._isHiding=!0,this._isShowing=!1;let e=this.states.lookup(`hidden`);e||=this.states.create(`hidden`,{opacity:0,visible:!1}),this._isHidden=!0,this._onHide(t);let n=this.states.applyAnimate(`hidden`,t);yield bt(n),this._isHiding=!1}})}isHidden(){return this._isHidden}isShowing(){return this._isShowing}isHiding(){return this._isHiding}isHover(){return this._display.hovering()}isFocus(){return this._root.focused(this)}isDragging(){return this._isDragging}isVisible(){return!!(this.get(`visible`)&&this.getPrivate(`visible`)&&!this.get(`forceHidden`))}isVisibleDeep(){return this._parent?this._parent.isVisibleDeep()&&this.isVisible():this.isVisible()}compositeOpacity(){let e=this.get(`opacity`,1);return this._parent?this._parent.compositeOpacity()*e:e}compositeScale(){let e=this.get(`scale`,1);return this._parent?this._parent.compositeScale()*e:e}compositeRotation(){let e=this.get(`rotation`,0);return this._parent?this._parent.compositeRotation()+e:e}width(){let e=this.get(`width`),n=this.get(`maxWidth`,this.getPrivate(`maxWidth`)),r=this.get(`minWidth`,this.getPrivate(`minWidth`)),i=this.getPrivate(`width`),a=0;if(m(i))a=i;else if(e==null)this._adjustedLocalBounds&&(a=this._adjustedLocalBounds.right-this._adjustedLocalBounds.left);else if(e instanceof t){let t=this.parent;a=t?t.innerWidth()*e.value:this._root.width()*e.value}else m(e)&&(a=e);return m(r)&&(a=Math.max(r,a)),m(n)&&(a=Math.min(n,a)),a}maxWidth(){let e=this.get(`maxWidth`,this.getPrivate(`maxWidth`));if(m(e))return e;{let e=this.get(`width`);if(m(e))return e}let t=this.parent;return t?t.innerWidth():this._root.width()}maxHeight(){let e=this.get(`maxHeight`,this.getPrivate(`maxHeight`));if(m(e))return e;{let e=this.get(`height`);if(m(e))return e}let t=this.parent;return t?t.innerHeight():this._root.height()}height(){let e=this.get(`height`),n=this.get(`maxHeight`,this.getPrivate(`maxHeight`)),r=this.get(`minHeight`,this.getPrivate(`minHeight`)),i=this.getPrivate(`height`),a=0;if(m(i))a=i;else if(e==null)this._adjustedLocalBounds&&(a=this._adjustedLocalBounds.bottom-this._adjustedLocalBounds.top);else if(e instanceof t){let t=this.parent;a=t?t.innerHeight()*e.value:this._root.height()*e.value}else m(e)&&(a=e);return m(r)&&(a=Math.max(r,a)),m(n)&&(a=Math.min(n,a)),a}_findStaticTemplate(e){return this._templateField&&e(this._templateField)?this._templateField:super._findStaticTemplate(e)}_walkParents(e){(this._parent||this._virtualParent)&&this._walkParent(e)}_walkParent(e){this._parent?this._parent._walkParent(e):this._virtualParent&&this._virtualParent._walkParent(e),e(this)}set virtualParent(e){this._virtualParent=e,this._applyThemes()}get parent(){return this._parent}_setParent(e,t=!1){let n=this._parent;e!==n&&(this.markDirtyBounds(),e.markDirty(),this._parent=e,t&&(this._removeParent(n),e&&(this._addPercentageSizeChildren(),this._addPercentagePositionChildren())),this.markDirtyPosition(),this._applyThemes())}getNumberFormatter(){return this.get(`numberFormatter`,this._root.numberFormatter)}getDateFormatter(){return this.get(`dateFormatter`,this._root.dateFormatter)}getDurationFormatter(){return this.get(`durationFormatter`,this._root.durationFormatter)}toGlobal(e){return this._display.toGlobal(e)}toLocal(e){return this._display.toLocal(e)}_getDownPoint(){let e=this._getDownPointId();if(e)return this._downPoints[e]}_getDownPointId(){if(this._downPoints)return ye(this._downPoints,(e,t)=>e>t?1:e<t?-1:0)[0]}toFront(){let e=this.parent;e&&e.children.moveValue(this,e.children.length-1)}toBack(){let e=this.parent;e&&e.children.moveValue(this,0)}};Object.defineProperty(z,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`Sprite`}),Object.defineProperty(z,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:L.classNames.concat([z.className])});var B=class extends L{constructor(){super(...arguments),Object.defineProperty(this,`_display`,{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,`_backgroundDisplay`,{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,`_clear`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_pattern`,{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNewApplyThemes()}get pattern(){return this._pattern}_draw(){}_beforeChanged(){super._beforeChanged(),(this.isDirty(`repetition`)||this.isDirty(`width`)||this.isDirty(`height`)||this.isDirty(`rotation`)||this.isDirty(`strokeWidth`)||this.isDirty(`strokeDasharray`)||this.isDirty(`strokeDashoffset`)||this.isDirty(`colorOpacity`)||this.isDirty(`fillOpacity`))&&(this._clear=!0),this._checkDirtyFill()}_checkDirtyFill(){(this.isDirty(`color`)||this.isDirty(`fill`))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){let e=this.get(`repetition`,``),t=this.get(`width`,100),n=this.get(`height`,100),r=this.get(`fill`),i=this.get(`fillOpacity`,1),a=this._backgroundDisplay,o=this._display;o.clear(),a.clear(),r&&i>0&&(a.beginFill(r,i),a.drawRect(0,0,t,n),a.endFill()),o.angle=this.get(`rotation`,0),this._draw(),this._pattern=this._root._renderer.createPattern(o,a,e,t,n)}this._clear=!1}};Object.defineProperty(B,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`Pattern`}),Object.defineProperty(B,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:L.classNames.concat([B.className])});var V=class extends B{constructor(){super(...arguments),Object.defineProperty(this,`_image`,{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){super._beforeChanged(),this._clear=!0,this.isDirty(`src`)&&this._load();let e=this.get(`canvas`);e&&(this.set(`width`,e.width),this.set(`height`,e.height))}_draw(){super._draw();let e=this.get(`colorOpacity`);e!==void 0&&(this._display.alpha=Math.max(0,e));let t=this._image;if(t){let e=this.get(`width`,100),n=this.get(`height`,100),r=this.get(`fit`,`image`),i=0,a=0;r==`pattern`?(i=e,a=n,this.markDirty()):(i=t.width,a=t.height,r==`image`&&(this.set(`width`,i),this.set(`height`,a)));let o=this.get(`centered`,!0),s=0,c=0;o&&(s=e/2-i/2,c=n/2-a/2),this._display.image(t,i,a,s,c)}let n=this.get(`canvas`);n&&this._display.image(n,n.width,n.height,0,0)}_load(){let e=this.get(`src`);if(e){let t=new Image;t.src=e,t.decode().then(()=>{this._image=t,this._draw(),this.events.isEnabled(`loaded`)&&this.events.dispatch(`loaded`,{type:`loaded`,target:this})}).catch(e=>{})}}};Object.defineProperty(V,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`PicturePattern`}),Object.defineProperty(V,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:B.classNames.concat([V.className])});var sn;(function(e){e.ADD=`lighter`,e.COLOR=`color`,e.COLOR_BURN=`color-burn`,e.COLOR_DODGE=`color-dodge`,e.DARKEN=`darken`,e.DIFFERENCE=`difference`,e.DST_OVER=`destination-over`,e.EXCLUSION=`exclusion`,e.HARD_LIGHT=`hard-light`,e.HUE=`hue`,e.LIGHTEN=`lighten`,e.LUMINOSITY=`luminosity`,e.MULTIPLY=`multiply`,e.NORMAL=`source-over`,e.OVERLAY=`overlay`,e.SATURATION=`saturation`,e.SCREEN=`screen`,e.SOFT_LIGHT=`soft-light`,e.SRC_ATOP=`source-atop`,e.XOR=`xor`})(sn||={});const cn=[`fill`,`fillOpacity`,`stroke`,`strokeWidth`,`strokeOpacity`,`fillPattern`,`strokePattern`,`fillGradient`,`strokeGradient`,`strokeDasharray`,`strokeDashoffset`,`shadowBlur`,`shadowColor`,`shadowOpacity`,`shadowOffsetX`,`shadowOffsetY`,`blur`,`sepia`,`invert`,`brightness`,`hue`,`contrast`,`saturate`];var H=class extends z{constructor(){super(...arguments),Object.defineProperty(this,`_display`,{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,`_clear`,{enumerable:!0,configurable:!0,writable:!0,value:!1})}_beforeChanged(){if(super._beforeChanged(),(this.isDirty(`draw`)||this.isDirty(`svgPath`))&&this.markDirtyBounds(),(this.isDirty(`fill`)||this.isDirty(`stroke`)||this.isDirty(`visible`)||this.isDirty(`forceHidden`)||this.isDirty(`scale`)||this.isDirty(`fillGradient`)||this.isDirty(`strokeGradient`)||this.isDirty(`fillPattern`)||this.isDirty(`strokePattern`)||this.isDirty(`fillOpacity`)||this.isDirty(`strokeOpacity`)||this.isDirty(`strokeWidth`)||this.isDirty(`draw`)||this.isDirty(`blendMode`)||this.isDirty(`strokeDasharray`)||this.isDirty(`strokeDashoffset`)||this.isDirty(`svgPath`)||this.isDirty(`lineJoin`)||this.isDirty(`lineCap`)||this.isDirty(`shadowColor`)||this.isDirty(`shadowBlur`)||this.isDirty(`shadowOffsetX`)||this.isDirty(`shadowOffsetY`))&&(this._clear=!0),this._display.crisp=this.get(`crisp`,!1),this.isDirty(`fillGradient`)){let e=this.get(`fillGradient`);if(e){this._display.isMeasured=!0;let t=e.get(`target`);t&&(this._disposers.push(t.events.on(`boundschanged`,()=>{this._markDirtyKey(`fill`)})),this._disposers.push(t.events.on(`positionchanged`,()=>{this._markDirtyKey(`fill`)})))}}if(this.isDirty(`strokeGradient`)){let e=this.get(`strokeGradient`);if(e){this._display.isMeasured=!0;let t=e.get(`target`);t&&(this._disposers.push(t.events.on(`boundschanged`,()=>{this._markDirtyKey(`stroke`)})),this._disposers.push(t.events.on(`positionchanged`,()=>{this._markDirtyKey(`stroke`)})))}}}_changed(){if(super._changed(),this._clear){this.markDirtyBounds(),this.markDirtyLayer(),this._display.clear();let e=this.get(`strokeDasharray`);m(e)&&(e=e<.5?[0]:[e]),this._display.setLineDash(e);let t=this.get(`strokeDashoffset`);t&&this._display.setLineDashOffset(t);let n=this.get(`blendMode`,sn.NORMAL);this._display.blendMode=n;let r=this.get(`draw`);r&&typeof r==`function`&&r(this._display,this);let i=this.get(`svgPath`);i!=null&&this._display.svgPath(i)}}_afterChanged(){if(super._afterChanged(),this._clear){let e=this.get(`fill`),t=this.get(`fillGradient`),n=this.get(`fillPattern`),r=this.get(`fillOpacity`),i=this.get(`stroke`),a=this.get(`strokeGradient`),o=this.get(`strokePattern`),s=this.get(`shadowColor`),c=this.get(`shadowBlur`),l=this.get(`shadowOffsetX`),u=this.get(`shadowOffsetY`),d=this.get(`shadowOpacity`);if(s&&(c||l||u)&&this._display.shadow(s,c,l,u,d),e&&!t&&(this._display.beginFill(e,r),this._display.endFill()),t){if(e){let n=t.get(`stops`,[]);n.length&&g(n,t=>{(!t.color||t.colorInherited)&&e&&(t.color=e,t.colorInherited=!0),(t.opacity==null||t.opacityInherited)&&(t.opacity=r,t.opacityInherited=!0)})}let n=t.getFill(this);n&&(this._display.beginFill(n,r),this._display.endFill())}if(n){let e=n.pattern;e&&(this._display.beginFill(e,r),this._display.endFill(),n instanceof V&&n.events.once(`loaded`,()=>{this._clear=!0,this.markDirty()}))}if(i||a||o){let e=this.get(`strokeOpacity`),t=this.get(`strokeWidth`,1);this.get(`nonScalingStroke`)&&(t/=this.get(`scale`,1)),this.get(`crisp`)&&(t/=this._root._renderer.resolution);let n=this.get(`lineJoin`),r=this.get(`lineCap`);if(i&&!a&&(this._display.lineStyle(t,i,e,n,r),this._display.endStroke()),a){let o=a.get(`stops`,[]);o.length&&g(o,t=>{(!t.color||t.colorInherited)&&i&&(t.color=i,t.colorInherited=!0),(t.opacity==null||t.opacityInherited)&&(t.opacity=e,t.opacityInherited=!0)});let s=a.getFill(this);s&&(this._display.lineStyle(t,s,e,n,r),this._display.endStroke())}if(o){let i=o.pattern;i&&(this._display.lineStyle(t,i,e,n,r),this._display.endStroke(),o instanceof V&&o.events.once(`loaded`,()=>{this._clear=!0,this.markDirty()}))}}this.getPrivate(`showingTooltip`)&&this.showTooltip()}this._clear=!1}};Object.defineProperty(H,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`Graphics`}),Object.defineProperty(H,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:z.classNames.concat([H.className])});var U=class extends H{_afterNew(){super._afterNew(),this._display.isMeasured=!0,this.setPrivateRaw(`trustBounds`,!0)}_beforeChanged(){super._beforeChanged(),(this.isDirty(`width`)||this.isDirty(`height`)||this.isPrivateDirty(`width`)||this.isPrivateDirty(`height`))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&!this.get(`draw`)&&this._draw()}_draw(){let e=this.width(),t=this.height(),n=0,r=0,i=e/Math.abs(e),a=t/Math.abs(t);if(this.get(`containStroke`,!1)){let o=this.get(`strokeWidth`,0);e-=o*i,t-=o*a,n+=o/2*i,r+=o/2*a}this._display.drawRect(n,r,e,t)}_updateSize(){this.markDirty(),this._clear=!0}};Object.defineProperty(U,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`Rectangle`}),Object.defineProperty(U,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:H.classNames.concat([U.className])});function W(e,t){e.get(`reverseChildren`,!1)?e.children.eachReverse(t):e.children.each(t)}var G=class extends L{};Object.defineProperty(G,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`Layout`}),Object.defineProperty(G,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:L.classNames.concat([G.className])});var K=class extends G{updateContainer(e){let n=e.get(`paddingLeft`,0),r=e.innerWidth(),i=0;W(e,e=>{if(e.isVisible()&&e.get(`position`)==`relative`){let n=e.get(`width`);if(n instanceof t){i+=n.value;let t=r*n.value,a=e.get(`minWidth`,e.getPrivate(`minWidth`,-1/0));a>t&&(r-=a,i-=n.value);let o=e.get(`maxWidth`,e.getPrivate(`maxWidth`,1/0));t>o&&(r-=o,i-=n.value)}else m(n)||(n=e.width()),r-=n+e.get(`marginLeft`,0)+e.get(`marginRight`,0)}}),(r<=0||r==1/0)&&(r=.1),W(e,e=>{if(e.isVisible()&&e.get(`position`)==`relative`){let n=e.get(`width`);if(n instanceof t){let t=r*n.value/i-e.get(`marginLeft`,0)-e.get(`marginRight`,0),a=e.get(`minWidth`,e.getPrivate(`minWidth`,-1/0)),o=e.get(`maxWidth`,e.getPrivate(`maxWidth`,1/0));t=Math.min(Math.max(a,t),o),e.setPrivate(`width`,t)}else e._prevSettings.width instanceof t&&e.setPrivate(`width`,void 0)}});let a=n;W(e,e=>{if(e.get(`position`)==`relative`)if(e.isVisible()){let t=e.adjustedLocalBounds(),n=e.get(`marginLeft`,0),r=e.get(`marginRight`,0),i=e.get(`maxWidth`),o=t.left,s=t.right;i&&s-o>i&&(s=o+i);let c=a+n-o;e.setPrivate(`x`,c),a=c+s+r}else e.setPrivate(`x`,void 0)})}};Object.defineProperty(K,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`HorizontalLayout`}),Object.defineProperty(K,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:G.classNames.concat([K.className])});var q=class extends G{updateContainer(e){let n=e.get(`paddingTop`,0),r=e.innerHeight(),i=0;W(e,e=>{if(e.isVisible()&&e.get(`position`)==`relative`){let n=e.get(`height`);if(n instanceof t){i+=n.value;let t=r*n.value,a=e.get(`minHeight`,e.getPrivate(`minHeight`,-1/0));a>t&&(r-=a,i-=n.value);let o=e.get(`maxHeight`,e.getPrivate(`maxHeight`,1/0));t>o&&(r-=o,i-=n.value)}else m(n)||(n=e.height()),r-=n+e.get(`marginTop`,0)+e.get(`marginBottom`,0)}}),(r<=0||r==1/0)&&(r=.1),W(e,e=>{if(e.isVisible()&&e.get(`position`)==`relative`){let n=e.get(`height`);if(n instanceof t){let t=r*n.value/i-e.get(`marginTop`,0)-e.get(`marginBottom`,0),a=e.get(`minHeight`,e.getPrivate(`minHeight`,-1/0)),o=e.get(`maxHeight`,e.getPrivate(`maxHeight`,1/0));t=Math.min(Math.max(a,t),o),e.setPrivate(`height`,t)}else e._prevSettings.height instanceof t&&e.setPrivate(`height`,void 0)}});let a=n;W(e,e=>{if(e.get(`position`)==`relative`)if(e.isVisible()){let t=e.adjustedLocalBounds(),n=e.get(`marginTop`,0),r=t.top,i=t.bottom,o=e.get(`maxHeight`);o&&i-r>o&&(i=r+o);let s=e.get(`marginBottom`,0),c=a+n-r;e.setPrivate(`y`,c),a=c+i+s}else e.setPrivate(`y`,void 0)})}};Object.defineProperty(q,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`VerticalLayout`}),Object.defineProperty(q,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:G.classNames.concat([q.className])});var J=class extends G{_afterNew(){this._setRawDefault(`maxColumns`,Number.MAX_VALUE),super._afterNew()}updateContainer(e){let t=e.get(`paddingLeft`,0),n=e.get(`paddingRight`,0),r=e.get(`paddingTop`,0),i=e.maxWidth()-t-n,a=i,o=1;W(e,e=>{if(e.get(`visible`)&&e.getPrivate(`visible`)&&!e.get(`forceHidden`)&&e.get(`position`)!=`absolute`){let t=e.width();t<a&&(a=t),t>o&&(o=t)}}),a=Pt(a,1,i),o=Pt(o,1,i);let s=1;s=this.get(`fixedWidthGrid`)?i/o:i/a,s=Math.max(1,Math.floor(s)),s=Math.min(this.get(`maxColumns`,Number.MAX_VALUE),s);let c=this.getColumnWidths(e,s,o,i),l=r,u=0,d=0;s=c.length;let f=t;W(e,e=>{if(e.get(`position`)==`relative`&&e.isVisible()){let n=e.get(`marginTop`,0),r=e.get(`marginBottom`,0),i=e.adjustedLocalBounds(),a=e.get(`marginLeft`,0),o=e.get(`marginRight`,0),p=f+a-i.left,m=l+n-i.top;e.setPrivate(`x`,p),e.setPrivate(`y`,m),f+=c[u]+o,d=Math.max(d,e.height()+n+r),u++,u>=s&&(u=0,f=t,l+=d,d=0)}})}getColumnWidths(e,t,n,r){let i=0,a=[],o=0;return W(e,r=>{let i=r.adjustedLocalBounds();r.get(`position`)!=`absolute`&&r.isVisible()&&(this.get(`fixedWidthGrid`)?a[o]=n:a[o]=Math.max(a[o]|0,i.right-i.left+r.get(`marginLeft`,0)+r.get(`marginRight`,0)),o<e.children.length-1&&(o++,o==t&&(o=0)))}),g(a,e=>{i+=e}),i>r?t>2?(--t,this.getColumnWidths(e,t,n,r)):[r]:a}};Object.defineProperty(J,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`GridLayout`}),Object.defineProperty(J,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:G.classNames.concat([J.className])});var ln=class{static escape(e){return e.replace(/\[\[/g,this.prefix+`1`).replace(/([^\/\]]{1})\]\]/g,`$1`+this.prefix+`2`).replace(/\]\]/g,this.prefix+`2`).replace(/\{\{/g,this.prefix+`3`).replace(/\}\}/g,this.prefix+`4`).replace(/\'\'/g,this.prefix+`5`)}static unescape(e){return e.replace(RegExp(this.prefix+`1`,`g`),`[[`).replace(RegExp(this.prefix+`2`,`g`),`]]`).replace(RegExp(this.prefix+`3`,`g`),`{{`).replace(RegExp(this.prefix+`4`,`g`),`}}`).replace(RegExp(this.prefix+`5`,`g`),`''`)}static cleanUp(e){return e.replace(/\[\[/g,`[`).replace(/\]\]/g,`]`).replace(/\{\{/g,`{`).replace(/\}\}/g,`}`).replace(/\'\'/g,`'`)}static chunk(e,t=!1,n=!1){let r=[];e=this.escape(e);let i=t?e.split(`'`):[e];for(let e=0;e<i.length;e++){let t=i[e];if(t!==``)if(e%2==0){t=t.replace(/\]\[/g,`]`+te+`[`),t=t.replace(/\[\]/g,`[ ]`);let e=t.split(/[\[\]]+/);for(let t=0;t<e.length;t++){let i=this.cleanUp(this.unescape(e[t]));i!==`__§§§__`&&i!==``&&(t%2==0?r.push({type:`value`,text:i}):r.push({type:n?`value`:`format`,text:`[`+i+`]`}))}}else{let e=t.split(/[\[\]]+/);for(let t=0;t<e.length;t++){let n=this.cleanUp(this.unescape(e[t]));n!==``&&(t%2==0?r.push({type:`text`,text:n}):this.isImage(n)?r.push({type:`image`,text:`[`+n+`]`}):r.push({type:`format`,text:`[`+n+`]`}))}}}return r}static isImage(e){return!!e.match(/img[ ]?:/)}static getTextStyle(e){let t={};if(e==``||e==`[ ]`)return{};let n=e.match(/('[^']*')|("[^"]*")/gi);if(n)for(let t=0;t<n.length;t++)e=e.replace(n[t],n[t].replace(/['"]*/g,``).replace(/[ ]+/g,`+`));let r=e.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w\-]+)|(\/)/gi);if(!r)return{};for(let e=0;e<r.length;e++)if(r[e].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i))t.fontWeight=r[e];else if(r[e].match(/^(underline|line-through)$/i))t.textDecoration=r[e];else if(r[e]!=`/`)if(!r[e].match(/:/))t.fill=D.fromString(r[e]);else{let n=r[e].replace(`+`,` `).split(/:[ ]*/);t[n[0]]=n[1]}return t}};Object.defineProperty(ln,`prefix`,{enumerable:!0,configurable:!0,writable:!0,value:`__amcharts__`});function Y(e,t){if(t!=null){t=``+t,t=ln.escape(t);let n=t.match(/\{([^}]+)\}/g),r;if(n)for(r=0;r<n.length;r++){let i=n[r].replace(/\{([^}]+)\}/,`$1`),a=un(e,i,``);a??=``,t=t.split(n[r]).join(a)}t=ln.unescape(t)}else t=``;return t}function un(e,t,n){let r,i=e.dataItem,a=[],o=/(format[a-zA-Z]*)\((.*)\)|([^.]+)/g,s;for(;s=o.exec(t),s!==null;)if(s[3]){a.push({prop:s[3]});let t=e.getDateFormatter().get(`dateFields`,[]),n=e.getNumberFormatter().get(`numericFields`,[]),r=e.getDurationFormatter().get(`durationFields`,[]);t.indexOf(s[3])===-1?n.indexOf(s[3])===-1?r.indexOf(s[3])!==-1&&a.push({method:`formatDuration`,params:[]}):a.push({method:`formatNumber`,params:[]}):a.push({method:`formatDate`,params:[]})}else{let e=[];if(T(s[2])!=``){let t=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g,n;for(;n=t.exec(s[2]),n!==null;)e.push(n[1]||n[2]||n[3])}a.push({method:s[1],params:e})}if(i){r=X(e,a,i._settings),(r==null||ee(r))&&(r=X(e,a,i));let o=i.dataContext;r==null&&o&&(r=X(e,a,o),r??=X(e,[{prop:t}],o),r==null&&o.dataContext&&(r=X(e,a,o.dataContext))),r==null&&i.component&&i.component.dataItem!==i&&(r=un(i.component,t,n))}return r??=X(e,a,e),r==null&&e.parent&&(r=un(e.parent,t,n)),r}function dn(e,t){let n=e.getPrivate(`customData`);if(ee(n))return n[t]}function X(e,t,n,r){let i=n,a=!1;for(let s=0,u=t.length;s<u;s++){let u=t[s];if(u.prop){if(i instanceof z){let e=i.get(u.prop);e??=i.getPrivate(u.prop),e??=dn(i,u.prop),e??=i[u.prop],i=e}else if(i.get){let e=i.get(u.prop);e??=i[u.prop],i=e}else i=i[u.prop];if(i==null)return}else switch(u.method){case`formatNumber`:let t=c(i);t!=null&&(i=e.getNumberFormatter().format(t,r||u.params[0]||void 0),a=!0);break;case`formatDate`:let s=l(i);if(!f(s)||o(s.getTime()))return;s!=null&&(i=e.getDateFormatter().format(s,r||u.params[0]||void 0),a=!0);break;case`formatDuration`:let d=c(i);d!=null&&(i=e.getDurationFormatter().format(d,r||u.params[0]||void 0,u.params[1]||void 0),a=!0);break;case`urlEncode`:case`encodeURIComponent`:i=encodeURIComponent(i);break;default:i[u.method]&&i[u.method].apply(n,u.params);break}}if(!a){let t=[{method:``,params:r}];if(r==null)m(i)?(t[0].method=`formatNumber`,t[0].params=``):f(i)&&(t[0].method=`formatDate`,t[0].params=``);else{let e=Je(r);e===`number`?t[0].method=`formatNumber`:e===`date`?t[0].method=`formatDate`:e===`duration`&&(t[0].method=`formatDuration`)}t[0].method&&(i=X(e,t,i))}return i}var Z=class e extends z{constructor(){super(...arguments),Object.defineProperty(this,`_display`,{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,`_childrenDisplay`,{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,`children`,{enumerable:!0,configurable:!0,writable:!0,value:new Ot(this)}),Object.defineProperty(this,`_percentageSizeChildren`,{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,`_percentagePositionChildren`,{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,`_prevWidth`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`_prevHeight`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`_contentWidth`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`_contentHeight`,{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,`_contentMask`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_vsbd0`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_vsbd1`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_hsbd0`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_hsbd1`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_childrenPrep`,{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,`_childrenUpdt`,{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){super._afterNew(),this._display.addChild(this._childrenDisplay)}_afterChanged(){super._afterChanged(),this._childrenPrep=!1,this._childrenUpdt=!1}_dispose(){_(this.allChildren(),e=>{e.dispose()}),this.getPrivate(`htmlElement`)&&this._root._removeHTMLContent(this),super._dispose()}_beforeChanged(){this._childrenPrep||this._prepareChildren(),this._childrenUpdt||this._updateChildren(),super._beforeChanged()}_changed(){if(super._changed(),this.isDirty(`interactiveChildren`)&&(this._display.interactiveChildren=this.get(`interactiveChildren`,!1)),this.isDirty(`layout`)&&(this._prevWidth=0,this._prevHeight=0,this.markDirtyBounds(),this._prevSettings.layout&&this.children.each(e=>{e.removePrivate(`x`),e.removePrivate(`y`)})),(this.isDirty(`paddingTop`)||this.isDirty(`paddingBottom`)||this.isDirty(`paddingLeft`)||this.isDirty(`paddingRight`))&&this.children.each(e=>{e.markDirtyPosition()}),this.isDirty(`maskContent`)){let e=this._childrenDisplay,t=this._contentMask;this.get(`maskContent`)?t||(t=U.new(this._root,{x:-.5,y:-.5,width:this.width()+1,height:this.height()+1}),this._contentMask=t,e.addChildAt(t._display,0),e.mask=t._display):t&&(e.removeChild(t._display),e.mask=null,t.dispose(),this._contentMask=void 0)}}_updateSize(){super._updateSize(),g(this._percentageSizeChildren,e=>{e._updateSize()}),g(this._percentagePositionChildren,e=>{e.markDirtyPosition(),e._updateSize()}),this.updateBackground()}updateBackground(){let e=this.get(`background`),t=this._localBounds;if(t&&!this.isHidden()){let n=t.left,r=t.top,i=t.right-n,a=t.bottom-r,o=this.get(`maxWidth`),s=this.get(`maxHeight`);s&&a>s&&(a=s),o&&i>o&&(i=o);let c=this.width(),l=this.height();e&&(e.setAll({width:i,height:a,x:n,y:r}),this._display.interactive&&(e._display.interactive=!0));let u=this._contentMask;u&&u.setAll({width:c+1,height:l+1});let d=this.get(`verticalScrollbar`);if(d){d.set(`height`,l),d.set(`x`,c-d.width()-d.get(`marginRight`,0));let e=d.get(`start`,0),t=d.get(`end`,1);e>1-t?d.set(`start`,Math.max(0,t-l/this._contentHeight)):d.set(`end`,Math.min(1,e+l/this._contentHeight));let n=d.get(`background`);n&&n.setAll({width:d.width(),height:l});let r=!0;this._contentHeight<=l&&(r=!1),d.setPrivate(`visible`,r)}}}_applyThemes(e=!1){return super._applyThemes(e)?(this.eachChildren(t=>{t._applyThemes(e)}),!0):!1}_applyState(e){super._applyState(e),this.get(`setStateOnChildren`)&&this.eachChildren(t=>{t.states.apply(e)})}_applyStateAnimated(e,t){super._applyStateAnimated(e,t),this.get(`setStateOnChildren`)&&this.eachChildren(n=>{n.states.applyAnimate(e,t)})}innerWidth(){return this.width()-this.get(`paddingRight`,0)-this.get(`paddingLeft`,0)}innerHeight(){return this.height()-this.get(`paddingTop`,0)-this.get(`paddingBottom`,0)}_getBounds(){if(this.get(`html`)){let e=this._localBounds;e&&(this._contentWidth=e.right-e.left,this._contentHeight=e.bottom-e.top)}else{let e=this.get(`width`),t=this.get(`height`),n=this.getPrivate(`width`),r=this.getPrivate(`height`),i={left:0,top:0,right:this.width(),bottom:this.height()},a=this.get(`layout`),o=!1,s=!1;if((a instanceof K||a instanceof J)&&(o=!0),a instanceof q&&(s=!0),!((e!=null||n!=null)&&(t!=null||r!=null)&&!this.get(`verticalScrollbar`))){let e=Number.MAX_VALUE,t=e,n=-e,r=e,a=-e,c=this.get(`paddingLeft`,0),l=this.get(`paddingTop`,0),u=this.get(`paddingRight`,0),d=this.get(`paddingBottom`,0);this.children.each(e=>{if(e.get(`position`)!=`absolute`&&e.get(`isMeasured`)){let i=e.adjustedLocalBounds(),c=e.x(),l=e.y(),u=c+i.left,d=c+i.right,f=l+i.top,p=l+i.bottom;o&&(u-=e.get(`marginLeft`,0),d+=e.get(`marginRight`,0)),s&&(f-=e.get(`marginTop`,0),p+=e.get(`marginBottom`,0)),u<t&&(t=u),d>n&&(n=d),f<r&&(r=f),p>a&&(a=p)}}),t==e&&(t=0),n==-e&&(n=0),r==e&&(r=0),a==-e&&(a=0),i.left=t-c,i.top=r-l,i.right=n+u,i.bottom=a+d;let f=this.get(`minWidth`);m(f)&&f>0&&i.right-i.left<f&&(i.right>=f?i.left=i.right-f:i.right=i.left+f);let p=this.get(`minHeight`);m(p)&&p>0&&i.bottom-i.top<p&&(i.bottom>=p?i.top=i.bottom-p:i.bottom=i.top+p)}this._contentWidth=i.right-i.left,this._contentHeight=i.bottom-i.top,m(e)&&(i.left=0,i.right=e),m(n)&&(i.left=0,i.right=n),m(t)&&(i.top=0,i.bottom=t),m(r)&&(i.top=0,i.bottom=r),this._localBounds=i}}_updateBounds(){let e=this.get(`layout`);e&&e.updateContainer(this),super._updateBounds(),this.updateBackground()}markDirty(){super.markDirty(),this._root._addDirtyParent(this)}_prepareChildren(){this._childrenPrep=!0;let e=this.innerWidth(),n=this.innerHeight();if(e!=this._prevWidth||n!=this._prevHeight){let r=this.get(`layout`),i=!1,a=!1;r&&((r instanceof K||r instanceof J)&&(i=!0),r instanceof q&&(a=!0)),g(this._percentageSizeChildren,r=>{if(!i){let n=r.get(`width`);n instanceof t&&r.setPrivate(`width`,n.value*e)}if(!a){let e=r.get(`height`);e instanceof t&&r.setPrivate(`height`,e.value*n)}}),g(this._percentagePositionChildren,e=>{e.markDirtyPosition(),e.markDirtyBounds()}),this._prevWidth=e,this._prevHeight=n,this._sizeDirty=!0,this.updateBackground()}}_updateHTMLContent(){let e=this.get(`html`,``);e&&e!==``?this._root._setHTMLContent(this,Y(this,e)):this._root._removeHTMLContent(this),this._root._positionHTMLElement(this)}scrollToChild(e){let t=this.get(`verticalScrollbar`);if(t){let n=e.y(),r=this.innerHeight(),i=e.height(),a=this._contentHeight,o=1-(r-i/2)/a;if(n+i*.7+this._childrenDisplay.y>r||n-i*.3+this._childrenDisplay.y<0){let e=Math.max(0,Math.min(o,(n-i/2)/a));t.animate({key:`start`,to:e,duration:t.get(`animationDuration`,0),easing:t.get(`animationEasing`)})}}}_updateChildren(){if(this._childrenUpdt=!0,this.isDirty(`html`)&&this._updateHTMLContent(),this.isDirty(`verticalScrollbar`)){let e=this.get(`verticalScrollbar`);if(e){e._setParent(this),e.startGrip.setPrivate(`visible`,!1),e.endGrip.setPrivate(`visible`,!1),this.set(`maskContent`,!0),this.set(`paddingRight`,e.width()+e.get(`marginRight`,0)+e.get(`marginLeft`,0));let t=this.get(`background`);t||=this.set(`background`,U.new(this._root,{themeTags:[`background`],fillOpacity:0,fill:this._root.interfaceColors.get(`alternativeBackground`)})),this._vsbd0=this.events.on(`wheel`,t=>{let n=t.originalEvent;if(Re(n,this))n.preventDefault();else return;let r=n.deltaY/5e3,i=e.get(`start`,0),a=e.get(`end`,1);i+r<=0&&(r=-i),a+r>=1&&(r=1-a),i+r>=0&&a+r<=1&&(e.set(`start`,i+r),e.set(`end`,a+r))}),this._disposers.push(this._vsbd0),this._vsbd1=e.events.on(`rangechanged`,()=>{let t=this._contentHeight,n=this._childrenDisplay,r=this._contentMask;n.y=-e.get(`start`,0)*t,n.markDirtyLayer(),r&&(r._display.y=-n.y,n.mask=r._display)}),this._disposers.push(this._vsbd1),this._display.addChild(e._display)}else{let e=this._prevSettings.verticalScrollbar;if(e){this._display.removeChild(e._display),this._vsbd0&&this._vsbd0.dispose(),this._vsbd1&&this._vsbd1.dispose();let t=this._childrenDisplay;t.y=0,this.setPrivate(`height`,void 0),this.set(`maskContent`,!1),this.set(`paddingRight`,void 0)}}}if(this.isDirty(`background`)){let e=this._prevSettings.background;e&&this._display.removeChild(e._display);let t=this.get(`background`);t instanceof z&&(t.set(`isMeasured`,!1),t._setParent(this),this._display.addChildAt(t._display,0))}if(this.isDirty(`mask`)){let e=this.get(`mask`),t=this._prevSettings.mask;if(t&&(this._display.removeChild(t._display),t!=e&&t.dispose()),e){let t=e.parent;t&&t.children.removeValue(e),e._setParent(this),this._display.addChildAt(e._display,0),this._childrenDisplay.mask=e._display}}}_processTemplateField(){super._processTemplateField(),this.children.each(e=>{e._processTemplateField()})}walkChildren(t){this.children.each(n=>{n instanceof e&&n.walkChildren(t),t(n)})}eachChildren(e){let t=this.get(`background`);t&&e(t);let n=this.get(`verticalScrollbar`);n&&e(n);let r=this.get(`mask`);r&&e(r),this.children.values.forEach(t=>{e(t)})}allChildren(){let e=[];return this.eachChildren(t=>{e.push(t)}),e}_setDataItem(e){let t=e!==this._dataItem;super._setDataItem(e);let n=this.get(`html`,``);n&&n!==``&&t&&this._root._setHTMLContent(this,Y(this,n))}contentWidth(){return this._contentWidth}contentHeight(){return this._contentHeight}};Object.defineProperty(Z,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`Container`}),Object.defineProperty(Z,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:z.classNames.concat([Z.className])});var Q=class extends z{constructor(){super(...arguments),Object.defineProperty(this,`textStyle`,{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeTextStyle()}),Object.defineProperty(this,`_display`,{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeText(``,this.textStyle)}),Object.defineProperty(this,`_textStyles`,{enumerable:!0,configurable:!0,writable:!0,value:[`textAlign`,`fontFamily`,`fontSize`,`fontStyle`,`fontWeight`,`fontStyle`,`fontVariant`,`textDecoration`,`shadowColor`,`shadowBlur`,`shadowOffsetX`,`shadowOffsetY`,`shadowOpacity`,`lineHeight`,`baselineRatio`,`direction`,`textBaseline`,`oversizedBehavior`,`breakWords`,`ellipsis`,`minScale`,`maxChars`]}),Object.defineProperty(this,`_originalScale`,{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_updateBounds(){if(!this.get(`text`))this._adjustedLocalBounds={left:0,right:0,top:0,bottom:0};else{super._updateBounds();let e=this.get(`fillGradient`);e&&(this._display.style.fill=e.getFill(this))}}_changed(){super._changed(),this._display.clear();let e=this.textStyle;if(this.isDirty(`opacity`)){let e=this.get(`opacity`,1);this._display.alpha=e}if((this.isDirty(`text`)||this.isDirty(`populateText`))&&(this._display.text=this._getText(),this.markDirtyBounds(),this.get(`role`)==`tooltip`&&this._root.updateTooltip(this)),this.isPrivateDirty(`tooltipElement`)&&this.getPrivate(`tooltipElement`)&&this._disposers.push(new x(()=>{this._root._removeTooltipElement(this)})),this.isDirty(`width`)&&(e.wordWrapWidth=this.width(),this.markDirtyBounds()),this.isDirty(`oversizedBehavior`)&&(e.oversizedBehavior=this.get(`oversizedBehavior`,`none`),this._display.invalidateVisibility(),this.markDirtyBounds()),this.isDirty(`breakWords`)&&(e.breakWords=this.get(`breakWords`,!1),this.markDirtyBounds()),this.isDirty(`ellipsis`)&&(e.ellipsis=this.get(`ellipsis`),this.markDirtyBounds()),this.isDirty(`ignoreFormatting`)&&(e.ignoreFormatting=this.get(`ignoreFormatting`,!1),this.markDirtyBounds()),this.isDirty(`minScale`)&&(e.minScale=this.get(`minScale`,0),this.markDirtyBounds()),this.isDirty(`fill`)||this.isDirty(`fillGradient`)){let t=this.get(`fill`),n=this.get(`fillGradient`),r=this.get(`fillOpacity`);if(n){if(t){let e=n.get(`stops`,[]);e.length&&g(e,e=>{(!e.color||e.colorInherited)&&t&&(e.color=t,e.colorInherited=!0),(e.opacity==null||e.opacityInherited)&&(e.opacity=r,e.opacityInherited=!0)})}e.fill=n.getFill(this)}else t&&(e.fill=t)}if(this.isDirty(`fillOpacity`)){let t=this.get(`fillOpacity`,1);t&&(e.fillOpacity=t)}(this.isDirty(`maxWidth`)||this.isPrivateDirty(`maxWidth`))&&(e.maxWidth=this.get(`maxWidth`,this.getPrivate(`maxWidth`)),this.markDirtyBounds()),(this.isDirty(`maxHeight`)||this.isPrivateDirty(`maxHeight`))&&(e.maxHeight=this.get(`maxHeight`,this.getPrivate(`maxHeight`)),this.markDirtyBounds()),g(this._textStyles,t=>{this._dirty[t]&&(e[t]=this.get(t),this.markDirtyBounds())}),e.fontSize=this.get(`fontSize`),e.fontFamily=this.get(`fontFamily`),this._display.style=e,this.isDirty(`role`)&&this.get(`role`)==`tooltip`&&this._root.updateTooltip(this)}_getText(){let e=this.get(`text`,``);return this.get(`maxChars`)&&(e=qe(e,this.get(`maxChars`,1e8),this.get(`breakWords`),this.get(`ellipsis`))),this.get(`populateText`)?Y(this,e):e}_getAccessibleText(){let e=this.get(`ariaLabel`);return e===void 0?this._getText():this.get(`populateText`)?Y(this,e):e}markDirtyText(){this._display.text=this._getText(),this.get(`role`)==`tooltip`&&this._root.updateTooltip(this),this.markDirtyBounds(),this.markDirty()}_setDataItem(e){super._setDataItem(e),this.get(`populateText`)&&this.markDirtyText()}getNumberFormatter(){return this.parent?this.parent.getNumberFormatter():super.getNumberFormatter()}getDateFormatter(){return this.parent?this.parent.getDateFormatter():super.getDateFormatter()}getDurationFormatter(){return this.parent?this.parent.getDurationFormatter():super.getDurationFormatter()}};Object.defineProperty(Q,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`Text`}),Object.defineProperty(Q,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:z.classNames.concat([Q.className])});var $=class extends Z{constructor(){super(...arguments),Object.defineProperty(this,`_text`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_textKeys`,{enumerable:!0,configurable:!0,writable:!0,value:`text.fill.fillGradient.fillOpacity.textAlign.fontFamily.fontSize.fontStyle.fontWeight.fontStyle.fontVariant.textDecoration.shadowColor.shadowBlur.shadowOffsetX.shadowOffsetY.shadowOpacity.lineHeight.baselineRatio.direction.textBaseline.oversizedBehavior.breakWords.ellipsis.minScale.populateText.role.ignoreFormatting.maxChars.ariaLabel`.split(`.`)})}get text(){return this._text}_afterNew(){super._afterNew(),this._makeText(),g(this._textKeys,e=>{let t=this.get(e);t!=null&&this._text.set(e,t)}),this.get(`html`,``)!==``&&this._text.set(`text`,``),this.onPrivate(`maxWidth`,()=>{this._setMaxDimentions()}),this.onPrivate(`maxHeight`,()=>{this._setMaxDimentions()})}_makeText(){this._text=this.children.push(Q.new(this._root,{}))}_updateChildren(){super._updateChildren();let e=this._text;if(g(this._textKeys,e=>{this._text.set(e,this.get(e))}),(this.isDirty(`maxWidth`)||this.isDirty(`maxHeight`)||this.isDirty(`rotation`))&&this._setMaxDimentions(),this.get(`html`,``)===``?(e.set(`text`,this.get(`text`)),this._maybeUpdateHTMLColor()):e.set(`text`,``),(this.isDirty(`fill`)||this.isDirty(`fillGradient`))&&this._maybeUpdateHTMLColor(),this.isDirty(`textAlign`)||this.isDirty(`width`)){let t=this.get(`textAlign`),n;this.get(`width`)==null?t==`left`||t==`start`?n=this.get(`paddingLeft`,0):(t==`right`||t==`end`)&&(n=-this.get(`paddingRight`,0)):n=t==`right`?r:t==`center`?i:0,e.set(`x`,n)}let t=this.get(`background`);t&&t.setPrivate(`visible`,e._display.textVisible)}_maybeUpdateHTMLColor(){let e=this.getPrivate(`htmlElement`);e&&this.get(`fill`)&&(e.style.color=this.get(`fill`).toCSSHex())}_setMaxDimentions(){let e=this.get(`rotation`),t=e==90||e==270||e==-90,n=this._text,r=this.get(`maxWidth`,this.getPrivate(`maxWidth`,1/0));m(r)?n.set(t?`maxHeight`:`maxWidth`,r-this.get(`paddingTop`,0)-this.get(`paddingBottom`,0)):n.set(t?`maxHeight`:`maxWidth`,void 0);let i=this.get(`maxHeight`,this.getPrivate(`maxHeight`,1/0));m(i)?n.set(t?`maxWidth`:`maxHeight`,i-this.get(`paddingLeft`,0)-this.get(`paddingRight`,0)):n.set(t?`maxWidth`:`maxHeight`,void 0),this.root.events.once(`frameended`,()=>{n.markDirtyBounds()})}_setDataItem(e){super._setDataItem(e),this._markDirtyKey(`text`),this._markDirtyKey(`html`);let t=this._text;t.get(`populateText`)&&t.markDirtyText();let n=this.get(`html`);n&&n!==``&&this._updateHTMLContent()}getText(){return this._text._getText()}getAccessibleText(){return this._text._getAccessibleText()}};Object.defineProperty($,`className`,{enumerable:!0,configurable:!0,writable:!0,value:`Label`}),Object.defineProperty($,`classNames`,{enumerable:!0,configurable:!0,writable:!0,value:Z.classNames.concat([$.className])});var fn=class{constructor(e,t){if(Object.defineProperty(this,`_root`,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,`_rules`,{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._root=e,!t)throw Error("You cannot use `new Class()`, instead use `Class.new()`")}static new(e){let t=new this(e,!0);return t.setupDefaultRules(),t}setupDefaultRules(){}_lookupRules(e){return this._rules[e]}ruleRaw(e,t=[]){let n=this._rules[e];n||=this._rules[e]=[],t.sort(F);let{index:r,found:i}=ge(n,e=>{let n=F(e.tags.length,t.length);return n===0?Xt(e.tags,t,F):n});if(i)return n[r].template;{let e=R.new({});return n.splice(r,0,{tags:t,template:e}),e}}rule(e,t=[]){return this.ruleRaw(e,t)}};export{Me as $,n as $t,Ft as A,le as At,yt as B,v as Bt,jt as C,x as Ct,Pt as D,b as Dt,N as E,be as Et,Dt as F,ve as Ft,Ue as G,ee as Gt,Ae as H,ne as Ht,A as I,ie as It,it as J,c as Jt,Ze as K,p as Kt,St as L,se as Lt,M,ae as Mt,Tt as N,me as Nt,It as O,xe as Ot,Et as P,h as Pt,nt as Q,i as Qt,O as R,ce as Rt,Ht as S,Te as St,Nt as T,S as Tt,st as U,o as Ut,De as V,te as Vt,Ye as W,m as Wt,Be as X,a as Xt,rt as Y,t as Yt,Ie as Z,r as Zt,F as _,Qe as _t,Y as a,tt as at,P as b,T as bt,q as c,Ne as ct,H as d,We as dt,He as et,cn as f,w as ft,en as g,Pe as gt,L as h,ze as ht,Z as i,et as it,Mt as j,g as jt,Rt as k,y as kt,K as l,ht as lt,R as m,gt as mt,$ as n,at as nt,ln as o,$e as ot,sn as p,Ee as pt,je as q,u as qt,Q as r,ot as rt,J as s,Re as st,fn as t,Fe as tt,U as u,Oe as ut,Zt as v,Xe as vt,At as w,Ce as wt,Vt as x,we as xt,Yt as y,C as yt,D as z,oe as zt};