import{Cn as e,Kt as t,Rt as n,Wy as r,_n as i,dn as a,mn as o}from"./index-BqmCqmfp.js";function s(e,t,n,r){if(e)if(e.type!==`CIMTextSymbol`){if(n&&e.effects)for(let n of e.effects)u(n,t);if(e.symbolLayers)for(let n of e.symbolLayers){switch(n.type){case`CIMPictureMarker`:case`CIMVectorMarker`:c(n,t,r);break;case`CIMPictureStroke`:case`CIMSolidStroke`:case`CIMGradientStroke`:!r?.preserveOutlineWidth&&n.width&&(n.width*=t);break;case`CIMPictureFill`:n.height&&(n.height*=t),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t);break;case`CIMHatchFill`:s(n.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t),n.separation&&(n.separation*=t)}if(n.effects)for(let e of n.effects)u(e,t)}}else e.height!=null&&(e.height*=t)}function c(e,t,n){if(e&&(e.markerPlacement&&l(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&e.anchorPointUnits===`Absolute`&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=e.size==null?0:e.size*t,e.type===`CIMVectorMarker`&&e.markerGraphics))for(let r of e.markerGraphics)e.scaleSymbolsProportionally||s(r.symbol,t,!0,n)}function l(e,t){switch(a(e)&&e.offset&&(e.offset*=t),e.type){case`CIMMarkerPlacementAlongLineRandomSize`:case`CIMMarkerPlacementAlongLineSameSize`:e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length&&(e.placementTemplate=e.placementTemplate.map(e=>e*t));break;case`CIMMarkerPlacementAlongLineVariableSize`:e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length&&(e.placementTemplate=e.placementTemplate.map(e=>e*t));break;case`CIMMarkerPlacementOnLine`:e.startPointOffset&&(e.startPointOffset*=t);break;case`CIMMarkerPlacementAtExtremities`:e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case`CIMMarkerPlacementAtMeasuredUnits`:case`CIMMarkerPlacementOnVertices`:break;case`CIMMarkerPlacementAtRatioPositions`:e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case`CIMMarkerPlacementPolygonCenter`:e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case`CIMMarkerPlacementInsidePolygon`:e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function u(e,t){switch(e.type){case`CIMGeometricEffectArrow`:case`CIMGeometricEffectDonut`:e.width&&(e.width*=t);break;case`CIMGeometricEffectBuffer`:e.size&&(e.size*=t);break;case`CIMGeometricEffectCut`:e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case`CIMGeometricEffectDashes`:e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length&&(e.dashTemplate=e.dashTemplate.map(e=>e*t));break;case`CIMGeometricEffectExtension`:case`CIMGeometricEffectJog`:case`CIMGeometricEffectRadial`:e.length&&(e.length*=t);break;case`CIMGeometricEffectMove`:e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case`CIMGeometricEffectOffset`:case`CIMGeometricEffectOffsetTangent`:e.offset&&(e.offset*=t);break;case`CIMGeometricEffectRegularPolygon`:e.radius&&(e.radius*=t);break;case`CIMGeometricEffectTaperedPolygon`:e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case`CIMGeometricEffectWave`:e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function d(n){let i=[];return f(e(n),i),i.length?new r(t(i[0])):null}function f(e,t){if(!e)return;let r;r=e.type===`CIMTextSymbol`?e.symbol:e;let i=e.type===`CIMPolygonSymbol`;if(r?.symbolLayers){for(let e of r.symbolLayers)if(!(e.colorLocked||i&&(n(e)||o(e)&&e.markerPlacement&&a(e.markerPlacement))))switch(e.type){case`CIMPictureMarker`:case`CIMPictureStroke`:case`CIMPictureFill`:e.tintColor&&p(t,e.tintColor);break;case`CIMVectorMarker`:e.markerGraphics?.forEach(e=>{f(e.symbol,t)});break;case`CIMSolidStroke`:case`CIMSolidFill`:p(t,e.color);break;case`CIMGradientFill`:m(t,e);break;case`CIMHatchFill`:f(e.lineSymbol,t)}}}function p(e,t){for(let n of e)if(n.join(`.`)===t.join(`.`))return;e.push(t)}function m(e,t){switch(t.colorRamp?.type){case`CIMMultipartColorRamp`:t.colorRamp.colorRamps?.forEach(t=>{t.type===`CIMLinearContinuousColorRamp`&&h(e,t)});break;case`CIMLinearContinuousColorRamp`:case`CIMPolarContinuousColorRamp`:h(e,t.colorRamp)}}function h(e,t){t&&(t.fromColor&&p(e,t.fromColor),t.toColor&&p(e,t.toColor))}function g(t,n,i){n instanceof r||(n=new r(n));let a=e(t);a&&_(a,n,i)}function _(e,t,r){if(!e)return;let s;s=e.type===`CIMTextSymbol`?e.symbol:e;let c=s?.type===`CIMPolygonSymbol`;if(s?.symbolLayers)for(let e of s.symbolLayers){if(e.colorLocked)continue;if(c){if(r){let{layersToColor:t}=r;if((n(e)||o(e)&&e.markerPlacement&&a(e.markerPlacement))&&t===`fill`||i(e)&&t===`outline`)continue}else if(n(e)||o(e)&&e.markerPlacement&&a(e.markerPlacement))continue}let s=t.toArray();switch(e.type){case`CIMPictureMarker`:case`CIMPictureStroke`:case`CIMPictureFill`:e.tintColor=s;break;case`CIMVectorMarker`:e.markerGraphics?.forEach(e=>{_(e.symbol,t,r)});break;case`CIMSolidStroke`:case`CIMSolidFill`:e.color=s;break;case`CIMGradientFill`:v(e,t);break;case`CIMHatchFill`:_(e.lineSymbol,t,r)}}}function v(e,t){switch(e.colorRamp?.type){case`CIMMultipartColorRamp`:e.colorRamp.colorRamps?.forEach(e=>{e.type===`CIMLinearContinuousColorRamp`&&y(e,t)});break;case`CIMLinearContinuousColorRamp`:case`CIMPolarContinuousColorRamp`:y(e.colorRamp,t)}}function y(e,t){if(e&&(e.fromColor&&=t.toArray(),e.toColor)){let n=t.clone();n.a=0,e.toColor=n.toArray()}}function b(t,n,r=!1){let i=e(t);if(r&&(n=360-n),i?.type!==`CIMTextSymbol`){if(i?.type===`CIMPointSymbol`&&i.symbolLayers){let e=n-(i.angle||0);for(let t of i.symbolLayers)if(o(t)){let n=t.rotation||0;t.rotateClockwise?n-=e:n+=e,t.rotation=n}i.angle=n}}else i.angle=n}export{d as i,s as n,g as r,b as t};