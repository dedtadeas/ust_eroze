const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/libtess-asm-U9PRJ1Sy.js","assets/_commonjsHelpers-D6ht1XAa.js","assets/libtess-D3djUdcH.js"])))=>i.map(i=>d[i]);
import{Cw as e,Jc as t,bD as n,nC as r}from"./index-BqmCqmfp.js";var i=128e3,a=null,o=null;async function s(){return a||=c(),a}async function c(){o=await(n(`esri-csp-restrictions`)?await e(()=>import(`./libtess-asm-U9PRJ1Sy.js`),__vite__mapDeps([0,1])).then(e=>e.l):await e(()=>import(`./libtess-D3djUdcH.js`),__vite__mapDeps([2,1])).then(e=>e.l)).default({locateFile:e=>r(`esri/core/libs/libtess/${e}`)})}function l(e,t){let n=Math.max(e.length,i);return o.triangulate(e,t,n)}function u(e,t){return e.x===t.x&&e.y===t.y}function d(e){if(!e)return;let t=e.length;if(t<=1)return;let n=0;for(let r=1;r<t;r++)u(e[r],e[n])||++n===r||(e[n]=e[r]);e.length=n+1}function f(e,t){return e.x=t.y,e.y=-t.x,e}function p(e,t){return e.x=-t.y,e.y=t.x,e}function m(e,t){return e.x=t.x,e.y=t.y,e}function h(e,t){return e.x=-t.x,e.y=-t.y,e}function g(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function _(e,t){return e.x*t.y-e.y*t.x}function v(e,t){return e.x*t.x+e.y*t.y}function y(e,t,n,r){return e.x=t.x*n+t.y*r,e.y=t.x*r-t.y*n,e}var b=class{constructor(e,t,n){this._writeVertex=e,this._writeTriangle=t,this._canUseThinTessellation=n,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}tessellate(e,t,n=this._canUseThinTessellation){d(e),n&&t.halfWidth<1.05&&!t.offset?this._tessellateThin(e,t):this._tessellate(e,t)}_tessellateThin(e,t){if(e.length<2)return;let n=t.wrapDistance||65535,r=t.initialDistance||0,i=!1,a=e[0].x,o=e[0].y,s=e.length;for(let t=1;t<s;++t){i&&(i=!1,r=0);let s=e[t].x,c=e[t].y,l=s-a,u=c-o,d=Math.sqrt(l*l+u*u);if(l/=d,u/=d,r+d>n){i=!0;let e=(n-r)/d;d=n-r,s=(1-e)*a+e*s,c=(1-e)*o+e*c,--t}let f=this._writeVertex(a,o,0,0,l,u,u,-l,0,-1,r),p=this._writeVertex(a,o,0,0,l,u,-u,l,0,1,r);r+=d;let m=this._writeVertex(s,c,0,0,l,u,u,-l,0,-1,r),h=this._writeVertex(s,c,0,0,l,u,-u,l,0,1,r);this._writeTriangle(f,p,m),this._writeTriangle(p,m,h),a=s,o=c}}_tessellate(e,t){let n=e[0],r=e[e.length-1],i=u(n,r),a=i?3:2;if(e.length<a)return;let o=t.pixelCoordRatio,s=t.capType==null?0:t.capType,c=t.joinType==null?2:t.joinType,l=t.miterLimit==null?2:Math.min(t.miterLimit,4),d=t.roundLimit==null?1.05:Math.min(t.roundLimit,1.05),b=t.halfWidth==null?2:t.halfWidth,x=!!t.textured,S,C,w,T=null,E=this._prevNormal,D=this._nextNormal,O=-1,k=-1,A=this._joinNormal,j,M,N=this._textureNormalLeft,P=this._textureNormalRight,F=this._textureNormal,I=-1,L=-1,R=t.wrapDistance||65535,z=t.initialDistance||0,B=this._writeVertex,V=this._writeTriangle,H=(e,t,n,r,i,a)=>{let o=B(C,w,j,M,n,r,e,t,i,a,z);return I>=0&&L>=0&&o>=0&&V(I,L,o),I=L,L=o,o};i&&(S=e[e.length-2],D.x=r.x-S.x,D.y=r.y-S.y,k=g(D),D.x/=k,D.y/=k);let U=!1;for(let t=0;t<e.length;++t){if(U&&(U=!1,z=0),S&&(E.x=-D.x,E.y=-D.y,O=k,z+O>R&&(U=!0)),U){let n=(R-z)/O;O=R-z,S={x:(1-n)*S.x+n*e[t].x,y:(1-n)*S.y+n*e[t].y},--t}else S=e[t];C=S.x,w=S.y;let n=t<=0&&!U,r=t===e.length-1;if(n||(z+=O),T=r?i?e[1]:null:e[t+1],T?(D.x=T.x-C,D.y=T.y-w,k=g(D),D.x/=k,D.y/=k):(D.x=void 0,D.y=void 0),!i){if(n){p(A,D),j=A.x,M=A.y,s===2&&(H(-D.y-D.x,D.x-D.y,D.x,D.y,0,-1),H(D.y-D.x,-D.x-D.y,D.x,D.y,0,1)),s===1&&(H(-D.y-D.x,D.x-D.y,D.x,D.y,-1,-1),H(D.y-D.x,-D.x-D.y,D.x,D.y,-1,1)),s!==1&&s!==0||(H(-D.y,D.x,D.x,D.y,0,-1),H(D.y,-D.x,D.x,D.y,0,1));continue}if(r){f(A,E),j=A.x,M=A.y,s!==1&&s!==0||(H(E.y,-E.x,-E.x,-E.y,0,-1),H(-E.y,E.x,-E.x,-E.y,0,1)),s===2&&(H(E.y-E.x,-E.x-E.y,-E.x,-E.y,0,-1),H(-E.y-E.x,E.x-E.y,-E.x,-E.y,0,1)),s===1&&(H(E.y-E.x,-E.x-E.y,-E.x,-E.y,1,-1),H(-E.y-E.x,E.x-E.y,-E.x,-E.y,1,1));continue}}let a,u,B=-_(E,D);if(Math.abs(B)<.01)v(E,D)>0?(A.x=E.x,A.y=E.y,B=1,a=Number.MAX_VALUE,u=!0):(p(A,D),B=1,a=1,u=!1);else{A.x=(E.x+D.x)/B,A.y=(E.y+D.y)/B,a=g(A);let e=(a-1)*b*o;u=a>4||e>O&&e>k}j=A.x,M=A.y;let V=c;switch(c){case 0:a<1.05&&(V=2);break;case 1:a<d&&(V=2);break;case 2:a>l&&(V=0)}switch(V){case 2:if(H(A.x,A.y,-E.x,-E.y,0,-1),H(-A.x,-A.y,-E.x,-E.y,0,1),r)break;if(x){let e=U?0:z;I=this._writeVertex(C,w,j,M,D.x,D.y,A.x,A.y,0,-1,e),L=this._writeVertex(C,w,j,M,D.x,D.y,-A.x,-A.y,0,1,e)}break;case 0:{let e=B<0,t,n,i,a;if(e){let e=I;I=L,L=e,t=N,n=P}else t=P,n=N;if(u)i=e?p(this._innerPrev,E):f(this._innerPrev,E),a=e?f(this._innerNext,D):p(this._innerNext,D);else{let t=e?h(this._inner,A):m(this._inner,A);i=t,a=t}let o=e?f(this._bevelStart,E):p(this._bevelStart,E);H(i.x,i.y,-E.x,-E.y,t.x,t.y);let s=H(o.x,o.y,-E.x,-E.y,n.x,n.y);if(r)break;let c=e?p(this._bevelEnd,D):f(this._bevelEnd,D);if(u){let e=this._writeVertex(C,w,j,M,-E.x,-E.y,0,0,0,0,z);I=this._writeVertex(C,w,j,M,D.x,D.y,a.x,a.y,t.x,t.y,z),L=this._writeVertex(C,w,j,M,D.x,D.y,c.x,c.y,n.x,n.y,z),this._writeTriangle(s,e,L)}else{if(x){let e=this._bevelMiddle;e.x=(o.x+c.x)/2,e.y=(o.y+c.y)/2,y(F,e,-E.x,-E.y),H(e.x,e.y,-E.x,-E.y,F.x,F.y),y(F,e,D.x,D.y),I=this._writeVertex(C,w,j,M,D.x,D.y,e.x,e.y,F.x,F.y,z),L=this._writeVertex(C,w,j,M,D.x,D.y,a.x,a.y,t.x,t.y,z)}else{let e=I;I=L,L=e}H(c.x,c.y,D.x,D.y,n.x,n.y)}if(e){let e=I;I=L,L=e}break}case 1:{let e=B<0,t,n;if(e){let e=I;I=L,L=e,t=N,n=P}else t=P,n=N;let i=e?h(this._inner,A):m(this._inner,A),o,s;u?(o=e?p(this._innerPrev,E):f(this._innerPrev,E),s=e?f(this._innerNext,D):p(this._innerNext,D)):(o=i,s=i);let c=e?f(this._roundStart,E):p(this._roundStart,E),l=e?p(this._roundEnd,D):f(this._roundEnd,D),d=H(o.x,o.y,-E.x,-E.y,t.x,t.y),g=H(c.x,c.y,-E.x,-E.y,n.x,n.y);if(r)break;let _=this._writeVertex(C,w,j,M,-E.x,-E.y,0,0,0,0,z);u||this._writeTriangle(I,L,_);let b=h(this._outer,i),S=this._writeVertex(C,w,j,M,D.x,D.y,l.x,l.y,n.x,n.y,z),T,O,k=a>2;if(k){let t;a===Number.MAX_VALUE?t=-1:(b.x/=a,b.y/=a,t=v(E,b),t=(a*(t*t-1)+1)/t),T=e?f(this._startBreak,E):p(this._startBreak,E),T.x+=E.x*t,T.y+=E.y*t,O=e?p(this._endBreak,D):f(this._endBreak,D),O.x+=D.x*t,O.y+=D.y*t}y(F,b,-E.x,-E.y);let R=this._writeVertex(C,w,j,M,-E.x,-E.y,b.x,b.y,F.x,F.y,z);y(F,b,D.x,D.y);let V=x?this._writeVertex(C,w,j,M,D.x,D.y,b.x,b.y,F.x,F.y,z):R,U=_,W=x?this._writeVertex(C,w,j,M,D.x,D.y,0,0,0,0,z):_,G=-1,K=-1;if(k&&(y(F,T,-E.x,-E.y),G=this._writeVertex(C,w,j,M,-E.x,-E.y,T.x,T.y,F.x,F.y,z),y(F,O,D.x,D.y),K=this._writeVertex(C,w,j,M,D.x,D.y,O.x,O.y,F.x,F.y,z)),x?k?(this._writeTriangle(U,g,G),this._writeTriangle(U,G,R),this._writeTriangle(W,V,K),this._writeTriangle(W,K,S)):(this._writeTriangle(U,g,R),this._writeTriangle(W,V,S)):k?(this._writeTriangle(_,g,G),this._writeTriangle(_,G,K),this._writeTriangle(_,K,S)):(this._writeTriangle(_,g,R),this._writeTriangle(_,V,S)),u?(I=this._writeVertex(C,w,j,M,D.x,D.y,s.x,s.y,t.x,t.y,z),L=S):(I=x?this._writeVertex(C,w,j,M,D.x,D.y,s.x,s.y,t.x,t.y,z):d,this._writeTriangle(I,W,S),L=S),e){let e=I;I=L,L=e}break}}}}};export{l as n,s as r,b as t};