import{$l as e,Gy as t,Hh as n,Jg as r,Rh as i,SS as a,Zv as o,aS as s,cS as c,ru as l}from"./index-BqmCqmfp.js";import{l as u,t as d}from"./vectorStacks-CKtslZxP.js";import{a as f}from"./plane-CTjDePZl.js";import{n as p}from"./projectPointToVector-Clou1sfo.js";import{t as m}from"./spatialReferenceEllipsoidUtils-DBtdxVkA.js";import{t as h}from"./projectVectorToVector-D-Bbb8fP.js";import{g,t as _}from"./sphere-CicnK0Bn.js";import{r as v,t as y}from"./boundedPlane-Cn9n7acY.js";import{u as b}from"./graphicUtils-BCCvOGWP.js";function x(e,t,n){return!!h(e,t,S,n.spatialReference)&&(n.x=S[0],n.y=S[1],n.z=S[2],!0)}var S=r();function C(e){let{value:t,operations:n}=e;return{operations:n,value:n.create(t)}}function w(e,t,n){return e.operations.setExtent(e.value,t,n.value),n}function T(e,t){return e.operations.getExtent(e.value,t),t}function E(e){return{operations:e,value:e.create()}}function D(e,t,n=E(e)){return n.operations=e,e.copy(t,n.value),n}function O(e){return D(g,_(0,0,0,a(e).radius))}var k=2**50;function A(){return D(y,v([0,0,0],[k,0,0],[0,k,0]))}function j(e,t,n){return e.operations.axisAt(e.value,t,2,n)}function M(e,t,n,r){return e.operations.axisAt(e.value,t,n,r)}function N(e,t,n){return e.operations.intersectRay(e.value,t,n)}function P(e,t,n){return e.operations.intersectRayClosestSilhouette(e.value,t,n)}function F(e,t){return e.operations.altitudeAt(e.value,t)}function I(e,t,n,r){return e.operations.setAltitudeAt(e.value,t,n,r)}function L(t,n,r,a){return n!==a&&i(a,n),e(z,a[12],a[13],a[14]),I(t,z,r,z),a[12]=z[0],a[13]=z[1],a[14]=z[2],a}function R(e,t,n){return e.operations.elevate(e.value,t,n.value)}var z=r();r();var B=class e{constructor(e,t,n,r){this.viewingMode=e,this.spatialReference=t,this.unitInMeters=n,this._coordinateSystem=r,this._tmpCoordinateSystem=C(r),this.referenceEllipsoid=a(t),this.sphericalPCPF=m(t)}set extent(e){e&&w(this._coordinateSystem,e,this._coordinateSystem)}get extent(){return T(this._coordinateSystem,o())}getAltitude(e){return F(this._coordinateSystem,e)}setAltitude(e,t,n=e){return I(this._coordinateSystem,n,t,e)}setAltitudeOfTransformation(e,t){L(this._coordinateSystem,t,e,t)}worldUpAtPosition(e,t){return j(this._coordinateSystem,e,t)}worldBasisAtPosition(e,t,n){return M(this._coordinateSystem,e,t,n)}basisMatrixAtPosition(e,t){let r=this.worldBasisAtPosition(e,0,d.get()),i=this.worldBasisAtPosition(e,1,d.get()),a=this.worldBasisAtPosition(e,2,d.get());return n(t,r[0],r[1],r[2],0,i[0],i[1],i[2],0,a[0],a[1],a[2],0,0,0,0,1),t}headingAtPosition(e,n){let r=this.worldUpAtPosition(e,d.get()),i=this.worldBasisAtPosition(e,1,d.get()),a=u(n,i,r);return t(a)}intersectManifoldClosestSilhouette(e,t,n){return R(this._coordinateSystem,t,this._tmpCoordinateSystem),P(this._tmpCoordinateSystem,e,n),n}intersectManifold(e,t,n){R(this._coordinateSystem,t,this._tmpCoordinateSystem);let r=d.get();return N(this._tmpCoordinateSystem,e,r)?l(n,r):null}intersectInfiniteManifold(e,t,n){if(this.viewingMode===1)return this.intersectManifold(e,t,n);R(this._coordinateSystem,t,this._tmpCoordinateSystem);let r=this._tmpCoordinateSystem.value,i=d.get();return f(r.plane,e,i)?l(n,i):null}toRenderCoords(e,t,n){return b(e)?p(e,t,this.spatialReference):h(e,t,n,this.spatialReference)}fromRenderCoords(e,t,n=null){return b(t)?(n!=null&&(t.spatialReference=n),x(e,this.spatialReference,t)?t:null):h(e,this.spatialReference,t,n)?t:null}static create(t,n){switch(t){case 2:return new e(2,n,s(n),A());case 1:return new e(1,n,1,O(n))}}static renderUnitScaleFactor(e,t){return c(e)/c(t)}};export{B as t};