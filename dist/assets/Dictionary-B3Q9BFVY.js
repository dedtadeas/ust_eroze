import{An as e,Ax as t,Bg as n,Fn as r,Jm as i,Nn as a,Pn as o,Sx as s,TE as c,Uw as l,Ux as ee,Vg as te,Vn as u,Vx as d,_m as f,bx as ne,dm as p,e_ as m,fm as h,gm as re,hm as g,jT as ie,mm as _,pm as ae,ux as oe,vy as se}from"./index-BqmCqmfp.js";import{t as v}from"./ImmutableArray-C3KNQCVd.js";import{p as ce,t as le}from"./shared-BZhQTnH4.js";import{n as ue,r as de}from"./number-Dq0Kt6xf.js";var y=class{},b=class{constructor(){}};function x(e,t,n){if(e instanceof b&&!(e instanceof S)){let r=new S;return r.fn=e,r.parameterEvaluator=n,r.context=t,r}return e}var fe=class extends b{constructor(e){super(),this.fn=e}createFunction(e){return(...t)=>this.fn(e,{preparsed:!0,arguments:t})}call(e,t){return this.fn(e,t)}marshalledCall(e,t,n,r){return r(e,t,(t,i,a)=>{a=a.map(t=>t instanceof b&&!(t instanceof S)?x(t,e,r):t);let o=this.call(n,{args:a});return l(o)?o.then(e=>x(e,n,r)):o})}},S=class extends b{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(e){return this.fn.createFunction(this.context)}call(e,t){return this.fn.marshalledCall(e,t,this.context,this.parameterEvaluator)}marshalledCall(e,t,n){return this.fn.marshalledCall(e,t,this.context,this.parameterEvaluator)}},C=class e extends v{constructor(e,t,n,r,i,a){super(e),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=t,this._hasZ=n,this._hasM=r,this._cacheId=i,this._partId=a}get(e){if(this._lazyPt[e]===void 0){let n=this._elements[e];if(n===void 0)return;let r=new t(n[0],n[1],this._spRef);this._hasZ&&(r.z=n[2]),this._hasM&&(r.m=this._hasZ?n[3]:n[2]),r.cache._arcadeCacheId=this._cacheId.toString()+`-`+this._partId.toString()+`-`+e.toString(),this._lazyPt[e]=r}return this._lazyPt[e]}equalityTest(t){return t===this||t!==null&&t instanceof e!=0&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+`-`+this._partId.toString()}},pe=class e extends v{constructor(e,t,n,r,i){super(e),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=n,this._hasM=r,this._spRef=t,this._cacheId=i}get(e){if(this._lazyPath[e]===void 0){let t=this._elements[e];if(t===void 0)return;this._lazyPath[e]=new C(t,this._spRef,this._hasZ,this._hasM,this._cacheId,e)}return this._lazyPath[e]}equalityTest(t){return t===this||t!==null&&t instanceof e!=0&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}},me=class{constructor(e){this.value=e}},he=class{constructor(e){this.value=e}},w={type:`VOID`},ge=Symbol(`BREAK`),_e=Symbol(`CONTINUE`);function T(e,t,n){return t===``||t==null||t===n||t===n?e:e=e.split(t).join(n)}function E(e){return e instanceof b}function ve(e){return e instanceof y}function D(e){return!!h(e)||!!_(e)||!!L(e)||!!R(e)||!!z(e)||!!f(e)||e===null||e===w}function ye(e,t){return e===void 0?t:e}function be(e){return e==null?``:g(e)||I(e)?`Array`:L(e)?`Date`:z(e)?`Time`:R(e)?`DateOnly`:h(e)?`String`:f(e)?`Boolean`:_(e)?`Number`:e?.declaredClass===`esri.arcade.Attachment`?`Attachment`:e?.declaredClass===`esri.arcade.Portal`?`Portal`:e?.declaredClass===`esri.arcade.Dictionary`?`Dictionary`:F(e)?`KnowledgeGraph`:e instanceof y?`Module`:k(e)?`Feature`:e instanceof t?`Point`:e instanceof m?`Polygon`:e instanceof n?`Polyline`:e instanceof te?`Multipoint`:e instanceof s?`Extent`:E(e)?`Function`:M(e)?`FeatureSet`:P(e)?`FeatureSetCollection`:A(e)?`Voxel`:j(e)?`Pixel`:e===w?``:typeof e==`number`&&isNaN(e)?`Number`:`Unrecognized Type`}function xe(e){return e===w}function O(e){return e instanceof d}function k(e){return e?.arcadeDeclaredClass===`esri.arcade.Feature`}function A(e){return e?.arcadeDeclaredClass===`esri.arcade.Voxel`}function j(e){return e?.arcadeDeclaredClass===`esri.arcade.Pixel`}function M(e){return e?.declaredRootClass===`esri.arcade.featureset.support.FeatureSet`}function N(e){return e?.declaredClass===`esri.arcade.Dictionary`}function Se(e){return N(e)||k(e)||A(e)||j(e)}function P(e){return e?.declaredRootClass===`esri.arcade.featureSetCollection`}function F(e){return e?.declaredClass===`esri.rest.knowledgeGraph.KnowledgeGraph`}function I(e){return e instanceof v}function L(e){return e instanceof r}function R(e){return e instanceof a}function z(t){return t instanceof e}function B(e){return typeof e==`object`&&!!e}function Ce(e,t,n,r,i){if(e.length<t||e.length>n)throw new u(r,`WrongNumberOfParameters`,i)}function we(e){return e==null||xe(e)||e===``}function Te(e){return e<0?-Math.round(-e):Math.round(e)}function V(e,t){return isNaN(e)||t==null||t===``?e.toString():(t=T(t,`‰`,``),t=T(t,`¤`,``),ue(e,{pattern:t}))}function H(e,t){return t==null||t===``?e.toISOString(!0):e.toFormat(Ee(t),{locale:ne(),numberingSystem:`latn`})}function Ee(e,t=!1){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,`[$&]`);let n=``;for(let r of e.match(/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g)||[])switch(r){case`D`:n+=`d`;break;case`DD`:n+=`dd`;break;case`DDD`:n+=`o`;break;case`d`:n+=`c`;break;case`ddd`:n+=`ccc`;break;case`dddd`:n+=`cccc`;break;case`M`:n+=`L`;break;case`MM`:n+=`LL`;break;case`MMM`:n+=`LLL`;break;case`MMMM`:n+=`LLLL`;break;case`YY`:n+=`yy`;break;case`Y`:case`YYYY`:n+=`yyyy`;break;case`Q`:n+=`q`;break;case`Z`:n+=`Z`;break;case`ZZ`:n+=`ZZ`;break;case`ZZZ`:n+=`ZZZ`;break;case`ZZZZ`:n+=t?`[ZZZZ]`:`ZZZZ`;break;case`ZZZZZ`:n+=t?`[ZZZZZ]`:`ZZZZZ`;break;case`S`:n+=`'S'`;break;case`SS`:n+=`'SS'`;break;case`SSS`:n+=`u`;break;case`A`:case`a`:n+=`a`;break;case`m`:case`mm`:case`h`:case`hh`:case`H`:case`HH`:case`s`:case`ss`:case`X`:case`x`:n+=r;break;default:r.length>=2&&r.startsWith(`[`)&&r.endsWith(`]`)?n+=`'${r.slice(1,-1)}'`:n+=`'${r}'`}return n}function U(e,t,n){switch(n){case`>`:return e>t;case`<`:return e<t;case`>=`:return e>=t;case`<=`:return e<=t}return!1}function De(e,t,n){if(e===null){if(t===null||t===w)return U(null,null,n);if(_(t))return U(0,t,n);if(h(t)||f(t))return U(0,q(t),n);if(L(t))return U(0,t.toNumber(),n);if(z(t)||R(t))return U(e,t.toNumber(),n)}if(e===w){if(t===null||t===w)return U(null,null,n);if(_(t))return U(0,t,n);if(h(t)||f(t))return U(0,q(t),n);if(L(t))return U(0,t.toNumber(),n);if(z(t)||R(t))return U(e,t.toNumber(),n)}else if(_(e)){if(_(t))return U(e,t,n);if(f(t))return U(e,q(t),n);if(t===null||t===w)return U(e,0,n);if(h(t))return U(e,q(t),n);if(L(t)||z(t)||R(t))return U(e,t.toNumber(),n)}else if(h(e)){if(h(t))return U(W(e),W(t),n);if(L(t)||z(t)||R(t))return U(q(e),t.toNumber(),n);if(_(t))return U(q(e),t,n);if(t===null||t===w)return U(q(e),0,n);if(f(t))return U(q(e),q(t),n)}else if(L(e)){if(L(t))return e.timeZone!==t.timeZone&&(e.isUnknownTimeZone?e=r.arcadeDateAndZoneToArcadeDate(e,t.timeZone):t.isUnknownTimeZone&&(t=r.arcadeDateAndZoneToArcadeDate(t,e.timeZone))),U(e.toNumber(),t.toNumber(),n);if(t===null||t===w)return U(e.toNumber(),0,n);if(_(t))return U(e.toNumber(),t,n);if(f(t)||h(t))return U(e.toNumber(),q(t),n);if(z(t))throw new u(null,`CannotCompareDateAndTime`,null);if(R(t))return U(e.toNumber(),t.toNumber(),n)}else if(f(e)){if(f(t))return U(e,t,n);if(_(t))return U(q(e),q(t),n);if(L(t)||z(t)||R(t))return U(q(e),t.toNumber(),n);if(t===null||t===w)return U(q(e),0,n);if(h(t))return U(q(e),q(t),n)}else if(R(e)){if(L(t))return U(e.toNumber(),t.toNumber(),n);if(t===null||t===w)return U(e.toNumber(),0,n);if(_(t))return U(e.toNumber(),t,n);if(f(t)||h(t))return U(e.toNumber(),q(t),n);if(z(t))throw new u(null,`CannotCompareDateAndTime`,null);if(R(t))return U(e.toNumber(),t.toNumber(),n)}else if(z(e)){if(L(t))throw new u(null,`CannotCompareDateAndTime`,null);if(t===null||t===w)return U(e.toNumber(),0,n);if(_(t))return U(e.toNumber(),t,n);if(f(t)||h(t))return U(e.toNumber(),q(t),n);if(z(t))return U(e.toNumber(),t.toNumber(),n);if(R(t))throw new u(null,`CannotCompareDateAndTime`,null)}return!!Oe(e,t)&&(n===`<=`||n===`>=`)}function Oe(e,n){if(e===n||e===null&&n===w||n===null&&e===w)return!0;if(L(e)&&L(n)||z(e)&&z(n)||R(e)&&R(n))return e.equals(n);if(e instanceof pe||e instanceof C)return e.equalityTest(n);if(e instanceof t&&n instanceof t){let t=e.cache._arcadeCacheId,r=n.cache._arcadeCacheId;if(t!=null)return t===r}return!!(B(e)&&B(n)&&(e._arcadeCacheId===n._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===n._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null))}function ke(e,{useNumbersForDates:t}){let n=``;for(let r in e){n!==``&&(n+=`,`);let i=e[r];i==null?n+=JSON.stringify(r)+`:null`:f(i)||_(i)||h(i)?n+=JSON.stringify(r)+`:`+JSON.stringify(i):O(i)?n+=JSON.stringify(r)+`:`+G(i):z(i)||R(i)?n+=`${JSON.stringify(r)}:${JSON.stringify(i.toString())}`:I(i)||Array.isArray(i)?n+=JSON.stringify(r)+`:`+G(i,null,t):L(i)?n+=t?JSON.stringify(r)+`:`+JSON.stringify(i.getTime()):JSON.stringify(r)+`:`+i.stringify():typeof i==`object`&&i&&`castToText`in i&&(n+=JSON.stringify(r)+`:`+i.castToText(t))}return`{`+n+`}`}function W(e,t){if(h(e))return e;if(e===null)return``;if(_(e))return V(e,t);if(f(e))return e.toString();if(L(e))return H(e,t);if(z(e)||R(e))return e.toFormat(t);if(e instanceof d)return JSON.stringify(e.toJSON());if(g(e)){let t=[];for(let n=0;n<e.length;n++)t[n]=K(e[n]);return`[`+t.join(`,`)+`]`}if(e instanceof v){let t=[];for(let n=0;n<e.length();n++)t[n]=K(e.get(n));return`[`+t.join(`,`)+`]`}return typeof e==`object`&&e&&`castToText`in e?e.castToText():E(e)?`object, Function`:e===w?``:ve(e)?`object, Module`:``}function Ae(e){let t=[];if(e instanceof v){for(let n=0;n<e.length();n++)t[n]=q(e.get(n));return t}if(!g(e))return null;for(let n=0;n<e.length;n++)t[n]=q(e[n]);return t}function G(e,t,n=!1){if(h(e))return e;if(e===null)return``;if(_(e))return V(e,t);if(f(e))return e.toString();if(L(e))return H(e,t);if(z(e)||R(e))return e.toFormat(t);if(e instanceof d)return e instanceof s?`{"xmin":`+e.xmin.toString()+`,"ymin":`+e.ymin.toString()+`,`+(e.hasZ?`"zmin":`+e.zmin.toString()+`,`:``)+(e.hasM?`"mmin":`+e.mmin.toString()+`,`:``)+`"xmax":`+e.xmax.toString()+`,"ymax":`+e.ymax.toString()+`,`+(e.hasZ?`"zmax":`+e.zmax.toString()+`,`:``)+(e.hasM?`"mmax":`+e.mmax.toString()+`,`:``)+`"spatialReference":`+Be(e.spatialReference)+`}`:Be(e.toJSON(),(e,t)=>e.key===t.key?0:e.key===`spatialReference`?1:t.key===`spatialReference`||e.key<t.key?-1:e.key>t.key?1:0);if(g(e)){let t=[];for(let r=0;r<e.length;r++)t[r]=K(e[r],n);return`[`+t.join(`,`)+`]`}if(e instanceof v){let t=[];for(let r=0;r<e.length();r++)t[r]=K(e.get(r),n);return`[`+t.join(`,`)+`]`}return typeof e==`object`&&e&&`castToText`in e?e.castToText(n):E(e)?`object, Function`:e===w?``:ve(e)?`object, Module`:``}function K(e,t=!1){if(e===null)return`null`;if(f(e)||h(e))return JSON.stringify(e);if(_(e))return e.toString();if(e instanceof d||e instanceof v||Array.isArray(e))return G(e,null,t);if(L(e))return t?JSON.stringify(e.getTime()):JSON.stringify(H(e,``));if(z(e)||R(e))return JSON.stringify(e.toString());if(typeof e==`object`&&e){if(`castToText`in e)return e.castToText(t)}else if(e===w)return`null`;return`null`}function q(e,t){return _(e)?e:e===null||e===``?0:L(e)||R(e)||z(e)?NaN:f(e)?e?1:0:g(e)||e===``||e===void 0?NaN:t!==void 0&&h(e)?(t=T(t,`‰`,``),t=T(t,`¤`,``),de(e,{pattern:t})):e===w?0:Number(e)}function je(e,t){if(L(e))return e;if(h(e)){let n=Me(e,t);if(n)return r.dateTimeToArcadeDate(n)}return null}function Me(e,t){let n=/ (\d\d)/,r=o(t),i=oe.fromISO(e,{zone:r});return i.isValid||n.test(e)&&(e=e.replace(n,`T$1`),i=oe.fromISO(e,{zone:t}),i.isValid)?i:null}function Ne(e){return f(e)?e:h(e)?(e=e.toLowerCase())===`true`:!!_(e)&&e!==0&&!isNaN(e)}function Pe(e,t){let n=JSON.parse(e);return n&&!n.spatialReference&&(n.spatialReference=t),i(n)}function Fe(e,t){return e==null?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=t),e)}function Ie(e){if(e===null)return null;if(e instanceof t)return e.x===`NaN`||e.x===null||isNaN(e.x)?null:e;if(e instanceof m){if((e.curveRings??e.rings).length===0)return null;for(let t of e.curveRings??e.rings)if(t.length>0)return e;return null}if(e instanceof n){if((e.curvePaths??e.paths).length===0)return null;for(let t of e.curvePaths??e.paths)if(t.length>0)return e;return null}return e instanceof te?e.points.length===0?null:e:e instanceof s?e.xmin===`NaN`||e.xmin===null||isNaN(e.xmin)?null:e:null}function Le(e,t){if(!e||!e.domain)return t;let n=null,r=null;if(L(t))n=t.toNumber();else if(R(t))n=t.toString();else if(z(t))n=t.toStorageString();else if(e.field.type===`string`||e.field.type===`esriFieldTypeString`)n=W(t);else{if(t==null)return null;if(t===``)return t;n=q(t)}for(let t=0;t<e.domain.codedValues.length;t++){let i=e.domain.codedValues[t];i.code===n&&(r=i)}return r===null?W(t):r.name}function Re(e,t){if(!e||!e.domain)return t;let n=null,r=W(t);for(let t=0;t<e.domain.codedValues.length;t++){let i=e.domain.codedValues[t];i.name===r&&(n=i)}return n===null?t:n.code}function J(e,t,n=null,r=null){if(!t||!t.fields)return null;let i,a,o=null;for(let n=0;n<t.fields.length;n++){let r=t.fields[n];r.name.toLowerCase()===e.toString().toLowerCase()&&(o=r)}if(o===null)throw new u(null,`FieldNotFound`,null,{key:e});let s=t.typeIdField,c=`id`,l=t.types;if(t.subtypeField&&(s=t.subtypeField,c=`code`,l=t.subtypes??[]),r===null&&n&&s)r=n.hasField(s)?n.field(s):null;else if(s&&r!==null){let e=!1;for(let t of l||[])if(r===t[c]){e=!0;break}if(!e){for(let t of l||[])if(r===t.name){r=t[c],e=!0;break}}e||(r=null,n&&s&&(r=n.hasField(s)?n.field(s):null))}return r!=null&&l.some(e=>e[c]===r&&(i=e.domains?.[o.name],i&&i.type===`inherited`&&(i=ze(o.name,t),a=!0),!0)),a||i||(i=ze(e,t)),{field:o,domain:i}}function ze(e,t){let n;return t.fields.some(t=>(t.name.toLowerCase()===e.toLowerCase()&&(n=t.domain),!!n)),n}function Be(e,t){t||={},typeof t==`function`&&(t={cmp:t});let n=typeof t.cycles==`boolean`&&t.cycles,r=t.cmp&&(i=t.cmp,function(e){return function(t,n){let r={key:t,value:e[t]},a={key:n,value:e[n]};return i(r,a)}});var i;let a=[];return function e(t){if(t?.toJSON&&typeof t.toJSON==`function`&&(t=t.toJSON()),t===void 0)return;if(typeof t==`number`)return isFinite(t)?``+t:`null`;if(typeof t!=`object`)return JSON.stringify(t);let i,o;if(Array.isArray(t)){for(o=`[`,i=0;i<t.length;i++)i&&(o+=`,`),o+=e(t[i])||`null`;return o+`]`}if(t===null)return`null`;if(a.includes(t)){if(n)return JSON.stringify(`__cycle__`);throw TypeError(`Converting circular structure to JSON`)}let s=a.push(t)-1,c=Object.keys(t).sort(r?.(t));for(o=``,i=0;i<c.length;i++){let n=c[i],r=e(t[n]);r&&(o&&(o+=`,`),o+=JSON.stringify(n)+`:`+r)}return a.splice(s,1),`{`+o+`}`}(e)}function Ve(e){if(e===null)return null;let t=[];for(let n of e)k(n)?t.push(n.geometry()):t.push(n);return t}function Y(e,n){if(!(n instanceof t))throw new u(null,`InvalidParameter`,null);e.push(n.hasZ?n.hasM?[n.x,n.y,n.z,n.m]:[n.x,n.y,n.z]:[n.x,n.y])}function He(e,t){if(g(e)||I(e)){let n=!1,r=!1,i=[],a=t;if(g(e)){for(let t of e)Y(i,t);i.length>0&&(a=e[0].spatialReference,n=e[0].hasZ,r=e[0].hasM)}else if(e instanceof C)i=e._elements,i.length>0&&(n=e._hasZ,r=e._hasM,a=e.get(0).spatialReference);else{if(!I(e))throw new u(null,`InvalidParameter`,null);for(let t of e.toArray())Y(i,t);i.length>0&&(a=e.get(0).spatialReference,n=!0===e.get(0).hasZ,r=!0===e.get(0).hasM)}return i.length===0?null:(se(i)||(i=i.slice().reverse()),new m({rings:[i],spatialReference:a,hasZ:n,hasM:r}))}return e}function Ue(e,t){if(g(e)||I(e)){let r=!1,i=!1,a=[],o=t;if(g(e)){for(let t of e)Y(a,t);a.length>0&&(o=e[0].spatialReference,r=!0===e[0].hasZ,i=!0===e[0].hasM)}else if(e instanceof C)a=e._elements,a.length>0&&(r=e._hasZ,i=e._hasM,o=e.get(0).spatialReference);else if(I(e)){for(let t of e.toArray())Y(a,t);a.length>0&&(o=e.get(0).spatialReference,r=!0===e.get(0).hasZ,i=!0===e.get(0).hasM)}return a.length===0?null:new n({paths:[a],spatialReference:o,hasZ:r,hasM:i})}return e}function We(e,t){if(g(e)||I(e)){let n=!1,r=!1,i=[],a=t;if(g(e)){for(let t of e)Y(i,t);i.length>0&&(a=e[0].spatialReference,n=!0===e[0].hasZ,r=!0===e[0].hasM)}else if(e instanceof C)i=e._elements,i.length>0&&(n=e._hasZ,r=e._hasM,a=e.get(0).spatialReference);else if(I(e)){for(let t of e.toArray())Y(i,t);i.length>0&&(a=e.get(0).spatialReference,n=!0===e.get(0).hasZ,r=!0===e.get(0).hasM)}return i.length===0?null:new te({points:i,spatialReference:a,hasZ:n,hasM:r})}return e}function Ge(e,t=!0){if(e==null)return[];if(g(e)){let n=[];for(let r of e){let e=W(r);(t||e!==``)&&n.push(e)}return n}if(I(e)){let n=[];for(let r=0;r<e.length();r++){let i=W(e.get(r));(t||i!==``)&&n.push(i)}return n}if(D(e)){let n=W(e);if(t||n!==``)return[n]}return[]}var Ke=0;function qe(e){return Ke++,Ke%100==0?(Ke=0,new Promise(t=>{setTimeout(()=>{t(e)},0)})):e}function Je(e,t,n){switch(n){case`&`:return e&t;case`|`:return e|t;case`^`:return e^t;case`<<`:return e<<t;case`>>`:return e>>t;case`>>>`:return e>>>t}}function X(e,t=null){return e==null?null:f(e)||_(e)||h(e)?e:e instanceof d?!0===t?.keepGeometryType?e:e.toJSON():e instanceof v?e.toArray().map(e=>X(e,t)):Array.isArray(e)?e.map(e=>X(e,t)):p(e)?e:L(e)?e.toJSDate():z(e)?e.toString():R(e)?e.toJSDate():typeof e==`object`&&e&&e.castAsJson!==void 0?e.castAsJson(t):null}async function Ye(e,t,n,r,i){i[r]=await Xe(e,t,n)}async function Xe(e,t=null,n=null){if(e instanceof v&&(e=e.toArray()),e==null)return null;if(D(e)||e instanceof d||p(e)||L(e))return X(e,n);if(Array.isArray(e)){let r=[],i=[];for(let a of e)a===null||D(a)||a instanceof d||p(a)||L(a)?i.push(X(a,n)):(i.push(null),r.push(Ye(a,t,n,i.length-1,i)));return r.length>0&&await Promise.all(r),i}return typeof e==`object`&&e&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(t,n):null}function Z(e){return Ze(e)?e.parent:e}function Ze(e){return e&&`declaredClass`in e&&e.declaredClass===`esri.layers.support.SubtypeSublayer`}function Qe(e){return e&&`declaredClass`in e&&e.declaredClass===`esri.layers.SubtypeGroupLayer`}function $e(e,t,n){let r=Z(e.fullSchema());return r===null||!r.fields?null:J(t,r,e,n)}function et(e){let t=Z(e.fullSchema());return t===null?null:t.fields?t.subtypeField?{subtypeField:t.subtypeField,subtypes:t.subtypes?t.subtypes.map(e=>({name:e.name,code:e.code})):[]}:t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map(e=>({name:e.name,code:e.id})):[]}:null:null}function tt(e,t,n,r){let i=Z(e.fullSchema());if(i===null||!i.fields)return null;let a=J(t,i,e,r);if(n===void 0)try{n=e.field(t)}catch{return null}return Le(a,n)}function nt(e,t,n,r){let i=Z(e.fullSchema());if(i===null||!i.fields)return null;if(n===void 0){try{n=e.field(t)}catch{return null}return n}return Re(J(t,i,e,r),n)}function rt(e){return e?.timeZone??`system`}function it(e){let t=Z(e.fullSchema());if(t===null||!t.fields)return null;let n=[];for(let e of t.fields)n.push(ce(e));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField??``,geometryType:le[t.geometryType]===void 0?``:le[t.geometryType],fields:n}}function at(e,t){let n=r.systemTimeZoneCanonicalName;return e===`system`&&(e=n),{version:ot,engineVersion:ie,timeZone:e,userTimeZone:n,spatialReference:t instanceof ee?t.toJSON():t,application:c.applicationName??``,engine:`web`,locale:ne()}}var ot=`1.34`,st=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResult:he,ReturnResult:me,absRound:Te,arcadeVersion:ot,autoCastArrayOfPointsToMultiPoint:We,autoCastArrayOfPointsToPolygon:He,autoCastArrayOfPointsToPolyline:Ue,autoCastFeatureToGeometry:Ve,binaryOperator:Je,breakResult:ge,castAsJson:X,castAsJsonAsync:Xe,castRecordToText:ke,continueResult:_e,defaultExecutingContext:at,defaultTimeZone:rt,defaultUndefined:ye,equalityTest:Oe,featureDomainCodeLookup:nt,featureDomainValueLookup:tt,featureFullDomain:$e,featureSchema:it,featureSubtypes:et,fixNullGeometry:Ie,fixSpatialReference:Fe,formatDate:H,formatNumber:V,getDomain:J,getDomainCode:Re,getDomainValue:Le,getType:be,greaterThanLessThan:De,isArray:g,isBoolean:f,isDate:L,isDateOnly:R,isDictionary:N,isDictionaryLike:Se,isEmpty:we,isFeature:k,isFeatureSet:M,isFeatureSetCollection:P,isFunctionParameter:E,isGeometry:O,isGraphic:ae,isImmutableArray:I,isInteger:re,isJsDate:p,isKnowledgeGraph:F,isModule:ve,isNumber:_,isObject:B,isPixel:j,isSimpleType:D,isString:h,isSubtypeGrouplayer:Qe,isSubtypeSublayer:Ze,isTime:z,isVoid:xe,isVoxel:A,multiReplace:T,parseGeometryFromJson:Pe,pcCheck:Ce,stableStringify:Be,standardiseDateFormat:Ee,tick:qe,toBoolean:Ne,toDate:je,toNumber:q,toNumberArray:Ae,toString:W,toStringArray:Ge,toStringExplicit:G,voidOperation:w},Symbol.toStringTag,{value:`Module`}));function ct(e){lt=e}var lt;function Q(e){return e===null?null:L(e)?e.clone():D(e)?e:O(e)?e.clone():I(e)?e.toArray().map(e=>Q(e)):g(e)?e.map(e=>Q(e)):k(e)?lt.createFromArcadeFeature(e):P(e)||M(e)?e:N(e)||e?.declaredClass===`esri.arcade.Attachment`?e.deepClone():(e?.declaredClass===`esri.arcade.Portal`||F(e)||e instanceof y||E(e),e)}function $(e,t,n=!1,r=!1){if(e==null)return null;if(_(e)||f(e)||h(e)||L(e)||R(e)||z(e))return e;if(g(e)){let i=[];for(let a of e)i.push($(a,t,n,r));return i}if(r&&O(e))return e;let i=new ut;i.immutable=!1;for(let[a,o]of Object.entries(e))o!==void 0&&i.setField(a,$(o,t,n,r));return i.immutable=n,i}var ut=class e{constructor(t){this.declaredClass=`esri.arcade.Dictionary`,this.plain=!1,this.immutable=!0,t instanceof e?this.attributes=t.attributes:t==null?this.attributes=Object.create(null):Object.getPrototypeOf(t)==null?this.attributes=t:this.attributes={__proto__:null,...t}}static containerEntry(t,n){return new e({__proto__:null,key:t,value:n})}static textFormatting(){let t=new e({__proto__:null,newline:`
`,tab:`	`,singlequote:`'`,doublequote:`"`,forwardslash:`/`,backwardslash:`\\`});return t.immutable=!1,t}field(e){let t=e.toLowerCase(),n=this.attributes[e];if(n!==void 0)return n;for(let e in this.attributes)if(e.toLowerCase()===t)return this.attributes[e];throw new u(null,`FieldNotFound`,null,{key:e})}setField(e,t){if(this.immutable)throw new u(null,`Immutable`,null);if(E(t))throw new u(null,`NoFunctionInDictionary`,null);let n=e.toLowerCase();if(t instanceof Date&&(t=r.dateJSToArcadeDate(t)),this.attributes[e]===void 0){for(let e in this.attributes)if(e.toLowerCase()===n)return void(this.attributes[e]=t);this.attributes[e]=t}else this.attributes[e]=t}eraseField(e){if(this.immutable)throw new u(null,`Immutable`,null);if(e in this.attributes)return void delete this.attributes[e];let t=e.toLowerCase();for(let e in this.attributes)if(e.toLowerCase()===t)return void delete this.attributes[e]}hasField(e){let t=e.toLowerCase();if(this.attributes[e]!==void 0)return!0;for(let e in this.attributes)if(e.toLowerCase()===t)return!0;return!1}keys(){let e=[];for(let t in this.attributes)e.push(t);return e=e.sort(),e}values(){return this.keys().map(e=>this.attributes[e])}entryCount(){return Object.keys(this.attributes).length}isEmpty(){return this.entryCount()<=0}castToText(e=!1){return ke(this.attributes,{useNumbersForDates:e})}static convertObjectToArcadeDictionary(t,n,r=!0,i=!1){let a=new e;for(let e in a.immutable=!1,t){let o=t[e];o!==void 0&&a.setField(e.toString(),$(o,n,r,i))}return a.immutable=r,a}static convertJsonToArcade(e,t,n=!1,r=!1){return $(e,t,n,r)}castAsJson(e=null){let t=Object.create(null);for(let n in this.attributes){let r=this.attributes[n];r!==void 0&&(e?.keyTranslate&&(n=e.keyTranslate(n)),t[n]=X(r,e))}return t}async castDictionaryValueAsJsonAsync(e,t,n,r=null,i){let a=await Xe(n,r,i);return e[t]=a,a}async castAsJsonAsync(e=null,t=null){let n=Object.create(null),i=[];for(let a in this.attributes){let o=this.attributes[a];t?.keyTranslate&&(a=t.keyTranslate(a)),o!==void 0&&(D(o)||o instanceof d||o instanceof r?n[a]=X(o,t):i.push(this.castDictionaryValueAsJsonAsync(n,a,o,e,t)))}return i.length>0&&await Promise.all(i),n}deepClone(){let t=new e;t.immutable=!1;for(let e of this.keys())t.setField(e,Q(this.field(e)));return t}};export{R as $,D as A,G as B,We as C,He as D,me as E,T as F,Ae as G,De as H,qe as I,L as J,z as K,je as L,et as M,P as N,q as O,at as P,Ze as Q,ge as R,w as S,it as T,F as U,Ee as V,W,ke as X,Ce as Y,xe as Z,N as _,tt as a,Ue as at,Je as b,nt as c,ye as ct,be as d,fe as dt,Te as et,X as f,x as ft,Ve as g,_e as h,y as ht,j as i,he as it,A as j,O as k,J as l,pe as lt,$e as m,S as mt,Q as n,st as nt,Ne as o,Le as ot,k as p,b as pt,Ie as q,ct as r,we as rt,M as s,Oe as st,ut as t,I as tt,Fe as u,C as ut,rt as v,Se as w,Re as x,E as y,Ge as z};