import{Qa as e,eo as t,io as n,no as r,to as i}from"./index-BqmCqmfp.js";import"./originUtils-Xpg5-Q2D.js";import"./saveUtils-DsVVlvmj.js";import{n as a,t as o}from"./utils-yJnMCzaE.js";var s=`Map Service`,c=`map-image-layer-save`,l=`map-image-layer-save-as`;function u(e){return{isValid:e.type===`map-image`&&!e.sourceJSON?.tileInfo,errorMessage:`Layer.type should be 'map-image' and reference a dynamic (non-cached) map service`}}function d(e){let t=e.layerJSON;return Promise.resolve(t&&Object.keys(t).length?t:null)}function f(e,t){return m(e,t),Promise.resolve()}async function p(n,i){let{parsedUrl:a,title:o,fullExtent:s}=n;i.url=a.path,i.title||=o,i.extent=s?await r(s):null,t(i,e.METADATA),m(n,i)}function m(t,r){i(r,e.DYNAMIC);let a=t.sublayers?.length??0;n(r,e.MULTI_LAYER,a>1),n(r,e.SINGLE_LAYER,a===1)}async function h(e,t){return a({layer:e,itemType:s,validateLayer:u,createItemData:d,errorNamePrefix:c,setItemProperties:f},t)}async function g(e,t,n){return o({layer:e,itemType:s,validateLayer:u,createItemData:d,errorNamePrefix:l,newItem:t,setItemProperties:p},n)}export{h as save,g as saveAs};