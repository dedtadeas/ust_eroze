const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HUDMaterial.glsl-Co9zwUzW.js","assets/HUDMaterial.glsl-CE_2EJp4.js","assets/index-BqmCqmfp.js","assets/index-kIqmb12G.css","assets/View.glsl-B6vOoRsw.js","assets/Float3BindUniform-BrSuqm5i.js","assets/Uniform-DXwqrKA1.js","assets/Float3DrawUniform-UsZpj3mh.js","assets/FloatBindUniform-TDSkRzMc.js","assets/Matrix4BindUniform-BUS9JrUC.js","assets/glsl-C2sn87h0.js","assets/VisualVariables.glsl-xWfUXTFa.js","assets/FloatsPassUniform-BT-ZsPj-.js","assets/NoParameters-CpAItLvD.js","assets/AlphaCutoff-DTq90Si4.js","assets/HighlightReadBitmap.glsl-DB3CoKpG.js","assets/Texture2DBindUniform-CSngcuNV.js","assets/Float3PassUniform-Co8OqiAU.js","assets/Float4PassUniform-Bo_mhcMi.js","assets/ObjectAndLayerIdColor.glsl-CrEuv_nr.js","assets/HUDVisibility.glsl-BkjA-IFP.js","assets/VerticalOffset.glsl-DYy5IZ2H.js","assets/ScreenSizePerspective.glsl-CRhKUJLC.js","assets/BooleanBindUniform-8vtZmSI6.js","assets/Float4BindUniform-CtMVDjau.js","assets/FloatPassUniform-BEwJjV4q.js","assets/TerrainDepthTest.glsl-neHlKy5u.js","assets/ReadDepth.glsl-DvJ8t0GM.js","assets/Float2BindUniform-BJ75NEvo.js","assets/Float2PassUniform-D4VTGzqn.js","assets/Texture2DPassUniform-Cd7cdF1a.js","assets/ShaderBuilder-C3C7fUwK.js"])))=>i.map(i=>d[i]);
import{$g as e,$l as t,Al as n,CD as r,Cw as i,Dt as a,Ev as o,Fl as s,H_ as c,Ih as l,Il as u,Jg as d,Jl as f,Lh as p,Ng as m,Nh as h,Ol as g,Qg as _,Rf as v,Rl as y,SS as b,Ug as x,Ul as S,Wh as C,Wl as w,XE as T,Xf as E,Xg as D,Zf as O,Zv as k,_t as A,_y as ee,aS as te,ab as ne,ag as j,bf as re,bt as ie,dv as ae,eu as oe,gy as se,ht as ce,id as le,iu as M,jt as ue,k_ as de,my as fe,np as pe,nu as me,ob as he,od as ge,ru as N,sc as _e,uv as ve,xt as ye,yt as be}from"./index-BqmCqmfp.js";import{o as xe}from"./meshVertexSpaceUtils-Y8FeTLov.js";import{n as Se,t as Ce}from"./Indices-BsTLKVdx.js";import{a as we,m as Te,y as Ee}from"./plane-CTjDePZl.js";import{O as De,U as Oe}from"./BufferView-DNaZpbJX.js";import{a as ke}from"./Util-3rPi0NfK.js";import{n as Ae}from"./dehydratedPoint-Dwb3orme.js";import{T as je}from"./sphere-CicnK0Bn.js";import{i as P}from"./orientedBoundingBox-DZQLHGx0.js";import{h as Me,n as Ne,r as Pe,y as Fe}from"./Emissions.glsl-DaTtsIIp.js";import{r as Ie}from"./VertexAttributeLocations-IAhvKZqd.js";import{a as Le,r as Re}from"./hydratedFeatures-BSV-K3yB.js";import{n as F,r as ze,t as I}from"./vec3f32-CZ7wi78s.js";import{a as Be,i as Ve,n as He}from"./renderState-Be6uDhGv.js";import{A as Ue,D as We,F as Ge,L as Ke,O as qe,P as L,S as Je,T as Ye,_ as Xe,b as Ze,g as Qe,h as $e,k as R,v as et,y as tt}from"./DefaultBufferWriter-BihhFqiH.js";import{i as nt,t as rt}from"./MaterialUtil-DdudaLIK.js";import{c as it,s as at}from"./SceneLighting-BWVxtKEm.js";import{a as ot,r as z,s as st,t as ct}from"./FloatArray-cqhQU3FO.js";import{d as lt,f as ut,u as dt}from"./FloatsPassUniform-BT-ZsPj-.js";import{t as ft}from"./AlphaCutoff-DTq90Si4.js";import{i as pt}from"./HUDVisibility.glsl-BkjA-IFP.js";import{i as mt,r as ht,t as gt}from"./HUDMaterial.glsl-CE_2EJp4.js";function _t(e,t=!1){return e<=1024?t?Array(e).fill(0):Array(e):Oe(e)}function vt(e,t,n=null){let r=[],i=t.mapPositions,a=yt(t,r),o=a.data,s=a.indices.length,c=Se(s);return bt(t,r,c),Ct(t,r,c),xt(t,r,c),St(t,r,a.indices,c),wt(t,r,a.indices,c),Tt(t,r),Et(t,r,a.indices,c),Dt(t,r,o),new R(e,r,i,2,n)}function yt(e,t){let{attributeData:{position:n},removeDuplicateStartEnd:r}=e,i=Ot(n)&&r,a=n.length/3-(i?1:0),o=Array(2*(a-1)),s=i?n.slice(0,-3):n,c=0;for(let e=0;e<a-1;e++)o[c++]=e,o[c++]=e+1;let l=new P(s,o,3,i);return t.push([`position`,l]),l}function bt(e,t,n){if(e.attributeData.colorFeature!=null)return;let r=e.attributeData.color;t.push([`color`,new P(r??be,n,4)])}function xt(e,t,n){e.attributeData.normal&&t.push([`normal`,new P(e.attributeData.normal,n,3)])}function St(e,t,n,r){let i=e.attributeData.colorFeature;i!=null&&(typeof i==`number`?t.push([`colorFeatureAttribute`,new P([i],r,1,!0)]):t.push([`colorFeatureAttribute`,new P(i,n,1,!0)]))}function Ct(e,t,n){e.attributeData.sizeFeature??t.push([`size`,new P([e.attributeData.size??1],n,1,!0)])}function wt(e,t,n,r){let i=e.attributeData.sizeFeature;i!=null&&(typeof i==`number`?t.push([`sizeFeatureAttribute`,new P([i],r,1,!0)]):t.push([`sizeFeatureAttribute`,new P(i,n,1,!0)]))}function Tt(e,t){let{attributeData:{position:n,timeStamps:r}}=e;if(!r)return;let i=n.length/3,a=Array(2*(i-1)),o=0;for(let e=0;e<i-1;e++)a[o++]=e,a[o++]=e+1;t.push([`timeStamps`,new P(r,a,4,!0)])}function Et(e,t,n,r){let i=e.attributeData.opacityFeature;i!=null&&(typeof i==`number`?t.push([`opacityFeatureAttribute`,new P([i],r,1,!0)]):t.push([`opacityFeatureAttribute`,new P(i,n,1,!0)]))}function Dt(e,t,n){if(e.overlayInfo==null||e.overlayInfo.renderCoordsHelper.viewingMode!==1||!e.overlayInfo.spatialReference.isGeographic)return;let r=O(n.length),i=b(e.overlayInfo.spatialReference);for(let e=0;e<r.length;e+=3)m(n,e,r,e,i);let a=n.length/3,s=z(a+1),c=kt,l=At,u=0,d=0;o(c,r[d++],r[d++]),d++,s[0]=0;for(let e=1;e<a+1;++e)e===a&&(d=0),o(l,r[d++],r[d++]),d++,u+=ve(c,l),s[e]=u,[c,l]=[l,c];t.push([`distanceToStart`,new P(s,t[0][1].indices,1,!0)])}function Ot(e){let t=e.length;return e[0]===e[t-3]&&e[1]===e[t-2]&&e[2]===e[t-1]}var kt=le(),At=le();function jt(e,t){let n=_t(e.length*4),r=e[0],i=e[e.length-1];for(let a=0;a<e.length;a++)n[a*4]=e[a],n[a*4+1]=r,n[a*4+2]=i,n[a*4+3]=t+.5;return n}function Mt(e,t){let n=e[t],r=e[t+1],i=e[t+2];return Math.sqrt(n*n+r*r+i*i)}function Nt(e,t){let n=e[t],r=e[t+1],i=e[t+2],a=1/Math.sqrt(n*n+r*r+i*i);e[t]*=a,e[t+1]*=a,e[t+2]*=a}function Pt(e,t,n){e[t]*=n,e[t+1]*=n,e[t+2]*=n}function Ft(e,t,n,r,i,a=t){(i||=e)[a]=e[t]+n[r],i[a+1]=e[t+1]+n[r+1],i[a+2]=e[t+2]+n[r+2]}function It(){return Rt??=Lt(),Rt}function Lt(){let e=new P([0,0,0,255,255,0,255,255],[0,1,2,3],2,!0);return new Ue([[`uv0`,e]])}var Rt=null,zt=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],Bt=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],Vt=[0,0,1,0,1,1,0,1],Ht=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],Ut=Array(36);for(let e=0;e<6;e++)for(let t=0;t<6;t++)Ut[6*e+t]=e;var B=Array(36);for(let e=0;e<6;e++)B[6*e]=0,B[6*e+1]=1,B[6*e+2]=2,B[6*e+3]=2,B[6*e+4]=3,B[6*e+5]=0;function Wt(e,t){Array.isArray(t)||(t=[t,t,t]);let n=Array(24);for(let e=0;e<8;e++)n[3*e]=zt[e][0]*t[0],n[3*e+1]=zt[e][1]*t[1],n[3*e+2]=zt[e][2]*t[2];return new R(e,[[`position`,new P(n,Ht,3,!0)],[`normal`,new P(Bt,Ut,3)],[`uv0`,new P(Vt,B,2)]])}var Gt=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],Kt=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],qt=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0],Jt=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];function Yt(e,t){Array.isArray(t)||(t=[t,t,t]);let n=Array(18);for(let e=0;e<6;e++)n[3*e]=Gt[e][0]*t[0],n[3*e+1]=Gt[e][1]*t[1],n[3*e+2]=Gt[e][2]*t[2];return new R(e,[[`position`,new P(n,qt,3,!0)],[`normal`,new P(Kt,Jt,3)]])}var Xt=F(-.5,0,-.5),Zt=F(.5,0,-.5),Qt=F(0,0,.5),$t=F(0,.5,0),V=I(),H=I(),U=I(),W=I(),G=I();w(V,Xt,$t),w(H,Xt,Zt),S(U,V,H),g(U,U),w(V,Zt,$t),w(H,Zt,Qt),S(W,V,H),g(W,W),w(V,Qt,$t),w(H,Qt,Xt),S(G,V,H),g(G,G);var en=[Xt,Zt,Qt,$t],tn=[0,-1,0,U[0],U[1],U[2],W[0],W[1],W[2],G[0],G[1],G[2]],nn=[0,1,2,3,1,0,3,2,1,3,0,2],rn=[0,0,0,1,1,1,2,2,2,3,3,3];function an(e,t){Array.isArray(t)||(t=[t,t,t]);let n=Array(12);for(let e=0;e<4;e++)n[3*e]=en[e][0]*t[0],n[3*e+1]=en[e][1]*t[1],n[3*e+2]=en[e][2]*t[2];return new R(e,[[`position`,new P(n,nn,3,!0)],[`normal`,new P(tn,rn,3)]])}function on(e,t,n,r,i={uv:!0}){let a=-Math.PI,o=2*Math.PI,s=-Math.PI/2,c=Math.PI,l=Math.max(3,Math.floor(n)),u=Math.max(2,Math.floor(r)),d=(l+1)*(u+1),f=z(3*d),p=z(3*d),m=z(2*d),h=[],g=0;for(let e=0;e<=u;e++){let n=[],r=e/u,i=s+r*c,d=Math.cos(i);for(let e=0;e<=l;e++){let s=e/l,c=a+s*o,u=Math.cos(c)*d,h=Math.sin(i),_=-Math.sin(c)*d;f[3*g]=u*t,f[3*g+1]=h*t,f[3*g+2]=_*t,p[3*g]=u,p[3*g+1]=h,p[3*g+2]=_,m[2*g]=s,m[2*g+1]=r,n.push(g),++g}h.push(n)}let _=[];for(let e=0;e<u;e++)for(let t=0;t<l;t++){let n=h[e][t],r=h[e][t+1],i=h[e+1][t+1],a=h[e+1][t];e===0?(_.push(n),_.push(i),_.push(a)):e===u-1?(_.push(n),_.push(r),_.push(i)):(_.push(n),_.push(r),_.push(i),_.push(i),_.push(a),_.push(n))}let v=[[`position`,new P(f,_,3,!0)],[`normal`,new P(p,_,3,!0)]];return i.uv&&v.push([`uv0`,new P(m,_,2,!0)]),i.offset&&(v[0][0]=`offset`,v.push([`position`,new P(Float64Array.from(i.offset),Se(_.length),3,!0)])),new R(e,v)}function sn(e,t,n,r){let i=cn(t,n,r);return new R(e,i)}function cn(e,t,n){let r=e,i,a;if(n)i=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],a=[0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1];else{let e=r*(1+Math.sqrt(5))/2;i=[-r,e,0,r,e,0,-r,-e,0,r,-e,0,0,-r,e,0,r,e,0,-r,-e,0,r,-e,e,0,-r,e,0,r,-e,0,-r,-e,0,r],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]}for(let t=0;t<i.length;t+=3)Pt(i,t,e/Mt(i,t));let o={};function s(t,n){t>n&&([t,n]=[n,t]);let r=t.toString()+`.`+n.toString();if(o[r])return o[r];let a=i.length;return i.length+=3,Ft(i,3*t,i,3*n,i,a),Pt(i,a,e/Mt(i,a)),a/=3,o[r]=a,a}for(let e=0;e<t;e++){let e=a.length,t=Array(4*e);for(let n=0;n<e;n+=3){let e=a[n],r=a[n+1],i=a[n+2],o=s(e,r),c=s(r,i),l=s(i,e),u=4*n;t[u]=e,t[u+1]=o,t[u+2]=l,t[u+3]=r,t[u+4]=c,t[u+5]=o,t[u+6]=i,t[u+7]=l,t[u+8]=c,t[u+9]=o,t[u+10]=c,t[u+11]=l}a=t,o={}}let c=ct(i);for(let e=0;e<c.length;e+=3)Nt(c,e);return[[`position`,new P(ct(i),a,3,!0)],[`normal`,new P(c,a,3,!0)]]}function ln(e,{normal:t,position:n,color:r,rotation:i,size:a,centerOffsetAndDistance:o,uvi:s,featureAttribute:c,olidColor:l=null}={}){let u=n?_(n):d(),f=t?_(t):D(0,0,1),p=r?[r[0],r[1],r[2],r.length>3?r[3]:255]:[255,255,255,255],m=a!=null&&a.length===2?a:[1,1],h=i==null?[0]:[i],g=Se(1),v=[[`position`,new P(u,g,3,!0)],[`normal`,new P(f,g,3,!0)],[`color`,new P(p,g,4,!0)],[`size`,new P(m,g,2)],[`rotation`,new P(h,g,1,!0)]];if(s&&v.push([`uvi`,new P(s,g,s.length)]),o!=null){let e=[o[0],o[1],o[2],o[3]];v.push([`centerOffsetAndDistance`,new P(e,g,4)])}if(c){let e=[c[0],c[1],c[2],c[3]];v.push([`featureAttribute`,new P(e,g,4)])}return new R(e,v,null,1,l,void 0,It())}function un(e,t,n,r,i=!0,a=!0){let o=0,s=t,c=e,l=F(0,o,0),u=F(0,o+c,0),d=F(0,-1,0),f=F(0,1,0);r&&(o=c,u=F(0,0,0),l=F(0,o,0),d=F(0,1,0),f=F(0,-1,0));let p=[u,l],m=[d,f],h=n+2,g=Math.sqrt(c*c+s*s);if(r)for(let e=n-1;e>=0;e--){let t=e*(2*Math.PI/n),r=F(Math.cos(t)*s,o,Math.sin(t)*s);p.push(r);let i=F(c*Math.cos(t)/g,-s/g,c*Math.sin(t)/g);m.push(i)}else for(let e=0;e<n;e++){let t=e*(2*Math.PI/n),r=F(Math.cos(t)*s,o,Math.sin(t)*s);p.push(r);let i=F(c*Math.cos(t)/g,s/g,c*Math.sin(t)/g);m.push(i)}let _=[],v=[];if(i){for(let e=3;e<p.length;e++)_.push(1),_.push(e-1),_.push(e),v.push(0),v.push(0),v.push(0);_.push(p.length-1),_.push(2),_.push(1),v.push(0),v.push(0),v.push(0)}if(a){for(let e=3;e<p.length;e++)_.push(e),_.push(e-1),_.push(0),v.push(e),v.push(e-1),v.push(1);_.push(0),_.push(2),_.push(p.length-1),v.push(1),v.push(2),v.push(m.length-1)}let y=z(3*h);for(let e=0;e<h;e++)y[3*e]=p[e][0],y[3*e+1]=p[e][1],y[3*e+2]=p[e][2];let b=z(3*h);for(let e=0;e<h;e++)b[3*e]=m[e][0],b[3*e+1]=m[e][1],b[3*e+2]=m[e][2];return[[`position`,new P(y,_,3,!0)],[`normal`,new P(b,v,3,!0)]]}function dn(e,t,n,r,i,a=!0,o=!0){return new R(e,un(t,n,r,i,a,o))}function fn(e,n,r,i,a,o,s){let c=a?ze(a):F(1,0,0),l=o?ze(o):F(0,0,0);s??=!0;let d=I();g(d,c);let p=I();f(p,d,Math.abs(n));let m=I();f(m,p,-.5),M(m,m,l);let h=F(0,1,0);Math.abs(1-u(d,h))<.2&&t(h,0,0,1);let _=I();S(_,d,h),g(_,_),S(h,_,d);let v=2*i+(s?2:0),y=i+(s?2:0),b=z(3*v),x=z(3*y),C=z(2*v),w=Array(3*i*(s?4:2)),T=Array(3*i*(s?4:2));s&&(b[3*(v-2)]=m[0],b[3*(v-2)+1]=m[1],b[3*(v-2)+2]=m[2],C[2*(v-2)]=0,C[2*(v-2)+1]=0,b[3*(v-1)]=b[3*(v-2)]+p[0],b[3*(v-1)+1]=b[3*(v-2)+1]+p[1],b[3*(v-1)+2]=b[3*(v-2)+2]+p[2],C[2*(v-1)]=1,C[2*(v-1)+1]=1,x[3*(y-2)]=-d[0],x[3*(y-2)+1]=-d[1],x[3*(y-2)+2]=-d[2],x[3*(y-1)]=d[0],x[3*(y-1)+1]=d[1],x[3*(y-1)+2]=d[2]);let E=(e,t,n)=>{w[e]=t,T[e]=n},D=0,O=I(),k=I();for(let e=0;e<i;e++){let t=e*(2*Math.PI/i);f(O,h,Math.sin(t)),f(k,_,Math.cos(t)),M(O,O,k),x[3*e]=O[0],x[3*e+1]=O[1],x[3*e+2]=O[2],f(O,O,r),M(O,O,m),b[3*e]=O[0],b[3*e+1]=O[1],b[3*e+2]=O[2],C[2*e]=e/i,C[2*e+1]=0,b[3*(e+i)]=b[3*e]+p[0],b[3*(e+i)+1]=b[3*e+1]+p[1],b[3*(e+i)+2]=b[3*e+2]+p[2],C[2*(e+i)]=e/i,C[2*e+1]=1;let n=(e+1)%i;E(D++,e,e),E(D++,e+i,e),E(D++,n,n),E(D++,n,n),E(D++,e+i,e),E(D++,n+i,n)}if(s){for(let e=0;e<i;e++){let t=(e+1)%i;E(D++,v-2,y-2),E(D++,e,y-2),E(D++,t,y-2)}for(let e=0;e<i;e++){let t=(e+1)%i;E(D++,e+i,y-1),E(D++,v-1,y-1),E(D++,t+i,y-1)}}let A=[[`position`,new P(b,w,3,!0)],[`normal`,new P(x,T,3,!0)],[`uv0`,new P(C,w,2,!0)]];return new R(e,A)}function pn(e,t,n,r,i,a){r||=10,i=i==null||i,ke(t.length>1);let o=[[0,0,0]],s=[],c=[];for(let e=0;e<r;e++){s.push([0,-e-1,-(e+1)%r-1]);let t=e/r*2*Math.PI;c.push([Math.cos(t)*n,Math.sin(t)*n])}return mn(e,c,t,o,s,i,a)}function mn(e,n,r,i,a,o,s=F(0,0,0)){let c=n.length,l=z(r.length*c*3+(6*i.length||0)),u=z(r.length*c*3+(i?6:0)),p=[],m=[],h=0,_=0,v=d(),y=d(),b=d(),x=d(),C=d(),T=d(),E=d(),D=d(),O=d(),k=d(),A=d(),ee=d(),te=d(),ne=Ee();t(O,0,1,0),w(y,r[1],r[0]),g(y,y),o?(M(D,r[0],s),g(b,D)):t(b,0,0,1),bn(y,b,O,O,C,b,xn),N(x,b),N(ee,C);for(let e=0;e<i.length;e++)f(T,C,i[e][0]),f(D,b,i[e][2]),M(T,T,D),M(T,T,r[0]),l[h++]=T[0],l[h++]=T[1],l[h++]=T[2];u[_++]=-y[0],u[_++]=-y[1],u[_++]=-y[2];for(let e=0;e<a.length;e++)p.push(a[e][0]>0?a[e][0]:-a[e][0]-1+i.length),p.push(a[e][1]>0?a[e][1]:-a[e][1]-1+i.length),p.push(a[e][2]>0?a[e][2]:-a[e][2]-1+i.length),m.push(0),m.push(0),m.push(0);let j=i.length,re=i.length-1;for(let e=0;e<r.length;e++){let t=!1;e>0&&(N(v,y),e<r.length-1?(w(y,r[e+1],r[e]),g(y,y)):t=!0,M(k,v,y),g(k,k),M(A,r[e-1],x),Te(r[e],k,ne),we(ne,je(A,v),D)?(w(D,D,r[e]),g(b,D),S(C,k,b),g(C,C)):bn(k,x,ee,O,C,b,xn),N(x,b),N(ee,C)),o&&(M(D,r[e],s),g(te,D));for(let i=0;i<c;i++)if(f(T,C,n[i][0]),f(D,b,n[i][1]),M(T,T,D),g(E,T),u[_++]=E[0],u[_++]=E[1],u[_++]=E[2],M(T,T,r[e]),l[h++]=T[0],l[h++]=T[1],l[h++]=T[2],!t){let e=(i+1)%c;p.push(j+i),p.push(j+c+i),p.push(j+e),p.push(j+e),p.push(j+c+i),p.push(j+c+e);for(let e=0;e<6;e++){let t=p.length-6;m.push(p[t+e]-re)}}j+=c}let ie=r[r.length-1];for(let e=0;e<i.length;e++)f(T,C,i[e][0]),f(D,b,i[e][1]),M(T,T,D),M(T,T,ie),l[h++]=T[0],l[h++]=T[1],l[h++]=T[2];let ae=_/3;u[_++]=y[0],u[_++]=y[1],u[_++]=y[2];let oe=j-c;for(let e=0;e<a.length;e++)p.push(a[e][0]>=0?j+a[e][0]:-a[e][0]-1+oe),p.push(a[e][2]>=0?j+a[e][2]:-a[e][2]-1+oe),p.push(a[e][1]>=0?j+a[e][1]:-a[e][1]-1+oe),m.push(ae),m.push(ae),m.push(ae);let se=[[`position`,new P(l,p,3,!0)],[`normal`,new P(u,m,3,!0)]];return new R(e,se)}function hn(e,t,n,r,i){let a=O(3*t.length),o=Array(2*(t.length-1)),s=0,c=0;for(let e=0;e<t.length;e++){for(let n=0;n<3;n++)a[s++]=t[e][n];e>0&&(o[c++]=e-1,o[c++]=e)}let l=[[`position`,new P(a,o,3,!0)]];if(n&&n.length===t.length&&n[0].length===3){let e=z(3*n.length),r=0;for(let i=0;i<t.length;i++)for(let t=0;t<3;t++)e[r++]=n[i][t];l.push([`normal`,new P(e,o,3,!0)])}if(r&&l.push([`color`,new P(r,Ce(r.length/4),4)]),i&&i.length===t.length){let e=jt(i,1);l.push([`timeStamps`,new P(e,o,4,!0)])}return new R(e,l,null,2)}function gn(e,t,n,r,i,a=0){let o=Array(18),s=[[-n,a,i/2],[r,a,i/2],[0,t+a,i/2],[-n,a,-i/2],[r,a,-i/2],[0,t+a,-i/2]],c=[0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5];for(let e=0;e<6;e++)o[3*e]=s[e][0],o[3*e+1]=s[e][1],o[3*e+2]=s[e][2];return new R(e,[[`position`,new P(o,c,3,!0)]])}function _n(e,r){let i=e.getMutableAttribute(`position`).data;for(let e=0;e<i.length;e+=3){let a=i[e],o=i[e+1],s=i[e+2];t(K,a,o,s),n(K,K,r),i[e]=K[0],i[e+1]=K[1],i[e+2]=K[2]}}function vn(e,t=e){let n=e.attributes,r=n.get(`position`).data,i=n.get(`normal`).data;if(i){let e=t.getMutableAttribute(`normal`).data;for(let t=0;t<i.length;t+=3){let n=i[t+1];e[t+1]=-i[t+2],e[t+2]=n}}if(r){let e=t.getMutableAttribute(`position`).data;for(let t=0;t<r.length;t+=3){let n=r[t+1];e[t+1]=-r[t+2],e[t+2]=n}}}function yn(e,t,n,r,i){return!(Math.abs(u(t,e))>i)&&(S(n,e,t),g(n,n),S(r,n,e),g(r,r),!0)}function bn(e,t,n,r,i,a,o){return yn(e,t,i,a,o)||yn(e,n,i,a,o)||yn(e,r,i,a,o)}var xn=.99619469809,K=d();function Sn(e){return e.type===`point`}function Cn(e){return e instanceof Float32Array&&e.length>=16}function wn(e){return Array.isArray(e)&&e.length>=16}function Tn(e){return Cn(e)||wn(e)}var En=class extends at{constructor(e,t){super(e,t,new it(ht,()=>i(()=>import(`./HUDMaterial.glsl-Co9zwUzW.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]))),Ie([On,jn()].map(st))),this.primitiveType=t.occlusionPass?_e.POINTS:_e.TRIANGLE_STRIP}initializePipeline(e){let{oitPass:t,hasPolygonOffset:n,draped:r,output:i,depthTestEnabled:a,occlusionPass:o}=e,s=a&&!r&&t!==1&&!o&&i!==9;return He({blending:Me(i)?Ge(t,!0):null,depthTest:a&&!r?{func:515}:null,depthWrite:s?Ve:null,drawBuffers:Ke(t,i),colorWrite:Be,polygonOffset:n?Dn:null})}},Dn={factor:0,units:-4},On=ot().vec2u8(`uv0`,{glNormalized:!0}),kn=ot().vec3f(`position`).vec3f(`normal`).vec4i16(`uvi`).vec4u8(`color`).vec2f(`size`).f32(`rotation`).vec4f(`centerOffsetAndDistance`).vec4f(`featureAttribute`),An=kn.clone().vec4u8(`olidColor`);function jn(){return lt()?An:kn}var q=class extends qe{constructor(e){super(),this.spherical=e,this.screenCenterOffsetUnitsEnabled=!1,this.occlusionTestEnabled=!0,this.signedDistanceFieldEnabled=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.hasVVSize=!1,this.hasVVColor=!1,this.hasVerticalOffset=!1,this.hasScreenSizePerspective=!1,this.hasRotation=!1,this.debugDrawLabelBorder=!1,this.hasPolygonOffset=!1,this.depthTestEnabled=!0,this.pixelSnappingEnabled=!0,this.draped=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.occlusionPass=!1,this.occludedFragmentFade=!1,this.horizonCullingEnabled=!0,this.isFocused=!0,this.olidColorInstanced=!1,this.textureCoordinateType=0,this.emissionSource=0,this.discardInvisibleFragments=!0,this.hasVVInstancing=!1,this.snowCover=!1}};r([L()],q.prototype,`screenCenterOffsetUnitsEnabled`,void 0),r([L()],q.prototype,`occlusionTestEnabled`,void 0),r([L()],q.prototype,`signedDistanceFieldEnabled`,void 0),r([L()],q.prototype,`sampleSignedDistanceFieldTexelCenter`,void 0),r([L()],q.prototype,`hasVVSize`,void 0),r([L()],q.prototype,`hasVVColor`,void 0),r([L()],q.prototype,`hasVerticalOffset`,void 0),r([L()],q.prototype,`hasScreenSizePerspective`,void 0),r([L()],q.prototype,`hasRotation`,void 0),r([L()],q.prototype,`debugDrawLabelBorder`,void 0),r([L()],q.prototype,`hasPolygonOffset`,void 0),r([L()],q.prototype,`depthTestEnabled`,void 0),r([L()],q.prototype,`pixelSnappingEnabled`,void 0),r([L()],q.prototype,`draped`,void 0),r([L()],q.prototype,`terrainDepthTest`,void 0),r([L()],q.prototype,`cullAboveTerrain`,void 0),r([L()],q.prototype,`occlusionPass`,void 0),r([L()],q.prototype,`occludedFragmentFade`,void 0),r([L()],q.prototype,`horizonCullingEnabled`,void 0),r([L()],q.prototype,`isFocused`,void 0);var Mn=class extends We{constructor(e,t){super(e,$n),this.produces=new Map([[13,e=>Fe(e)&&!this.parameters.drawAsLabel],[14,e=>Fe(e)&&this.parameters.drawAsLabel],[12,()=>this.parameters.occlusionTest],[18,e=>this.parameters.draped&&Fe(e)]]),this._visible=!0,this._configuration=new q(t)}getConfiguration(e,t){let n=this.parameters.draped;return super.getConfiguration(e,t,this._configuration),this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasVerticalOffset=!!this.parameters.verticalOffset,this._configuration.hasScreenSizePerspective=!!this.parameters.screenSizePerspective,this._configuration.screenCenterOffsetUnitsEnabled=this.parameters.centerOffsetUnits===`screen`,this._configuration.hasPolygonOffset=this.parameters.polygonOffset,this._configuration.draped=n,this._configuration.occlusionTestEnabled=this.parameters.occlusionTest,this._configuration.pixelSnappingEnabled=this.parameters.pixelSnappingEnabled,this._configuration.signedDistanceFieldEnabled=this.parameters.textureIsSignedDistanceField,this._configuration.sampleSignedDistanceFieldTexelCenter=this.parameters.sampleSignedDistanceFieldTexelCenter,this._configuration.hasRotation=this.parameters.hasRotation,this._configuration.hasVVSize=!!this.parameters.vvSize,this._configuration.hasVVColor=!!this.parameters.vvColor,this._configuration.occlusionPass=t.slot===12,this._configuration.occludedFragmentFade=!n&&this.parameters.occludedFragmentFade,this._configuration.horizonCullingEnabled=this.parameters.horizonCullingEnabled,this._configuration.isFocused=this.parameters.isFocused,this._configuration.depthTestEnabled=this.parameters.depthEnabled||t.slot===12,Me(e)&&(this._configuration.debugDrawLabelBorder=!!ut.LABELS_SHOW_BORDER),this._configuration.oitPass=t.oitPass,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration}intersect(e,r,i,a,o,s){let{options:{selectionMode:l,hud:u,excludeLabels:p},point:m,camera:_}=i,{parameters:v}=this;if(!l||!u||p&&v.isLabel||!e.visible||!m||!_)return;let y=e.attributes.get(`featureAttribute`),b=y==null?null:ye(y.data,Jn),{scaleX:x,scaleY:S}=tr(b,v,_.pixelRatio);c(Un,r),e.attributes.has(`featureAttribute`)&&In(Un);let C=e.attributes.get(`position`),T=e.attributes.get(`size`),E=e.attributes.get(`normal`),D=e.attributes.get(`rotation`),O=e.attributes.get(`centerOffsetAndDistance`);ke(C.size>=3);let k=gt(v),A=this.parameters.centerOffsetUnits===`screen`;for(let e=0;e<C.data.length/C.size;e++){let a=e*C.size;t(J,C.data[a],C.data[a+1],C.data[a+2]),n(J,J,r),n(J,J,_.viewMatrix);let o=e*O.size;if(t(Z,O.data[o],O.data[o+1],O.data[o+2]),!A&&(J[0]+=Z[0],J[1]+=Z[1],Z[2]!==0)){let e=Z[2];g(Z,J),w(J,J,f(Z,Z,e))}let c=e*E.size;if(t(Y,E.data[c],E.data[c+1],E.data[c+2]),Fn(Y,Un,_,Yn),nr(this.parameters,J,Yn,_,Rn),_.applyProjection(J,X),X[0]>-1){A&&(Z[0]||Z[1])&&(X[0]+=Z[0]*_.pixelRatio,Z[1]!==0&&(X[1]+=Rn.alignmentEvaluator.apply(Z[1])*_.pixelRatio),_.unapplyProjection(X,J)),X[0]+=this.parameters.screenOffset[0]*_.pixelRatio,X[1]+=this.parameters.screenOffset[1]*_.pixelRatio,X[0]=Math.floor(X[0]),X[1]=Math.floor(X[1]);let t=e*T.size;Q[0]=T.data[t],Q[1]=T.data[t+1],Rn.evaluator.applyVec2(Q,Q);let r=Xn*_.pixelRatio,a=0;v.textureIsSignedDistanceField&&(a=Math.min(v.outlineSize,.5*Q[0])*_.pixelRatio/2),Q[0]*=x,Q[1]*=S;let o=e*D.size,c=v.rotation+D.data[o];if(Ln(m,X[0],X[1],Q,r,a,c,v,k)){let e=i.ray;if(n(Bn,J,h(Gn,_.viewMatrix)),X[0]=m[0],X[1]=m[1],_.unprojectFromRenderScreen(X,J)){let t=d();N(t,e.direction);let n=1/me(t);f(t,t,n),s(oe(e.origin,J)*n,t,-1,Bn)}}}}}intersectDraped(e,t,n,r,i){let a=e.attributes.get(`position`),o=e.attributes.get(`size`),s=e.attributes.get(`rotation`),c=this.parameters,l=gt(c),u=e.attributes.get(`featureAttribute`),d=u==null?null:ye(u.data,Jn),{scaleX:f,scaleY:p}=tr(d,c,e.screenToWorldRatio),m=Zn*e.screenToWorldRatio;for(let t=0;t<a.data.length/a.size;t++){let u=t*a.size,d=a.data[u],h=a.data[u+1],g=t*o.size;Q[0]=o.data[g],Q[1]=o.data[g+1];let _=0;c.textureIsSignedDistanceField&&(_=Math.min(c.outlineSize,.5*Q[0])*e.screenToWorldRatio/2),Q[0]*=f,Q[1]*=p;let v=t*s.size,y=c.rotation+s.data[v];Ln(n,d,h,Q,m,_,y,c,l)&&r(i.distance,i.normal,-1)}}createBufferWriter(){return new er}applyShaderOffsetsView(e,t,n,r,i,a,o){let s=Fn(t,n,i,Yn);return this._applyVerticalGroundOffsetView(e,s,i,o),nr(this.parameters,o,s,i,a),this._applyPolygonOffsetView(o,s,r[3],i,o),this._applyCenterOffsetView(o,r,o),o}applyShaderOffsetsNDC(e,t,n,r,i){return this._applyCenterOffsetNDC(e,t,n,r),i!=null&&N(i,r),this._applyPolygonOffsetNDC(r,t,n,r),r}_applyPolygonOffsetView(e,t,n,r,i){let a=r.aboveGround?1:-1,o=Math.sign(n);o===0&&(o=a);let s=a*o;if(this.parameters.shaderPolygonOffset<=0)return N(i,e);let c=ne(Math.abs(t.cosAngle),.01,1),l=1-Math.sqrt(1-c*c)/c/r.viewport[2];return f(i,e,s>0?l:1/l),i}_applyVerticalGroundOffsetView(e,t,n,r){let i=me(e),a=n.aboveGround?1:-1,o=n.computeRenderPixelSizeAtDist(i)*pt,s=f(J,t.normal,a*o);return M(r,e,s),r}_applyCenterOffsetView(e,t,n){let r=this.parameters.centerOffsetUnits!==`screen`;return n!==e&&N(n,e),r&&(n[0]+=t[0],n[1]+=t[1],t[2]&&(g(Y,n),y(n,n,f(Y,Y,t[2])))),n}_applyCenterOffsetNDC(e,t,n,r){let i=this.parameters.centerOffsetUnits!==`screen`;return r!==e&&N(r,e),i||(r[0]+=t[0]/n.fullWidth*2,r[1]+=t[1]/n.fullHeight*2),r}_applyPolygonOffsetNDC(e,t,n,r){let i=this.parameters.shaderPolygonOffset;if(e!==r&&N(r,e),i){let e=n.aboveGround?1:-1,a=e*Math.sign(t[3]);r[2]-=(a||e)*i}return r}set visible(e){this._visible=e}get visible(){let{color:e,outlineSize:t,outlineColor:n}=this.parameters,r=e[3]>=.003913894324853229||t>=.003913894324853229&&n[3]>=.003913894324853229;return this._visible&&r}createGLMaterial(e){return new Nn(e)}calculateRelativeScreenBounds(e,t,n=k()){return Pn(this.parameters,e,t,n),n[2]=n[0]+e[0],n[3]=n[1]+e[1],n}},Nn=class extends Pe{constructor(e){super({...e,...e.material.parameters})}beginSlot(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.getTechnique(En,e)}};function Pn(e,t,n,r){r[0]=e.anchorPosition[0]*-t[0]+e.screenOffset[0]*n,r[1]=e.anchorPosition[1]*-t[1]+e.screenOffset[1]*n}function Fn(e,t,r,i){return Tn(t)&&(t=c(Wn,t)),s(i.normal,e,t),n(i.normal,i.normal,r.viewInverseTransposeMatrix),i.cosAngle=u(zn,Qn),i}function In(e){let t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8],u=1/Math.sqrt(t*t+n*n+r*r),d=1/Math.sqrt(i*i+a*a+o*o),f=1/Math.sqrt(s*s+c*c+l*l);return e[0]=t*u,e[1]=n*u,e[2]=r*u,e[3]=i*d,e[4]=a*d,e[5]=o*d,e[6]=s*f,e[7]=c*f,e[8]=l*f,e}function Ln(e,t,n,r,i,a,s,c,l){let u=t-i-r[0]*l[0],d=u+r[0]+2*i,f=n-i-r[1]*l[1],p=f+r[1]+2*i,m=c.distanceFieldBoundingBox;return c.textureIsSignedDistanceField&&m!=null&&(u+=r[0]*m[0],f+=r[1]*m[1],d-=r[0]*(1-m[2]),p-=r[1]*(1-m[3]),u-=a,d+=a,f-=a,p+=a),o(Hn,t,n),ae(Vn,e,Hn,he(s)),Vn[0]>u&&Vn[0]<d&&Vn[1]>f&&Vn[1]<p}var Rn=new nt,J=d(),Y=d(),X=A(),zn=d(),Bn=d(),Vn=le(),Hn=le(),Un=de(),Wn=de(),Gn=pe(),Kn=A(),Z=d(),qn=d(),Jn=A(),Yn={normal:zn,cosAngle:0},Xn=1,Zn=2,Q=ge(0,0),Qn=D(0,0,1),$n=class extends Ne{constructor(){super(...arguments),this.renderOccluded=1,this.isDecoration=!1,this.color=ce(1,1,1,1),this.polygonOffset=!1,this.anchorPosition=ge(.5,.5),this.screenOffset=[0,0],this.shaderPolygonOffset=1e-5,this.textureIsSignedDistanceField=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.outlineColor=ce(1,1,1,1),this.outlineSize=0,this.distanceFieldBoundingBox=A(),this.rotation=0,this.hasRotation=!1,this.vvSizeEnabled=!1,this.vvSize=null,this.vvColor=null,this.vvOpacity=null,this.vvSymbolAnchor=null,this.vvSymbolRotationMatrix=null,this.hasSlicePlane=!1,this.pixelSnappingEnabled=!0,this.occlusionTest=!0,this.occludedFragmentFade=!1,this.horizonCullingEnabled=!1,this.centerOffsetUnits=`world`,this.drawAsLabel=!1,this.depthEnabled=!0,this.isFocused=!0,this.focusStyle=`bright`,this.draped=!1,this.isLabel=!1}get hasVVSize(){return!!this.vvSize}get hasVVColor(){return!!this.vvColor}get hasVVOpacity(){return!!this.vvOpacity}},er=class{constructor(){this.layout=On,this.instanceLayout=jn()}elementCount(e){return e.get(`position`).indices.length}elementCountBaseInstance(e){return e.get(`uv0`).indices.length}write(e,t,n,r,i,a){let{position:o,normal:s,color:c,size:l,rotation:u,centerOffsetAndDistance:d,featureAttribute:f,uvi:p}=i;Ye(n.get(`position`),e,o,a),et(n.get(`normal`),t,s,a);let m=n.get(`position`).indices.length,h=0,g=0,_=mt,v=mt,y=n.get(`uvi`)?.data;y&&y.length>=4&&(h=y[0],g=y[1],_=y[2],v=y[3]);for(let e=0;e<m;++e){let t=a+e;p.setValues(t,h,g,_,v)}if(Xe(n.get(`color`),4,c,a),Je(n.get(`size`),l,a),tt(n.get(`rotation`),u,a),n.get(`centerOffsetAndDistance`)?Ze(n.get(`centerOffsetAndDistance`),d,a):$e(d,a,m),n.get(`featureAttribute`)?Ze(n.get(`featureAttribute`),f,a):$e(f,a,m),r!=null){let e=n.get(`position`)?.indices;if(e){let t=e.length,n=i.getField(`olidColor`,De);Qe(r,n,t,a)}}return{numVerticesPerItem:1,numItems:m}}writeBaseInstance(e,t){let{uv0:n}=t;Je(e.get(`uv0`),n,0)}intersect(e,r,i,a,o,s,c){let{options:{selectionMode:l,hud:u,excludeLabels:p},point:m,camera:_}=a;if(!l||!u||p&&r.isLabel||!m)return;let{position:v,normal:y,rotation:b,size:x,featureAttribute:S,centerOffsetAndDistance:C}=this.instanceLayout.createView(e),T=r.centerOffsetUnits===`screen`,E=gt(r);if(v==null||y==null||b==null||x==null||C==null||_==null)return;let D=S==null?null:S.getVec(0,Jn),{scaleX:O,scaleY:k}=tr(D,r,_.pixelRatio),A=v.count;for(let e=0;e<A;e++){if(v.getVec(e,J),i!=null&&M(J,J,i),n(J,J,_.viewMatrix),C.getVec(e,Kn),t(Z,Kn[0],Kn[1],Kn[2]),!T&&(J[0]+=Z[0],J[1]+=Z[1],Z[2]!==0)){let e=Z[2];g(Z,J),w(J,J,f(Z,Z,e))}if(y.getVec(e,Y),Fn(Y,Un,_,Yn),nr(r,J,Yn,_,Rn),_.applyProjection(J,X),X[0]>-1){T&&(Z[0]||Z[1])&&(X[0]+=Z[0]*_.pixelRatio,Z[1]!==0&&(X[1]+=Rn.alignmentEvaluator.apply(Z[1])*_.pixelRatio),_.unapplyProjection(X,J)),X[0]+=r.screenOffset[0]*_.pixelRatio,X[1]+=r.screenOffset[1]*_.pixelRatio,X[0]=Math.floor(X[0]),X[1]=Math.floor(X[1]),x.getVec(e,Q),Rn.evaluator.applyVec2(Q,Q);let t=Xn*_.pixelRatio,i=0;r.textureIsSignedDistanceField&&(i=Math.min(r.outlineSize,.5*Q[0])*_.pixelRatio/2),Q[0]*=O,Q[1]*=k;let o=b.get(e),s=r.rotation+o;if(Ln(m,X[0],X[1],Q,t,i,s,r,E)){let t=a.ray;if(n(Bn,J,h(Gn,_.viewMatrix)),X[0]=m[0],X[1]=m[1],_.unprojectFromRenderScreen(X,J)){let n=d();N(n,t.direction);let r=1/me(n);f(n,n,r),c(oe(t.origin,J)*r,n,e,Bn)}}}}}};function tr(e,t,n){return e==null||t.vvSize==null?{scaleX:n,scaleY:n}:(dt(qn,t,e),{scaleX:qn[0]*n,scaleY:qn[1]*n})}function nr(e,t,n,r,i){if(!e.verticalOffset?.screenLength){let r=me(t);return i.update(n.cosAngle,r,e.screenSizePerspective,e.screenSizePerspectiveMinPixelReferenceSize,e.screenSizePerspectiveAlignment,null),t}let a=me(t),o=e.screenSizePerspectiveAlignment??e.screenSizePerspective,s=rt(r,a,e.verticalOffset,n.cosAngle,o,e.screenSizePerspectiveMinPixelReferenceSize);return i.update(n.cosAngle,a,e.screenSizePerspective,e.screenSizePerspectiveMinPixelReferenceSize,e.screenSizePerspectiveAlignment,null),f(n.normal,n.normal,s),M(t,t,n.normal)}function rr(e,t){if(e.type===`point`)return $(e,t,!1);if(Re(e))switch(e.type){case`extent`:return $(e.center,t,!1);case`polygon`:return $(or(e),t,!1);case`polyline`:return $(ir(e),t,!0);case`mesh`:return $(xe(e.vertexSpace,e.spatialReference)??e.extent.center,t,!1);case`multipoint`:return}else switch(e.type){case`extent`:return $(ar(e),t,!0);case`polygon`:return $(or(e),t,!0);case`polyline`:return $(ir(e),t,!0);case`multipoint`:return}}function ir(e){let t=e.paths[0];if(!t||t.length===0)return null;let n=se(t,ee(t)/2);return Ae(n[0],n[1],n[2],e.spatialReference)}function ar(e){return Ae(.5*(e.xmax+e.xmin),.5*(e.ymax+e.ymin),e.zmin!=null&&e.zmax!=null&&isFinite(e.zmin)&&isFinite(e.zmax)?.5*(e.zmax+e.zmin):void 0,e.spatialReference)}function or(e){let t=e.rings[0];if(!t||t.length===0)return null;let n=fe(e.rings,!!e.hasZ);return Ae(n[0],n[1],n[2],e.spatialReference)}function $(e,t,n){let r=n?e:Le(e);return t&&e?j(e,r,t)?r:null:r}function sr(e,t,n,r=0){if(e){t||=k();let i=e,a=.5*i.width*(n-1),o=.5*i.height*(n-1);return i.width<1e-7*i.height?a+=o/20:i.height<1e-7*i.width&&(o+=a/20),ue(t,i.xmin-a-r,i.ymin-o-r,i.xmax+a+r,i.ymax+o+r),t}return null}function cr(e,t,n=null){let r=ie(be);return e!=null&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],e.length>3&&(r[3]=e[3])),t!=null&&(r[3]=t),n&&a(r,r,n),r}function lr(t=x,n,r,i=1){let a=[,,,];if(n==null||r==null)a[0]=1,a[1]=1,a[2]=1;else{let e,i=0;for(let o=2;o>=0;o--){let s=t[o],c=s!=null,l=o===0&&!e&&!c,u=r[o],d;s===`symbol-value`||l?d=u===0?1:n[o]/u:c&&s!==`proportional`&&isFinite(s)&&(d=u===0?1:s/u),d!=null&&(a[o]=d,e=d,i=Math.max(i,Math.abs(d)))}for(let t=2;t>=0;t--)a[t]==null?a[t]=e:a[t]===0&&(a[t]=.001*i)}for(let e=2;e>=0;e--)a[e]/=i;return e(a)}function ur(e){return e.isPrimitive!=null}function dr(e){return fr(ur(e)?[e.width,e.depth,e.height]:e)?null:`Symbol sizes may not be negative values`}function fr(e){let t=e=>e==null||e>=0;return Array.isArray(e)?e.every(t):t(e)}function pr(e,t,n,r=pe()){return e&&C(r,r,-e/180*Math.PI),t&&l(r,r,t/180*Math.PI),n&&p(r,r,n/180*Math.PI),r}function mr(e,t,n){if(n.minDemResolution!=null)return n.minDemResolution;let r=te(t),i=v(e)*r,a=E(e)*r,o=re(e)*(t.isGeographic?1:r);return i===0&&a===0&&o===0?n.minDemResolutionForPoints:.01*Math.max(i,a,o)}export{un as C,_n as D,fn as E,vt as O,mn as S,cn as T,bn as _,sr as a,sn as b,rr as c,gn as d,Wt as f,vn as g,ln as h,mr as i,_t as k,Mn as l,Yt as m,lr as n,dr as o,hn as p,pr as r,fr as s,cr as t,Sn as u,dn as v,an as w,on as x,pn as y};