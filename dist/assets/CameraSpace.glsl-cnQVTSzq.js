import{Ev as e,_t as t,id as n,jt as r}from"./index-BqmCqmfp.js";import{n as i}from"./glsl-C2sn87h0.js";import{t as a}from"./Float2BindUniform-BJ75NEvo.js";import{t as o}from"./Float4BindUniform-CtMVDjau.js";function s(e){e.fragment.uniforms.add(new o(`projInfo`,e=>c(e.camera))),e.fragment.uniforms.add(new a(`zScale`,e=>u(e.camera))),e.fragment.code.add(i`vec3 reconstructPosition(vec2 fragCoord, float depth) {
return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);
}`)}function c(e){let t=e.projectionMatrix;return t[11]===0?r(l,2/(e.fullWidth*t[0]),2/(e.fullHeight*t[5]),(1+t[12])/t[0],(1+t[13])/t[5]):r(l,-2/(e.fullWidth*t[0]),-2/(e.fullHeight*t[5]),(1-t[8])/t[0],(1-t[9])/t[5])}var l=t();function u(t){return t.projectionMatrix[11]===0?e(d,0,1):e(d,1,0)}var d=n();export{s as t};